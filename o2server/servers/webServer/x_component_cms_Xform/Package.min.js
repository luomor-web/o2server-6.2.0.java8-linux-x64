MWF.xApplication.process.Xform=MWF.xApplication.process.Xform||{},MWF.xApplication.cms.Xform=MWF.xApplication.cms.Xform||{},MWF.require("MWF.xScript.CMSMacro",null,!1),MWF.xDesktop.requireApp("process.Xform","$Module",null,!1),MWF.xDesktop.requireApp("cms.Xform","ModuleImplements",null,!1),MWF.xDesktop.requireApp("process.Xform","Div",null,!1),MWF.xApplication.cms.Xform.Div=MWF.CMSDiv=new Class({Extends:MWF.APPDiv}),MWF.xDesktop.requireApp("process.Xform","Common",null,!1),MWF.xApplication.cms.Xform.Common=MWF.CMSCommon=new Class({Extends:MWF.APPCommon}),MWF.xDesktop.requireApp("process.Xform","Image",null,!1),MWF.xApplication.cms.Xform.Image=MWF.CMSImage=new Class({Extends:MWF.APP$Module,_loadUserInterface:function(){if(this.json.properties&&this.json.properties.src){var e=this.json.properties.src;if(-1!=e.indexOf("x_processplatform_assemble_surface")||-1!=e.indexOf("x_portal_assemble_surface")||-1!=e.indexOf("x_cms_assemble_control")){var s=MWF.Actions.getHost("x_processplatform_assemble_surface"),r=MWF.Actions.getHost("x_portal_assemble_surface"),o=MWF.Actions.getHost("x_cms_assemble_control");-1!==e.indexOf("/x_processplatform_assemble_surface")?e=e.replace("/x_processplatform_assemble_surface",s+"/x_processplatform_assemble_surface"):-1!==e.indexOf("x_processplatform_assemble_surface")&&(e=e.replace("x_processplatform_assemble_surface",s+"/x_processplatform_assemble_surface")),-1!==e.indexOf("/x_portal_assemble_surface")?e=e.replace("/x_portal_assemble_surface",r+"/x_portal_assemble_surface"):-1!==e.indexOf("x_portal_assemble_surface")&&(e=e.replace("x_portal_assemble_surface",r+"/x_portal_assemble_surface")),-1!==e.indexOf("/x_cms_assemble_control")?e=e.replace("/x_cms_assemble_control",o+"/x_cms_assemble_control"):-1!==e.indexOf("x_cms_assemble_control")&&(e=e.replace("x_cms_assemble_control",o+"/x_cms_assemble_control")),e=o2.filterUrl(e)}try{this.node.set("src",e)}catch(e){}}else if(this.json.srcfile&&"none"!=this.json.srcfile)if(e=this.json.srcfile,"object"===typeOf(e)){var l=e.portal?MWF.xDesktop.getPortalFileUr(e.id,e.portal):MWF.xDesktop.getProcessFileUr(e.id,e.application);l=o2.filterUrl(l),this.node.set("src",l)}else{var a=MWF.Actions.getHost("x_portal_assemble_surface"),t=MWF.Actions.get("x_portal_assemble_surface").action.actions.readFile.uri;e=a+"/x_portal_assemble_surface"+(t=(t=t.replace("{flag}",e)).replace("{applicationFlag}",this.form.json.application)),e=o2.filterUrl(e),this.node.set("src",e)}else if("object"==typeOf(this.json.src)){var c=MWF.xDesktop.getImageSrc(this.json.src.imageId);this.node.set("src",c)}}}),MWF.xDesktop.requireApp("process.Xform","Html",null,!1),MWF.xApplication.cms.Xform.Html=MWF.CMSHtml=new Class({Extends:MWF.APPHtml}),MWF.xApplication.cms.Xform.Package={};