MWF.xDesktop.requireApp("process.Xform","Org",null,!1),MWF.xApplication.cms.Xform.Org=MWF.CMSOrg=new Class({Extends:MWF.APPOrg,_getOrgOptions:function(){this.selectTypeList="array"==typeOf(this.json.selectType)?this.json.selectType:[this.json.selectType],this.selectTypeList.contains("identity")&&(this.identityOptions=new MWF.CMSOrg.IdentityOptions(this.form,this.json)),this.selectTypeList.contains("unit")&&(this.unitOptions=new MWF.CMSOrg.UnitOptions(this.form,this.json)),this.selectTypeList.contains("group")&&(this.groupOptions=new MWF.APPOrg.GroupOptions(this.form,this.json))}}),MWF.CMSOrg.IdentityOptions=new Class({Extends:MWF.APPOrg.IdentityOptions,_getSelectRange:function(){if("unit"===this.json.identityRange)return this.getScriptSelectUnit();if("draftUnit"===this.json.identityRange){var t=this.form.businessData.document.creatorIdentity;if(t)return this.getNextSelectUnit(t);if(layout.session.user.identityList&&layout.session.user.identityList.length){var i=[];return layout.session.user.identityList.each((function(t){i.push(t.id)})),this.getNextSelectUnit(i)}return[]}if("currentUnit"===this.json.identityRange){if(layout.session.user.identityList&&layout.session.user.identityList.length){i=[];return layout.session.user.identityList.each((function(t){i.push(t.id)})),this.getNextSelectUnit(i)}return[]}return[]}}),MWF.CMSOrg.UnitOptions=new Class({Extends:MWF.APPOrg.UnitOptions,_getSelectRange:function(){if("unit"===this.json.unitRange)return this.getScriptSelectUnit();if("draftUnit"===this.json.unitRange){var t=this.form.businessData.document.creatorIdentity;if(t)return this.getNextSelectUnit(t);if(layout.session.user.identityList&&layout.session.user.identityList.length){var i=[];return layout.session.user.identityList.each((function(t){i.push(t.id)})),this.getNextSelectUnit(i)}return[]}if("currentUnit"===this.json.unitRange){if(layout.session.user.identityList&&layout.session.user.identityList.length){i=[];return layout.session.user.identityList.each((function(t){i.push(t.id)})),this.getNextSelectUnit(i)}return[]}return[]}});