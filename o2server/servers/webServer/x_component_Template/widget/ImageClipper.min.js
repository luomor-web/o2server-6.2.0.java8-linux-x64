MWF.xApplication.Template=MWF.xApplication.Template||{},MWF.xApplication.Template.widget=MWF.xApplication.Template.widget||{},MWF.require("MWF.widget.ImageClipper",null,!1),MWF.xApplication.Template.widget.ImageClipper=new Class({Implements:[Options,Events],Extends:MWF.widget.Common,options:{reference:"",referenceType:"",imageUrl:"",description:"",ratioAdjustedEnable:!1,title:"Select Image",style:"default",aspectRatio:1.5},initialize:function(t,e){this.setOptions(e),this.app=t,this.path="../x_component_Template/widget/$ImageClipper/",this.cssPath="../x_component_Template/widget/$ImageClipper/"+this.options.style+"/css.wcss",this._loadCss()},load:function(t){this.data=t;var e={},i="668",o="510";i=i.toInt(),o=o.toInt();var s=this.app.content.getSize(),n=(s.x-i)/2,a=(s.y-o)/2;n<0&&(n=0),a<0&&(a=0),layout.mobile&&(n=20,a=0);var p=this;MWF.require("MWF.xDesktop.Dialog",function(){var t=new MWF.xDesktop.Dialog({title:this.options.title||"Select Image",style:e.style||"image",top:a,left:n-20,fromTop:a,fromLeft:n-20,width:i,height:o,html:"<div></div>",maskNode:this.app.content,container:this.app.content,buttonList:[{text:MWF.LP.process.button.ok,action:function(){p.image.uploadImage(function(t){p.imageSrc=MWF.xDesktop.getImageSrc(t.id),p.imageId=t.id,p.fireEvent("change"),this.close()}.bind(this))}},{text:MWF.LP.process.button.cancel,action:function(){this.close()}}]});t.show(),this.image=new MWF.widget.ImageClipper(t.content.getFirst(),{aspectRatio:this.options.aspectRatio,description:this.options.description,imageUrl:this.options.imageUrl,ratioAdjustedEnable:this.options.ratioAdjustedEnable,reference:this.options.reference,referenceType:this.options.referenceType,resetEnable:!0}),this.image.load(this.data)}.bind(this))}});