MWF.xDesktop.requireApp("process.TaskCenter","TaskCompletedList",null,!1),MWF.xApplication.process.TaskCenter.DraftList=new Class({Extends:MWF.xApplication.process.TaskCenter.TaskCompletedList,initData:function(){this.count=0,this.isCountShow=!1,this.currentPage=1,this.pageCount=20,this.pages=0,this.items=[],this.isItemsLoaded=!1,this.isItemLoadding=!1,this.loadItemQueue=0,this.filterApplication="",this.currentFilterNode=null,this.filterListNode=null},refresh:function(){this.mask=new MWF.widget.Mask({style:"desktop"}),this.mask.loadNode(this.app.content),this.initData(),this.filterData=null,this.applicationFilterAreaNode&&this.applicationFilterAreaNode.empty(),this.createAppFilterNodes(),this.listAreaNode.empty(),this.resetListAreaHeight(),this.app.getWorkCounts()},_getCurrentPageData:function(t,i){this.app.getAction(function(){if(this.filterData){this.filterListNode.empty();var e={};Object.each(this.filterData,function(t,i){"key"!=i?t&&(e[this.app.options.filterMap[i]]||(e[this.app.options.filterMap[i]]=[]),e[this.app.options.filterMap[i]].push(t.value),this.createFilterItemNode(i,t)):e.key=t}.bind(this)),this.filterData.key&&this.createFilterItemNode("key",{name:this.filterData.key});var s=this.items.length?this.items[this.items.length-1].data.id:"(0)";this.app.action.listReviewFilter((function(i){t&&t(i)}),null,s,i||this.pageCount,e)}else{s=this.items.length?this.items[this.items.length-1].data.id:"(0)";this.app.action.listDraftNext((function(i){t&&t(i)}),null,s,i||this.pageCount)}}.bind(this))},_getApplicationCount:function(t){},_createItem:function(t){return new MWF.xApplication.process.TaskCenter.DraftList.Item(t,this)},_getFilterCount:function(t){}}),MWF.xApplication.process.TaskCenter.DraftList.Item=new Class({Extends:MWF.xApplication.process.TaskCenter.List.Item,setContent:function(){this.applicationTitleNode.set("text",this.data.applicationName),this.titleNode.set("html",'<font style="color: #333;">['+this.data.processName+"]&nbsp;&nbsp;</font>"+o2.txt(this.data.title)),this.titleNode.set("title",this.data.title),this.activityNode.set("text","( "+this.list.app.lp.draftTab+" )"),this.timeContentNode.set("text",this.list.app.lp.list_createDate+": "+this.data.createTime),this.loadActions(),this.loadApplicationIcon()},openTask:function(t){var i={draftId:this.data.id,appId:"process.Work"+this.data.id};this.list.app.desktop.openApplication(t,"process.Work",i)}});