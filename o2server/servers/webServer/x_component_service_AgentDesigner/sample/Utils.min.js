var _self=this,applications=this.Action.applications,Utils={getKeyEqualObjFromArray:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r][t]===n)return e[r];return null},parseResp:function(e){return e&&null!==e?JSON.parse(e.toString()):{type:"error",message:"服务响应是null"}},getFailText:function(e){var t;return t=e.message?e.message+(e.prompt?"("+e.prompt+")":""):e.prompt?e.prompt:"未知异常",print(t),t},processError:function(e,t){e.printStackTrace();var n=t+" "+e.name+": "+e.message;return print(n),n},arrayIndexOf:function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return n;return-1},arrayErase:function(e,t){for(var n=e.length;n--;)e[n]===t&&e.splice(n,1);return e},objectClone:function(e){if(null==e||"object"!=typeof e)return e;if("number"==typeof e.length){for(var t=[],n=0,r=e.length;n<r;++n)t[n]=Utils.objectClone(e[n]);return t}t={};for(var a in e)t[a]=Utils.objectClone(e[a]);return t},typeOf:function(e){if(null===e)return"null";if(!e)return typeof e;if(null!=e.$family)return e.$family();if(e.constructor==Array)return"array";if(e.nodeName){if(1==e.nodeType)return"element";if(3==e.nodeType)return/\S/.test(e.nodeValue)?"textnode":"whitespace"}else if("number"==typeof e.length&&e.callee)return"arguments";return typeof e}},Org={getUserFlag:function(e){return e.flag||e.distinguishedName||e.unique||e.employee||e.mobile||e.id},getSuperUnitByUnitByLevel:function(e,t){var n,r=_self.org.listSupUnit(e,!0);return r&&r.each((function(e){e.level==t&&(n=e.distinguishedName)})),n},getSuperUnitByIdentityByLevel:function(e,t){var n,r=_self.org.listAllSupUnitWithIdentity(e);return r&&r.each((function(e){e.level==t&&(n=e.distinguishedName)})),n},getSuperObjectUnitByIdentityByLevel:function(e,t){var n,r=_self.org.listAllSupUnitWithIdentity(e);return r&&r.each((function(e){e.level==t&&(n=e)})),n}},Calendar={getLastMonth:function(e){var t=Java.type("java.util.Date");e||(e=new t);var n=new java.text.SimpleDateFormat("yyyy-MM-dd"),r=n.format(e).split("-"),a=n.parse(r[0]+"-"+r[1]+"-01"),i=Java.type("java.util.Calendar"),l=i.getInstance();return l.setTime(a),l.add(i.MONTH,-1),l.get(i.YEAR)+"-"+(l.get(i.MONTH)+1)}},CMSPathData={get:function(e,t){var n=applications.getQuery("x_cms_assemble_control",CMSPathData.getUri(e,t));return Utils.parseResp(n).data}.bind(this),create:function(e,t,n){var r=applications.postQuery("x_cms_assemble_control",CMSPathData.getUri(e,t),JSON.stringify(n));return Utils.parseResp(r).data}.bind(this),update:function(e,t,n){var r=applications.putQuery("x_cms_assemble_control",CMSPathData.getUri(e,t),JSON.stringify(n));return Utils.parseResp(r).data},delete:function(e,t){var n=applications.deleteQuery("x_cms_assemble_control",CMSPathData.getUri(e,t));return Utils.parseResp(n).data},getUri:function(e,t){var n="data/document/"+e;if(t&&"array"===Utils.typeOf(t)&&t.length>0)for(var r=0;r<t.length;r++)n=n+"/"+encodeURIComponent(t[r]);return n}};!function(e){"use strict";var t=Java.type("java.util.Timer"),n=Java.type("java.util.concurrent.Phaser"),r=new t("jsEventLoop",!1),a=new n,i=0;function l(){i++}function u(){--i>0||(r.cancel(),a.forceTermination())}var o=function(){a.arriveAndDeregister()};e.setTimeout=function(t,n){var i=[].slice.call(arguments,2,arguments.length),s=(a.register(),!1);return r.schedule((function(){if(!s)try{t.apply(e,i)}catch(e){print(e)}finally{o(),u()}}),n),l(),function(){o(),s=!0,u()}},e.clearTimeout=function(e){e()},e.setInterval=function(t,n){var r=[].slice.call(arguments,2,arguments.length),a=null,i=function(){a=e.setTimeout(i,n),t.apply(e,r)};return a=e.setTimeout(i,n),function(){a()}},e.clearInterval=function(e){e()}}(this);