MWF.xDesktop.requireApp("process.Xform","$Module",null,!1),MWF.xApplication.process.Xform.SourceText=MWF.APPSourceText=new Class({Extends:MWF.APP$Module,_loadUserInterface:function(){this._loadJsonData()},_getSource:function(){for(var t=this.node.getParent();t&&"source"!=t.get("MWFtype")&&"subSource"!=t.get("MWFtype")&&"subSourceItem"!=t.get("MWFtype");)t=t.getParent();return t?t.retrieve("module"):null},_loadJsonData:function(){this.node.set("text",""),this.source=this._getSource(),this.source&&this.source.data&&COMMON.AjaxModule.load("JSONTemplate",function(){this.template=new Template,this.text=this.template.substitute("{"+this.json.jsonPath+"}",this.source.data),this.json.jsonText&&this.json.jsonText.code?(this.text=this.form.Macro.exec(this.json.jsonText.code,this),"string"===typeOf(this.text)&&this.node.set("text",this.text)):this.node.set("text",this.text)}.bind(this))}});