MWF.xDesktop.requireApp("process.Xform","$Module",null,!1),MWF.xApplication.process.Xform.Label=MWF.APPLabel=new Class({Implements:[Events],Extends:MWF.APP$Module,_loadUserInterface:function(){if("text"==this.json.valueType&&this.node.set("text",this.json.text||""),"script"==this.json.valueType){var e=this.json.script?this.json.script.code:"";if(e){var t=this.form.Macro.exec(e,this);this._setNodeText(t)}}if(this.json.prefixIcon||this.json.suffixIcon){var i=this.node.get("text");this.node.empty();var s=new Element("div",{styles:{"margin-left":this.json.prefixIcon?"20px":"0px","margin-right":this.json.suffixIcon?"20px":"0px",height:"100%"},text:i}).inject(this.node);if(this.json.prefixIcon)new Element("div",{styles:{float:"left",width:"20px",height:this.node.getSize().y+"px",background:"url("+this.json.prefixIcon+") center center no-repeat"}}).inject(s,"before");if(this.json.suffixIcon)new Element("div",{styles:{float:"right",width:"20px",height:this.node.getSize().y+"px",background:"url("+this.json.suffixIcon+") center center no-repeat"}}).inject(s,"before")}},_setNodeText:function(e){e&&e.isAG?e.addResolve(function(e){this._setNodeText(e)}.bind(this)):o2.promiseAll(e).then(function(e){this.node.set("text",e||"")}.bind(this),(function(){}))},setText:function(e){e?o2.promiseAll(e).then(function(e){this.node.set("text",e||"")}.bind(this),(function(){})):this.node.set("text",v||"")}});