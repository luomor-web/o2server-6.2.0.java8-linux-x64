MWF.xDesktop.requireApp("process.Xform","$Module",null,!1),MWF.xApplication.process.Xform.Table=MWF.APPTable=new Class({Extends:MWF.APP$Module,_afterLoaded:function(){this.table||(this.table=this.node.getElement("table"));for(var e=this.table.rows,s=0;s<e.length;s++)for(var t=e[s],l=0;l<t.cells.length;l++){var o=t.cells[l],a=this.form._getDomjson(o);if(a)var r=this,i=this.form._loadModule(a,o,(function(){this.table=r}));this.form.modules.push(i)}},_loadBorderStyle:function(){this.json.styles&&this.json.styles.border&&(this.table||(this.table=this.node.getElement("table")),this.json.styles["table-layout"]&&this.table.setStyle("table-layout",this.json.styles["table-layout"]),this.table.set("cellspacing","0"),this.table.setStyles({"border-top":this.json.styles.border,"border-left":this.json.styles.border}),this.table.getElements("th").setStyles({"border-bottom":this.json.styles.border,"border-right":this.json.styles.border}),this.table.getElements("td").setStyles({"border-bottom":this.json.styles.border,"border-right":this.json.styles.border}))},_loadStyles:function(){Object.each(this.json.styles,function(e,s){s.test(/^border\w*/gi)||this.node.setStyle(s,e)}.bind(this)),"5.2"!==this.form.json.$version&&this._loadBorderStyle()}}),MWF.xApplication.process.Xform.Table$Td=MWF.APPTable$Td=new Class({Extends:MWF.APP$Module,_queryLoaded:function(){},_afterLoaded:function(){},_loadStyles:function(){var e={};"title"==this.json.cellType&&(e=this.table.json.titleTdStyles),"content"==this.json.cellType&&(e=this.table.json.contentTdStyles),"layout"==this.json.cellType&&(e=this.table.json.layoutTdStyles),Object.each(e,function(e,s){if(-1!==e.indexOf("x_processplatform_assemble_surface")||-1!==e.indexOf("x_portal_assemble_surface")){var t=MWF.Actions.getHost("x_processplatform_assemble_surface"),l=MWF.Actions.getHost("x_portal_assemble_surface");-1!==e.indexOf("/x_processplatform_assemble_surface")?e=e.replace("/x_processplatform_assemble_surface",t+"/x_processplatform_assemble_surface"):-1!==e.indexOf("x_processplatform_assemble_surface")&&(e=e.replace("x_processplatform_assemble_surface",t+"/x_processplatform_assemble_surface")),-1!==e.indexOf("/x_portal_assemble_surface")?e=e.replace("/x_portal_assemble_surface",l+"/x_portal_assemble_surface"):-1!==e.indexOf("x_portal_assemble_surface")&&(e=e.replace("x_portal_assemble_surface",l+"/x_portal_assemble_surface")),e=o2.filterUrl(e),this.node.setStyle(s,e)}else this.json.preprocessing||this.node.setStyle(s,e)}.bind(this)),Object.each(this.json.styles,function(e,s){if(-1!==e.indexOf("x_processplatform_assemble_surface")||-1!==e.indexOf("x_portal_assemble_surface")){var t=MWF.Actions.getHost("x_processplatform_assemble_surface"),l=MWF.Actions.getHost("x_portal_assemble_surface");-1!==e.indexOf("/x_processplatform_assemble_surface")?e=e.replace("/x_processplatform_assemble_surface",t+"/x_processplatform_assemble_surface"):-1!==e.indexOf("x_processplatform_assemble_surface")&&(e=e.replace("x_processplatform_assemble_surface",t+"/x_processplatform_assemble_surface")),-1!==e.indexOf("/x_portal_assemble_surface")?e=e.replace("/x_portal_assemble_surface",l+"/x_portal_assemble_surface"):-1!==e.indexOf("x_portal_assemble_surface")&&(e=e.replace("x_portal_assemble_surface",l+"/x_portal_assemble_surface")),e=o2.filterUrl(e)}this.node.setStyle(s,e)}.bind(this)),"content"==this.json.cellType&&this.form.addEvent("postLoad",function(){this.node.getElements("input").each(function(e){var s=e.get("type").toLowerCase();"radio"!=s&&"checkbox"!=s&&"submit"!=s&&"buttom"!=s&&"image"!=s&&e.setStyle("width","100%")}.bind(this)),this.node.getElements("textarea").each(function(e){e.setStyle("width","100%")}.bind(this))}.bind(this))}});