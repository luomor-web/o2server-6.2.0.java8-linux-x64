MWF.xApplication.process.FormDesigner.Module=MWF.xApplication.process.FormDesigner.Module||{},MWF.xDesktop.requireApp("process.FormDesigner","Module.$Element",null,!1),MWF.xApplication.process.FormDesigner.Module.Tree=MWF.FCTree=new Class({Extends:MWF.FC$Element,Implements:[Options,Events],options:{style:"default",propertyPath:"../x_component_process_FormDesigner/Module/Tree/tree.html"},initialize:function(e,t){this.setOptions(t),this.path="../x_component_process_FormDesigner/Module/Tree/",this.cssPath="../x_component_process_FormDesigner/Module/Tree/"+this.options.style+"/css.wcss",this._loadCss(),this.moduleType="element",this.moduleName="tree",this.form=e,this.container=null,this.containerNode=null},_createMoveNode:function(){this.moveNode=new Element("div",{MWFType:"tree",id:this.json.id,styles:this.css.moduleNodeMove,events:{selectstart:function(){return!1}}}).inject(this.form.container)},_initModule:function(){this._setNodeProperty(),this.form.isSubform||this._createIconAction(),this._setNodeEvent(),this._refreshTree()},_setEditStyle_custom:function(e){"areaNodeStyle"==e&&this.tree.node.setStyles(this.json.areaNodeStyle),"treeItemNodeStyle"!=e&&"textDivNodeStyle"!=e&&"textDivNodeSelectedStyle"!=e||(this._setTreeWidgetStyles(),this._refreshTree()),"dataType"==e&&this._refreshTree()},_setTreeStyles:function(){this.json.areaNodeStyle=Object.merge(this.tree.css.areaNode,this.json.areaNodeStyle||{}),this.json.treeItemNodeStyle=Object.merge(this.tree.css.treeItemNode,this.json.treeItemNodeStyle||{}),this.json.textDivNodeStyle=Object.merge(this.tree.css.textDivNode,this.json.textDivNodeStyle||{}),this.json.textDivNodeSelectedStyle=Object.merge(this.tree.css.textDivNodeSelected,this.json.textDivNodeSelectedStyle||{})},_setTreeWidgetStyles:function(){this.tree.css.areaNode=this.json.areaNodeStyle,this.tree.css.treeItemNode=this.json.treeItemNodeStyle,this.tree.css.textDivNode=this.json.textDivNodeStyle,this.tree.css.textDivNodeSelected=this.json.textDivNodeSelectedStyle},_refreshTree:function(){var e=this.json.data;"script"==this.json.dataType&&(e=[{title:"[script]",text:"[script]",id:"1",icon:"none",action:"",expand:!0,sub:[]}]),this.tree?this.tree.reLoad(e):(this.node.empty(),this.tree=new MWF.widget.Tree(this.node,{style:"form"}),this.tree.css=Object.clone(this.tree.css),this._setTreeStyles(),this._setTreeWidgetStyles(),this.tree.load(e))}});