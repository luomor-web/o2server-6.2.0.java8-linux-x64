MWF.xApplication.process.FormDesigner.Module=MWF.xApplication.process.FormDesigner.Module||{},MWF.xDesktop.requireApp("process.FormDesigner","Module.$Element",null,!1),MWF.xApplication.process.FormDesigner.Module.Label=MWF.FCLabel=new Class({Extends:MWF.FC$Element,Implements:[Options,Events],options:{style:"default",propertyPath:"../x_component_process_FormDesigner/Module/Label/label.html"},initialize:function(e,t){this.setOptions(t),this.path="../x_component_process_FormDesigner/Module/Label/",this.cssPath="../x_component_process_FormDesigner/Module/Label/"+this.options.style+"/css.wcss",this._loadCss(),this.moduleType="element",this.moduleName="label",this.form=e,this.container=null,this.containerNode=null},clearTemplateStyles:function(e){this.json.templateType&&e&&e[this.json.templateType]&&(e[this.json.templateType].styles&&this.removeStyles(e[this.json.templateType].styles,"styles"),e[this.json.templateType].inputStyles&&this.removeStyles(e[this.json.templateType].inputStyles,"inputStyles"),e[this.json.templateType].properties&&this.removeStyles(e[this.json.templateType].properties,"properties"))},setTemplateStyles:function(e){this.json.templateType&&e[this.json.templateType]&&(e[this.json.templateType].styles&&this.copyStyles(e[this.json.templateType].styles,"styles"),e[this.json.templateType].properties&&this.copyStyles(e[this.json.templateType].properties,"properties"))},_createMoveNode:function(){this.moveNode=new Element("div",{MWFType:"label",id:this.json.id,styles:this.css.moduleNodeMove,text:"(T)Text",events:{selectstart:function(){return!1}}}).inject(this.form.container)},_setNodeProperty:function(){-1==this.form.moduleList.indexOf(this)&&this.form.moduleList.push(this),-1==this.form.moduleNodeList.indexOf(this.node)&&this.form.moduleNodeList.push(this.node),-1==this.form.moduleElementNodeList.indexOf(this.node)&&this.form.moduleElementNodeList.push(this.node),this.node.store("module",this),this.setPrefixOrSuffix()},_setEditStyle_custom:function(e,t,s){if("valueType"!=e&&"text"!=e||("text"==this.json.valueType?this.json.text?this.textNode?this.textNode.set("text",this.json.text):this.node.set("text",this.json.text):this.textNode?this.textNode.set("text","(T)Text"):this.node.set("text","(T)Text"):this.node.set("text","(C)Text")),"templateType"==e&&this.form.templateStyles){var i=this.form.templateStyles[this.moduleName];i&&(s&&i[s]&&(this.removeStyles(i[s].styles,"styles"),this.removeStyles(i[s].styles,"properties")),i[this.json.templateType]&&(i[this.json.templateType].styles&&this.copyStyles(i[this.json.templateType].styles,"styles"),i[this.json.templateType].styles&&this.copyStyles(i[this.json.templateType].properties,"properties")),this.setPropertiesOrStyles("styles"),this.setPropertiesOrStyles("properties"),this.reloadMaplist())}"prefixIcon"!=e&&"suffixIcon"!=e||this.setPrefixOrSuffix(),"styles"==e&&this.resetPrefixOrSuffix()},resetPrefixOrSuffix:function(){if(this.prefixNode){var e=this.textNode.getSize().y;this.prefixNode.setStyle("height",e+"px")}if(this.suffixNode){e=this.textNode.getSize().y;this.suffixNode.setStyle("height",e+"px")}},setPrefixOrSuffix:function(){if(this.json.prefixIcon||this.json.suffixIcon)if(this.textNode)this.json.prefixIcon?this.prefixNode?this.prefixNode.setStyle("background","url("+this.json.prefixIcon+") center center no-repeat"):this.prefixNode=new Element("div",{styles:{float:"left",width:"20px",height:this.node.getSize().y+"px",background:"url("+this.json.prefixIcon+") center center no-repeat"}}).inject(this.textNode,"before"):this.prefixNode&&(this.prefixNode.destroy(),this.prefixNode=null),this.json.suffixIcon?this.suffixNode?this.suffixNode.setStyle("background","url("+this.json.suffixIcon+") center center no-repeat"):this.suffixNode=new Element("div",{styles:{float:"right",width:"20px",height:this.node.getSize().y+"px",background:"url("+this.json.suffixIcon+") center center no-repeat"}}).inject(this.textNode,"before"):this.suffixNode&&(this.suffixNode.destroy(),this.suffixNode=null);else{var e=this.node.get("text");this.node.empty(),this.textNode=new Element("div",{styles:{"margin-left":this.json.prefixIcon?"20px":"0px","margin-right":this.json.suffixIcon?"20px":"0px",overflow:"hidden"},text:e}).inject(this.node),this.json.prefixIcon&&(this.prefixNode=new Element("div",{styles:{float:"left",width:"20px",height:this.node.getSize().y+"px",background:"url("+this.json.prefixIcon+") center center no-repeat"}}).inject(this.textNode,"before")),this.json.suffixIcon&&(this.suffixNode=new Element("div",{styles:{float:"right",width:"20px",height:this.node.getSize().y+"px",background:"url("+this.json.suffixIcon+") center center no-repeat"}}).inject(this.textNode,"before"))}else this.node.empty(),"text"==this.json.valueType?this.node.set("text",this.json.text||"(T)Text"):this.node.set("text",this.json.text||"(C)Text"),this.prefixNode=null,this.suffixNode=null},_preprocessingModuleData:function(){this.node.clearStyles(),this.json.recoveryStyles=Object.clone(this.json.styles),this.json.recoveryStyles&&Object.each(this.json.recoveryStyles,function(e,t){-1!=e.indexOf("x_processplatform_assemble_surface")||-1!=e.indexOf("x_portal_assemble_surface")||(this.node.setStyle(t,e),delete this.json.styles[t])}.bind(this)),"text"===this.json.valueType?this.json.text||(this.textNode?this.textNode.set("text",""):this.node.set("text","")):this.node.set("text",""),this.json.preprocessing="y"},_recoveryModuleData:function(){this.json.recoveryStyles&&(this.json.styles=this.json.recoveryStyles),this.json.recoveryStyles=null,this._setEditStyle_custom("text")}});