MWF.xApplication.Selector=MWF.xApplication.Selector||{},MWF.xDesktop.requireApp("Selector","Person",null,!1),MWF.xApplication.Selector.PlatApp=new Class({Extends:MWF.xApplication.Selector.Person,options:{style:"default",count:0,title:"",values:[],names:[],expand:!1,forceSearchInItem:!0},setInitTitle:function(){this.setOptions({title:MWF.xApplication.Selector.LP.selectProcess})},_init:function(){this.selectType="platApp",this.className="platApp"},loadSelectItems:function(t){[{name:MWF.SelectorLP.processPlatform,id:"processPlatform"},{name:MWF.SelectorLP.cms,id:"cms"},{name:MWF.SelectorLP.portal,id:"portal"},{name:MWF.SelectorLP.query,id:"query"},{name:MWF.SelectorLP.service,id:"service"}].each(function(t){switch(t.id){case"processPlatform":this.processAction.listApplication(function(e){t.appList=e.data}.bind(this),null,!1);break;case"cms":this.cmsAction.listColumn(function(e){t.appList=e.data}.bind(this),null,!1);break;case"portal":this.portalDesignerAction.listApplication(function(e){t.appList=e.data}.bind(this),null,!1);break;case"query":this.queryAction.listApplication(function(e){t.appList=e.data}.bind(this),null,!1);break;case"service":t.appList=[{id:"invoke",name:MWF.SelectorLP.service1},{id:"agent",name:MWF.SelectorLP.agent}];break;default:this.processAction.listApplication(function(e){t.appList=e.data}.bind(this),null,!1)}var e=this._newItemCategory(t,this,this.itemAreaNode);t.appList&&t.appList.length&&t.appList.each(function(i){i.moduleType=t.id,"cms"==i.moduleType&&(i.name=i.appName);var n=this._newItem(i,this,e.children);this.items.push(n)}.bind(this))}.bind(this))},_scrollEvent:function(t){return!0},_getChildrenItemIds:function(t){return t.appList||[]},_newItemCategory:function(t,e,i,n){return new MWF.xApplication.Selector.PlatApp.ItemCategory(t,e,i,n)},_listItemByKey:function(t,e,i){return!1},_getItem:function(t,e,i,n){i&&this.processAction.getProcess(function(e){t&&t.apply(this,[e])}.bind(this),e,"string"===typeOf(i)||"string"==typeOf(i)?i:i.id,n)},_newItemSelected:function(t,e,i){return new MWF.xApplication.Selector.PlatApp.ItemSelected(t,e,i)},_listItemByPinyin:function(t,e,i){return!1},_newItem:function(t,e,i,n){return new MWF.xApplication.Selector.PlatApp.Item(t,e,i,n)}}),MWF.xApplication.Selector.PlatApp.Item=new Class({Extends:MWF.xApplication.Selector.Person.Item,_getShowName:function(){switch(this.data.moduleType){case"processPlatform":return this.data.name;case"cms":return this.data.appName;case"portal":case"query":case"service":default:return this.data.name}},_setIcon:function(){this.iconNode.setStyle("background-image","url(../x_component_Selector/$Selector/default/icon/processicon.png)")},_getTtiteText:function(){return this.data.name},loadSubItem:function(){return!1},checkSelectedSingle:function(){this.selector.options.values.filter(function(t,e){return"object"===typeOf(t)?this.data.id&&t.id?this.data.id===t.id:this.data.name===t.name:"string"===typeOf(t)&&(this.data.id===t||this.data.name===t)}.bind(this)).length&&this.selectedSingle()},checkSelected:function(){var t=this.selector.selectedItems.filter(function(t,e){return t.data.id&&this.data.id?t.data.id===this.data.id:t.data.name===this.data.name}.bind(this));t.length&&(t[0].addItem(this),this.selectedItem=t[0],this.setSelected())}}),MWF.xApplication.Selector.PlatApp.ItemSelected=new Class({Extends:MWF.xApplication.Selector.Person.ItemSelected,_getShowName:function(){switch(this.data.moduleType){case"processPlatform":return this.data.name;case"cms":return this.data.appName;case"portal":case"query":case"service":default:return this.data.name}},_setIcon:function(){this.iconNode.setStyle("background-image","url(../x_component_Selector/$Selector/default/icon/processicon.png)")},check:function(){if(this.selector.items.length){var t=this.selector.items.filter(function(t,e){return t.data.id&&this.data.id?t.data.id===this.data.id:t.data.name===this.data.name}.bind(this));this.items=t,t.length&&t.each(function(t){t.selectedItem=this,t.setSelected()}.bind(this))}}}),MWF.xApplication.Selector.PlatApp.ItemCategory=new Class({Extends:MWF.xApplication.Selector.Person.ItemCategory,_getShowName:function(){return this.data.name},createNode:function(){this.node=new Element("div",{styles:this.selector.css.selectorItemCategory_department}).inject(this.container)},_setIcon:function(){this.iconNode.setStyle("background-image","url(../x_component_Selector/$Selector/default/icon/applicationicon.png)")},loadSub:function(t){this.loaded?t&&t():"processPlatform"==this.data.id?this.selector.processAction.listApplication(function(e){e.data.each(function(t){var e=this.selector._newItem(t,this.selector,this.children,this.level+1);this.selector.items.push(e)}.bind(this)),this.loaded=!0,t&&t()}.bind(this)):(this.loaded=!0,t&&t())},_hasChild:function(){return!0},check:function(){}});