MWF.xApplication.Selector=MWF.xApplication.Selector||{},MWF.xDesktop.requireApp("Selector","PortalFile",null,!1),MWF.xApplication.Selector.ProcessFile=new Class({Extends:MWF.xApplication.Selector.PortalFile,options:{style:"default",count:0,title:"",values:[],names:[],expand:!1,forceSearchInItem:!0},setInitTitle:function(){this.setOptions({title:MWF.xApplication.Selector.LP.selectFile})},_init:function(){this.selectType="file",this.className="ProcessFile"},loadSelectItems:function(e){this.options.isImage&&(this.options.accept=["png","jpg","bmp","gif","jpeg","jpe"]),this.processAction.listApplication(function(e){e.data.length&&e.data.each(function(e){this.processAction.listFile(e.id,function(t){var i=t.data;if(this.options.accept&&this.options.accept.length&&(i=i.filter(function(e){var t=e.fileName.substring(e.fileName.lastIndexOf(".")+1,e.fileName.length).toLowerCase();return-1!==this.options.accept.indexOf(t)}.bind(this))),i.length){e.files=i;var s=this._newItemCategory(e,this,this.itemAreaNode);i.each(function(t){t.applicationName=e.name;var i=this._newItem(t,this,s.children);this.items.push(i)}.bind(this))}}.bind(this))}.bind(this))}.bind(this))},_newItemCategory:function(e,t,i,s){return new MWF.xApplication.Selector.ProcessFile.ItemCategory(e,t,i,s)},_newItemSelected:function(e,t,i){return new MWF.xApplication.Selector.ProcessFile.ItemSelected(e,t,i)},_newItem:function(e,t,i,s){return new MWF.xApplication.Selector.ProcessFile.Item(e,t,i,s)}}),MWF.xApplication.Selector.ProcessFile.Item=new Class({Extends:MWF.xApplication.Selector.PortalFile.Item,setEvent:function(){this.node.addEvents({mouseover:function(){this.overItem()}.bind(this),mouseout:function(){this.outItem()}.bind(this),click:function(){this.clickItem()}.bind(this)});var e=MWF.xDesktop.getProcessFileUr(this.data.id,this.data.application);this.data.url=e;var t=this.data.fileName.substring(this.data.fileName.lastIndexOf(".")+1,this.data.fileName.length).toLowerCase();if(-1!==["png","jpg","bmp","gif","jpeg","jpe"].indexOf(t)){this.previewNode=new Element("div",{styles:this.selector.css.filePreviewNode});new Element("img",{src:e,styles:this.selector.css.filePreviewNode}).inject(this.previewNode);this.tooltip=new mBox.Tooltip({content:this.previewNode,setStyles:{content:{padding:15,lineHeight:20}},attach:this.node,position:{y:["center"],x:["right","outside"]},transition:"flyin"})}}}),MWF.xApplication.Selector.ProcessFile.ItemSelected=new Class({Extends:MWF.xApplication.Selector.PortalFile.ItemSelected}),MWF.xApplication.Selector.ProcessFile.ItemCategory=new Class({Extends:MWF.xApplication.Selector.PortalFile.ItemCategory});