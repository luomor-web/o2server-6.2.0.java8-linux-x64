MWF.xApplication.cms.FormDesigner.widget=MWF.xApplication.cms.FormDesigner.widget||{},MWF.xDesktop.requireApp("process.FormDesigner","widget.EventsEditor",null,!1),MWF.xApplication.cms.FormDesigner.widget.EventsEditor=new Class({Extends:MWF.xApplication.process.FormDesigner.widget.EventsEditor,load:function(t){this.data=t,Object.each(t,function(t,i){var e=new MWF.xApplication.cms.FormDesigner.widget.EventsEditor.Item(this);e.load(i,t),this.items.push(e)}.bind(this))},addEvent:function(){new MWF.xApplication.cms.FormDesigner.widget.EventsEditor.Item(this).load("","")}}),MWF.xApplication.cms.FormDesigner.widget.EventsEditor.Item=new Class({Extends:MWF.xApplication.process.FormDesigner.widget.EventsEditor.Item,editCode:function(){this.editor.currentEditItem&&this.editor.currentEditItem!=this&&this.editor.currentEditItem.editCodeComplete(),this.editor.currentEditItem!=this?(this.codeEditor||(this.codeEditor=new MWF.widget.ScriptArea(this.codeNode,{style:"event",title:"on"+this.event+" (S)",maxObj:this.editor.options.maxObj,onChange:function(){var t=this.codeEditor.toJson();this.data.code=t.code,this.data.html=t.html,this.checkIcon()}.bind(this),onSave:function(){var t=this.codeEditor.toJson();this.data.code=t.code,this.data.html=t.html,this.editor.app.saveForm()}.bind(this),helpStyle:"cms"}),this.codeEditor.load(this.data)),this.morph||(this.morph=new Fx.Morph(this.codeNode,{duration:200})),this.codeNode.setStyle("display","block"),this.morph.start({height:[0,300]}).chain(function(){this.codeEditor.resizeContentNodeSize(),this.codeEditor.focus()}.bind(this)),this.editor.currentEditItem=this):this.editCodeComplete()}});