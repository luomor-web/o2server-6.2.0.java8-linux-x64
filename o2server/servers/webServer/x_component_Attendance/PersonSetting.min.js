MWF.xDesktop.requireApp("Template","Explorer",null,!1),MWF.xDesktop.requireApp("Selector","package",null,!1),MWF.xDesktop.requireApp("Attendance","Explorer",null,!1),MWF.xApplication.Attendance.PersonSetting=new Class({Extends:MWF.xApplication.Attendance.Explorer,Implements:[Options,Events],initialize:function(e,t,n,i){this.setOptions(i),this.app=t,this.path="../x_component_Attendance/$PersonSetting/",this.cssPath="../x_component_Attendance/$PersonSetting/"+this.options.style+"/css.wcss",this._loadCss(),this.actions=n,this.node=$(e),this.initData(),this.personActions||(this.personActions=new MWF.xAction.org.express.RestActions)},load:function(){this.loadToolbar(),this.loadContentNode(),this.loadView(),this.setNodeScroll()},loadView:function(){this.view=new MWF.xApplication.Attendance.PersonSetting.View(this.elementContentNode,this.app,this,this.viewData,this.options.searchKey),this.view.load(),this.setContentSize()},createDocument:function(){this.view&&this.view._createDocument()}}),MWF.xApplication.Attendance.PersonSetting.View=new Class({Extends:MWF.xApplication.Attendance.Explorer.View,_createItem:function(e){return new MWF.xApplication.Attendance.PersonSetting.Document(this.table,e,this.explorer,this)},_getCurrentPageData:function(e,t){this.actions.listPersonSetting((function(t){e&&e(t)}))},_removeDocument:function(e,t){this.actions.deletePersonSetting(e.id,function(e){this.explorer.view.reload(),this.app.notice(this.app.lp.deleteDocumentOK,"success")}.bind(this))},_createDocument:function(){new MWF.xApplication.Attendance.PersonSetting.Form(this.explorer).create()},_openDocument:function(e){new MWF.xApplication.Attendance.PersonSetting.Form(this.explorer,e).edit()}}),MWF.xApplication.Attendance.PersonSetting.Document=new Class({Extends:MWF.xApplication.Attendance.Explorer.Document}),MWF.xApplication.Attendance.PersonSetting.Form=new Class({Extends:MWF.xApplication.Attendance.Explorer.PopupForm,options:{width:600,height:450,hasTop:!0,hasBottom:!0,title:"",draggable:!0,closeAction:!0},_createTableContent:function(){var e=MWF.xApplication.Attendance.LP,t="<table width='100%' bordr='0' cellpadding='5' cellspacing='0' styles='formTable'><tr><td colspan='2' styles='formTableHead'>"+e.personSetting+"</td></tr><tr><td styles='formTabelTitle' lable='configType'></td>    <td styles='formTableValue' item='configType'></td></tr><tr><td styles='formTabelTitle' lable='topUnitName'></td>    <td styles='formTableValue' item='topUnitName'></td></tr><tr><td styles='formTabelTitle' lable='unitName'></td>    <td styles='formTableValue' item='unitName'></td></tr><tr><td styles='formTabelTitle' lable='employeeName'></td>    <td styles='formTableValue' item='employeeName'></td></tr><tr><td styles='formTabelTitle' lable='employeeNumber'></td>    <td styles='formTableValue' item='employeeNumber'></td></tr><tr><td styles='formTabelTitle' lable='empInTopUnitTime'></td>    <td styles='formTableValue' item='empInTopUnitTime'></td></tr></table>";this.formTableArea.set("html",t),MWF.xDesktop.requireApp("Template","MForm",function(){this.form=new MForm(this.formTableArea,this.data,{isEdited:this.isEdited||this.isNew,itemTemplate:{configType:{text:e.configType,type:"select",selectText:e.configTypeSelectText,selectValue:["REQUIRED","NOTREQUIRED"]},topUnitName:{text:e.topUnitName,type:"org",orgType:"unit",notEmpty:!0},unitName:{text:e.unitName,type:"org",orgType:"unit",notEmpty:!0},employeeName:{text:e.employeeName,type:"org",orgType:"person",notEmpty:!0,event:{change:function(e,t){if("array"==typeOf(e.orgObject)&&e.orgObject.length>0){var n=e.orgObject[0].data;n&&e.form.getItem("employeeNumber").setValue(n.employee)}}}},employeeNumber:{text:e.employeeNumber,notEmpty:!0},empInTopUnitTime:{text:e.joininDate,tType:"date"}}},this.app),this.form.load()}.bind(this),!0)},_ok:function(e,t){this.app.restActions.savePersonSetting(e,function(e){t&&t(e)}.bind(this))}});