layout=window.layout||{};var locate=window.location;layout.protocol=locate.protocol;var href=locate.href;-1!=href.indexOf("debugger")&&(layout.debugger=!0),layout.desktop=layout,layout.session=layout.session||{},o2.addReady((function(){o2.load(["../o2_lib/mootools/plugin/mBox.Notice.js","../o2_lib/mootools/plugin/mBox.Tooltip.js"],{sequence:!0},(function(){MWF.loadLP("zh-cn"),MWF.require("MWF.xDesktop.Layout",(function(){MWF.require("MWF.xDesktop.Authentication",null,!1),MWF.require("MWF.xDesktop.Common",null,!1),layout.load=function(){var o=href.toURI(),t=o.getData("redirect");MWF.require("MWF.xDesktop.Actions.RestActions",(function(){var e=new MWF.xDesktop.Actions.RestActions("","x_organization_assemble_authentication","");e.getActions=function(o){this.actions={sso:{uri:"/jaxrs/qiyeweixin/code/{code}",method:"GET"}},o&&o()},e.invoke({name:"sso",async:!0,parameter:{code:o.getData("code")},success:function(o){t?(history.replaceState(null,"page",t),t.toURI().go()):(history.replaceState(null,"page","../x_desktop/appMobile.html?app=process.TaskCenter"),"appMobile.html?app=process.TaskCenter".toURI().go())}.bind(this),failure:function(o,t,e){document.id("layout").set("html","<div>企业微信单点异常！</div>")}.bind(this)})}))},layout.isAuthentication=function(){layout.authentication=new MWF.xDesktop.Authentication({onLogin:layout.load.bind(layout)});var o=!0;return this.authentication.isAuthenticated(function(o){this.user=o.data,layout.session.user=o.data}.bind(this),function(){this.authentication.loadLogin(this.node),o=!1}.bind(this)),o},layout.notice=function(o,t,e,i,n){i||(i={x:"right",y:"top"}),e||(e=this.content),t||(t="ok");var a=e||$(document.body),s=n;s||(s={x:10,y:(i.y.toString().toLowerCase(),10)}),new mBox.Notice({type:t,position:i,move:!1,target:a,delayClose:"error"==t?1e4:5e3,offset:s,content:o})},MWF.getJSON("res/config/config.json",(function(o){layout.config=o,MWF.xDesktop.getServiceAddress(layout.config,function(o,t){layout.serviceAddressList=o,layout.centerServer=t,layout.load()}.bind(this))}))}))}))}));