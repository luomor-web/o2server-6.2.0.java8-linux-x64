layout={},o2.xApplication=o2.xApplication||{},o2.widget=o2.widget||{},o2.widget.css=o2.widget.css||{},o2.xDesktop=o2.xDesktop||{},o2.xDesktop.$all=!0,o2.xDesktop.Common=!0;var csskey=encodeURIComponent("../x_component_cms_Document/$Main/default/css.wcss");o2.widget.css[csskey]={content:{width:"100%",height:"100%",overflow:"auto",position:"relative"},maskNode:{"background-color":"#666",opacity:.4,"z-index":100},processNode_from:{width:"480px","min-height":"280px",height:"auto","z-index":300,"background-color":"#FFF",overflow:"hidden",border:"3px solid #666","border-radius":"10px","box-shadow":"0px 0px 15px #666",opacity:.2,position:"absolute"},processNode:{width:"480px","min-height":"280px",height:"auto",opacity:1,overflow:"hidden"},routeSelectorTile:{overflow:"hidden",height:"24px","line-height":"24px"},routeSelectorArea:{overflow:"hidden"},formMaskNode:{width:"100%",height:"100%",opacity:.6,position:"absolute","background-color":"#CCC",top:"0px",left:"0px"},formAreaNode:{position:"absolute",opacity:0,top:"0px"},formNode:{"background-color":"#FFF","box-shadow":"0px 0px 10px #999","border-radius":"10px",margin:"auto",border:"1px solid #fff",overflow:"hidden"},formTopNode:{color:"#3587d7",height:"40px","background-color":"#eee","border-top":"1px solid #ddd","border-bottom":"1px solid #b6b6b6","border-top-left-radius":"10px","border-top-right-radius":"10px","line-height":"40px","font-size":"14px","font-weight":"bold","padding-left":"25px","text-align":"left"},formTopTextNode:{"font-size":"16px",float:"left",width:"480px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},formTopTextNodeTopSetting:{"font-size":"16px",float:"left",width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},formTopTextNodeImageLink:{"font-size":"16px",float:"left",width:"280px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},formTopCloseActionNode:{width:"32px",height:"32px",float:"right","padding-left":"30px","padding-right":"10px",background:"url(../x_component_cms_Document/$Main/default/close.png) no-repeat center 10px",cursor:"pointer"},formTopContentNode:{float:"right","padding-right":"10px","text-align":"right"},formTopContentTitle:{},formTopContentValue:{"padding-right":"20px","font-size":"12px"},formNewNode:{width:"47px",height:"47px",background:"url(../x_component_Template/$Explorer/default/icon/new.png) no-repeat"},formIconNode:{width:"47px",height:"47px"},formEditNode:{width:"47px",height:"47px"},formContentNode:{border:"0px solid #666",width:"100%",margin:"auto","font-size":"12px",color:"#666","font-family":"Microsoft YaHei",overflow:"hidden"},formTableContainer:{margin:"0px 10px",overflow:"hidden",positon:"static"},formTableValue14:{"text-align":"left","font-size":"14px"},formBottomNode:{height:"50px","line-height":"50px","background-color":"#eee",overflow:"hidden","padding-left":"20px","border-bottom-left-radius":"10px","border-bottom-right-radius":"10px"},formOkActionNode:{height:"30px","line-height":"30px","text-align":"center",width:"90px","margin-top":"10px","margin-right":"10px",cursor:"pointer",float:"right","font-size":"14px","font-family":"Microsoft YaHei","background-color":"#5c97e1",color:"#FFF","border-radius":"3px"},formCancelActionNode:{height:"30px","line-height":"30px","text-align":"center",width:"50px","margin-top":"10px","margin-right":"10px",cursor:"pointer",float:"right","font-size":"14px","font-family":"Microsoft YaHei","background-color":"#fff",color:"#333","border-radius":"3px"},cancelHotPicture:{height:"30px","line-height":"30px","text-align":"center",width:"70px","margin-top":"10px","margin-right":"10px",cursor:"pointer",float:"right","font-size":"14px","font-family":"Microsoft YaHei","background-color":"#fff",color:"#333","border-radius":"3px"},iconNode:{width:"400px",height:"200px",float:"left"},selectActionNode:{float:"left","background-color":"#FFF",padding:"4px 14px",border:"1px solid #999","border-radius":"3px","font-size":"14px",color:"#666",cursor:"pointer","margin-right":"10px"},changeIconActionNode:{"margin-right":"20px",float:"left","background-color":"#FFF",padding:"4px 14px",border:"1px solid #999","border-radius":"3px","font-size":"14px",color:"#666",cursor:"pointer"}};csskey=encodeURIComponent("../x_component_cms_Xform/$Form/default/css.wcss");o2.widget.css[csskey]={container:{padding:"3px",overflow:"hidden","-webkit-user-select":"text","-moz-user-select":"text"},textfieldNode:{display:"inline-block"},personfieldIcon:{background:"url(/x_component_cms_Xform/$Form/default/icon/selectperson.png) center center no-repeat",width:"18px",height:"18px",float:"right",cursor:"pointer"},orgfieldIcon:{background:"url(/x_component_cms_Xform/$Form/default/icon/selectorg.png) center center no-repeat",width:"18px",height:"18px",float:"right",cursor:"pointer"},orgIcon:{background:"url(/x_component_process_Xform/$Form/default/icon/selectperson.png) center center no-repeat",width:"18px",height:"18px",float:"right"},readerIcon:{background:"url(/x_component_cms_Xform/$Form/default/icon/selectreader.png) center center no-repeat",width:"18px",height:"18px",float:"right"},authorIcon:{background:"url(/x_component_cms_Xform/$Form/default/icon/selectauthor.png) center center no-repeat",width:"18px",height:"18px",float:"right"},textFieldIcon:{background:"url(/x_component_cms_Xform/$Form/default/icon/inputtext.png) center center no-repeat",width:"18px",height:"18px",float:"right"},numberIcon:{background:"url(/x_component_cms_Xform/$Form/default/icon/number.png) center center no-repeat",width:"18px",height:"18px",float:"right"},calendarIcon:{background:"url(/x_component_cms_Xform/$Form/default/icon/calendar.png) center center no-repeat",width:"18px",height:"18px",float:"right",cursor:"pointer"},selectIcon:{background:"url(/x_component_cms_Xform/$Form/default/icon/pull.png) center center no-repeat",width:"18px",height:"18px",float:"right",cursor:"pointer"},descriptionNode:{color:"#bbb",cursor:"text",position:"absolute",top:"0px"},buttonStyles:{color:"#777","border-radius":"5px","border-top":"1px solid #ccc","border-left":"1px solid #ccc","border-right":"1px solid #ccc","border-bottom":"1px solid #ccc",overflow:"hidden",cursor:"pointer","-webkit-user-select":"none","-moz-user-select":"none",position:"static",top:"auto",left:"auto",opacity:1,height:"26px"},datagridTitle:{height:"28px",cursor:"pointer","line-height":"28px",overflow:"hidden",opacity:1,background:"#C3CEEA"},gridLineActionCell:{width:"40px"},gridMoveActionCell:{width:"5px"},addLineAction:{width:"20px",height:"20px",background:"url(/x_component_cms_Xform/$Form/default/icon/addline.png) center center no-repeat",cursor:"pointer",float:"left"},delLineAction:{width:"20px",height:"20px",background:"url(/x_component_cms_Xform/$Form/default/icon/delline.png) center center no-repeat",cursor:"pointer",float:"left"},completeLineAction:{width:"20px",height:"20px",background:"url(/x_component_cms_Xform/$Form/default/icon/check.png) center center no-repeat",cursor:"pointer",float:"left"},moveLineAction:{width:"5px",height:"20px",background:"url(/x_component_cms_Xform/$Form/default/icon/move.png) center center no-repeat",cursor:"move",float:"left"},datatableMoveLineAction:{width:"5px",color:"#aaa",cursor:"pointer",float:"left"},gridMoveLineDragNode:{opacity:.7,"z-index":3e4,"background-color":"#CCC",position:"absolute"},gridMoveLineDragNodeTr:{"background-color":"#e4f6e9"},datagridTotalTr:{height:"20px",cursor:"pointer","line-height":"20px",overflow:"hidden",background:"#e1e6f3"},datagridTotalTd:{"font-weight":"bold"},mobileDatagridTable:{},gridTotalNode:{overflow:"hidden","margin-bottom":"10px"},gridTotalTitleNode:{height:"30px","text-align":"center","line-height":"30px","font-size":"14px","font-weight":"bold","background-color":"#C3CEEA","border-top":"1px solid #999","border-left":"1px solid #999","border-right":"1px solid #999"},gridTotalTableNode:{overflow:"hidden"},gridMobileDeleteActionAreaNode:{color:"#FFF","text-align":"center",float:"right"},gridMobileDeleteActionNode:{background:"#cd0a0a",color:"#FFF","text-align":"center",height:"100%",width:"100%",float:"right"},gridMobileActionNode:{"margin-bottom":"10px",height:"30px","line-height":"30px",border:"1px solid #CCCCCC","border-radius":"5px","text-align":"center"},gridImpExpAreaNode:{display:"block"},gridImportActionStyles:{color:"#777","border-radius":"5px",border:"1px solid #ccc",cursor:"pointer",height:"26px",float:"left","line-height":"26px",padding:"0px 5px","background-color":"#efefef",margin:"5px"},gridExportActionStyles:{color:"#777","border-radius":"5px",border:"1px solid #ccc",cursor:"pointer",height:"26px",float:"left","line-height":"26px",padding:"0px 5px","background-color":"#efefef",margin:"5px"},mobileGridHelpNode:{width:"30px",height:"30px",background:"url(/x_component_cms_Xform/$Form/default/icon/help.png) center center no-repeat",cursor:"pointer"},mobileDatagridActionNode:{width:"235px","text-align":"right",float:"right"},mobileDatagridDelActionNode:{width:"34px","margin-left":"10px",height:"28px","line-height":"28px",color:"#666","font-size":"16px","padding-left":"26px","padding-right":"5px",border:"1px solid #CCCCCC","border-radius":"3px",background:"url(/x_component_cms_Xform/$Form/default/icon/del.png) 5px center no-repeat",float:"right",cursor:"pointer"},mobileDatagridEditActionNode:{width:"34px","margin-left":"10px",height:"28px","line-height":"28px",color:"#666","font-size":"16px","padding-left":"26px","padding-right":"5px",border:"1px solid #CCCCCC","border-radius":"3px",background:"url(/x_component_cms_Xform/$Form/default/icon/edit.png) 5px center no-repeat",float:"right",cursor:"pointer"},mobileDatagridAddActionNode:{width:"34px","margin-left":"10px",height:"28px","line-height":"28px",color:"#666","font-size":"16px","padding-left":"26px","padding-right":"5px",border:"1px solid #CCCCCC","border-radius":"3px",background:"url(/x_component_cms_Xform/$Form/default/icon/add.png) 5px center no-repeat",float:"right",cursor:"pointer"},mobileDatagridCompleteActionNode:{width:"34px","margin-left":"10px",height:"28px","line-height":"28px",color:"#666","font-size":"16px","padding-left":"26px","padding-right":"5px",border:"1px solid #CCCCCC","border-radius":"3px",background:"url(/x_component_cms_Xform/$Form/default/icon/completed.png) 5px center no-repeat",float:"right",cursor:"pointer",display:"none"},mobileGridHelpContentNode:{"font-size":"14px",color:"#999"},attachmentPermissionNode:{overflow:"hidden",width:"500px",padding:"0px 40px"},attachmentPermissionNamesNode:{overflow:"hidden"},attachmentPermissionNamesTitleNode:{"font-size":"14px",color:"#666666",height:"30px","font-weight":"bold","line-height":"30px"},attachmentPermissionNamesAreaNode:{overflow:"hidden",padding:"0px",color:"#0000ff","margin-bottom":"20px"},attachmentPermissionAttNode:{height:"20px","line-height":"20px"},attachmentPermissionTitleNode:{"font-size":"14px",color:"#666666",height:"26px","line-height":"26px"},attachmentPermissionInputNode:{"min-height":"24px",overflow:"hidden","line-height":"24px",border:"1px solid #3C76B7","border-radius":"3px",cursor:"pointer","margin-bottom":"10px","background-color":"#ffffff"},attachmentOCRNode:{width:"500px",height:"450px",padding:"20px 20px 10px 20px"},attachmentOCRInputAreaNode:{height:"242px",border:"1px solid #999999","border-radius":"5px",padding:"5px","background-color":"#ffffff"},attachmentOCRInputNode:{height:"230px",width:"490px",border:"0px","font-size":"14px","font-family":"'Microsoft YaHei','΢���ź�','SimSun','����'",overflow:"auto"},attachmentOCRImageAreaNode:{height:"190px","margin-bottom":"10px","text-align":"center"},attachmentOCRImageNode:{"max-height":"190px","max-height":"190px","max-width":"498px",margin:"auto"},attachmentOrderNode:{width:"700px",height:"600px",padding:"10px 10px 5px 10px"},attachmentOrderInforNode:{padding:"10px 20px 5px 20px",height:"30px","line-height":"30px",color:"#666666"},attachmentOrderAreaNode:{padding:"10px 10px 5px 10px","background-color":"#ffffff",height:"530px",overflow:"auto"},attachmentOrderItemNode:{"min-height":"30px",overflow:"auto","line-height":"30px",padding:"5px 0px","border-bottom":"1px solid #cccccc"},attachmentOrderItemIconNode:{width:"30px",height:"30px",float:"left",cursor:"move",background:"url(../x_component_process_Xform/$Form/default/icon/attOrder.png) no-repeat center center","background-size":"24px 24px"},attachmentOrderItemTextNode:{"margin-left":"30px","margin-right":"130px","min-height":"30px",padding:"0px 5px",color:"#666666"},attachmentOrderItemActionNode:{width:"130px",height:"30px",float:"right"},attachmentOrderItemActionUpNode:{border:"1px solid #999999","border-radius":"3px",height:"20px",width:"30px",float:"left","margin-left":"5px","margin-top":"4px","padding-left":"20px","line-height":"20px","font-size":"12px",cursor:"pointer",background:"url(../x_component_process_Xform/$Form/default/icon/moveup.png) no-repeat 3px center",color:"#999999"},attachmentOrderItemActionDownNode:{border:"1px solid #999999","border-radius":"3px",height:"20px",width:"30px",float:"left","margin-left":"5px","margin-top":"4px","padding-left":"20px","line-height":"20px","font-size":"12px",cursor:"pointer",background:"url(../x_component_process_Xform/$Form/default/icon/movedown.png) no-repeat 3px center",color:"#999999"},attachmentOrderFlagNode:{height:"2px","background-color":"#5c649c"}};csskey=encodeURIComponent("../o2_core/o2/widget/$AttachmentController/default/css.wcss");o2.widget.css[csskey]={container:{border:"1px solid #b6b6b6","min-height":"180px",background:"#FFF","margin-top":"10px",overflow:"hidden"},container_min:{border:"0px solid #b6b6b6","min-height":"30px",overflow:"hidden",background:"transparent",height:"auto"},minActionAreaNode:{float:"right",height:"26px",margin:"2px",border:"1px solid #979797","border-radius":"3px","background-image":"url("+o2.session.path+"/widget/$AttachmentController/default/buttonbg.png)"},minContentNode:{"min-height":"30px",overflow:"hidden"},minContentNode_mobile:{clear:"both","min-height":"30px",overflow:"hidden"},titleNode:{height:"30px","background-color":"#DDD","border-top":"1px solid #FFF","border-bottom":"1px solid #b6b6b6","line-height":"30px","font-size":"14px","font-weight":"bold","padding-left":"10px","text-align":"left"},topNode:{height:"40px","background-image":"url("+o2.session.path+"/widget/$AttachmentController/default/bg.png)","border-top":"1px solid #FFF","border-bottom":"1px solid #b6b6b6"},actionsBoxNode:{overflow:"hidden","border-bottom":"1px solid #eaebea",float:"left","margin-left":"10px","margin-top":"5px","border-radius":"3px","background-image":"url("+o2.session.path+"/widget/$AttachmentController/default/buttonbg.png)"},actionsGroupNode:{height:"26px",border:"1px solid #979797","border-radius":"3px","background-image":"url("+o2.session.path+"/widget/$AttachmentController/default/buttonbg.png)"},actionNode:{float:"left",width:"26px",height:"26px",cursor:"default"},actionIconNode:{width:"26px",height:"26px","background-repeat":"no-repeat","background-position":"center center"},separateNode:{width:"1px",height:"16px","margin-top":"5px","margin-left":"5px","margin-right":"5px","border-left":"1px solid #bcbcbc","background-color":"#f1f1f1",float:"left"},contentScrollNode:{"background-color":"#FFF",overflow:"hidden","min-height":"130px"},contentNode:{"background-color":"#FFF",overflow:"hidden","margin-right":"6px"},bottomNode:{height:"7px","border-top":"1px solid #b6b6b6","background-color":"#e8e8e8"},resizeNode:{height:"7px",cursor:"row-resize"},attachmentNode_icon:{width:"90px",height:"100px",padding:"5px",float:"left",margin:"10px 0px 10px 10px","border-radius":"3px",background:"transparent","-webkit-user-select":"text","-moz-user-select":"text"},attachmentNode_icon_over:{background:"#eaf0f5"},attachmentNode_icon_selected:{background:"#d7e1e8"},attachmentIconNode:{width:"90px",height:"66px","text-align":"center"},attachmentIconImgAreaNode:{width:"64px",height:"64px",margin:"auto"},attachmentIconImgNode:{width:"64px",height:"64px"},attachmentTextNode:{height:"34px","line-height":"17px","font-size":"12px",overflow:"hidden","word-break":"break-all","text-overflow":"ellipsis","text-align":"center"},attachmentNode_sequence:{width:"auto",height:"30px",padding:"0px",float:"none","border-radius":"0px",border:"0px solid #FFF",background:"transparent",margin:"0px 10px","-webkit-user-select":"text","-moz-user-select":"text"},attachmentNode_sequence_over:{border:"0px solid #cdcfd1",background:"#eaf0f5"},attachmentNode_sequence_selected:{border:"0px solid #d7e1e8",background:"#d7e1e8"},attachmentSeqNode_sequence:{width:"30px",height:"30px","line-height":"30px",color:"#666666",float:"left","text-align":"center"},attachmentTextNode_sequence:{height:"30px","line-height":"30px","margin-left":"70px","font-size":"12px",overflow:"hidden","word-break":"break-all","text-overflow":"ellipsis","text-align":"left"},attachmentNode_list:{width:"auto",height:"30px",padding:"0px",float:"none","border-radius":"0px",border:"0px solid #FFF",background:"transparent",margin:"0px 10px","-webkit-user-select":"text","-moz-user-select":"text"},attachmentNode_list_over:{border:"0px solid #cdcfd1",background:"#eaf0f5"},attachmentNode_list_selected:{border:"0px solid #d7e1e8",background:"#d7e1e8"},attachmentIconNode_list:{width:"40px",height:"30px",float:"left"},attachmentIconImgAreaNode_list:{width:"24px",height:"24px",margin:"3px 8px"},attachmentIconImgNode_list:{width:"24px",height:"24px"},attachmentTextNode_list:{height:"30px","line-height":"30px","margin-left":"40px","font-size":"12px",overflow:"hidden","word-break":"break-all","text-overflow":"ellipsis","text-align":"left"},attachmentTextTitleNode_list:{height:"30px",float:"left",width:"30%"},attachmentTextSizeNode_list:{height:"30px",float:"left",width:"15%"},attachmentTextUploaderNode_list:{height:"30px",float:"left",width:"15%"},attachmentTextTimeNode_list:{height:"30px",float:"left",width:"20%"},attachmentTextActivityNode_list:{height:"30px",float:"left",width:"20%"},attachmentNode_preview:{width:"180px",height:"160px",padding:"5px",float:"left",margin:"10px 5px 10px 5px","border-radius":"3px",background:"transparent","-webkit-user-select":"text","-moz-user-select":"text"},attachmentNode_preview_over:{background:"#eaf0f5"},attachmentNode_preview_selected:{background:"#d7e1e8"},attachmentPreviewIconNode:{width:"180px",height:"126px","text-align":"center"},attachmentPreviewIconImgAreaNode:{width:"72px",height:"72px",margin:"auto"},attachmentPreviewIconImgNode:{width:"72px",height:"72px","margin-top":"22px"},attachmentPreviewAudioNode:{width:"180px",height:"30px",position:"relative",top:"-64px",opacity:"0.7"},attachmentPreviewVideoNode:{width:"180px",height:"126px"},attachmentPreviewTextNode:{height:"34px","line-height":"17px","font-size":"12px",overflow:"hidden","word-break":"break-all","text-overflow":"ellipsis","text-align":"center"},minActionNode:{float:"left",width:"26px",height:"26px",cursor:"default"},minActionIconNode:{width:"26px",height:"26px","background-repeat":"no-repeat","background-position":"center center"},minAttachmentNode_sequence:{width:"auto",height:"30px",padding:"0px",float:"none","border-radius":"0px",border:"0px solid #FFF",background:"transparent",margin:"0px 5px","-webkit-user-select":"text","-moz-user-select":"text"},minAttachmentNode_sequence_mobile:{width:"auto",height:"30px",padding:"0px",float:"none","border-radius":"0px",border:"0px solid #FFF",background:"transparent",margin:"0px 5px","-webkit-user-select":"text","-moz-user-select":"text"},minAttachmentNode_sequence_over:{border:"0px solid #cdcfd1","background-color":"#eaf0f5"},minAttachmentNode_sequence_selected:{border:"0px solid #d7e1e8","background-color":"#d7e1e8"},minAttachmentNode_list:{width:"auto",height:"30px",padding:"0px 10px",float:"left","border-radius":"0px",border:"0px solid #FFF",background:"transparent",margin:"5px 5px","-webkit-user-select":"text","-moz-user-select":"text",width:"46%","border-right":"1px dashed #dcdcdc"},minAttachmentNode_list_mobile:{width:"auto",height:"30px",padding:"0px 10px","border-radius":"0px",border:"0px solid #FFF",background:"transparent",margin:"5px 5px","-webkit-user-select":"text","-moz-user-select":"text","border-right":"1px dashed #dcdcdc"},minAttachmentSepNode_list:{},minAttachmentNode_list_over:{"background-color":"#eaf0f5"},minAttachmentNode_list_selected:{"background-color":"#d7e1e8"},minAttachmentIconNode_list:{width:"30px",height:"30px",float:"left"},minAttachmentIconImgAreaNode_list:{width:"24px",height:"24px",margin:"3px 3px"},minAttachmentIconImgNode_list:{width:"24px",height:"24px"},minAttachmentTextNode_list:{height:"30px",cursor:"default","line-height":"30px","margin-left":"0px","margin-right":"0px","font-size":"12px",overflow:"hidden","word-break":"break-all","text-overflow":"ellipsis","text-align":"left"},minAttachmentSizeNode_list:{height:"30px","font-size":"12px","line-height":"30px","margin-left":"0px","margin-right":"6px",display:"inline"},minAttachmentActionAreaNode:{float:"right",overflow:"hidden"},inputUploadAreaNode:{width:"450px",height:"160px","border-radius":"5px","box-shadow":"0px 0px 10px #FFF",position:"absolute",border:"2px solid #999","border-top":"4px solid #5290e5","background-color":"#FFF","z-index":100},inputUploadAreaTitleNode:{height:"30px","line-height":"30px","text-align":"center","font-weight":"bold","font-family":"Microsoft YaHei","font-size":"14px"},inputUploadAreaInforNode:{height:"24px","line-height":"24px","text-align":"center",color:"#666","font-family":"Microsoft YaHei","font-size":"12px","text-align":"left",margin:"10px 20px 0px 20px"},inputUploadAreaInputAreaNode:{margin:"0px 20px 20px 20px",height:"24px"},inputUploadAreaInputNode:{width:"407px",height:"23px",border:"1px solid #666"},inputUploadActionNode:{margin:"0px 20px","border-top":"1px solid #999"},inputUploadOkButton:{height:"24px",width:"80px",color:"#FFF","background-color":"#42699e",border:"1px solid #1e3d67","border-radius":"3px",float:"right","margin-top":"10px","margin-left":"10px"},inputUploadCancelButton:{height:"24px",width:"80px",color:"#666","background-color":"#DFDFDF",border:"1px solid #666","border-radius":"3px",float:"right","margin-top":"10px","margin-left":"10px"},messageMaskNode:{position:"absolute",top:"0px",left:"0px","background-color":"#666666",opacity:.6,"z-index":98},messageNode:{position:"absolute",top:"0px",left:"0px","background-color":"#666666",opacity:.8,"z-index":99},messageText:{position:"absolute",top:"0px",left:"0px",color:"#ffffff","text-align":"center","z-index":100}},o2.widget=o2.widget||{},o2.widget.css=o2.widget.css||{},o2.widget.Common=new Class({Implements:[Options,Events],options:{},initialize:function(t){this.setOptions(t)},_loadCss:function(t){var e=encodeURIComponent(this.cssPath);!t&&o2.widget.css[e]?this.css=o2.widget.css[e]:(this.cssPath=-1!=this.cssPath.indexOf("?")?this.cssPath+"&v="+o2.version.v:this.cssPath+"?v="+o2.version.v,new Request.JSON({url:o2.filterUrl(this.cssPath),secure:!1,async:!1,method:"get",noCache:!1,onSuccess:function(t,i){this.css=t,o2.widget.css[e]=t}.bind(this),onError:function(t,e){alert(e+t)}}).send())},setLayoutStyle:function(t,e,i){(t||this.node).getElements(".GOES").each(function(t){var o=t.get("id"),s=this.css[o];s&&t.setStyles(s);var n=e.indexOf(o);-1!=n&&(this[i[n]]=t),t.removeProperty("id")}.bind(this))},setScrollBar:function(t,e,i,o){return e||(e="default"),i||(i={V:{x:0,y:0},H:{x:0,y:0}}),o2.require("o2.widget.ScrollBar",(function(){new o2.widget.ScrollBar(t,{style:e,offset:i}),o&&o()})),!1}}),o2.widget=o2.widget||{},o2.widget.Dialog=o2.DL=new Class({Implements:[Options,Events],Extends:o2.widget.Common,options:{style:"default",title:"dialog",width:"300",height:"150",contentWidth:null,contentHeight:null,top:"0",left:"0",fromTop:"0",fromLeft:"0",mark:!0,html:"",text:"",url:"",content:null,lp:null,isMax:!1,isClose:!1,isResize:!0,isMove:!0,isTitle:!0,buttons:null,buttonList:null,maskNode:null,transition:null,duration:200,container:null},initialize:function(t){this.setOptions(t),this.path=o2.session.path+"/widget/$Dialog/",this.cssPath=o2.session.path+"/widget/$Dialog/"+this.options.style+"/css.wcss",this._loadCss(),this.reStyle(),this.fireEvent("queryLoad"),this.getContentUrl(),new Request.HTML({url:this.contentUrl,method:"GET",async:!1,onSuccess:function(t,e,i,o){this.node=t[0],this.getDialogNode(),this.fireEvent("postLoad")}.bind(this),onFailure:function(t){alert(t)}}).send()},getContentUrl:function(){this.contentUrl=o2.session.path+"/widget/$Dialog/"+this.options.style+"/dialog.html"},reStyle:function(t){t&&this.setOptions(t),this.css.to.height=this.options.height+"px",this.css.to.width=this.options.width+"px",this.css.to.top=this.options.top+"px",this.css.to.left=this.options.left+"px",this.css.from.top=this.options.fromTop+"px",this.css.from.left=this.options.fromLeft+"px",this.node&&this.node.set("styles",this.css.from)},getParentSelect:function(t){for(var e="",i=t.getParent();!e&&i;){e=i.getStyle("-webkit-user-select");i=i.getParent()}return e},getDialogNode:function(){this.node.set("styles",this.css.from),this.node.inject(this.options.container||$(document.body)),this.node.addEvent("selectstart",function(t){var e=t.target.getStyle("-webkit-user-select");e||(e=this.getParentSelect(t.target)),e=e?e.toString().toLowerCase():"none";var i=t.target.tagName.toString().toLowerCase();"text"!=e&&"auto"!=e&&-1==["input","textarea"].indexOf(i)&&t.preventDefault()}.bind(this)),this.title=this.node.getElement(".MWF_dialod_title"),this.titleCenter=this.node.getElement(".MWF_dialod_title_center"),this.titleRefresh=this.node.getElement(".MWF_dialod_title_refresh"),this.titleText=this.node.getElement(".MWF_dialod_title_text"),this.titleAction=this.node.getElement(".MWF_dialod_title_action"),this.under=this.node.getElement(".MWF_dialod_under"),this.content=this.node.getElement(".MWF_dialod_content"),this.bottom=this.node.getElement(".MWF_dialod_bottom"),this.resizeNode=this.node.getElement(".MWF_dialod_bottom_resize"),this.button=this.node.getElement(".MWF_dialod_button"),this.options.isTitle||(this.title.destroy(),this.title=null,this.titleCenter=null,this.titleRefresh=null,this.titleText=null,this.titleAction=null),this.title&&this.title.setStyles(this.css.MWF_dialod_title),this.titleCenter&&this.titleCenter.setStyles(this.css.MWF_dialod_title_center),this.titleRefresh&&this.titleRefresh.setStyles(this.css.MWF_dialod_title_refresh),this.titleText&&this.titleText.setStyles(this.css.MWF_dialod_title_text),this.titleAction&&this.titleAction.setStyles(this.css.MWF_dialod_title_action),this.under&&this.under.setStyles(this.css.MWF_dialod_under),this.content&&this.content.setStyles(this.css.MWF_dialod_content),this.bottom&&this.bottom.setStyles(this.css.MWF_dialod_bottom),this.resizeNode&&this.resizeNode.setStyles(this.css.MWF_dialod_bottom_resize),this.button&&this.button.setStyles(this.css.MWF_dialod_button),this.title&&this.setTitleEvent(),this.titleRefresh&&this.setTitleRefreshNode(),this.content&&this.getContent(),this.titleAction&&this.getAction(),this.resizeNode&&this.setResizeNode(),this.content&&this.setContentSize()},setTitleRefreshNode:function(){this.titleRefresh.setStyles(this.css.titleRefresh),this.titleRefresh.set("title",o2.LP.widget.refresh)},setTitleEvent:function(){var t;layout.app&&(t=layout.app.content),layout.desktop.currentApp&&(t=layout.desktop.currentApp.content),this.containerDrag=new Drag.Move(this.node,{handle:this.title,container:this.options.container||this.markNode||t,snap:5})},setResizeNode:function(){this.options.isResize?this.resizeNode&&this.node.makeResizable({handle:this.resizeNode||this.bottom,limit:{x:[200,null],y:[150,null]},onDrag:function(){var t=this.node.getComputedSize();this.css.to.width=t.width,this.css.to.height=t.height,this.setContentSize(t.height,t.width),this.fireEvent("resize")}.bind(this),onComplete:function(){this.fireEvent("resizeCompleted")}.bind(this)}):this.resizeNode&&this.resizeNode.hide()},getAction:function(){this.options.isClose&&(this.closeAction=new Element("div",{styles:this.css.closeAction}).inject(this.titleAction),this.closeAction.addEvent("click",this.close.bind(this)))},getButton:function(){for(i in this.options.buttons)new Element("input",{type:"button",value:i,class:"mainColor_bg",styles:this.css.button,events:{click:this.options.buttons[i].bind(this)}}).inject(this.button);this.options.buttonList&&this.options.buttonList.each(function(t){var e=this.css.button;"ok"===t.type&&this.css.okButton&&(e=this.css.okButton),"cancel"===t.type&&this.css.cancelButton&&(e=this.css.cancelButton),t.styles&&(e=t.styles);new Element("input",{type:"button",value:t.text,title:t.title,class:"cancel"!==t.type?"mainColor_bg":"",styles:e,events:{click:function(e){t.action.call(this,this,e)}.bind(this)}}).inject(this.button)}.bind(this))},getContentSize:function(t,e){var i,o;t||(this.options.contentHeight?i=t=this.options.contentHeight.toFloat():t=this.options.height.toFloat()),e||(this.options.contentWidth?o=e=this.options.contentWidth.toFloat():e=this.options.width.toFloat());var s,n=0;if(this.title){var a=this.title.getSize().y,r=this.title.getStyle("padding-top").toFloat(),l=this.title.getStyle("padding-bottom").toFloat(),d=this.title.getStyle("margin-top").toFloat(),c=this.title.getStyle("margin-bottom").toFloat();n+=a+r+l+d+c}if(this.bottom){var h=this.bottom.getSize().y,p=this.bottom.getStyle("padding-top").toFloat(),u=this.bottom.getStyle("padding-bottom").toFloat(),m=this.bottom.getStyle("margin-top").toFloat(),f=this.bottom.getStyle("margin-bottom").toFloat();n+=h+p+u+m+f}if(this.button){var g=this.button.getSize().y,y=this.button.getStyle("padding-top").toFloat(),x=this.button.getStyle("padding-bottom").toFloat(),b=this.button.getStyle("margin-top").toFloat(),w=this.button.getStyle("margin-bottom").toFloat();n+=g+y+x+b+w}var v=this.content.getStyle("padding-top").toFloat(),A=this.content.getStyle("padding-bottom").toFloat(),S=this.content.getStyle("margin-top").toFloat(),k=this.content.getStyle("margin-bottom").toFloat();n+=v+A+S+k;var F=0;if(i?i=i+n+2:(t-=n)<0&&(F=(F=(this.options.container||$(document.body)).getSize().y)-n-10),s=this.content.getStyle("padding-left").toFloat()+this.content.getStyle("padding-right").toFloat()+this.content.getStyle("margin-left").toFloat()+this.content.getStyle("margin-right").toFloat(),o?o+=s:e-=s,i&&(this.options.height=i,this.options.contentHeight=null,this.options.fromTop=this.options.fromTop.toFloat()-n/2,this.options.top=this.options.top.toFloat()-n/2,this.css.to.height=i+"px",this.css.to.top=this.options.top+"px",this.css.from.top=this.options.fromTop+"px"),o&&(this.options.width=o,this.options.contentWidth=null,this.options.fromLeft=this.options.fromLeft.toFloat()-s/2,this.options.left=this.options.left.toFloat()-s/2,this.css.to.width=o+"px",this.css.to.left=this.options.left+"px",this.css.from.left=this.options.fromLeft+"px"),!t||t<0){this.content.setStyles({overflow:"hidden",height:"auto",width:e+"px"}),F&&this.content.setStyles({"max-height":F+"px"});var M=(t=this.content.getSize().y)+a+r+l+d+c;M=(M=(M=M+h+p+u+m+f)+g+y+x+b+w)+v+A+S+k,this.css.to.height=M}return{height:t+"px",width:e+"px"}},setContentSize:function(t,e){this.content.setStyles(this.getContentSize(t,e)),this.content.setStyle("width","auto")},reCenter:function(){var t=this.node.getSize(),e=$(document.body);layout.desktop.currentApp?e=layout.desktop.currentApp.content:this.options.container&&this.options.container.getSize().y<$(document.body).getSize().y&&(e=this.options.container);var i=o2.getCenter(t,e,e);i.y<0&&(i.y=0),this.options.top=i.y,this.options.left=i.x,this.css.to.top=this.options.top+"px",this.css.to.left=this.options.left+"px",this.node.setStyles({top:this.css.to.top,left:this.css.to.left})},getTitle:function(){this.titleText.set("text",this.options.title)},getContent:function(){this.content.setStyles(this.css.content),this.options.content?this.options.content.inject(this.content):this.options.url?(this.content.set("load",{method:"get",async:!1}),$(this.content).loadHtml(this.options.url,{bind:{lp:this.options.lp}})):this.options.html?this.content.set("html",this.options.html):this.options.text&&this.content.set("text",this.options.text)},show:function(){if(this.options.mark&&this._markShow(),this.morph||(this.morph=new Fx.Morph(this.node,{duration:this.options.duration,transition:this.options.transition})),this.fireEvent("queryShow")){this.node.setStyle("display","block");var t=this.node.getOffsetParent().getPosition(),e=this.css.to.height.toInt(),i=this.css.to.top.toInt();i+=t.y;var o=window.innerHeight.toInt();e+i>o&&((i=o-t.y-e-20)<0&&(i=0),this.css.to.top=i+"px"),this.morph.start(this.css.to).chain(function(){this.titleText&&this.getTitle(),this.button&&this.getButton(),this.fireEvent("postShow")}.bind(this))}},hide:function(){this.morph||(this.morph=new Fx.Morph(this.node,{duration:this.options.duration,transition:this.options.transition})),this.fireEvent("queryHide")&&(this.titleText&&this.titleText.set("text",""),this.button&&this.button.set("html",""),this.morph.start(this.css.from).chain(function(){this._markHide(),this.node.setStyle("display","none"),this.fireEvent("postHide")}.bind(this)))},close:function(){this.morph||(this.morph=new Fx.Morph(this.node,{duration:this.options.duration,transition:this.options.transition})),this.fireEvent("queryClose")&&this.morph.start(this.css.from).chain(function(){this._markHide(),this.node.destroy(),this.node=null,this.fireEvent("postClose")}.bind(this))},_markShow:function(){if(this.options.mark){if(!this.markNode){var t=o2.getMarkSize(this.options.maskNode);this.markNode=new Element("div",{styles:this.css.mark}).inject(this.options.container||$(document.body)),this.markNode.set("styles",{height:t.y,width:t.x})}this.markNode.setStyle("display","block")}},_markHide:function(){this.markNode&&(this.markNode.setStyle("display","none"),this.markNode.destroy(),this.markNode=null),this.markNode_up&&(this.markNode_up.setStyle("display","none"),this.markNode_up.destroy(),this.markNode_up=null)}}),o2.widget=o2.widget||{},o2.widget.UUID=new Class({initialize:function(){this.id=this.createUUID()},valueOf:function(){return this.id},toString:function(){return this.id},createUUID:function(){var t=new Date(1582,10,15,0,0,0,0),e=(new Date).getTime()-t.getTime();return this.getIntegerBits(e,0,31)+this.getIntegerBits(e,32,47)+(this.getIntegerBits(e,48,59)+"1")+this.getIntegerBits(this.rand(4095),0,7)+this.getIntegerBits(this.rand(4095),0,7)+(this.getIntegerBits(this.rand(8191),0,7)+this.getIntegerBits(this.rand(8191),8,15)+this.getIntegerBits(this.rand(8191),0,7)+this.getIntegerBits(this.rand(8191),8,15)+this.getIntegerBits(this.rand(8191),0,15))},getIntegerBits:function(t,e,i){var o=this.returnBase(t,16),s=new Array,n="",a=0;for(a=0;a<o.length;a++)s.push(o.substring(a,a+1));for(a=Math.floor(e/4);a<=Math.floor(i/4);a++)s[a]&&""!=s[a]?n+=s[a]:n+="0";return n},returnBase:function(t,e){return t.toString(e).toUpperCase()},rand:function(t){return Math.floor(Math.random()*(t+1))}}),o2.widget=o2.widget||{},o2.widget.Menu=new Class({Implements:[Options,Events],Extends:o2.widget.Common,options:{style:"default",event:"contextmenu",disable:!1,top:-1,left:-1,container:null},initialize:function(t,e){this.setOptions(e),this.items=[],this.path=o2.session.path+"/widget/$Menu/",this.cssPath=o2.session.path+"/widget/$Menu/"+this.options.style+"/css.wcss",this._loadCss(),this.target=$(t),this.target&&(this.target.onselectstart=function(){return!1}),this.target&&(this.target.oncontextmenu=function(){return!1}),this.pauseCount=0},pause:function(t){this.pauseCount=t},load:function(){this.fireEvent("queryLoad")&&(this.node=new Element("div.MWFMenu"),this.node.set("styles",this.css.container),this.options.event&&this.target&&this.target.addEvent(this.options.event,this.showIm.bind(this)),this.node.inject(this.options.container||this.target),this.hide=this.hideMenu.bind(this),this.fireEvent("postLoad"))},setItemWidth:function(){this.items.each(function(t){this.node.getStyle("padding-left").toInt(),this.node.getStyle("padding-right").toInt(),this.node.getStyle("border-left-width").toInt(),this.node.getStyle("border-right-width").toInt(),t.item.getStyle("border-left-width").toInt(),t.item.getStyle("border-right-width").toInt(),t.item.getStyle("margin-left").toInt()}.bind(this))},setPosition:function(t){var e,i;e=-1==this.options.top?t.page.y:this.options.top,i=-1==this.options.left?t.page.x:this.options.left;var o=this.node.getSize(),s=this.node.getOffsetParent(),n=s.getSize();i+o.x>n.x&&(i=i-o.x-5)<0&&(i=0);var a=s.getScroll().y.toFloat()||0;e+o.y>n.y+a&&(e=e-o.y-5)<0&&(e=0),this.node.setStyle("top",e),this.node.setStyle("left",i);var r=this.node.getSize();this.nodeFrame||this.createIframeNode(),this.nodeFrame.setStyles({top:e,left:i,width:r.x+"px",height:r.y+"px"})},showIm:function(t){this.options.disable||(this.hide=this.hideIm.bind(this),this.fireEvent("queryShow",[t])&&(this.tmpBodyOncontextmenu=document.body.oncontextmenu,document.body.oncontextmenu=function(){return!1},this.pauseCount<=0?(this.setItemWidth(),this.node.setStyles({display:"block",opacity:this.options.opacity||1}),this.nodeFrame||this.createIframeNode(),this.nodeFrame.setStyles({display:"block",opacity:0}),this.setPosition(t),$(document.body).removeEvent("mousedown",this.hide),$(document.body).addEvent("mousedown",this.hide),this.show=!0):this.pauseCount--,this.fireEvent("postShow",[t])))},hideIm:function(t){if(this.fireEvent("queryHide")){if($(document.body).removeEvent("mousedown",this.hide),this.node.set("styles",{display:"none",opacity:0}),this.nodeFrame&&this.nodeFrame.set("styles",{display:"none",opacity:0}),this.show=!1,document.body.oncontextmenu=this.tmpBodyOncontextmenu,this.tmpBodyOncontextmenu=null,t){for(var e=this;e.topMenu;)e=e.topMenu;e.hideIm()}else this.items.each((function(t){"menu"==t.type&&t.subMenu.hideIm()}));this.fireEvent("postHide")}},createIframeNode:function(){this.nodeFrame||(this.nodeFrame=new Element("iframe"),this.nodeFrame.setStyles({border:"0px","z-index":"998",margin:"0px",padding:"0px",position:"absolute",display:"none",opacity:0})),this.nodeFrame.inject(this.options.container||this.target)},showMenu:function(t){this.show||(this.pauseCount<=0?this.options.disable||(this.hide=this.hideMenu.bind(this),this.fireEvent("queryShow",[t])&&(this.tmpBodyOncontextmenu=document.body.oncontextmenu,document.body.oncontextmenu=function(){return!1},this.node.setStyle("display","block"),this.nodeFrame||this.createIframeNode(),this.nodeFrame.setStyle("display","block"),this.setItemWidth(),this.setPosition(t),this.morph||(this.morph=new Fx.Morph(this.node,{duration:100})),this.morph.start({opacity:this.options.opacity||1}).chain(function(){$(document).removeEvent("click",this.hide),$(document).addEvent("click",this.hide),$(document).removeEvent("mousedown",this.hide),$(document).addEvent("mousedown",this.hide),this.show=!0,this.fireEvent("postShow")}.bind(this)))):this.pauseCount--)},hideMenu:function(){$(document).removeEvent("click",this.hide),this.show&&(this.morph||(this.morph=new Fx.Morph(this.node,{duration:100})),this.fireEvent("queryHide")&&this.morph.start({opacity:0}).chain(function(){this.node.set("styles",{display:"none"}),this.nodeFrame.set("styles",{display:"none"}),this.show=!1,document.body.oncontextmenu=this.tmpBodyOncontextmenu,this.tmpBodyOncontextmenu=null,this.fireEvent("postHide")}.bind(this)))},clearItems:function(){this.items.each((function(t){t.remove()})),this.items=[]},addMenuItem:function(t,e,i,o,s){var n=new o2.widget.MenuItem(this,{text:t,event:e,action:i,img:o,disable:s});return n.load(),this.items.push(n),n},addMenuMenu:function(t,e,i,o){var s=new o2.widget.MenuMenu(this,i,{text:t,img:e,disable:o});return s.load(),this.items.push(s),s},addMenuLine:function(){var t=new o2.widget.MenuLine(this);t.load(),this.items.push(t)},_loadToolbarItemNode:function(){this.node.getChildren().each(function(t,e){var i=t.get("MWFnodetype");i&&("array"==typeOf(this[i])||(this[i]=[]),this[i].push(t))}.bind(this))},_loadMenuItems:function(){this._loadToolBarSeparator(this.MWFToolBarMenuItem),this._loadToolBarButton(this.MWFToolBarMenuLine),this._loadToolBarMenu(this.MWFToolBarMenuItem)},_loadToolBarSeparator:function(t){t&&t.each(function(t,e){t.set("styles",this.css.toolbarSeparator)}.bind(this))},_loadToolBarButton:function(t){t&&t.each(function(t,e){var i=new o2.widget.ToolbarButton(t,this);i.load(),i.buttonID&&(this.items[i.buttonID]=i),this.children.push(i),this.childrenButton.push(i)}.bind(this))},_loadToolBarMenu:function(t){t&&t.each(function(t,e){var i=new o2.widget.ToolbarMenu(t,this);i.load(),i.buttonID&&(this.items[i.buttonID]=i),this.children.push(i),this.childrenMenu.push(i)}.bind(this))}}),o2.widget.MenuItem=new Class({Implements:[Options],options:{text:"",event:"",action:null,img:"",disable:!1},initialize:function(t,e){this.setOptions(e),this.menu=t,this.type="item",this.createNode()},createNode:function(){this.item=new Element("div",{styles:this.menu.css.menuItem});var t=new Element("div",{styles:this.menu.css.menuItemImgDiv}).inject(this.item);this.options.img&&("url"==this.options.img.substr(0,3)?new Element("div",{styles:this.menu.css.menuItemImg}).inject(t).setStyles({"background-size":"cover","background-image":this.options.img}):new Element("img",{styles:this.menu.css.menuItemImg,src:this.options.img}).inject(t));new Element("div",{styles:this.menu.css.menuItemSeparator}).inject(this.item);this.text=new Element("div",{styles:this.menu.css.menuItemText,text:this.options.text}).inject(this.item),this.options.event&&this.item.addEvent(this.options.event,this.doAction.bind(this)),this.setDisable(this.options.disable)},setText:function(t){this.options.text=t;var e=this.item.getLast("div");e&&e.set("text",t)},load:function(){this.item.inject(this.menu.node),this._addButtonEvent()},setDisable:function(t){var e,i;if(this.options.disable!=t)if(this.options.disable=t,t){if(this.item.set("styles",this.menu.css.menuItemDisable),(e=this.item.getElement("img"))&&"data:"!=(i=e.get("src")).substr(0,5)){var o=i.lastIndexOf(".");srcLeft=i.substr(0,o),srcRight=i.substr(o,i.length-o),i=srcLeft+"_gray"+srcRight,e.set("src",i)}}else this.item.set("styles",this.menu.css.menuItem),(e=this.item.getElement("img"))&&"data:"!=(i=e.get("src")).substr(0,5)&&(i=i.replace("_gray",""),e.set("src",i))},_addButtonEvent:function(){this.item.addEvent("mouseover",this._menuItemMouseOver.bind(this)),this.item.addEvent("mouseout",this._menuItemMouseOut.bind(this)),this.item.addEvent("mousedown",this._menuItemMouseDown.bind(this)),this.item.addEvent("mouseup",this._menuItemMouseUp.bind(this))},_menuItemMouseOver:function(t){this.menu.items.each(function(e){e!=this&&"line"!=e.type&&(e.options.disable||e._menuItemMouseOut(t))}.bind(this)),this.options.disable||(this.item.set("styles",this.menu.css.menuOver),this.menu.current=this)},_menuItemMouseOut:function(t){this.options.disable||this.item.set("styles",this.menu.css.menuOut)},_menuItemMouseDown:function(t){this.options.disable||this.item.set("styles",this.menu.css.menuDown),t.stopPropagation()},_menuItemMouseUp:function(t){this.options.disable||this.item.set("styles",this.menu.css.menuUp)},doAction:function(t){this.options.disable||(this.options.action&&this.options.action.apply(this,[t]),this.menu.hideIm(!0))},remove:function(){this.item.destroy()}}),o2.widget.MenuLine=new Class({initialize:function(t,e){this.type="line",this.menu=t,this.createNode()},createNode:function(){this.item=new Element("div",{styles:this.menu.css.menuLine})},load:function(){this.item.inject(this.menu.node)},remove:function(){this.item.destroy()},setDisable:function(){}}),o2.widget.MenuMenu=new Class({Implements:[Options],Extends:o2.widget.MenuItem,initialize:function(t,e,i){this.subMenu=e,this.parent(t,i),this.subMenu.topMenu=this.menu,this.type="menu",this.createIcon(),this.subMenu.setPosition=function(){this.setPosition()}.bind(this)},createIcon:function(){new Element("div",{styles:this.menu.css.menuItemSubmenuIcon}).inject(this.text,"before"),this.text.setStyle("margin-right","16px")},_menuItemMouseOver:function(t){this.menu.items.each(function(e){e!=this&&"line"!=e.type&&(e.options.disable||e._menuItemMouseOut(t))}.bind(this)),this.options.disable||(this.item.set("styles",this.menu.css.menuOver),this.menu.current=this),this.subMenu.showIm()},_menuItemMouseOut:function(t){t.event.toElement==this.subMenu.node||this.subMenu.node.contains(t.event.toElement)||(this.options.disable||this.item.set("styles",this.menu.css.menuOut),this.subMenu.hideIm())},setPosition:function(t){var e,i,o=this.item.getPosition(),s=this.item.getSize();this.subMenu.node.setStyle("display","block");var n=this.subMenu.node.getSize(),a=this.subMenu.node.getOffsetParent(),r=a.getSize();e=o.y,(i=o.x.toFloat()+s.x.toFloat()-3).toFloat()+n.x.toFloat()>r.x&&(i=o.x.toFloat()-n.x.toFloat()+8);var l=a.getScroll().y.toFloat()||0;e+n.y>r.y+l&&(e=e-n.y+s.y+3)<0&&(e=0),this.subMenu.options.offsetX&&(i+=this.subMenu.options.offsetX),this.subMenu.options.offsetY&&(e+=this.subMenu.options.offsetY);var d=this.menu.node.getStyle("z-index");this.subMenu.node.setStyle("z-index",d+1),this.subMenu.node.setStyle("top",e),this.subMenu.node.setStyle("left",i)}}),o2.widget=o2.widget||{},o2.require("o2.widget.Common",null,!1),o2.widget.Mask=new Class({Implements:[Options,Events],Extends:o2.widget.Common,options:{style:"default",zIndex:100,loading:!0,progress:!1},initialize:function(t){this.setOptions(t),this.path=o2.session.path+"/widget/$Mask/",this.cssPath=o2.session.path+"/widget/$Mask/"+this.options.style+"/css.wcss",this._loadCss(),this._createMaskNodes()},_createMaskNodes:function(){this.container=new Element("div",{styles:this.css.container}),this.container.setStyle("z-index",this.options.zIndex),this.maskBar=new Element("iframe",{styles:this.css.mask}),this.maskBar.setStyle("z-index",this.options.zIndex),this.backgroundBar=new Element("div",{styles:this.css.backgroundBar}),this.backgroundBar.setStyle("z-index",this.options.zIndex+1),this.maskBar.inject(this.container),this.backgroundBar.inject(this.container),this.options.loading&&(this.loadBar=new Element("div",{styles:this.css.loadingBar,html:'<table width="80%" border="0" cellspacing="0" cellpadding="0"><tr valign="middle" height="30"><td align="right"><img src="'+o2.session.path+"/widget/$Mask/"+this.options.style+'/loading.gif" /></td><td align="center">loading...</td></tr></table>'}),this.loadBar.setStyle("z-index",this.options.zIndex+2),this.loadBar.inject(this.container)),this.options.progress&&(this.progressNode=new Element("div",{styles:this.css.progressNode}).inject(this.container),this.progressNode.setStyle("z-index",this.options.zIndex+2))},hide:function(t){new Fx.Morph(this.container,{duration:500}).start({opacity:0}).chain(function(){this.container.destroy(),t&&t()}.bind(this))},load:function(){if(this.fireEvent("queryLoad")){if(this.container.inject($(document.body)),this.options.loading){this.loadBar.setStyle("display","block");var t=this.container.getSize(),e=(t.x-120)/2,i=(t.y-30)/2;i<=0&&(i=(window.screen.height-30)/2),this.loadBar.setStyle("left",e+"px"),this.loadBar.setStyle("top",i+"px")}else this.loadBar&&this.loadBar.setStyle("display","none");this.fireEvent("postLoad")}},loadNode:function(t){if(this.fireEvent("queryLoad")){if(this.container.inject($(t)),this.options.loading){this.loadBar.setStyle("display","block");var e=$(t).getSize(),i=e.x/2,o=(e.y-30)/2;o<=0&&(o=(window.screen.height-30)/2-100),this.loadBar.setStyle("left",i+"px"),this.loadBar.setStyle("top",o+"px")}else this.loadBar&&this.loadBar.setStyle("display","none");this.fireEvent("postLoad")}}}),o2.xDesktop=o2.xDesktop||{},o2.xd=o2.xDesktop,o2.xDesktop.requireApp=function(t,e,i,o){o2.requireApp(t,e,i,o)},o2.xApplication=o2.xApplication||{},MWF.xDesktop.loadConfig=function(t){o2.JSON.get("res/config/config.json",(function(e){layout.config=e,"auto"===layout.config.app_protocol&&(layout.config.app_protocol=window.location.protocol),layout.config.systemName=layout.config.systemName||layout.config.footer,layout.config.systemTitle=layout.config.systemTitle||layout.config.title,t&&t()}))},MWF.xDesktop.getService=function(t){MWF.xDesktop.getServiceAddress(layout.config,(function(e,i){layout.serviceAddressList=e,layout.centerServer=i,t&&t()}))},MWF.xDesktop.loadService=function(t){MWF.xDesktop.loadConfig((function(){MWF.xDesktop.getService(t)}))},MWF.xDesktop.checkLogin=function(t){layout.authentication=new MWF.xDesktop.Authentication({onLogin:t}),layout.authentication.isAuthenticated(function(e){layout.session.user=e.data,t&&t()}.bind(this),(function(){layout.authentication.loadLogin(this.node)}))},MWF.xDesktop.getDefaultLayout=function(t){MWF.UD.getPublicData("defaultLayout",function(e){e&&(layout.defaultLayout=e),t&&t()}.bind(this))},MWF.xDesktop.getUserLayout=function(t){MWF.UD.getPublicData("forceLayout",function(e){var i=null;e&&(i=e),MWF.UD.getDataJson("layout",function(e){e?(layout.userLayout=e,i&&(layout.userLayout.apps=Object.merge(layout.userLayout.apps,i.apps)),t&&t()):MWF.UD.getPublicData("defaultLayout",function(e){e&&(layout.userLayout=e,i&&(layout.userLayout.apps=Object.merge(layout.userLayout.apps,i.apps))),t&&t()}.bind(this))}.bind(this))}.bind(this))},MWF.xDesktop.notice=function(t,e,i,o,s,n){e||(e={x:"right",y:"top"}),t||(t="ok");var a=o||layout.desktop.desktopNode||document.body,r=s;r||(r={x:10,y:(e.y.toString().toLowerCase(),10)});var l={type:t,position:e,move:!1,target:a,offset:r,content:i};n&&"object"===typeOf(n)&&(l=Object.merge(l,n)),new mBox.Notice(l)},MWF.xDesktop.loadPortal=function(t){layout.openApplication(null,"portal.Portal",{portalId:t,onAfterModulesLoad:function(){var t=$("layout");t&&t.setStyles({position:"absolute",width:"100%","z-index":100,top:"0px",left:"0px"}).fade("out");var e=$("appContent");e&&e.setStyles({position:"absolute",width:"100%",top:"0px",opacity:0,left:"0px"}).fade("in")}},null,!0)},MWF.name={cns:function(t){if("array"!==typeOf(t))return[];var e=[];return t.each(function(t){e.push(this.cn(t))}.bind(this)),e},cn:function(t){if(!t)return"";var e=t.indexOf("@");return-1!==e?t.substring(0,e):t},ou:function(t){if(!t)return"";var e=t.indexOf("@"),i=t.lastIndexOf("@");return-1===e?t:i===e?"":t.substring(e+1,i)},flag:function(t){if(!t)return"";var e=t.lastIndexOf("@");return-1===e?"":t.substring(e+1,t.length)},type:function(t){if(!t)return"";var e=t.lastIndexOf("@");return-1===e?"":t.substring(e+1,t.length)}},MWF.xDesktop.confirm=function(t,e,i,o,s,n,a,r,l,d,c){MWF.require("MWF.xDesktop.Dialog",function(){var h,p=layout.desktop.node||$(document.body),u=p.getSize(),m=0,f=0;"element"==typeOf(e)?(m=(h=e.getPosition(p)).x,f=h.y):("firefox"==Browser.name?(m=parseFloat(e.event.clientX),f=parseFloat(e.event.clientY)):(m=parseFloat(e.event.x),f=parseFloat(e.event.y)),e.target&&(m=(h=e.target.getPosition(p)).x,f=h.y));m+parseFloat(s)>u.x&&(m-=parseFloat(s)),m<0&&(m=0),f+parseFloat(n)>u.y&&(f-=parseFloat(n)),f<0&&(f=0);var g="",y="";"object"==typeOf(o).toLowerCase()?(g=o.text,y=o.html):g=o;var x=new MWF.xDesktop.Dialog({title:i,style:c||"o2",top:f,left:m-20,fromTop:f,fromLeft:m-20,width:s,height:n,text:g,html:y,container:MWF.xDesktop.node,maskNode:d,buttonList:[{type:"ok",text:MWF.LP.process.button.ok,action:a},{type:"cancel",text:MWF.LP.process.button.cancel,action:r}]});switch(t.toLowerCase()){case"success":x.content.setStyle("background-image","url(data:image/png;base64,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)");break;case"error":x.content.setStyle("background-image","url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABsVJREFUeNqkWFtsFGUU/nZn2r21IqX3llp6AQmkWDVGAgIlGI0EeMAHffAFa998MCQaE8JDxZCgSHzQKIm3qPHFGC7GW0xqkIgIKhhEwFJaKSDQUtplu73s7vidmX/q32F2uw2TnOzMv2fO+f5z/8fci7yvWAZYRXo4CCwLAM1cq+HvXRYwQrrM/7rTwB+TwC/dwKG3uU75mVxCO7T7wExgKHiBATzJ2411wMoy3pSQ5gg6UiFpgpQgDZNukK6TLgBHuf7lAPD5q8DfXMpQl5U3mA4P4ztAO3+2tADLCQSV+VsR/5L+If0G/EqgH78EvKtwT1lqr0en6SfoLaCe1niB7nj+CQIuV+uZWYApV8RNPPAVcP/rQMtF4I03gbNcpjdvt5KxQXs4SKKflxBI54PAs20EElNvZTQJucjLFyUtpZwioJVurFtMD/4MXBXWDUqnL5jHHYt0PgQ8da/4UFMwThpTz0HF7wfEj0/kSKwVAwsZU5U1wKkTwOBBj7GD08xE17QSSJPanVCKlCSNkM5s2mT/JtV6epZ8InclsH4R9TjYRKWPZQixnch2POJsZNpOb5HOb9yIi5s3I5XJIHb2rL2LoBZL+fBZKhOZaS3LgPgh4HcnYZ34scFI+goQxsj8iA+QHipItrejrKwMiaVLMZJIIEpFAaUkH76AFrEVfLxEzzEej/0FXFOGc8CQ8bmFTOE6DciEUnCBCsapoLGxETU1NYhGo7i+YAHiSlFauWMmvqAGKOzcVzDlh2mdo2o/loCJkeEVRnldSMsGUdCrKaiqqkJxcTEikQgKCgpsRbJzk4oukm8iB1+CfEUKkLtZub/CZOsFvht0Qi1lrAfW0WwvN3gyI7J1K+7ZswfNzc0oLS1FKBRCMBiEaZoIh8OOovp6jI6NYXLLFjQ1NdlAxCKGYaCwsBAlJSWoJ08lwQZTKaSPHJmSL9YZZWZx438eZ8yLMwwWtWeYaqvv9oBJ8UWDyovWrUMgEPi/ZPPeBWT/rlhhx0h1dbUNRABPpSrvBVhixw4kd+26rRyMOq3jCl31kzya0vSiKgW91/DOnbZJ53V22iAsy5pSIopra2vtNflP3KIDcTcwuH074pQT8JEvelkMF4kjpBuY0n1Dbjj7XDcpSCCU+gCKxWK+77hABghkOAsQuUIOivmq3xrSm2qMLJZxrwEKlGJQ5QGUC8gVBSSYQ67hoCidAiPzSCCHZSxVlXopeHhiAk30v8RBtivFQO3etg1Du3fbbihQKe0L3MmqmGrYwaAMRuPKMl6aVCkeJ11jRvSuWYO+vj4kk0lf4bIu/wuf8MfV+5NZ5I87RhhVuAKmTGhsbHPCWSwiwoYoOMQ60tDQgPLycjvNfWOA6/J/Op3GefJzsMLcAwfs6PSz0JhTXAfcBDNlVCS0xaYHSEql3jCBRLSC5k3faV1XZZnwySWABmUqJKCo8oUOaNTZbL9SlzE4Niwh8lURLf/TyoQzAZFgdcmvDklhjKsKXKAqsF5rZEztAboOAz+KA4xHmeo0+tNFqky7VMkKfJ+nAnuV2rtn1pS0td32n16B67kpRjZuqQrs6pB5mW37s5OswoLNaOTUdRfQRjPWGhrqOF80aYVSTwXWgfQQSL8URiqa6wGkV+B+ZuAlTwUWF/VxyPoUeD/uTH5x4xhjiNapoHXWhj3l+ubhw0hTkbtz3SXdBNJHIJgFn+Vx0Tlg37eOi+RAkTTk+MDueY1WWc64qQ5oZpSXhpSiedrOz1HBBVWZZ8Pn0phzcjj9DfBBvz1r4aYkrz3PvEhZq9lIyfgY3RXwzrY3lKKytWtxhgp6fHaaL5+AoU8stulPvgB+UFZJuPOMPaF/D5wgoGq6q9XMosianER3FiD58iWcDNr/GvCegwtDbjeywShAGQ5Y3aYzZC00PELsDkxFmOGokosv6cy/XV8DHyr3XFfL1rSBnL/WNqKUcw3rQWWhD6A7oaSTPV1dwEecX07CmX1v6W3Re4iz5IAl5xqCiTIMW0zJ5DsAkXKOLxbHy/1iEQ3IiHdYmAbGdZccsBhDXXKcoMAyWqjCynJwywVCqjgbz2kJVokR5RoXyKRkctYTpQ5Iepica+Q4QesMU0GUoCozPjGS0QZ5t9uzJ51ioO6T9FVZc1XFiLgm5X6ROJjvJ5EOZ4iXwaeIs2Elz1WreExtlVFRJjQZjGQekTFAuq80PRazbp6JTtOyxy87FX9EkYCY8H6v6fDMNzNdagayQYXVZ5mIei7UmrHrnQlFSZXJY9qnECuXIjMPMJZ2lHIPj6aaGg0FNOD5CJHWjtl5f0n5T4ABAFHaXG6UVjGNAAAAAElFTkSuQmCC)");break;case"info":x.content.setStyle("background-image","url(data:image/png;base64,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)");break;case"warn":x.content.setStyle("background-image","url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABgtJREFUeNqsWG2IlFUUft6vmdlZd539GFdTY5VMomy1oBJUSPLXkmQt5I8gCIMK+iH0K4ooEvtTRP7JX9JKWCC1mUUkIkQKSoaZH60t2pboOK37Mc6Ozsw779t57t5xx5ndnTvhC4d373nnnnPuOeee85y1Jr+G6dNcCrBB6AnbQo9tY4UFLLYstIYhMsK/IjRULOF0voATx87jp60fICPygzmFbpn+26pnzK0ilrk2+kTp5kgC6+w4YDfJxpiQJ+QAYUmoKHQLCG4K5YDsCI7fzOPgcBr7172BP0VUILrC/22MnHSbvF6KLcRap1WMmGfsRQRZ2Z8BJv7BybEs9t6/DbuFXaj2VKUx7ize6BZvbHcdvB67D5bdrD/ocwUiruiLZPFGSbziiHci4iVPpEn41MM9pPZWPBofwiOX9uDh05fwkSgf5Dln8lKNZwo+HnRsvBVbjK1eJ39RdWIxJCfhGB0HxjNTBtGQhHiuPQHEY9MG3X5EbXEESA3i4KmL2Ln5Xfwi3CINmjVM9IjnYGeTGOJ2zOx+SU5cE8Hp/DMIopvgxFejlDsFO38IC6ID6JIDRCMz7/WvA1cG8d2PJ/H2y5/gLA2a9ndVmBia2CIxpL3yJ1XG5MUzTh8S3e/B9Zo09x74xSeRS7vyfT+i3sx7KXfRCvSuz2NUltuFJmhj+btdmazMEa+NsZidfIYlsQXzE51oa2tDV1eXenNNPr/PtZ/ylybxwtEP8Ypw4pU22OXrq27NvZIh4dzCeI07lvQiHo8jFovBdV315pp8fp9rP+VTT/cCPL/jRawSTqScma4OT1+sA2vtqN4w552V03meMsKyprLblowlj2s/qC+DepJLsWpjD56T5aDOnRI908yC5jTVOVEl1THWhKhPwrVx/UNYqL0DmyU+0iyVNWooKKxjTGgmh/o6k+h5tRcbhBNTDla9JtKAV+6SZ5RBondZF9YwOkKOq5qeZ6CkUpmJMQYP9Xa0YqX8ySRxXdV9bXMBloShnLg134RvhQ3IEr2tTViqc8ZxNQwwFuCJANsqiOJ4jSHke40cTPQ2RdFZNsYmHrEaiHVEmqI/drTGO+paC5/fTWVRghTaZl1ibJvAqG6hqqygIsG+/iXCID8VFk1ck+9Z5rKoV8BYThc9yyVCE2A0nyDJKOmEoiP98GV7mNwKO7EOwfjPwL9fKL7q2CUzWTRGANiILgghjRkKfTwAyxw4cWt4pR+F4X72NAn2FIxQzg4aECMtcmISl3WzDFxi1sDH046hZ4JQ45kbgmeyFXhGUGB7i8YzhgcTvbg2jiHCKPrTJXgmE56ZgKIoH5XGn/YEz3QLnpm/GrcmTiE9dkiOOaBuU9QzN+bsMM7dNoYo/qk1OC597vEahDbDU5BtuVbBMysr8ExS45lBV74LnjHwMhFjahRndn2rUN9NhsrmOEEUX/LNbgB/F13yLBJtyTvwDNfkNyLnj8s4dv5vBbQmVdcmWuc4IYl0MjC44jz0guWb0NLSojAMoQTfXJPvGNQs6hGvnNt7GIeFkyGk4hcVGM41HCcEZIV1ix53jJ+QieDOWKi18CN2fWOo58QF/PD5ETVPZXTO3IZ8Aeea9Dj2FOt4R7WDq1L0SlVFT9bke3WMofzf/8I3fTvwlXAYomy5IChj9AxT4FyTmsBBPyyXoVpSRe9qP8LfXkNw7ZAaIfnmmnwbs++l3AspHPl4APuEw2I3pr0S1owqMsO4B97BYz3L8eaiFvR6uHsPceWFNI7s/h6f7TqgblBq1umgPCRwwOJcc3EEe3NsOXN4yYRUkRQ5vw5j4P19+FQbkha6Ud04aiZK8Y6lS2ALxwmi+GQcqxyGKDT3RCBSSkKpLM4xWXWOjGi6UXeirDKI1yXOcYIonuC5s1lQoTbKKlPZCdYUBZpSGZxhHeH11bdmVOdIrnLWNv4vhPzQ1sBnHlE8wTMxK6EiERqBEfEIYQC7L5seew1LPCurLmgZTdl6/4UwaWmWzq2IRvHNGrNGNLmYdpCvb0dBl/hJXdAKJrOF1eClsHX4XP12NM+qGFJKmnz9NgYV/wkwAMYATK0QLuhAAAAAAElFTkSuQmCC)")}x.show(),l&&l(x)}.bind(this))},MWF.xDesktop.getImageSrc=function(t){"auto"==layout.config.app_protocol&&(layout.config.app_protocol=window.location.protocol);var e=layout.serviceAddressList.x_file_assemble_control;if(e)var i=layout.config.app_protocol+"//"+e.host+(80==e.port?"":":"+e.port)+e.context;else{var o=layout.config.center.host||window.location.hostname,s=layout.config.center.port;i=layout.config.app_protocol+"//"+o+("80"==s?"":":"+s)+"/x_program_center"}var n="/jaxrs/file/"+t+"/download/stream";return o2.filterUrl(i+n)},MWF.xDesktop.setImageSrc=function(){if(event){var t=event.srcElement?event.srcElement:event.target;if(t){t.onerror=null;var e=t.get("data-id");e&&t.set("src",MWF.xDesktop.getImageSrc(e))}}},MWF.xDesktop.uploadImage=function(t,e,i,o,s,n){this.action=new MWF.xDesktop.Actions.RestActions("/xDesktop/Actions/action.json","x_file_assemble_control"),this.action.invoke({name:"uploadImage",parameter:{reference:t,referencetype:e},data:i,file:o,success:s,failure:n})},MWF.xDesktop.uploadImageByScale=function(t,e,i,o,s,n,a){this.action=new MWF.xDesktop.Actions.RestActions("/xDesktop/Actions/action.json","x_file_assemble_control"),this.action.invoke({name:"uploadImageByScale",parameter:{reference:t,referencetype:e,scale:i||0},data:o,file:s,success:n,failure:a})},MWF.xDesktop.copyImage=function(t,e,i,o,s,n){this.action=new MWF.xDesktop.Actions.RestActions("/xDesktop/Actions/action.json","x_file_assemble_control"),this.action.invoke({name:"copyImage",parameter:{reference:t,referencetype:e,attachmentId:i,scale:o||0},success:s,failure:n})},MWF.xDesktop.getPortalFileUr=function(t,e){var i="x_portal_assemble_surface",o=MWF.Actions.getHost(i)+"/"+i+MWF.Actions.get(i).action.actions.readFile.uri;return o=(o=o.replace("{flag}",t)).replace("{applicationFlag}",e)},MWF.xDesktop.getProcessFileUr=function(t,e){var i="x_processplatform_assemble_surface",o=MWF.Actions.getHost(i)+"/"+i+MWF.Actions.get(i).action.actions.readFile.uri;return o=(o=o.replace("{flag}",t)).replace("{applicationFlag}",e)},MWF.xDesktop.getCMSFileUr=function(t,e){var i="x_cms_assemble_control",o=MWF.Actions.getHost(i)+"/"+i+MWF.Actions.get(i).action.actions.readFile.uri;return o=(o=o.replace("{flag}",t)).replace("{applicationFlag}",e)},MWF.xDesktop.getServiceAddress=function(t,e){var i=function(){var e=$("browser_loadding"),i=$("appContent");(e?e.getFirst():i).empty();var o="<div style='width: 800px; color: #ffffff; margin: 30px auto'><div style='height: 40px;'>   <div style='height: 40px; width: 40px; float: left; background: url(../x_desktop/img/error.png)'></div>   <div style='margin-left: 50px; font-size: 20px; line-height: 40px;'>"+MWF.LP.desktop.notice.errorConnectCenter1+"</div></div><div style='margin-left: 0px;'>";if("array"===typeOf(t.center))t.center.each((function(t){var e="http://"+(t.host?t.host:window.location.hostname)+(t.port?":"+t.port:"")+"/x_program_center/jaxrs/echo";o+="<br><a style='margin-left: 50px; color: #e0e8d1; line-height: 30px;' href='"+e+"' target='_blank'>"+e+"</a>"}));else{var s="http://"+(t.center.host?t.center.host:window.location.hostname)+(t.center.port?":"+t.center.port:"")+"/x_program_center/jaxrs/echo";o+="<br><a style='margin-left: 50px; color: #e0e8d1; line-height: 30px;'href='"+s+"' target='_blank'>"+s+"</a>"}o+="</div><br><div style='margin-left: 50px; font-size: 20px'>"+MWF.LP.desktop.notice.errorConnectCenter2+"</div></div>",(e?e.getFirst():i).set("html",o),!e&&i&&i.setStyle("background-color","#666666")};if("object"===typeOf(t.center))MWF.xDesktop.getServiceAddressConfigObject(t.center,e,i);else if("array"===typeOf(t.center)){MWF.xDesktop.getServiceAddressConfigArray(t,e,i)}},MWF.xDesktop.chooseCenter=function(t){for(var e=window.location.host,i=null,o=0;o<t.center.length;o++){var s=t.center[o];if(!s.host||s.host.toString().toLowerCase()===e.toString().toLowerCase()){i=s;break}}return i},MWF.xDesktop.getServiceAddressConfigArray=function(t,e,i){var o=[];t.center.each(function(t){o.push(MWF.xDesktop.getServiceAddressConfigObject(t,function(t,i){o.each((function(t){t&&t.res&&t.res.isRunning()&&t.res.cancel(),t&&t.actionWorker&&t.actionWorker.terminate()})),e&&e(t,i)}.bind(this),function(){if(o.length)for(var t=0;t<o.length;t++){if(o[t].res&&o[t].res.isRunning())return"";if(o[t].actionWorker&&o[t].actionWorker.terminate)return""}i&&i()}.bind(this)))}.bind(this))},MWF.xDesktop.getServiceAddressConfigObject=function(t,e,i){var o=t;o||(o=layout.config.center);var s=o.host||window.location.hostname,n=o.port,a="";"auto"==layout.config.app_protocol&&(layout.config.app_protocol=window.location.protocol),a=n&&"80"!=n?layout.config.app_protocol+"//"+s+":"+n+"/x_program_center/jaxrs/distribute/assemble/source/{source}":layout.config.app_protocol+"//"+s+"/x_program_center/jaxrs/distribute/assemble/source/{source}";var r=layout.config.applicationServer&&layout.config.applicationServer.host?layout.config.applicationServer.host:window.location.hostname;a=a.replace(/{source}/g,r);try{return MWF.restful("get",a,null,{onSuccess:function(i){e&&e(i.data,t)}.bind(this),onRequestFailure:function(t){i&&i(t)}.bind(this),onError:function(t){i&&i(t)}.bind(this)})}catch(t){return i&&i(),null}},MWF.xDesktop.$globalEvents={},MWF.xDesktop.addEvent=function(t,e,i){MWF.xDesktop.$globalEvents[t]||(MWF.xDesktop.$globalEvents[t]={}),MWF.xDesktop.$globalEvents[t][e]||(MWF.xDesktop.$globalEvents[t][e]=[]),MWF.xDesktop.$globalEvents[t][e].push(i)},MWF.xDesktop.addEvents=function(t,e){MWF.xDesktop.$globalEvents[t]||(MWF.xDesktop.$globalEvents[t]={}),Object.each(e,function(e,i){MWF.xDesktop.addEvent(t,i,e)}.bind(this))},MWF.xDesktop.removeEvent=function(t,e,i){return!MWF.xDesktop.$globalEvents[t]||(!MWF.xDesktop.$globalEvents[t][e]||void MWF.xDesktop.$globalEvents[t][e].erase(i))},MWF.xDesktop.removeEvents=function(t,e){return!MWF.xDesktop.$globalEvents[t]||(!MWF.xDesktop.$globalEvents[t][e]||void(MWF.xDesktop.$globalEvents[t][e]=[]))},MWF.org={parseOrgData:function(t,e,i){if(!t.distinguishedName)return t;switch(t.distinguishedName.substr(t.distinguishedName.length-2,2).toLowerCase()){case"@i":return this.parseIdentityData(t,e,i);case"@p":return this.parsePersonData(t,i);case"@u":return this.parseUnitData(t,i);case"@g":return this.parseGroupData(t,i);case"@r":return this.parseRoleData(t,i);case"@a":return this.parseAttributeData(t,i);default:return t}},parseIdentityData:function(t,e,i){if(i)return(t={id:t.id,name:t.name,distinguishedName:t.distinguishedName,unitLevelName:t.unitLevelName,person:t.person,unit:t.unit,unitName:t.unitName}).ignoreEmpower&&(o.ignoreEmpower=!0),t.ignoredEmpower&&(o.ignoredEmpower=!0),t;var o={id:t.id,name:t.name,unique:t.unique,distinguishedName:t.distinguishedName,person:t.person,unit:t.unit,unitName:t.unitName,unitLevelName:t.unitLevelName};if(t.personName&&(o.personName=t.personName),t.personEmployee&&(o.personEmployee=t.personEmployee),t.personUnique&&(o.personUnique=t.personUnique),t.personDn&&(o.personDn=t.personDn),t.ignoreEmpower&&(o.ignoreEmpower=!0),t.ignoredEmpower&&(o.ignoredEmpower=!0),!(e&&t.personDn&&t.personEmployee&&t.personUnique)){var s=t.woPerson;t.woPerson||MWF.Actions.get("x_organization_assemble_control").getPerson(t.person,(function(t){s=t.data}),null,!1),o.personName=s.name,o.personEmployee=s.employee,o.personUnique=s.unique,o.personDn=s.distinguishedName,e||(o.woPerson={id:s.id,genderType:s.genderType,name:s.name,employee:s.employee,unique:s.unique,distinguishedName:s.distinguishedName,dn:s.distinguishedName,mail:s.mail,weixin:s.weixin,qq:s.qq,mobile:s.mobile,officePhone:s.officePhone})}return o},parsePersonData:function(t,e){return e?{id:t.id,name:t.name,employee:t.employee,distinguishedName:t.distinguishedName}:{id:t.id,genderType:t.genderType,name:t.name,employee:t.employee,unique:t.unique,distinguishedName:t.distinguishedName,dn:t.distinguishedName,mail:t.mail,weixin:t.weixin,qq:t.qq,mobile:t.mobile,officePhone:t.officePhone}},parseUnitData:function(t,e){return e?{id:t.id,name:t.name,distinguishedName:t.distinguishedName,levelName:t.levelName}:{id:t.id,name:t.name,unique:t.unique,distinguishedName:t.distinguishedName,dn:t.distinguishedName,typeList:t.typeList,shortName:t.shortName,level:t.level,levelName:t.levelName}},parseGroupData:function(t,e){return e?{id:t.id,name:t.name,distinguishedName:t.distinguishedName}:{id:t.id,name:t.name,unique:t.unique,distinguishedName:t.distinguishedName,dn:t.distinguishedName}},parseRoleData:function(t,e){return e?{id:t.id,name:t.name,distinguishedName:t.distinguishedName}:{id:t.id,name:t.name,unique:t.unique,distinguishedName:t.distinguishedName,dn:t.distinguishedName}},parseAttributeData:function(t,e){return e?{id:t.id,name:t.name,distinguishedName:t.distinguishedName,person:t.person,attributeList:Array.clone(t.attributeList)}:{id:t.id,description:t.description,name:t.name,unique:t.unique,distinguishedName:t.distinguishedName,dn:t.distinguishedName,person:t.person,attributeList:Array.clone(t.attributeList)}}},MWF.xDesktop.Actions=MWF.xDesktop.Actions||{},MWF.xDesktop.Actions.RestActions=new Class({Implements:[Events],initialize:function(t,e,i){this.actionPath=t,this.serviceName=e,this.root=i},listApplicationAddress:function(t,e){var i=this.actions.listAddress;i=this.actions.slotHost+i;var o=new MWF.xApplication.Common.Actions.RestActions.Callback(t,e);MWF.getJSON(i,o)},getAddress:function(t,e){var i=layout.serviceAddressList[this.serviceName];if(i)this.address=layout.config.app_protocol+"//"+(i.host||window.location.hostname)+(80==i.port?"":":"+i.port)+i.context;else{var o=layout.desktop.centerServer.host||window.location.hostname,s=layout.desktop.centerServer.port;this.address=layout.config.app_protocol+"//"+o+("80"==s?"":":"+s)+"/x_program_center"}return t&&t.apply(),this.address},getActions:function(t){if(this.actions)t&&t();else{var e=this.root?"/"+this.root+this.actionPath:MWF.defaultPath+this.actionPath;MWF.getJSON(e,function(e){this.actions=e,t&&t()}.bind(this),!1,!1,!1)}},invokeUri:function(t){this.address||this.getAddress();var e=this.address+t.uri,i=!1!==t.async,o=t.method||"GET",s=new MWF.xDesktop.Actions.RestActions.Callback(t.success,t.failure),n=t.data?JSON.encode(t.data):"",a=!0;!1===t.withCredentials&&(a=!1),MWF.restful(o,e,n,s,i,a)},invoke:function(t){if(window.importScripts&&window.isCompletionEnvironment)return null;this.address||this.getAddress();var e=null;return this.getActions(function(){var i=this.actions[t.name],o=i.method||"GET",s=i.uri,n=i.progress;if(t.parameter&&Object.each(t.parameter,(function(e,i){var o=new RegExp("{"+i+"}","g");s=!1===t.urlEncode?s.replace(o,e):s.replace(o,encodeURI(e))})),s=this.address+s,layout.config.mock&&layout.config.mock[this.serviceName]){var a=layout.config.mock[this.serviceName][o.toLowerCase()];if(a){o=a.to||o;var r=a.append;s+="/"==s.substr(s.length-1,1)?r:"/"+r}}var l=!1!==t.async,d=new MWF.xDesktop.Actions.RestActions.Callback(t.success,t.failure);if(i.enctype&&"formdata"==i.enctype.toLowerCase())e=this.invokeFormData(o,s,t.data,t.file,d,l,n);else{var c=t.data?JSON.encode(t.data):"",h=!0;!1===t.withCredentials&&(h=!1),e=MWF.restful(o,s,c,d,l,h,t.cache)}}.bind(this)),e},formDataUpdateProgress:function(){},invokeFormDataWithProgress:function(t,e,i,o,s,n,a,r){var l=null,d=new Date;t.upload.addEventListener("progress",function(e){this.updateProgress(e,t,l,d)}.bind(this),!1),t.upload.addEventListener("load",function(e){s&&this.transferComplete(e,t,l,d,s)}.bind(this),!1),t.upload.addEventListener("loadstart",function(e){this.transferStart(e,t,l)}.bind(this),!1),t.upload.addEventListener("error",function(e){this.transferFailed(e,t,l)}.bind(this),!1),t.upload.addEventListener("abort",function(e){this.transferCanceled(e,t,l)}.bind(this),!1),t.upload.addEventListener("timeout",function(e){this.transferCanceled(e,t,l)}.bind(this),!1),t.addEventListener("readystatechange",function(e){this.xhrStateChange(e,t,l,n)}.bind(this),!1),t.open(e,i,!1!==a),t.withCredentials=!0,s&&File.prototype.isPrototypeOf(s)&&(l=this.addFormDataMessage(s,!1,t,r)),t.send(o)},setMessageText:function(t,e){if(t&&t.message){t.contentNode.getFirst("div").getFirst("div").getFirst("div");t.contentNode.getFirst("div").getLast("div").set("text",e),t.dateNode.set("text",(new Date).format("db"))}t&&t.moduleMessage&&t.moduleMessage.setMessageText&&t.moduleMessage.setMessageText()},setMessageTitle:function(t,e){t&&t.message&&t.subjectNode.set("text",e),t&&t.moduleMessage&&t.moduleMessage.setMessageTitle&&t.moduleMessage.setMessageTitle()},clearMessageProgress:function(t){t&&t.message&&t.contentNode.getFirst("div").getFirst("div").destroy();t&&t.moduleMessage&&t.moduleMessage.clearMessageProgress&&t.moduleMessage.clearMessageProgress()},transferStart:function(t,e,i){i&&i.message&&(this.setMessageText(i,MWF.LP.desktop.action.sendStart),i.status="progress"),i&&i.moduleMessage&&i.moduleMessage.transferStart&&i.moduleMessage.transferStart(),this.fireEvent("loadstart")},transferFailed:function(t,e,i){i&&i.message&&(this.setMessageText(i,MWF.LP.desktop.action.sendError),this.setMessageTitle(i,MWF.LP.desktop.action.sendError),this.clearMessageProgress(i),i.status="failed"),i&&i.moduleMessage&&i.moduleMessage.transferFailed&&i.moduleMessage.transferFailed(),this.fireEvent("error")},transferCanceled:function(t,e,i){i&&i.message&&(this.setMessageText(i,MWF.LP.desktop.action.sendAbort),this.setMessageTitle(i,MWF.LP.desktop.action.sendAbort),this.clearMessageProgress(i),i.status="cancel"),i&&i.moduleMessage&&i.moduleMessage.transferCanceled&&i.moduleMessage.transferCanceled(),this.fireEvent("abort")},transferComplete:function(t,e,i,o,s){var n=(new Date).getTime()-o.getTime(),a=s.size/n,r="K/S";a>1024&&(r="M/S",a/=1024),a>1024&&(r="G/S",a/=1024),a=a.round(2);var l="";if(n>36e5){var d=n%36e5,c=d/6e4,h=d%6e4/1e3;l=""+(n/36e5).toInt()+MWF.LP.desktop.action.hour+c.toInt()+MWF.LP.desktop.action.minute+h.toInt()+MWF.LP.desktop.action.second}else if(n>6e4){h=n%6e4/1e3;l=""+(c=n/6e4).toInt()+MWF.LP.desktop.action.minute+h.toInt()+MWF.LP.desktop.action.second}else{l=""+(h=n/1e3).toInt()+MWF.LP.desktop.action.second}i&&i.message&&(this.setMessageText(i,MWF.LP.desktop.action.uploadComplete+"  "+MWF.LP.desktop.action.speed+": "+a+r+"  "+MWF.LP.desktop.action.time+": "+l,MWF.LP.desktop.action.uploadComplete),this.setMessageTitle(i,MWF.LP.desktop.action.uploadComplete),this.clearMessageProgress(i),i.status="completed"),i&&i.moduleMessage&&i.moduleMessage.transferComplete&&i.moduleMessage.transferComplete(),this.fireEvent("load")},updateProgress:function(t,e,i,o){var s=t.loaded/t.total*100,n=(new Date).getTime()-o.getTime(),a=t.loaded/n,r="K/S";if(a>1024&&(r="M/S",a/=1024),a>1024&&(r="G/S",a/=1024),a=a.round(2),i&&i.message&&i.contentNode){var l=i.contentNode.getFirst("div").getFirst("div").getFirst("div"),d=i.contentNode.getFirst("div").getLast("div");l.setStyle("width",s+"%"),d.set("text",MWF.LP.desktop.action.sendStart+": "+a+r)}i&&i.moduleMessage&&i.moduleMessage.updateProgress&&i.moduleMessage.updateProgress(s),this.fireEvent("progress")},xhrStateChange:function(t,e,i,o){if(4==e.readyState){var s=e.status;if((s=1223==s?204:s)>=200&&s<300){var n=JSON.decode(e.responseText);if(n)switch(n.type){case"success":var a="";"array"==(r=typeOf(n.data))&&(a=n.data[0].id),"object"==r&&(a=n.data.id),MWF.runCallback(o,"success",[{type:"success",id:a,messageId:i&&i.moduleMessage?i.moduleMessage.data.id:"",data:n.data},e.responseText]);break;case"warn":MWF.xDesktop.notice("info",{x:"right",y:"top"},n.errorMessage.join("\n"));var r;a="";"array"==(r=typeOf(n.data))&&(a=n.data[0].id),"object"==r&&(a=n.data.id),MWF.runCallback(o,"success",[{type:"success",id:a},e.responseText]);break;case"error":(l=i&&i.moduleMessage?i.moduleMessage.data.id:"")&&e&&(e.messageId=l),MWF.runCallback(o,"failure",[e])}else(l=i&&i.moduleMessage?i.moduleMessage.data.id:"")&&e&&(e.messageId=l),MWF.runCallback(o,"failure",[e])}else{var l;(l=i&&i.moduleMessage?i.moduleMessage.data.id:"")&&e&&(e.messageId=l),MWF.runCallback(o,"failure",[e])}}},invokeFormDataWithoutProgress:function(t,e,i,o,s,n,a,r){var l=null,d=new Date;t.addEventListener("readystatechange",function(e){4==t.readyState&&(s&&this.transferComplete(e,t,l,d,s),this.xhrStateChange(e,t,l,n))}.bind(this),!1),t.open(e,i,!0),t.withCredentials=!0,l=this.addFormDataMessage(s,!0,t,r),t.send(o),this.setMessageText(l,MWF.LP.desktop.action.sendStart)},invokeFormDataWithForm:function(t,e,i,o,s,n,a){MWF.O2UploadCallback=n,MWF.O2UploadCallbackFun=function(){MWF.O2UploadCallback&&MWF.O2UploadCallback()};var r=o.items[0].value.el.getParent();r.set("styles",{width:"500px",height:"300px","background-color":"#999999",position:"absolute",top:"100px",left:"100px","z-index":"30000",display:"block"}).inject(document.body);var l=new Element("form",{method:e,action:-1!=i.indexOf("?")?i+"&callback=MWF.O2UploadCallbackFun":i+"?callback=MWF.O2UploadCallbackFun",enctype:"multipart/form-data",target:"o2_upload_iframe"}).inject(r);new Element("iframe",{name:"o2_upload_iframe"}).inject(r);o.items.each(function(t){"string"==typeOf(t.value)?new Element("input",{name:t.name,value:t.value}).inject(l):(t.value.el.inject(l),t.value.el.set("name",t.name))}.bind(this));new Element("input",{type:"submit"}).inject(l)},invokeFormData:function(t,e,i,o,s,n,a){e=o2.filterUrl(e);var r=new COMMON.Browser.Request;return o&&i.append("fileName",o.name),"o2_formdata"===i.type?this.invokeFormDataWithForm(r,t,e,i,o,s,n):r.upload?this.invokeFormDataWithProgress(r,t,e,i,o,s,n,a):this.invokeFormDataWithoutProgress(r,t,e,i,o,s,n,a),r},addFormDataMessage:function(t,e,i,o){if(layout.desktop.message){var s="";s=e?'<div style="height: 20px; line-height: 20px">'+MWF.LP.desktop.action.sendReady+"</div></div>":'<div style="overflow: hidden"><div style="height: 3px; border:1px solid #999; margin: 3px 0px"><div style="height: 3px; background-color: #acdab9; width: 0px;"></div></div><div style="height: 20px; line-height: 20px">'+MWF.LP.desktop.action.sendReady+"</div></div>";var n={subject:MWF.LP.desktop.action.uploadTitle,content:(t.name?t.name+"<br/>":"")+s},a=layout.desktop.message.addMessage(n);a.close=function(e,o){if("progress"==this.status){flag=!1;var s=MWF.LP.desktop.action.cancelUpload.replace(/{name}/g,t.name||"");MWF.xDesktop.confirm("wram",o,MWF.LP.desktop.action.cancelUploadTitle,s,"400","140",(function(){i.abort(),this.close()}),(function(){this.close()}))}else a.closeItem(e,o)}}if(this.targetModule){var r=this.targetModule.module.addFormDataMessage(this.targetModule.file);a||(a={}),a.moduleMessage=r,this.targetModule=null}return o&&window.setTimeout(function(){layout.desktop.message&&(layout.desktop.message.isShow||layout.desktop.message.show())}.bind(this),300),a},getAuthentication:function(t,e){this.invoke({name:"authentication",async:!0,success:function(i,o){"anonymous"!=i.data.tokenType?t&&t(i):e&&e(null,o,i.message)},failure:e})},login:function(t,e,i){this.invoke({name:"login",async:!0,data:t,success:function(t,o){"anonymous"!=t.data.tokenType?e&&e(t):i&&i(null,o,t.message)},failure:i})},logout:function(t,e){this.invoke({name:"logout",async:!1,success:t,failure:e})}}),MWF.xDesktop.Actions.RestActions.Callback=new Class({initialize:function(t,e,i,o){this.success=t,this.failure=e,this.appendSuccess=i,this.appendFailure=o},onSuccess:function(t,e){if(!t)return this.doError(null,e,"");switch(t.type){case"success":return this.appendSuccess&&this.appendSuccess(t),this.success?this.success(t,e):t;case"warn":return MWF.xDesktop.notice("info",{x:"right",y:"top"},t.errorMessage.join("\n")),this.appendSuccess&&this.appendSuccess(t),this.success?this.success(t):t;case"error":return this.doError(null,e,t.message)}},onRequestFailure:function(t){return this.doError(t,"","")},onFailure:function(t,e,i){return this.doError(t,e,i)},onError:function(t,e){return this.doError(null,t,e)},doError:function(t,e,i){if(this.appendFailure&&this.appendFailure(t,e,i),this.failure&&this.failure.owner){if(this.failure.reject||this.failure.rejectList&&this.failure.rejectList.length)return this.failure(t,e,i);this.failure=null}else if(this.failure)return this.failure(t,e,i);if(!this.failure&&!this.appendFailure&&0!=t.status){var o=i;if(t){var s=JSON.decode(t.responseText);o=s?s.message.trim()||"request json error":"request json error: "+t.responseText}o=(o=o.replace(/\</g,"&lt;")).replace(/\</g,"&gt;"),layout.session&&layout.session.user&&MWF.xDesktop.notice("error",{x:"right",y:"top"},o)}return Promise.reject(t)}}),MWF.xAction=MWF.xAction||{},MWF.xAction.RestActions=MWF.Actions={actions:{},loadedActions:{},get:function(t){if(this.actions[t])return this.actions[t];var e=null,i=o2.session.path+"/xAction/services/"+t+".json";return MWF.getJSON(i,function(t){e=t}.bind(this),!1,!1,!1),!MWF.xAction.RestActions.Action[t]&&e.clazz&&MWF.require("MWF.xAction.services."+e.clazz,null,!1),MWF.xAction.RestActions.Action[t]||(MWF.xAction.RestActions.Action[t]=new Class({Extends:MWF.xAction.RestActions.Action})),this.actions[t]=new MWF.xAction.RestActions.Action[t](t,e),this.actions[t]},load:function(t){if(this.loadedActions[t])return this.loadedActions[t];var e=null,i=this.getHost(t)+"/"+t+"/describe/api.json";if(MWF.getJSON(i,function(t){e=t.jaxrs}.bind(this),!1,!1,!1),e){var o={};return e.each(function(e){if(e.methods&&e.methods.length){var i={};e.methods.each(function(t){var e={uri:"/"+t.uri};t.method&&(e.method=t.method),t.enctype&&(e.enctype=t.enctype),i[t.name]=e}.bind(this)),o[e.name]=new MWF.xAction.RestActions.Action(t,i)}}.bind(this)),this.loadedActions[t]=o,o}return null},async:function(t,e){var i="function"===o2.typeOf(e)?e:e.success,o="function"===o2.typeOf(e)?null:e.failure,s=[],n=t.length,a=new Array(n-1),r=function(){s.length===n&&i.apply(this,a)};t.each((function(t,e){var i=t.par||[];i.push((function(t){a[e]=t,s.push(!0),r()})),i.push((function(t,e,i){s.push(!1),o?o():function(t,e,i){if(0!=t.status){var o=i;if(t){var s=JSON.decode(t.responseText);o=s?s.message.trim()||"request json error":"request json error: "+t.responseText}MWF.xDesktop.notice("error",{x:"right",y:"top"},o)}}(t,0,i),r()})),i.push(!0),i.push(t.urlEncode),i.push(t.cache),t.action[t.subAction][t.name].apply(t.action[t.subAction],i)}))},invokeAsync2:function(t,e){var i="function"===o2.typeOf(e)?e:e.success,o="function"===o2.typeOf(e)?null:e.failure,s=[],n=t.length,a=new Array(n-1),r=function(){s.length===n&&i.apply(this,a)};t.each((function(t,e){var i=t.par||[];i.push((function(t){a[e]=t,s.push(!0),r()})),i.push((function(t,e,i){s.push(!1),o?o():function(t,e,i){if(0!=t.status){var o=i;if(t){var s=JSON.decode(t.responseText);o=s?s.message.trim()||"request json error":"request json error: "+t.responseText}MWF.xDesktop.notice("error",{x:"right",y:"top"},o)}}(t,0,i),r()})),i.push(!0),i.push(t.urlEncode),i.push(t.cache),t.action[t.name].apply(t.action,i)}))},getHost:function(t){var e=layout.serviceAddressList[t],i="";if(e)i=layout.config.app_protocol+"//"+(e.host||window.location.hostname)+(80==e.port?"":":"+e.port);else{var o=layout.desktop.centerServer.host||window.location.hostname,s=layout.desktop.centerServer.port;i=layout.config.app_protocol+"//"+o+("80"==s?"":":"+s)}return i},invokeAsync:function(t,e){var i=t.length,o=arguments.length-2,s=[],n=new Array(i-1),a=arguments,r="function"===o2.typeOf(e)?e:e.success,l="function"===o2.typeOf(e)?null:e.failure,d=function(){s.length===i&&r.apply(this,n)},c=function(t,e,i){if(0!=t.status){var o=i;if(t){var s=JSON.decode(t.responseText);o=s?s.message.trim()||"request json error":"request json error: "+t.responseText}MWF.xDesktop.notice("error",{x:"right",y:"top"},o)}};t.each((function(t,e){var i=e<o?a[e+2]:a[o+1];if(i){var r="array"===o2.typeOf(i)?i:[i];r.unshift((function(t,e,i){s.push(!1),l?l():c(t,e,i),d()})),r.unshift((function(t){n[e]=t,s.push(!0),d()}));t.action[t.name].apply(t.action,r)}else t.action[t.name]((function(){n[e]=json,s.push(!0),d()}),(function(t,e,i){s.push(!1),l?l():c(t,e,i),d()}))}))}},MWF.xAction.RestActions.Action=new Class({initialize:function(t,e){this.action=new MWF.xDesktop.Actions.RestActions("/xAction/services/"+t+".json",t,""),this.action.actions=e,Object.each(this.action.actions,function(t,e){t.uri&&(this[e]||this.createMethod(t,e))}.bind(this))},createMethod:function(t,e){var i=t.uri,o=new RegExp("{.+?}","g"),s=i.match(o),n=[];s&&(n=s.map((function(t){return t.substring(1,t.length-1)}))),this[e]=this.invokeFunction(t,n,e)},invokeFunction:function(t,e,i){return function(){var o,s,n,a,r,l=e.length-1,d=arguments.length,c=arguments,h={};return"function"===typeOf(c[0])?(l=-1,o=d>++l?c[l]:null,s=d>++l?c[l]:null,e.each((function(t,e){h[t]=d>++l?c[l]:null})),!t.method||"post"!==t.method.toLowerCase()&&"put"!==t.method.toLowerCase()||(t.enctype&&"formdata"===t.enctype.toLowerCase()?(a=d>++l?c[l]:null,r=d>++l?c[l]:null):a=d>++l?c[l]:null),n=d>++l?c[l]:null,urlEncode=!(d>++l)||c[l],cache=d>++l?c[l]:"ie"!=Browser.name):(e.each((function(t,e){h[t]=d>e?c[e]:null})),!t.method||"post"!==t.method.toLowerCase()&&"put"!==t.method.toLowerCase()||(t.enctype&&"formdata"===t.enctype.toLowerCase()?(a=d>++l?c[l]:null,r=d>++l?c[l]:null):a=d>++l?c[l]:null),o=d>++l?c[l]:null,s=d>++l?c[l]:null,n=d>++l?c[l]:null,urlEncode=!(d>++l)||c[l],cache=d>++l?c[l]:"ie"!=Browser.name),this.invoke(t,{name:i,async:n,data:a,file:r,parameter:h,success:o,failure:s,urlEncode:urlEncode,cache:cache})}.bind(this)},invoke:function(t,e){return this.action.invoke(e)}}),MWF.xDesktop=MWF.xDesktop||{},MWF.xApplication=MWF.xApplication||{},MWF.xDesktop.Access=MWF.AC={companyList:null,action:null,getRoleList:function(){this.roleList||(this.roleList=[],layout.desktop.session.user.roleList.each(function(t){this.roleList.push(t.substring(0,t.indexOf("@")).toLowerCase())}.bind(this)))},isAdministrator:function(){return this.getRoleList(),"xadmin"===layout.desktop.session.user.name.toLowerCase()||-1!==this.roleList.indexOf("manager")},isProcessManager:function(){return!!layout.desktop.session.user.roleList&&(this.getRoleList(),this.isAdministrator()||-1!==this.roleList.indexOf("processplatformmanager"))},isPortalManager:function(){return!!layout.desktop.session.user.roleList&&(this.getRoleList(),this.isAdministrator()||-1!==this.roleList.indexOf("portalmanager"))},isQueryManager:function(){return!!layout.desktop.session.user.roleList&&(this.getRoleList(),this.isAdministrator()||-1!==this.roleList.indexOf("querymanager"))},isOrganizationManager:function(){return!!layout.desktop.session.user.roleList&&(this.getRoleList(),this.isAdministrator()||-1!==this.roleList.indexOf("organizationmanager"))},isMessageManager:function(){return!!layout.desktop.session.user.roleList&&(this.getRoleList(),this.isAdministrator()||-1!==this.roleList.indexOf("messagemanager"))},isServiceManager:function(){return!!layout.desktop.session.user.roleList&&(this.getRoleList(),this.isAdministrator()||-1!==this.roleList.indexOf("servicemanager"))},isUnitManager:function(){return!!layout.desktop.session.user.roleList&&(this.getRoleList(),this.isAdministrator()||-1!==this.roleList.indexOf("unitmanager"))},isGroupManager:function(){return!!layout.desktop.session.user.roleList&&(this.getRoleList(),this.isAdministrator()||-1!==this.roleList.indexOf("groupmanager"))},isRoleManager:function(){return!!layout.desktop.session.user.roleList&&(this.getRoleList(),this.isAdministrator()||-1!==this.roleList.indexOf("rolemanager"))},isPersonManager:function(){return!!layout.desktop.session.user.roleList&&(this.getRoleList(),this.isAdministrator()||-1!==this.roleList.indexOf("personmanager"))},isGroupCreator:function(){return!!layout.desktop.session.user.roleList&&(this.getRoleList(),-1!==this.roleList.indexOf("groupcreator"))},isProcessPlatformCreator:function(){return!!this.isAdministrator()||(!!this.isProcessManager()||!!layout.desktop.session.user.roleList&&(this.getRoleList(),-1!==this.roleList.indexOf("processplatformcreator")))},isPortalPlatformCreator:function(){return!!this.isAdministrator()||(!!this.isPortalManager()||!!layout.desktop.session.user.roleList&&(this.getRoleList(),-1!==this.roleList.indexOf("portalcreator")))},isQueryPlatformCreator:function(){return!!this.isAdministrator()||(!!this.isQueryManager()||!!layout.desktop.session.user.roleList&&(this.getRoleList(),-1!==this.roleList.indexOf("querycreator")))},isApplicationManager:function(t){this.isAdministrator()&&t.yes&&t.yes()},isCMSManager:function(){return this.getRoleList(),this.isAdministrator()||-1!==this.roleList.indexOf("cmsmanager")},isBBSManager:function(){return this.getRoleList(),this.isAdministrator()||-1!==this.roleList.indexOf("bbsmanager")||-1!==this.roleList.indexOf("bssmanager")},isOKRManager:function(){return this.getRoleList(),this.isAdministrator()||-1!==this.roleList.indexOf("okrmanager")},isCRMManager:function(){return this.getRoleList(),this.isAdministrator()||-1!==this.roleList.indexOf("crmmanager")},isAttendanceManager:function(){return this.getRoleList(),this.isAdministrator()||-1!==this.roleList.indexOf("attendancemanager")},isMeetingAdministrator:function(){return this.getRoleList(),this.isAdministrator()||-1!==this.roleList.indexOf("meetingmanager")},isHotPictureManager:function(){return this.getRoleList(),this.isAdministrator()||-1!==this.roleList.indexOf("hotpicturemanager")},isPersonEditor:function(t){return!!this.isAdministrator()||(!!this.isPersonManager()||!(!t.list||!t.list.length||-1===t.list.indexOf(layout.desktop.session.user.id)))},isCompanyEditor:function(t){this.isAdministrator()||this.isCompanyCreator()?t.yes&&t.yes():this.getCompanyList(function(){t.id?-1!==this.companyList.indexOf(t.id)?t.yes&&t.yes():t.no&&t.no():this.companyList.length>0?t.yes&&t.yes():t.no&&t.no()}.bind(this))},isDepartmentEditor:function(t){this.isAdministrator()||this.isCompanyCreator()?t.yes&&t.yes():this.getCompanyList(function(){t.id&&-1!==this.companyList.indexOf(t.id)?t.yes&&t.yes():t.no&&t.no()}.bind(this))},getCompanyList:function(t){null===this.companyList?(this.getAction(),this.action.getCompanyAccess(function(e){e.data?this.companyList=e.data:this.companyList=[],t&&t()}.bind(this),null,layout.desktop.session.user.id)):t&&t()},getAction:function(){this.action||(this.action=MWF.Actions.get("x_organization_assemble_control"))}},o2.require("MWF.widget.Dialog",null,!1),o2.xDesktop.Dialog=o2.DDL=new Class({Extends:o2.widget.Dialog,options:{zindex:null,maxHeightPercent:"98%"},_markShow:function(){if(this.options.mark){if(!this.markNode){var t=MWF.getMarkSize(this.options.maskNode),e=this.options.container||$(document.body);this.markNode=new Element("iframe",{styles:this.css.mark}).inject(e),this.markNode.set("styles",{height:t.y,width:t.x}),this.markNode_up||(this.markNode_up=new Element("div",{styles:this.css.mark}).inject(e)),this.markNode_up.set("styles",{height:t.y,width:t.x})}this.markNode.setStyle("display","block")}},setZindex:function(){"number"===o2.typeOf(this.options.zindex)&&this.options.zindex>0&&(this.css=Object.clone(this.css),this.css.from["z-index"]=this.options.zindex.toString(),this.css.to["z-index"]=this.options.zindex.toString(),this.css.mark["z-index"]=(this.options.zindex-1).toString())},getDialogNode:function(){this.setZindex(),this.width=this.options.width,this.height=this.options.height,this.node.set("styles",this.css.from);var t=this.options.container||$(document.body);this.node.inject(t),this.title=this.node.getElement(".MWF_dialod_title"),this.titleCenter=this.node.getElement(".MWF_dialod_title_center"),this.titleText=this.node.getElement(".MWF_dialod_title_text"),this.titleAction=this.node.getElement(".MWF_dialod_title_action"),this.content=this.node.getElement(".MWF_dialod_content"),this.bottom=this.node.getElement(".MWF_dialod_bottom"),this.resizeNode=this.node.getElement(".MWF_dialod_bottom_resize"),this.button=this.node.getElement(".MWF_dialod_button"),this.options.buttonList&&0!==this.options.buttonList.length||this.options.buttons?(this.okButton=this.node.getElement(".MWF_dialod_ok_button"),this.cancelButton=this.node.getElement(".MWF_dialod_cancel_button")):(this.button.setStyle("display","none"),this.buttonDisable=!0),this.backAction=this.node.getElement(".MWF_dialod_Action_back"),this.options.isTitle||(this.title.destroy(),this.title=null,this.titleCenter=null,this.titleRefresh=null,this.titleText=null,this.titleAction=null),this.title&&this.setTitleEvent(),this.content&&this.getContent(),this.titleAction&&this.getAction(),this.resizeNode&&this.setResizeNode(),this.content&&this.setContentSize(),this.backAction&&this.backAction.addEvent("click",this.close.bind(this))},getButton:function(){for(i in this.options.buttons)new Element("input",{type:"button",value:i,styles:this.css.button,class:"mainColor_bg",events:{click:this.options.buttons[i].bind(this)}}).inject(this.button);this.options.buttonList&&this.options.buttonList.each(function(t){var e,i=this.css.button;"ok"===t.type&&this.css.okButton&&(i=this.css.okButton),"cancel"===t.type&&this.css.cancelButton&&(i=this.css.cancelButton),t.styles&&(i=t.styles),"ok"===t.type&&this.okButton?(e=this.okButton).show():"cancel"===t.type&&this.cancelButton?(e=this.cancelButton).show():e=t.tag?new Element(t.tag,{}).inject(this.button):new Element("input",{type:"button"}).inject(this.button),"button"===e.get("type")?e.set({value:t.text,title:t.title,styles:i,class:"cancel"!==t.type?"mainColor_bg":"",events:{click:function(e){t.action.call(this,this,e)}.bind(this)}}):e.set({text:t.text,title:t.title,styles:i,class:"cancel"!==t.type?"mainColor_bg":"",events:{click:function(e){t.action.call(this,this,e)}.bind(this)}})}.bind(this))},setTitleEvent:function(){var t;this.options.isMove&&(layout.app&&(t=layout.app.content),layout.desktop.currentApp&&(t=layout.desktop.currentApp.content),this.containerDrag=new Drag.Move(this.node,{handle:this.title,container:this.options.positionNode||this.options.container||this.markNode||t,snap:5}))},getAction:function(){this.options.isClose&&(this.closeAction=new Element("div",{styles:this.css.closeAction}).inject(this.titleAction),this.closeAction.addEvent("click",this.close.bind(this))),this.options.isMax&&(this.maxAction=new Element("div",{styles:this.css.maxAction}).inject(this.titleAction),this.maxAction.addEvent("click",this.maxSize.bind(this)),this.restoreAction=new Element("div",{styles:this.css.restoreAction}).inject(this.titleAction),this.restoreAction.hide(),this.restoreAction.addEvent("click",this.restoreSize.bind(this)),this.title&&this.title.addEvent("dblclick",function(){this.switchMax()}.bind(this)))},switchMax:function(){this.isMax?this.restoreSize():this.maxSize()},maxSize:function(){this.oldNodeSize||(this.oldNodeSize={width:this.nodeWidth,height:this.nodeHeight}),this.oldContentSize||(this.oldContentSize={width:this.contentWidth,height:this.contentHeight});var t=$(document.body);layout.desktop.currentApp?t=layout.desktop.currentApp.content:this.options.container&&this.options.container.getSize().y<$(document.body).getSize().y&&(t=this.options.container);var e=t.getSize();this.options.width=e.x,this.options.height=e.y,this.setContentSize(e.y,e.x),this.node.setStyles({width:e.x+"px",height:e.y+"px",top:"0px",left:"0px"}),this.maxAction.setStyle("display","none"),this.restoreAction.setStyle("display",""),this.isMax=!0,this.fireEvent("max")},restoreSize:function(){this.contentHeight=this.oldContentSize.height,this.contentWidth=this.oldContentSize.width,this.nodeHeight=this.oldNodeSize.height,this.nodeWidth=this.oldNodeSize.width,this.content.setStyles(this.oldContentSize),this.node.setStyles(this.oldNodeSize),this.reCenter(),this.maxAction.setStyle("display",""),this.restoreAction.setStyle("display","none"),this.isMax=!1,this.fireEvent("restore")},reCenter:function(){var t;t=null===this.node.offsetParent?this.node.measure((function(){return this.getSize()})):this.node.getSize(),this.options.positionWidth&&(t.x=parseInt(this.options.positionWidth)),this.options.positionHeight&&(t.y=parseInt(this.options.positionHeight));var e=$(document.body);this.options.positionNode&&this.options.positionNode.getSize().y<$(document.body).getSize().y?e=this.options.positionNode:layout.desktop.currentApp?e=layout.desktop.currentApp.content:this.options.container&&this.options.container.getSize().y<$(document.body).getSize().y&&(e=this.options.container);var i=o2.getCenter(t,e,e);i.y<(this.options.minTop||0)&&(i.y=this.options.minTop||0),this.options.top=i.y,this.options.left=i.x,this.css.to.top=this.options.top+"px",this.css.to.left=this.options.left+"px",this.node.setStyles({top:this.css.to.top,left:this.css.to.left})},getOffsetY:function(t){return(t.getStyle("margin-top").toInt()||0)+(t.getStyle("margin-bottom").toInt()||0)+(t.getStyle("padding-top").toInt()||0)+(t.getStyle("padding-bottom").toInt()||0)+(t.getStyle("border-top-width").toInt()||0)+(t.getStyle("border-bottom-width").toInt()||0)},getOffsetX:function(t){return(t.getStyle("margin-left").toInt()||0)+(t.getStyle("margin-right").toInt()||0)+(t.getStyle("padding-left").toInt()||0)+(t.getStyle("padding-right").toInt()||0)+(t.getStyle("border-left-width").toInt()||0)+(t.getStyle("border-right-width").toInt()||0)},getMarginY:function(t){return(t.getStyle("margin-top").toInt()||0)+(t.getStyle("margin-bottom").toInt()||0)},getMarginX:function(t){return(t.getStyle("margin-left").toInt()||0)+(t.getStyle("margin-right").toInt()||0)},setContentHeightAuto:function(){var t=this.getMaxHeight(),e=0,i=0;this.title&&(e=e+this.getOffsetY(this.title)+this.title.getSize().y),this.bottom&&(e=e+this.getOffsetY(this.bottom)+this.bottom.getSize().y),this.button&&!this.buttonDisable&&(e=e+this.getOffsetY(this.button)+this.button.getSize().y),i=this.content?(e+=this.getMarginY(this.content))+this.content.getSize().y:e,"number"===typeOf(t)&&i>t?(this.options.height=t,this.options.contentHeight=null,this.options.fromTop=this.options.fromTop.toFloat()-e/2,this.options.top=this.options.top.toFloat()-e/2,this.css.to.height=t+"px",this.css.to.top=this.options.top+"px",this.css.from.top=this.options.fromTop+"px",this.node.setStyles({height:t}),this.contentHeight=t-e,this.content&&this.content.setStyles({height:t-e,"overflow-y":"auto"})):(this.options.height=i,this.options.contentHeight=null,this.options.fromTop=this.options.fromTop.toFloat()-e/2,this.options.top=this.options.top.toFloat()-e/2,this.css.to.height=i+"px",this.css.to.top=this.options.top+"px",this.css.from.top=this.options.fromTop+"px",this.node.setStyles({height:i}),this.contentHeight=i-e,this.content&&this.content.setStyles({height:i-e,"overflow-y":"hidden"}))},getMaxHeight:function(){var t,e;if(this.options.maxHeightPercent&&(t=this.options.maxHeightPercent,"string"===typeOf(t)&&"%"===t.substr(t.length-1,1))){var i=(this.options.positionNode||this.options.container||$(document.body)).getSize().y;(t=parseInt(i*parseInt(t)/100))+(this.options.minTop||0)>i&&(t=i-this.options.minTop)}return this.options.maxHeight&&"NaN"!==parseFloat(this.options.maxHeight).toString()?(e=parseFloat(this.options.maxHeight),"number"===typeOf(t)&&(e=Math.min(e,t))):"number"===typeOf(t)&&(e=t),e},getNodeSize:function(){return{height:this.nodeHeight+"px",width:this.nodeWidth+"px"}},getContentSize:function(t,e){var i,o;if(t)this.nodeHeight=t;else if(this.options.contentHeight)i=t=this.options.contentHeight.toFloat(),this.contentHeight=t;else{t=this.options.height.toFloat();var s=this.getMaxHeight();"number"===typeOf(s)&&s<t&&(t=s),this.nodeHeight=t}e?this.nodeWidth=e:this.options.contentWidth?(o=e=this.options.contentWidth.toFloat(),this.contentWidth=e):(e=this.options.width.toFloat(),this.nodeWidth=e);var n,a=0;if(this.title){var r=this.title.getSize().y,l=this.title.getStyle("padding-top").toFloat(),d=this.title.getStyle("padding-bottom").toFloat(),c=this.title.getStyle("margin-top").toFloat(),h=this.title.getStyle("margin-bottom").toFloat();a+=r+l+d+c+h}if(this.bottom){var p=this.bottom.getSize().y,u=this.bottom.getStyle("padding-top").toFloat(),m=this.bottom.getStyle("padding-bottom").toFloat(),f=this.bottom.getStyle("margin-top").toFloat(),g=this.bottom.getStyle("margin-bottom").toFloat();a+=p+u+m+f+g}if(this.button&&!this.buttonDisable){var y=this.button.getSize().y,x=this.button.getStyle("padding-top").toFloat(),b=this.button.getStyle("padding-bottom").toFloat(),w=this.button.getStyle("margin-top").toFloat(),v=this.button.getStyle("margin-bottom").toFloat();a+=y+x+b+w+v}var A=this.content.getStyle("padding-top").toFloat(),S=this.content.getStyle("padding-bottom").toFloat(),k=this.content.getStyle("margin-top").toFloat(),F=this.content.getStyle("margin-bottom").toFloat();if(a+=A+S+k+F,i?i=i+a+2:t-=a,n=this.content.getStyle("padding-left").toFloat()+this.content.getStyle("padding-right").toFloat()+this.content.getStyle("margin-left").toFloat()+this.content.getStyle("margin-right").toFloat(),o?o+=n:e-=n,i?(this.nodeHeight=i,this.options.height=i,this.options.contentHeight=null,this.options.fromTop=this.options.fromTop.toFloat()-a/2,this.options.top=this.options.top.toFloat()-a/2,this.css.to.height=i+"px",this.css.to.top=this.options.top+"px",this.css.from.top=this.options.fromTop+"px"):this.contentHeight=t,o?(this.nodeWidth=o,this.options.width=o,this.options.contentWidth=null,this.options.fromLeft=this.options.fromLeft.toFloat()-n/2,this.options.left=this.options.left.toFloat()-n/2,this.css.to.width=o+"px",this.css.to.left=this.options.left+"px",this.css.from.left=this.options.fromLeft+"px"):this.contentWidth=e,!t||t<0){this.content.setStyles({overflow:"hidden",height:"auto",width:e+"px"});var M=(t=this.content.getSize().y)+r+l+d+c+h;M=(M=(M=M+p+u+m+f+g)+y+x+b+w+v)+A+S+k+F,this.css.to.height=M}return{height:t+"px",width:e+"px"}},setContentHeight:function(t){var e;if(t)this.nodeHeight=t;else if(this.options.contentHeight)e=t=this.options.contentHeight.toFloat(),this.contentHeight=t;else{t=this.options.height.toFloat();var i=this.getMaxHeight();"number"===typeOf(i)&&i<t&&(t=i),this.nodeHeight=t}var o=0;if(this.title){var s=this.title.getSize().y,n=this.title.getStyle("padding-top").toFloat(),a=this.title.getStyle("padding-bottom").toFloat(),r=this.title.getStyle("margin-top").toFloat(),l=this.title.getStyle("margin-bottom").toFloat();o+=s+n+a+r+l}if(this.bottom){var d=this.bottom.getSize().y,c=this.bottom.getStyle("padding-top").toFloat(),h=this.bottom.getStyle("padding-bottom").toFloat(),p=this.bottom.getStyle("margin-top").toFloat(),u=this.bottom.getStyle("margin-bottom").toFloat();o+=d+c+h+p+u}if(this.button&&!this.buttonDisable){var m=this.button.getSize().y,f=this.button.getStyle("padding-top").toFloat(),g=this.button.getStyle("padding-bottom").toFloat(),y=this.button.getStyle("margin-top").toFloat(),x=this.button.getStyle("margin-bottom").toFloat();o+=m+f+g+y+x}var b=this.content.getStyle("padding-top").toFloat(),w=this.content.getStyle("padding-bottom").toFloat(),v=this.content.getStyle("margin-top").toFloat(),A=this.content.getStyle("margin-bottom").toFloat();if(o+=b+w+v+A,e?e=e+o+2:t-=o,e?(this.nodeHeight=e,this.options.height=e,this.options.contentHeight=null,this.options.fromTop=this.options.fromTop.toFloat()-o/2,this.options.top=this.options.top.toFloat()-o/2,this.css.to.height=e+"px",this.css.to.top=this.options.top+"px",this.css.from.top=this.options.fromTop+"px"):this.contentHeight=t,!t||t<0){this.content.setStyles({overflow:"hidden",height:"auto"});var S=(t=this.content.getSize().y)+s+n+a+r+l;S=(S=(S=S+d+c+h+p+u)+m+f+g+y+x)+b+w+v+A,this.css.to.height=S}else this.content.setStyles({height:t})},setContentWidthAuto:function(){var t=this.options.maxWidth||"100%";if("string"===typeOf(t)&&"%"===t.substr(t.length-1,1)){var e=(this.options.positionNode||this.options.container||$(document.body)).getSize().x;t=parseInt(e*parseInt(t)/100)}var i=0,o=0;(o=this.content?(i+=this.getMarginX(this.content))+this.content.getSize().x:i)>t?(this.nodeWidth=t,this.options.width=t,this.options.contentWidth=null,this.options.fromLeft=this.options.fromLeft.toFloat()-i/2,this.options.left=this.options.left.toFloat()-i/2,this.css.to.width=t+"px",this.css.to.left=this.options.left+"px",this.css.from.left=this.options.fromLeft+"px",this.node.setStyles({width:t}),this.contentWidth=t-this.getOffsetX(this.content),this.content&&this.content.setStyles({width:this.contentWidth,"overflow-x":"auto"})):(this.nodeWidth=o,this.options.width=o,this.options.contentHeight=null,this.options.fromLeft=this.options.fromLeft.toFloat()-i/2,this.options.left=this.options.left.toFloat()-i/2,this.css.to.width=o+"px",this.css.to.left=this.options.left+"px",this.css.from.left=this.options.fromLeft+"px",this.node.setStyles({width:o}),this.contentWidth=o-this.getOffsetX(this.content),this.content&&this.content.setStyles({width:this.contentWidth,"overflow-x":"hidden"}))},setContentWidth:function(t){var e;t?this.nodeWidth=t:this.options.contentWidth?(e=t=this.options.contentWidth.toFloat(),this.contentWidth=t):(t=this.options.width.toFloat(),this.nodeWidth=t);var i;if(i=this.content.getStyle("padding-left").toFloat()+this.content.getStyle("padding-right").toFloat()+this.content.getStyle("margin-left").toFloat()+this.content.getStyle("margin-right").toFloat(),e)e+=i;else{var o=t;t-=i}e?(this.nodeWidth=e,this.options.width=e,this.options.contentWidth=null,this.css.to.left=this.options.left+"px",this.css.from.left=this.options.fromLeft+"px",this.css.to.width=e+"px",this.options.fromLeft=this.options.fromLeft.toFloat()-i/2,this.options.left=this.options.left.toFloat()-i/2,this.node.setStyle("width",e)):(this.contentWidth=t,this.node.setStyle("width",o)),this.content.setStyles({width:t})},setContentSize:function(t,e){var i=t;i||(i=this.options.contentHeight?this.options.contentHeight:this.height);var o=e;o||(o=this.options.contentWidth?this.options.contentWidth:this.width),"auto"===i||"auto"===o?("auto"===i?this.setContentHeightAuto():this.setContentHeight(t),"auto"===o?this.setContentWidthAuto():this.setContentWidth(e)):(this.content.setStyles(this.getContentSize(t,e)),this.content.setStyle("width","auto"))}}),o2.DL.open=function(t){var e;t||(t={}),t.style||(t.style="user"),t.duration||(t.duration=200),!1!==t.isClose&&(t.isClose=!0),t.width&&"auto"!=t.width||t.contentWidth||t.content&&(t.content.show(),e=t.content.getComputedSize(),t.contentWidth=e.totalWidth.toFloat()),t.height&&"auto"!=t.height||t.contentHeight||t.content&&(e||(t.content.show(),e=t.content.getComputedSize()),t.contentHeight=e.totalHeight.toFloat()+2),t.width||t.contentWidth||(t.width=300),t.height||t.contentHeight||(t.height=150),!t.container&&layout&&layout.desktop.currentApp&&(t.container=layout.desktop.currentApp.content);var i=t.positionNode||t.container||$(document.body);if("auto"!==t.width&&"auto"!==t.height){if("string"==typeOf(t.width)&&1<t.width.length&&"%"==t.width.substr(t.width.length-1,1)&&(t.width=parseInt(i.getSize().x*parseInt(t.width,10)/100,10)),"string"==typeOf(t.height)&&1<t.height.length&&"%"==t.height.substr(t.height.length-1,1)&&(t.height=parseInt(i.getSize().y*parseInt(t.height,10)/100,10)),void 0===t.top&&void 0===t.left){var o=o2.getCenter({x:t.width||t.contentWidth,y:t.height||t.contentHeight+120},i,i);t.top=o.y<0?0:o.y,t.left=o.x<0?0:o.x}if(void 0===t.fromTop&&void 0===t.fromLeft){o=o2.getCenter({x:0*(t.width||t.contentWidth),y:0*(t.height||t.contentHeight+120)},i,i);t.fromTop=o.y<0?0:o.y,t.fromLeft=o.x<0?0:o.x}t.offset&&(t.offset.y&&(t.top=t.top+t.offset.y.toInt(),t.fromTop=t.fromTop+t.offset.y.toInt()),t.offset.x&&(t.left=t.left+t.offset.x.toInt(),t.fromLeft=t.fromLeft+t.offset.x.toInt())),t.top<0&&(t.top=0),t.left<0&&(t.left=0),t.fromTop<0&&(t.fromTop=0),t.fromLeft<0&&(t.fromLeft=0)}else void 0===t.top&&(t.top=0),void 0===t.left&&(t.left=0),void 0===t.fromTop&&(t.fromTop=0),void 0===t.fromLeft&&(t.fromLeft=0);t.mark=!(!1===t.mask);var s=new o2.DDL(t);return"auto"!==t.width&&"auto"!==t.height||s.reCenter(),s.show(),s},MWF.xDesktop=MWF.xDesktop||{},MWF.require("MWF.widget.Menu",null,!1),MWF.xDesktop.Menu=new Class({Extends:MWF.widget.Menu,Implements:[Options,Events],options:{style:"default",event:"contextmenu",disable:!1,top:-1,left:-1,container:null,where:{x:"left",y:"bottom"}},load:function(){this.fireEvent("queryLoad")&&(this.node=new Element("div#menu"),this.node.set("styles",this.css.container),this.options.event&&this.target&&this.target.addEvent(this.options.event,this.showIm.bind(this)),this.borderNode=new Element("div.MWFMenu",{styles:this.css.borderNode}).inject(this.options.container||$(document.body)),this.node.inject(this.borderNode),this.hide=this.hideMenu.bind(this),this.fireEvent("postLoad"))},showIm:function(t){if(!this.options.disable&&(this.hide=this.hideIm.bind(this),this.fireEvent("queryShow",[t]))){if(this.tmpBodyOncontextmenu=document.body.oncontextmenu,document.body.oncontextmenu=function(){return!1},this.pauseCount<=0){this.setItemWidth();var e=MWF.xDesktop.zIndexPool.zIndex;this.borderNode.setStyles({display:"block",opacity:this.options.opacity||1,"z-index":e}),this.setPosition(t),$(document.body).removeEvent("mousedown",this.hide),$(document.body).addEvent("mousedown",this.hide),this.show=!0}else this.pauseCount--;var i=this.node.getPosition(document.body),o=this.node.getSize(),s=document.body.getSize();if(i.y+o.y+10>s.y){var n=s.y-i.y-10;this.node.setStyle("height",n+"px"),this.node.addEvent("mousedown",(function(t){t.stopPropagation()}))}this.fireEvent("postShow")}},hideIm:function(t){this.fireEvent("queryHide")&&($(document.body).removeEvent("mousedown",this.hide),this.borderNode.set("styles",{display:"none",opacity:0}),this.show=!1,document.body.oncontextmenu=this.tmpBodyOncontextmenu,this.tmpBodyOncontextmenu=null,t&&this.topMenu&&this.topMenu.hideIm(),this.fireEvent("postHide"))},setPosition:function(t){var e=this.target.getPosition(this.target.getOffsetParent()),i=this.target.getSize();this.borderNode.show();var o=this.borderNode.getSize(),s=0,n=0;switch(this.options.where.x.toLowerCase()){case"right":s=e.x-o.x+i.x;break;default:s=e.x-0}switch(this.options.where.y.toLowerCase()){case"top":n=e.y-o.y;break;default:n=e.y+i.y}this.options.offsetY&&(n+=this.options.offsetY),this.options.offsetX&&(s+=this.options.offsetX);var a=$(document.body).getSize(),r=this.borderNode.getSize();s+r.x>a.x&&(s=a.x-r.x-10),this.borderNode.setStyle("top",n),this.borderNode.setStyle("left",s)}}),MWF.xDesktop=MWF.xDesktop||{},MWF.xApplication=MWF.xApplication||{},MWF.require("MWF.xDesktop.Actions.RestActions",null,!1),MWF.xDesktop.UserData=MWF.UD={getAction:function(){this.action=o2.Actions.get("x_organization_assemble_personal")},getData:function(t,e,i){this.action||this.getAction(),this.action.getUserData(t,(function(t){e&&e(t)}),null,i)},getDataJson:function(t,e,i){this.action||this.getAction(),this.action.getUserData(t,(function(t){var i=null;t.data&&(i=JSON.decode(t.data)),e&&e(i)}),null,i)},putData:function(t,e,i,o){this.action||this.getAction(),this.action.putUserData(t,e,(function(t){i&&i(t)}),null,o)},deleteData:function(t,e,i){this.action||this.getAction(),this.action.deleteUserData(t,(function(t){e&&e(t)}),null,i)},getPublicData:function(t,e,i){this.action||this.getAction(),this.action.getPublicUserData(t,(function(t){var i=null;t.data&&(i=JSON.decode(t.data)),e&&e(i)}),null,i)},putPublicData:function(t,e,i,o){this.action||this.getAction(),this.action.putPublicUserData(t,e,(function(t){i&&(i.success?i.success(t):i(t))}),(function(t,e,o){if(0!=t.status){var s=o;if(t){var n=JSON.decode(t.responseText);s=n?n.message.trim()||"request json error":"request json error: "+t.responseText}MWF.xDesktop.notice("error",{x:"right",y:"top"},s)}i&&i.failure&&i.failure(t,e,o)}),o)},deletePublicData:function(t,e,i){this.action||this.getAction(),this.action.deletePublicUserData(t,(function(t){e&&e(t)}),null,i)}},MWF.xApplication.Template=MWF.xApplication.Template||{},MWF.xApplication.Template.MPopupForm=MPopupForm=new Class({Extends:MWF.widget.Common,Implements:[Options,Events],options:{style:"default",width:500,height:450,top:null,left:null,bottom:null,right:null,minWidth:300,minHeight:220,isLimitSize:!0,ifFade:!0,hasTop:!1,hasTopIcon:!1,hasTopContent:!1,hasIcon:!0,hasBottom:!0,hasMask:!0,closeByClickMask:!1,hasScroll:!0,scrollType:"",title:"",draggable:!1,resizeable:!1,maxAction:!1,closeAction:!0,relativeToApp:!0,sizeRelateTo:"app",resultSeparator:","},initialize:function(t,e,i,o){this.setOptions(i),this.explorer=t,o?this.options.relativeToApp?(this.app=o.app||this.explorer.app,this.container=o.container||this.app.content,this.lp=o.lp||this.explorer.lp||this.app.lp,this.css=o.css||this.explorer.css||this.app.css,this.actions=o.actions||this.explorer.actions||this.app.actions||this.app.restActions):(this.container=o.container,this.lp=o.lp||this.explorer.lp,this.css=o.css||this.explorer.css,this.actions=o.actions||this.explorer.actions):this.options.relativeToApp?(this.app=this.explorer.app,this.container=this.app.content,this.lp=this.explorer.lp||this.app.lp,this.css=this.explorer.css||this.app.css,this.actions=this.explorer.actions||this.app.actions||this.app.restActions):(this.container=window.document.body,this.lp=this.explorer.lp,this.css=this.explorer.css,this.actions=this.explorer.actions),this.data=e||{},this.cssPath="../x_component_Template/$MPopupForm/"+this.options.style+"/css.wcss",this.load()},load:function(){this._loadCss()},_loadCss:function(){var t={};new Request.JSON({url:o2.filterUrl(this.cssPath),secure:!1,async:!1,method:"get",noCache:!1,onSuccess:function(e,o){t=e,MWF.widget.css[i]=e}.bind(this),onError:function(t,e){alert(e+t)}}).send();var e=!0;for(var i in t)if(i){e=!1;break}e||(this.css=Object.merge(t,this.css))},reload:function(t){t&&(this.data=this.form.getResult(!1,this.options.resultSeparator,!1,!1,!0)),this.formTopNode=null,this.setFormNodeSizeFun&&this.app&&this.app.removeEvent&&this.app.removeEvent("resize",this.setFormNodeSizeFun),this.formMaskNode&&this.formMaskNode.destroy(),this.formAreaNode&&this.formAreaNode.destroy(),this.isNew?this.create():this.isEdited?this.edit():this.open()},open:function(t){this.fireEvent("queryOpen"),this.isNew=!1,this.isEdited=!1,this._open(),this.fireEvent("postOpen")},create:function(){this.fireEvent("queryCreate"),this.isNew=!0,this._open(),this.fireEvent("postCreate")},edit:function(){this.fireEvent("queryEdit"),this.isEdited=!0,this._open(),this.fireEvent("postEdit")},_open:function(){if(this.options.hasMask&&(this.formMaskNode=new Element("div.formMaskNode",{styles:this.css.formMaskNode,events:{mouseover:function(t){t.stopPropagation()},mouseout:function(t){t.stopPropagation()},click:function(t){t.stopPropagation()},mousewheel:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1},DOMMouseScroll:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1}}}).inject(this.container||this.app.content)),this.formAreaNode=new Element("div.formAreaNode",{styles:this.css.formAreaNode}),this.createFormNode(),this.formMaskNode?this.formAreaNode.inject(this.formMaskNode,"after"):this.formAreaNode.inject(this.container||this.app.content),this.options.ifFade?this.formAreaNode.fade("in"):this.formAreaNode.setStyle("opacity",1),this.setFormNodeSize(),this.setFormNodeSizeFun=this.setFormNodeSize.bind(this),this.app&&this.app.addEvent&&this.app.addEvent("resize",this.setFormNodeSizeFun),this.options.draggable&&this.formTopNode){var t=(this.container||this.app.content).getSize(),e=this.formAreaNode.getSize();this.formAreaNode.makeDraggable({handle:this.formTopNode,limit:{x:[0,t.x-e.x],y:[0,t.y-e.y]},onDrag:function(){this.fireEvent("drag")}.bind(this),onComplete:function(){this.fireEvent("dragCompleted")}.bind(this)})}this.options.closeByClickMask&&this.formMaskNode&&this.formMaskNode.addEvent("click",function(t){this.close(t)}.bind(this)),this.options.resizeable&&(this.resizeNode=new Element("div.resizeNode",{styles:this.css.resizeNode}).inject(this.formNode),this.formAreaNode.makeResizable({handle:this.resizeNode,limit:{x:[this.options.minWidth,null],y:[this.options.minHeight,null]},onDrag:function(){var t=this.formAreaNode.getComputedSize();this.setNodesSize(t.width,t.height),this.fireEvent("resize")}.bind(this),onComplete:function(){var t=this.formAreaNode.getComputedSize();this.options.width=t.width,this.options.height=t.height,this.oldCoordinate&&(this.oldCoordinate.width=t.width,this.oldCoordinate.height=t.height),this.fireEvent("resizeCompleted")}.bind(this)}))},createFormNode:function(){this.formNode=new Element("div.formNode",{styles:this.css.formNode}).inject(this.formAreaNode),this.options.hasTop&&this.createTopNode(),this.options.hasIcon&&(this.formIconNode=new Element("div.formIconNode",{styles:this.isNew?this.css.formNewNode:this.css.formIconNode}).inject(this.formNode)),this.createContent(),this.options.hasBottom&&this.createBottomNode(),this._setCustom(),this.options.hasScroll&&("window"==this.options.scrollType?(this.formContentNode.setStyle("overflow","auto"),this.formTableContainer.setStyle("overflow","visible")):MWF.require("MWF.widget.ScrollBar",function(){new MWF.widget.ScrollBar(this.formTableContainer,{indent:!1,style:"xApp_TaskList",where:"before",distance:30,friction:4,axis:{x:!1,y:!0},onScroll:function(t){}})}.bind(this)))},_setCustom:function(){},createTopNode:function(){this.fireEvent("queryCreateTop"),this.formTopNode||(this.formTopNode=new Element("div.formTopNode",{styles:this.css.formTopNode}).inject(this.formNode),this.options.hasTopIcon&&(this.formTopIconNode=new Element("div",{styles:this.css.formTopIconNode}).inject(this.formTopNode)),this.formTopTextNode=new Element("div",{styles:this.css.formTopTextNode,text:this.options.title}).inject(this.formTopNode),this.options.closeAction&&(this.formTopCloseActionNode=new Element("div",{styles:this.css.formTopCloseActionNode,title:MWF.xApplication.Template.LP.MPopupForm.close}).inject(this.formTopNode),this.formTopCloseActionNode.addEvent("click",function(t){this.close(),t.stopPropagation()}.bind(this))),this.options.maxAction&&(this.formTopMaxActionNode=new Element("div",{styles:this.css.formTopMaxActionNode,title:MWF.xApplication.Template.LP.MPopupForm.max}).inject(this.formTopNode),this.formTopMaxActionNode.addEvent("click",function(){this.maxSize()}.bind(this)),this.formTopRestoreActionNode=new Element("div",{styles:this.css.formTopRestoreActionNode,title:MWF.xApplication.Template.LP.MPopupForm.restore}).inject(this.formTopNode),this.formTopRestoreActionNode.addEvent("click",function(){this.restoreSize()}.bind(this)),this.formTopNode.addEvent("dblclick",function(){this.switchMax()}.bind(this))),this.options.hasTopContent&&(this.formTopContentNode=new Element("div.formTopContentNode",{styles:this.css.formTopContentNode}).inject(this.formTopNode),this._createTopContent())),this.fireEvent("postCreateTop")},_createTopContent:function(){},createContent:function(){this.formContentNode=new Element("div.formContentNode",{styles:this.css.formContentNode}).inject(this.formNode),this.formTableContainer=new Element("div.formTableContainer",{styles:this.css.formTableContainer}).inject(this.formContentNode),this.formTableArea=new Element("div.formTableArea",{styles:this.css.formTableArea}).inject(this.formTableContainer),this._createTableContent()},_createTableContent:function(){this.formTableArea.set("html","<table width='100%' bordr='0' cellpadding='5' cellspacing='0' styles='formTable'><tr><td styles='formTableTitle' lable='empName'></td>    <td styles='formTableValue' item='empName'></td></tr><tr><td styles='formTableTitle' lable='departmentName'></td>    <td styles='formTableValue' item='departmentName'></td></tr><tr><td styles='formTableTitle' lable='recordDateString'></td>    <td styles='formTableValue' item='recordDateString'></td></tr><tr><td styles='formTableTitle' lable='status'></td>    <td styles='formTableValue' item='status'></td></tr><tr><td styles='formTableTitle' lable='appealReason'></td>    <td styles='formTableValue' item='appealReason'></td></tr><tr><td styles='formTableTitle' lable='appealDescription'></td>    <td styles='formTableValue' item='appealDescription'></td></tr><tr><td styles='formTableTitle' lable='opinion1'></td>    <td styles='formTableValue' item='opinion1'></td></tr></table>"),MWF.xDesktop.requireApp("Template","MForm",function(){this.form=new MForm(this.formTableArea,{empName:"xadmin"},{isEdited:this.isEdited||this.isNew,itemTemplate:{empName:{text:"姓名",type:"innertext"},departmentName:{text:"部门",tType:"department",notEmpty:!0},recordDateString:{text:"日期",tType:"date"},status:{text:"状态",tType:"number"},appealReason:{text:"下拉框",type:"select",selectValue:["测试1","测试2"]},appealDescription:{text:"描述",type:"textarea"},opinion1:{text:"测试",type:"button",value:"测试"}}},this.app),this.form.load()}.bind(this),!0)},createBottomNode:function(){this.fireEvent("queryCreateBottom"),this.formBottomNode=new Element("div.formBottomNode",{styles:this.css.formBottomNode}).inject(this.formNode),this._createBottomContent(),this.fireEvent("postCreateBottom")},_createBottomContent:function(){this.cancelActionNode=new Element("div.formCancelActionNode",{styles:this.css.formCancelActionNode,text:this.lp.cancel}).inject(this.formBottomNode),this.cancelActionNode.addEvent("click",function(t){this.cancel(t)}.bind(this)),(this.isNew||this.isEdited)&&(this.okActionNode=new Element("div.formOkActionNode",{styles:this.css.formOkActionNode,text:this.lp.ok}).inject(this.formBottomNode),this.okActionNode.addEvent("click",function(t){this.ok(t)}.bind(this)))},cancel:function(t){this.fireEvent("queryCancel"),this.close(),this.fireEvent("postCancel")},close:function(t){this.fireEvent("queryClose"),this._close(),this.setFormNodeSizeFun&&this.app&&this.app.removeEvent&&this.app.removeEvent("resize",this.setFormNodeSizeFun),this.formMaskNode&&this.formMaskNode.destroy(),this.formAreaNode&&this.formAreaNode.destroy(),this.fireEvent("postClose")},_close:function(){},ok:function(t){this.fireEvent("queryOk");var e=this.form.getResult(!0,this.options.resultSeparator,!0,!1,!0);e&&this._ok(e,function(t){"error"==t.type?this.app&&this.app.notice&&this.app.notice(t.message,"error"):(this.formMaskNode&&this.formMaskNode.destroy(),this.formAreaNode&&this.formAreaNode.destroy(),this.explorer&&this.explorer.view&&this.explorer.view.reload(),this.app&&this.app.notice&&this.app.notice(this.isNew?this.lp.createSuccess:this.lp.updateSuccess,"success"),this.fireEvent("postOk"))}.bind(this))},_ok:function(t,e){},switchMax:function(){this.isMax?this.restoreSize():this.maxSize()},maxSize:function(){this.oldCoordinate||(this.oldCoordinate={width:this.options.width,height:this.options.height,top:this.options.top,left:this.options.left,bottom:this.options.bottom,right:this.options.right}),this.options.width="100%",this.options.height="100%",this.options.top=null,this.options.left=null,this.options.bottom=null,this.options.right=null,this.setFormNodeSize(),this.formTopMaxActionNode.setStyle("display","none"),this.formTopRestoreActionNode.setStyle("display",""),this.isMax=!0,this.fireEvent("max")},restoreSize:function(){this.oldCoordinate&&(this.options.width=this.oldCoordinate.width,this.options.height=this.oldCoordinate.height,this.options.top=this.oldCoordinate.top,this.options.left=this.oldCoordinate.left,this.options.bottom=this.oldCoordinate.bottom,this.options.right=this.oldCoordinate.right),this.setFormNodeSize(),this.formTopMaxActionNode.setStyle("display",""),this.formTopRestoreActionNode.setStyle("display","none"),this.isMax=!1,this.fireEvent("restore")},setFormNodeSize:function(t,e,i,o,s,n){this._beforeFormNodeSize(),t||(t=this.options.width?this.options.width:"50%"),e||(e=this.options.height?this.options.height:"50%"),i||0==i||(i=this.options.top),o||0==o||(o=this.options.left),s||0==s||(s=this.options.bottom),n||0==n||(n=this.options.right),t=t.toString(),e=e.toString();var a=(this.container||this.app.content).getSize(),r=a.x,l=a.y;this.options.isLimitSize&&("%"!=t.substr(t.length-1,1)&&a.x<parseInt(t)&&(t=a.x),"%"!=e.substr(e.length-1,1)&&a.y<parseInt(e)&&(e=a.y)),"string"==typeof t&&1<t.length&&"%"==t.substr(t.length-1,1)&&(t=parseInt(r*parseInt(t,10)/100,10)),this.options.minWidth>t&&(t=this.options.minWidth),"string"==typeof e&&1<e.length&&"%"==e.substr(e.length-1,1)&&(e=parseInt(l*parseInt(e,10)/100,10)),this.options.minHeight>e&&(e=this.options.minHeight);var d={width:t+"px",height:e+"px"};null!=i?(d.top=i+"px",d.bottom="auto"):null!=s?(d.top="auto",d.bottom=s+"px"):(d.top=parseInt((l-e)/2,10)+"px",d.bottom="auto"),null!=o?(d.left=o+"px",d.right="auto"):null!=n?(d.left="auto",d.right=n+"px"):(d.left=parseInt((r-t)/2,10)+"px",d.right="auto"),this.formAreaNode&&this.formAreaNode.setStyles(d),this._setFormNodeSize(d),this.setNodesSize(t,e)},_beforeFormNodeSize:function(){},_setFormNodeSize:function(t){},setNodesSize:function(t,e){this.options.minWidth>t&&(t=this.options.minWidth),this.options.minHeight>e&&(e=this.options.minHeight),this.formNode.setStyles({width:t+"px",height:e+"px"});var i=this.formIconNode?this.formIconNode.getSize():{x:0,y:0},o=this.formTopNode?this.formTopNode.getSize():{x:0,y:0},s=this.formBottomNode?this.formBottomNode.getSize():{x:0,y:0},n=e-i.y-o.y-s.y,a=parseFloat(this.formContentNode.getStyle("margin-top"))||0,r=parseFloat(this.formContentNode.getStyle("margin-bottom"))||0,l=n-a-r;this.formContentNode.setStyles({height:l+"px"});var d=parseFloat(this.formContentNode.getStyle("padding-top"))||0,c=parseFloat(this.formContentNode.getStyle("padding-bottom"))||0,h=n-(a=parseFloat(this.formTableContainer.getStyle("margin-top"))||0)-(r=parseFloat(this.formTableContainer.getStyle("margin-bottom"))||0)-d-c-(parseFloat(this.formTableContainer.getStyle("padding-top"))||0)-(parseFloat(this.formTableContainer.getStyle("padding-bottom"))||0);"window"==this.options.scrollType&&(h-=10),this.formTableContainer.setStyles({height:h+"px"}),this._setNodesSize(t,e,l,h),this.fireEvent("resizeForm")},_setNodesSize:function(t,e,i,o){}}),MWF.xDesktop=MWF.xDesktop||{},MWF.xApplication=MWF.xApplication||{},MWF.xDesktop.requireApp("Template","MPopupForm",null,!1),MWF.require("MWF.xDesktop.UserData",null,!1),MWF.xDesktop.Authentication=new Class({Extends:MWF.widget.Common,Implements:[Options,Events],options:{style:"default",width:"420",height:"640",popupStyle_password:"o2platformSignupFlat",popupStyle_signup:"o2platformSignup"},initialize:function(t,e,i){this.setOptions(t),this.node=i,this.path=MWF.defaultPath+"/xDesktop/$Authentication/";var o=null;MWF.UD.getPublicData("loginStyleList",function(t){t&&t.enabledId&&MWF.UD.getPublicData(t.enabledId,function(t){t&&t.data&&(o=t.data)}.bind(this),!1)}.bind(this),!1),o?this.css=o:(this.cssPath=MWF.defaultPath+"/xDesktop/$Authentication/"+this.options.style+"/css.wcss",this._loadCss()),this.lp=MWF.LP.authentication,this.app=e||{}},isAuthenticated:function(t,e){MWF.Actions.get("x_organization_assemble_authentication").getAuthentication(t,e)},loadLogin:function(t){t&&(this.loginNode=t),!t&&this.loginNode&&(t=this.loginNode),layout.config.loginPage&&layout.config.loginPage.enable&&layout.config.loginPage.portal?(MWF.xDesktop.loadPortal(layout.config.loginPage.portal,this.options.loginParameter),this.fireEvent("openLogin")):(this.popupOptions={draggable:!1,closeAction:!1,hasMask:!1,relativeToApp:!1},this.popupPara={container:t},this.postLogin=function(t){layout.desktop.session.user=t.data,layout.session.user=t.data,layout.session.token=layout.session.user.token;var e=layout.desktop.session.user;if(e.identityList||(e.identityList=[]),e.roleList){var i=[];e.roleList.each((function(t){i.push(t.substring(0,t.indexOf("@")))})),e.roleList=e.roleList.concat(i)}window.location.reload()}.bind(this),this.openLoginForm(this.popupOptions),this.fireEvent("openLogin"))},logout:function(t){MWF.Actions.get("x_organization_assemble_authentication").logout(function(){this.socket&&(this.socket.close(),this.socket=null),layout.session&&layout.session.user&&(layout.session.user.token=""),t?t():window.location.reload()}.bind(this))},openLoginForm:function(t,e){var i=Object.merge(this.popupOptions||{},t||{},{onPostOk:function(t){e&&e(t),this.postLogin&&this.postLogin(t),this.fireEvent("postOk",t)}.bind(this)});i.width=this.options.width,i.height=this.options.height,new MWF.xDesktop.Authentication.LoginForm(this,{},i,this.popupPara).create()},openSignUpForm:function(t,e){var i=Object.merge(this.popupOptions||{},t||{},{onPostOk:function(t){e&&e(t),this.fireEvent("postOk",t)}.bind(this)});delete i.width,delete i.height,this.options.popupStyle_signup&&(i.popupStyle=this.options.popupStyle_signup),new MWF.xDesktop.Authentication.SignUpForm(this,{},i,this.popupPara).create()},openResetPasswordForm:function(t,e){var i=Object.merge(this.popupOptions||{},t||{},{onPostOk:function(t){e&&e(t),this.fireEvent("postOk",t)}.bind(this)});this.options.popupStyle_password&&(i.popupStyle=this.options.popupStyle_password),new MWF.xDesktop.Authentication.ResetPasswordForm(this,{},i,this.popupPara).create()},openChangePasswordForm:function(t,e){var i=Object.merge(this.popupOptions||{},t||{},{onPostOk:function(t){e&&e(t),this.fireEvent("postOk",t)}.bind(this)});new MWF.xDesktop.Authentication.ChangePasswordForm(this,{},i,this.popupPara).create()}}),MWF.xDesktop.Authentication.LoginForm=new Class({Extends:MPopupForm,Implements:[Options,Events],options:{style:"default",popupStyle:"o2platform",width:"650",height:"480",hasTop:!0,hasIcon:!1,hasTopIcon:!0,hasTopContent:!0,hasBottom:!1,hasScroll:!1,hasMark:!1,title:"",draggable:!0,closeAction:!0},load:function(){this.setOptions({title:layout.config&&(layout.config.systemTitle||layout.config.title)?layout.config.title||layout.config.systemTitle:MWF.LP.authentication.LoginFormTitle}),this._loadCss()},_createTopContent:function(){this.actions=MWF.Actions.get("x_organization_assemble_authentication"),this.faceLogin=!1,this.actions.getLoginMode(function(t){this.faceLogin=t.data.faceLogin}.bind(this),null,!1),this.faceLogin&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&COMMON.AjaxModule.loadDom("../o2_lib/adapter/adapter.js",function(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(this.cameraLoginIcon=new Element("div",{styles:this.explorer.css.cameraLoginIcon}).inject(this.formTopContentNode),this.cameraLoginIcon.addEvent("click",function(){this.isCameraLogin?(this.closeCamera(),this.isCameraLogin=!1):(this.cameraLogin(),this.isCameraLogin=!0)}.bind(this)))}.bind(this))},closeCamera:function(){this.cameraLoginVideoNode&&(this.video&&this.video.destroy(),this.canvas&&this.canvas.destroy(),this.cameraLoginVideoNode&&this.cameraLoginVideoNode.destroy(),this.video=null,this.canvas=null,this.cameraLoginVideoNode=null),this.cameraLoginIcon.setStyles(this.explorer.css.cameraLoginIcon)},cameraLoginInit:function(){this.cameraLoginConfig={maxStep:2,step:0,count:0,max:2,errorCount:0,errorMax:3,user:"",tokens:[]}},cameraLoginReset:function(t){this.cameraLoginConfig.count=0,this.cameraLoginConfig.user="",t&&(this.cameraLoginConfig.errorCount=0)},cameraLogin:function(){this.cameraLoginInit(),this.cameraLoginIcon.setStyles(this.explorer.css.closeCameraLoginIcon),this.createCameraLoginNode(),this.startCameraLogin()},createCameraLoginNode:function(){this.cameraLoginVideoNode=new Element("div",{styles:this.explorer.css.cameraLoginVideoNode}).inject(this.container);var t=this.formNode.getSize(),e=this.formTopNode.getSize(),i=t.y-e.y;this.cameraLoginVideoNode.setStyles({width:t.x+"px",height:i+"px"}),this.cameraLoginVideoNode.position({relativeTo:this.formContentNode,position:"upperLeft",edge:"upperLeft"})},startCameraLogin:function(){this.cameraLoginVideoAreaNode=new Element("div").inject(this.cameraLoginVideoNode),this.cameraLoginVideoInfoNode=new Element("div",{styles:this.explorer.css.cameraLoginVideoInfoNode}).inject(this.cameraLoginVideoNode),this.cameraLoginVideoInfoNode.set("text",MWF.LP.desktop.login.camera_logining);var t=this.cameraLoginVideoNode.getSize(),e=this.cameraLoginVideoInfoNode.getSize(),i=t.y-e.y;this.cameraLoginVideoAreaNode.setStyle("height",i+"px"),this.cameraLoginVideoAreaNode.set("html","<video autoplay></video>"),this.video=this.cameraLoginVideoAreaNode.getFirst().setStyles({"background-color":"#000000",width:t.x+"px",height:i+"px"}),this.videoStart()},videoStart:function(){this.video.addEventListener("canplay",function(){window.setTimeout(function(){this.startCameraAuthentication()}.bind(this),500)}.bind(this)),navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(t){this.video.srcObject=t}.bind(this)).catch(function(t){console.log("navigator.getUserMedia error: ",t),this.closeCamera()}.bind(this))},getFormData:function(){this.canvas||(this.canvas=new Element("canvas",{styles:{display:"none"}}).inject(this.cameraLoginVideoNode),this.canvas.width=this.video.videoWidth,this.canvas.height=this.video.videoHeight),this.canvas.getContext("2d").drawImage(this.video,0,0,this.canvas.width,this.canvas.height);var t=this.toBlob(this.canvas.toDataURL()),e=new FormData;return e.append("file",t),this.canvas.destroy(),{data:e,size:t.size}},checkUserFace:function(t){var e=window.location.host;e=e.replace(/\./g,"_"),this.faceAction.search(e,t.data,{name:"pic",size:t.size},function(t){if(t.data.results&&t.data.results.length){var e=t.data.thresholds["1e-5"];if(t.data.results[0].confidence>e){var i=t.data.faces[0].face_token,o=t.data.results[0].user_id;this.cameraLoginConfig.user&&this.cameraLoginConfig.user!==o?(this.cameraLoginReset(),this.cameraLoginConfig.errorCount++):(this.cameraLoginConfig.count++,this.cameraLoginConfig.user=o,this.cameraLoginConfig.tokens.push(i),this.cameraLoginConfig.step++,this.cameraLoginConfig.errorCount=0,this.cameraLoginVideoInfoNode.set("text",MWF.LP.desktop.login["camera_logining_"+this.cameraLoginConfig.step]))}else this.cameraLoginReset(),this.cameraLoginConfig.errorCount++}else this.cameraLoginReset(),this.cameraLoginConfig.errorCount++;this.checkCameraLogin()}.bind(this),function(){window.setTimeout(function(){this.startCameraAuthentication()}.bind(this),500)}.bind(this))},checkUserAlive:function(t,e,i){this.faceAction.detectattr(e,t.data,{name:"pic",size:t.size},function(t){t.data.faces&&t.data.faces.length&&this[i](t.data.faces[0].attributes)?(this.cameraLoginConfig.step++,this.cameraLoginConfig.errorCount=0,this.cameraLoginVideoInfoNode.set("text",MWF.LP.desktop.login["camera_logining_"+this.cameraLoginConfig.step])):this.cameraLoginConfig.errorCount++,this.checkCameraLogin()}.bind(this),function(){this.cameraLoginConfig.errorCount++,this.checkCameraLogin()}.bind(this))},checkUserSmile:function(t){return t.smile.value>t.smile.threshold},checkUserPitch:function(t){return t.headpose.pitch_angle<-10},startCameraAuthentication:function(){if(this.video){var t=this.getFormData();this.faceAction||(this.faceAction=MWF.Actions.get("x_faceset_control")),0===this.cameraLoginConfig.step&&this.checkUserFace(t),1===this.cameraLoginConfig.step&&this.checkUserAlive(t,"smiling","checkUserSmile"),2===this.cameraLoginConfig.step&&this.checkUserAlive(t,"headpose","checkUserPitch")}},toBlob:function(t){var e;e="data:image"===t.substr(0,10)?window.atob(t.split(",")[1]):window.atob(t);for(var i=new ArrayBuffer(e.length),o=new Uint8Array(i),s=0;s<e.length;s++)o[s]=e.charCodeAt(s);return new Blob([i],{type:"image/png"})},getDIF:function(t){return Math.max.apply(this,t)-Math.min.apply(this,t)},checkCameraLogin:function(){if(this.cameraLoginConfig.errorCount>this.cameraLoginConfig.errorMax)this.cameraLoginVideoInfoNode.set("text",MWF.LP.desktop.login.camera_loginError);else if(this.cameraLoginConfig.step>=this.cameraLoginConfig.maxStep){var t=MWF.LP.desktop.login.camera_loginSuccess.replace("{name}",this.cameraLoginConfig.user);this.cameraLoginVideoInfoNode.set("text",t),this.cameraLoginSuccess()}else window.setTimeout(function(){this.startCameraAuthentication()}.bind(this),100)},cameraLoginSuccess:function(){COMMON.AjaxModule.loadDom(["../o2_lib/CryptoJS/tripledes.js","../o2_lib/CryptoJS/mode-ecb.js"],function(){var t=layout.serviceAddressList.x_organization_assemble_authentication,e=layout.config.app_protocol+"//"+(t.host||window.location.hostname)+(80===t.port?"":":"+t.port)+t.context,i={client:"face",token:this.crypDES()};new Request.JSON({method:"POST",url:e+"/jaxrs/sso",data:JSON.stringify(i),secure:!1,emulation:!1,noCache:!0,withCredentials:!0,headers:{"Content-Type":"application/json; charset=utf-8"},onSuccess:function(t){this._close(),this.closeCamera(),this.formMaskNode&&this.formMaskNode.destroy(),this.formAreaNode.destroy(),this.explorer&&this.explorer.view&&this.explorer.view.reload(),this.app&&this.app.notice(this.lp.loginSuccess,"success"),this.fireEvent("postOk",t)}.bind(this),onError:function(){this.cameraLoginVideoInfoNode.set("text",MWF.LP.desktop.login.camera_loginError2)}.bind(this)}).send()}.bind(this))},crypDES:function(){var t=this.cameraLoginConfig.user,e=(new Date).getTime(),i=CryptoJS.enc.Utf8.parse("xplatform"),o=CryptoJS.DES.encrypt(t+"#"+e,i,{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7}).ciphertext.toString(CryptoJS.enc.Base64);return o=(o=(o=o.replace(/=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")},_createTableContent:function(){this.loginType="captcha",this.codeLogin=!1,this.bindLogin=!1,this.captchaLogin=!0,this.actions.getLoginMode(function(t){this.codeLogin=t.data.codeLogin,this.bindLogin=t.data.bindLogin,this.captchaLogin=t.data.captchaLogin}.bind(this),null,!1),MWF.Actions.get("x_organization_assemble_personal").getRegisterMode(function(t){this.signUpMode=t.data.value}.bind(this),null,!1),this.bindLogin&&(this.bindLoginTipPic=new Element("div.bindLoginTipPic",{styles:this.css.bindLoginTipPic}).inject(this.formContentNode,"top"),this.bindLoginAction=new Element("div.bindLoginAction",{styles:this.css.bindLoginAction}).inject(this.formContentNode,"top"),this.bindLoginAction.addEvent("click",function(){this.showBindCodeLogin()}.bind(this)),this.backtoPasswordLoginTipPic=new Element("div.backtoPasswordLoginTipPic",{styles:this.css.backtoPasswordLoginTipPic}).inject(this.formContentNode,"top"),this.backtoPasswordLoginAction=new Element("div.backtoPasswordLoginAction",{styles:this.css.backtoPasswordLoginAction}).inject(this.formContentNode,"top"),this.backtoPasswordLoginAction.addEvent("click",function(){this.backtoPasswordLogin()}.bind(this)));var t="<table width='100%' bordr='0' cellpadding='0' cellspacing='0' styles='formTable'><tr><div><div item='passwordAction'>";if(this.codeLogin&&(t+="</div><div styles='titleSep'></div><div item='codeAction'></div></tr>"),t+="</table>",t+="<table width='100%' bordr='0' cellpadding='0' cellspacing='0' styles='formTable'><tr item='credentialTr'><td styles='formTableValueTop20' item='credential'></td></tr><tr item='passwordTr'><td styles='formTableValueTop20' item='password'></td></tr>",this.captchaLogin&&(t+="<tr item='captchaTr'><td styles='formTableValueTop20'><div item='captchaAnswer' style='float:left;'></div><div item='captchaPic' style='float:left;'></div><div item='changeCaptchaAction' style='float:left;'></div></td></tr>"),this.codeLogin&&(t+="<tr item='codeTr' style='display: none'><td styles='formTableValueTop20'>   <div item='codeAnswer' style='float:left;'></div>   <div item='verificationAction' style='float:left;'></div>   <div item='resendVerificationAction' style='float:left;display:none;'></div></td></tr>"),t+="<tr><td styles='formTableValueTop20' item='loginAction'></td></tr></table><table width='100%' bordr='0' cellpadding='0' cellspacing='0' styles='formTable'>",this.signUpMode&&"disable"!==this.signUpMode?t+="<tr><td><div item='signUpAction'></div><div item='forgetPassword'></div></td></tr>":t+="<tr><td><div styles='signUpAction'></div><div item='forgetPassword'></div></td></tr>",t+="<tr><td  styles='formTableValue' item='errorArea'></td></tr><tr><td  styles='formTableValue' item='oauthArea'></td></tr></table>",this.formTableArea.set("html",t),new Element("div",{styles:this.css.formFooter,text:layout.config.footer||layout.config.systemName}).inject(this.formTableArea,"after"),this.captchaLogin&&this.setCaptchaPic(),this.errorArea=this.formTableArea.getElement("[item=errorArea]"),this.oauthArea=this.formTableArea.getElement("[item=oauthArea]"),MWF.xDesktop.requireApp("Template","MForm",function(){this.form=new MForm(this.formTableArea,this.data,{style:this.options.popupStyle,verifyType:"single",isEdited:this.isEdited||this.isNew,itemTemplate:{credential:{text:this.lp.userName,defaultValue:this.lp.userName,className:"inputUser",notEmpty:!0,defaultValueAsEmpty:!0,emptyTip:this.lp.inputYourUserName,event:{focus:function(t){this.lp.userName===t.getValue()&&t.setValue(""),t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),blur:function(t){""===t.getValue()&&t.setValue(this.lp.userName),t.warningStatus||t.getElements()[0].setStyles(this.css.inputUser)}.bind(this),keyup:function(t,e){13===e.event.keyCode&&this.ok()}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputUser)}.bind(this)},password:{text:this.lp.password,type:"password",defaultValue:"password",className:"inputPassword",notEmpty:!0,defaultValueAsEmpty:!0,emptyTip:this.lp.inputYourPassword,event:{focus:function(t){"password"===t.getValue()&&t.setValue(""),t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),blur:function(t){t.warningStatus||t.getElements()[0].setStyles(this.css.inputPassword)}.bind(this),keyup:function(t,e){13===e.event.keyCode&&this.ok()}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputPassword)}.bind(this)},captchaAnswer:{tType:"number",text:this.lp.verificationCode,defaultValue:this.lp.verificationCode,className:"inputVerificationCode",notEmpty:!0,defaultValueAsEmpty:!0,emptyTip:this.lp.inputPicVerificationCode,event:{focus:function(t){this.lp.verificationCode===t.getValue()&&t.setValue(""),t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),blur:function(t){""===t.getValue()&&t.setValue(this.lp.verificationCode),t.warningStatus||t.getElements()[0].setStyles(this.css.inputVerificationCode)}.bind(this),keyup:function(t,e){13===e.event.keyCode&&this.ok()}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputVerificationCode)}.bind(this)},changeCaptchaAction:{value:this.lp.changeVerification,type:"innerText",className:"verificationChange",event:{click:function(){this.setCaptchaPic()}.bind(this)}},codeAnswer:{text:this.lp.verificationCode,defaultValue:this.lp.inputVerificationCode,className:"inputVerificationCode2",notEmpty:!0,defaultValueAsEmpty:!0,emptyTip:this.lp.inputVerificationCode,event:{focus:function(t){this.lp.inputVerificationCode===t.getValue()&&t.setValue(""),t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),blur:function(t){""===t.getValue()&&t.setValue(this.lp.inputVerificationCode),t.warningStatus||t.getElements()[0].setStyles(this.css.inputVerificationCode2)}.bind(this),keyup:function(t,e){13===e.event.keyCode&&this.ok()}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputVerificationCode2)}.bind(this)},verificationAction:{value:this.lp.sendVerification,type:"button",className:"inputSendVerification",event:{click:function(){this.sendVerificationAction()}.bind(this)}},resendVerificationAction:{value:this.lp.resendVerification,type:"button",className:"inputResendVerification"},loginAction:{value:this.lp.loginAction,type:"button",className:"inputLogin",event:{click:function(){this.ok()}.bind(this)}},passwordAction:{value:this.lp.passwordLogin,type:"innerText",className:"titleNode_active",event:{click:function(){this.codeLogin&&this.showPasswordLogin()}.bind(this)}},codeAction:{value:this.lp.codeLogin,type:"innerText",className:"titleNode_normal",event:{click:function(){this.showCodeLogin()}.bind(this)}},signUpAction:{value:this.lp.signUp,type:"innerText",className:"signUpAction",event:{click:function(){this.gotoSignup()}.bind(this)}},forgetPassword:{value:this.lp.forgetPassword,type:"innerText",className:"forgetPassword",event:{click:function(){this.gotoResetPassword()}.bind(this)}}}},this.app,this.css),this.form.load()}.bind(this),!0),this.bindLogin){this.bindLoginContainer=new Element("div",{styles:this.css.bindLoginContainer}).inject(this.formContentNode);var e="<div item='bindLoginTitle' styles='bindTitleNode'></div><div styles='bindBodyArea'><div item='bindPicArea' styles='bindPicArea'></div><div styles='bindSepArea'></div><div styles='bindExampleArea'></div></div><div styles='bindTipArea'>   <div styles='bindTipIconArea'></div>   <div styles='bindTipTextArea'>       "+this.lp.userAppCameraHtml+"       <div>"+this.lp.loginToPage+"</div></div>";this.bindLoginContainer.set("html",e),this.isShowEnable=!0,this.bindBodyArea=this.bindLoginContainer.getElement("[styles='bindBodyArea']"),this.bindLoginContainer.addEvent("mousemove",function(t){this.bindBodyArea.isOutside(t)?this.hideExampleArea(t):this.showExampleArea(t)}.bind(this)),this.bindPicArea=this.bindLoginContainer.getElement("[item='bindPicArea']"),this.setBindPic(),this.bindExampleArea=this.bindLoginContainer.getElement("[styles='bindExampleArea']"),this.bindSepArea=this.bindLoginContainer.getElement("[styles='bindSepArea']"),this.bindLoginContainer.getElement("[styles='bindTipLinkArea']").addEvent("click",function(){layout.config.appUrl?window.open(layout.config.appUrl,"_blank"):window.open(this.lp.o2downloadLink,"_blank")}.bind(this)),MWF.xDesktop.requireApp("Template","MForm",function(){this.bindform=new MForm(this.bindLoginContainer,{},{style:"o2platform",verifyType:"single",isEdited:this.isEdited||this.isNew,itemTemplate:{bindLoginTitle:{value:this.lp.bingLoginTitle,type:"innerText"}}},this.app,this.css),this.bindform.load()}.bind(this),!0)}this.loadOauthContent()},_beforeFormNodeSize:function(){!this.isPlusOauthSize&&this.oauthListNode&&(this.options.height=parseInt(this.options.height)+this.oauthArea.getSize().y,this.isPlusOauthSize=!0),(this.oauthListNode||!this.captchaLogin&&!this.bindLogin)&&(this.options.height=this.options.height-60),this.oauthListNode&&this.captchaLogin&&(this.options.height=this.options.height+60)},loadOauthContent:function(){this.actions.listOauthServer(function(t){this.oauthList=t.data||[],this.oauthList.length>0&&(this.oauthArea.getChildren().length||(this.oauthListNode=new Element("div",{styles:this.css.oauthListNode}).inject(this.oauthArea)),this.oauthList.each(function(t){"@O2企业微信"===t.displayName?t.qywx=!0:"@O2钉钉"===t.displayName&&(t.dingding=!0),this.loadOauthItem(t)}.bind(this)))}.bind(this),null,!1)},loadOauthItem:function(t){var e=0==t.icon.indexOf("http")?t.icon:"data:image/png;base64,"+t.icon,i=new Element("div",{styles:this.css.oauthItemNode,events:{click:function(){var t="../x_desktop/oauth.html?oauth="+encodeURIComponent(this.name);this.qywx&&(t+="&qywx="+this.qywx),this.dingding&&(t+="&dingding="+this.dingding),window.location=t}.bind(t)}}).inject(this.oauthListNode);new Element("img",{styles:this.css.oauthItemIconNode,src:e}).inject(i),new Element("div",{styles:this.css.oauthItemTextNode,text:t.name}).inject(i)},showExampleArea:function(){if(!this.isHiddingExample&&!this.isShowingExample&&this.isShowEnable){this.isShowingExample=!0;var t=this.bindBodyArea.getPosition(this.bindBodyArea.getParent()).x,e=(this.bindBodyArea.getParent().getSize().x-400)/2;this.intervalId=setInterval(function(){t>e?(this.bindBodyArea.setStyle("margin-left",t-5+"px"),t-=5):(clearInterval(this.intervalId),this.bindBodyArea.setStyle("width","400px"),this.bindSepArea.setStyle("display",""),this.bindExampleArea.setStyle("display",""),this.isHidEnable=!0,this.isShowEnable=!1,this.isShowingExample=!1)}.bind(this),10)}},hideExampleArea:function(){if(!this.isShowingExample&&!this.isHiddingExample&&this.isHidEnable){this.isHiddingExample=!0;var t=this.bindBodyArea.getPosition(this.bindBodyArea.getParent()).x;this.bindSepArea.setStyle("display","none"),this.bindExampleArea.setStyle("display","none");var e=(this.bindBodyArea.getParent().getSize().x-200)/2;this.intervalId2=setInterval(function(){t<e?(this.bindBodyArea.setStyle("margin-left",t+5+"px"),t+=5):(clearInterval(this.intervalId2),this.bindBodyArea.setStyle("width","204px"),this.isHidEnable=!1,this.isShowEnable=!0,this.isHiddingExample=!1)}.bind(this),10)}},showPasswordLogin:function(){this.errorArea.empty(),this.loginType="captcha",this.form.getItem("passwordAction").setStyles(this.css.titleNode_active),this.form.getItem("codeAction").setStyles(this.css.titleNode_normal),this.formTableArea.getElement("[item='passwordTr']").setStyle("display","");var t=this.formTableArea.getElement("[item='captchaTr']");t&&t.setStyle("display",""),this.formTableArea.getElement("[item='codeTr']").setStyle("display","none")},showCodeLogin:function(){this.errorArea.empty(),this.loginType="code",this.form.getItem("passwordAction").setStyles(this.css.titleNode_normal),this.form.getItem("codeAction").setStyles(this.css.titleNode_active),this.formTableArea.getElement("[item='passwordTr']").setStyle("display","none");var t=this.formTableArea.getElement("[item='captchaTr']");t&&t.setStyle("display","none"),this.formTableArea.getElement("[item='codeTr']").setStyle("display","")},showBindCodeLogin:function(){this.errorArea.empty(),this.formTableContainer.setStyle("display","none"),this.bindLoginContainer.setStyle("display",""),this.bindLoginTipPic.setStyle("display","none"),this.bindLoginAction.setStyle("display","none"),this.backtoPasswordLoginTipPic.setStyle("display",""),this.backtoPasswordLoginAction.setStyle("display",""),this.checkBindStatus()},backtoPasswordLogin:function(){this.errorArea.empty(),this.bindStatusInterval&&clearInterval(this.bindStatusInterval),this.formTableContainer.setStyle("display",""),this.bindLoginContainer.setStyle("display","none"),this.bindLoginTipPic.setStyle("display",""),this.bindLoginAction.setStyle("display",""),this.backtoPasswordLoginTipPic.setStyle("display","none"),this.backtoPasswordLoginAction.setStyle("display","none")},setBindPic:function(){this.bindPicArea.empty(),this.actions.getLoginBind(function(t){this.bindMeta=t.data.meta,new Element("img",{src:"data:image/png;base64,"+t.data.image}).inject(this.bindPicArea)}.bind(this))},setCaptchaPic:function(){if(this.captchaLogin){var t=this.formTableArea.getElement("[item='captchaPic']");t.empty(),this.actions.getLoginCaptcha(120,50,function(e){this.captcha=e.data.id,new Element("img",{src:"data:image/png;base64,"+e.data.image,styles:this.css.verificationImage}).inject(t)}.bind(this))}},sendVerificationAction:function(){var t=!0,e=this.form.getItem("credential"),i=e.getValue();i&&""!==i.trim()?(this.actions.checkCredential(i,function(i){i.data.value||(t=!1,e.setWarning(this.lp.userNotExist,"invalid"))}.bind(this),function(i){t=!1;var o=JSON.parse(i.responseText);e.setWarning(o.message,"invalid")}.bind(this),!1),t&&(e.clearWarning("invalid"),this.actions.createCredentialCode(i,(function(t){}),function(e){var i=JSON.parse(e.responseText);this.setWarning(i.message),t=!1}.bind(this)),t&&(this.errorArea.empty(),this.form.getItem("verificationAction").container.setStyle("display","none"),this.setResendVerification()))):e.setWarning(this.lp.inputYourUserName,"empty")},setResendVerification:function(){var t=this.form.getItem("resendVerificationAction");t.container.setStyle("display",""),this.resendElement=t.getElements()[0],this.resendElement.set("text",this.lp.resendVerification+"(60)");var e=60;this.timer=setInterval(function(){e>0?this.resendElement.set("text",this.lp.resendVerification+"("+--e+")"):(this.form.getItem("verificationAction").container.setStyle("display",""),t.container.setStyle("display","none"),clearInterval(this.timer))}.bind(this),1e3)},gotoSignup:function(){this.explorer.openSignUpForm(),this.close()},gotoResetPassword:function(){this.explorer.openResetPasswordForm(),this.close()},gotoChangePassword:function(t){this.explorer.openChangePasswordForm(t,function(){this.explorer.loadLogin()}.bind(this)),this.close()},checkBindStatus:function(){this.bindStatusInterval=setInterval(function(){this.actions.checkBindStatus(this.bindMeta,function(t){t.data&&t.data.name&&"anonymous"!==t.data.name&&(this.fireEvent("queryOk"),this._close(),this.formMaskNode&&this.formMaskNode.destroy(),this.formAreaNode.destroy(),this.explorer&&this.explorer.view&&this.explorer.view.reload(),this.app&&this.app.notice(this.lp.loginSuccess,"success"),this.fireEvent("postOk",t))}.bind(this),function(t){}.bind(this))}.bind(this),3e3)},_close:function(){this.bindStatusInterval&&clearInterval(this.bindStatusInterval),this.timer&&clearInterval(this.timer)},ok:function(){this.fireEvent("queryOk"),this.errorArea.empty();var t=null,e=null;"captcha"===this.loginType?(this.form.getItem("password").options.notEmpty=!0,this.captchaLogin&&(t=this.form.getItem("captchaAnswer"))&&(t.options.notEmpty=!0),(e=this.form.getItem("codeAnswer"))&&(e.options.notEmpty=!1)):"code"===this.loginType&&(this.form.getItem("password").options.notEmpty=!1,this.captchaLogin&&(t=this.form.getItem("captchaAnswer"))&&(t.options.notEmpty=!1),(e=this.form.getItem("codeAnswer"))&&(e.options.notEmpty=!0));var i=this.form.getResult(!0,",",!0,!1,!0);i&&this._ok(i,function(t){if("error"===t.type)this.app&&this.app.notice(t.message,"error");else if(t.data.passwordExpired){var e=t.data.distinguishedName;this.explorer.logout(function(){this.gotoChangePassword({userName:e})}.bind(this))}else this._close(),this.formMaskNode&&this.formMaskNode.destroy(),this.formAreaNode.destroy(),this.explorer&&this.explorer.view&&this.explorer.view.reload(),this.app&&this.app.notice(this.lp.loginSuccess,"success"),this.fireEvent("postOk",t)}.bind(this))},setWarning:function(t){this.errorArea.empty(),new Element("div",{text:t,styles:this.css.warningMessageNode}).inject(this.errorArea)},_ok:function(t,e){var i=null;"captcha"===this.loginType?(i={credential:t.credential,password:t.password},this.captchaLogin&&(i.captchaAnswer=t.captchaAnswer,i.captcha=this.captcha),this.actions.loginByCaptcha(i,function(t){e&&e(t)}.bind(this),function(t){var e=JSON.parse(t.responseText);this.setWarning(e.message),this.setCaptchaPic(),this.form.getItem("captchaAnswer")&&this.form.getItem("captchaAnswer").setValue("")}.bind(this))):"code"===this.loginType&&(i={credential:t.credential,codeAnswer:t.codeAnswer},this.actions.loginByCode(i,function(t){e&&e(t)}.bind(this),function(t){var e=JSON.parse(t.responseText);this.setWarning(e.message)}.bind(this)))}}),MWF.xDesktop.Authentication.SignUpForm=new Class({Extends:MPopupForm,Implements:[Options,Events],options:{style:"default",popupStyle:"o2platformSignup",width:"910",height:"740",hasTop:!0,hasIcon:!1,hasTopIcon:!0,hasTopContent:!0,hasBottom:!1,title:"",draggable:!0,closeAction:!0},load:function(){this.options.title||this.setOptions({title:MWF.LP.authentication.SignUpFormTitle}),this._loadCss()},_createTableContent:function(){var t=this;this.actions=MWF.Actions.get("x_organization_assemble_personal");var e="code";this.actions.getRegisterMode(function(t){e=t.data.value}.bind(this),null,!1),this.formTopNode.setStyle("height","50px"),this.formTableContainer.setStyles({width:"890px","margin-top":"40px"});var i="<table width='100%' bordr='0' cellpadding='5' cellspacing='0' styles='formTable'><tr><td styles='formTableTitle' lable='name' width='200'></td>   <td styles='formTableValue' item='name' width='350'></td>   <td styles='formTableValue' item='nameTip'></td></tr><tr><td styles='formTableTitle' lable='password'></td>   <td styles='formTableValue' item='password'></td>   <td styles='formTableValue'><div item='passwordStrengthArea'></div></div><div item='passwordTip'></div></td></tr><tr><td styles='formTableTitle' lable='confirmPassword'></td>   <td styles='formTableValue' item='confirmPassword'></td>   <td styles='formTableValue' item='confirmPasswordTip'></td></tr><tr><td styles='formTableTitle' lable='genderType'></td>   <td styles='formTableValue' item='genderType'></td>   <td styles='formTableValue' item='genderTypeTip'></td></tr><tr><td styles='formTableTitle' lable='mail'></td>   <td styles='formTableValue' item='mail'></td>   <td styles='formTableValue' item='mailTip'></td></tr><tr><td styles='formTableTitle' lable='mobile'></td>   <td styles='formTableValue' item='mobile'></td>   <td styles='formTableValue' item='mobileTip'></td></tr>";i+="code"===e?"<tr><td styles='formTableTitle' lable='codeAnswer'></td>   <td styles='formTableValue'><div item='codeAnswer' style='float:left;'></div><div item='verificationAction' style='float:left;'></div><div item='resendVerificationAction' style='float:left;display:none;'></div></td>   <td styles='formTableValue' item='verificationCodeTip'></td></tr>":"<tr><td styles='formTableTitle' lable='captchaAnswer'></td>   <td styles='formTableValue'><div item='captchaAnswer' style='float:left;'></div><div item='captchaPic' style='float:left;'></div><div item='changeCaptchaAction' style='float:left;'></div></td>   <td styles='formTableValue' item='captchaAnswerTip'></td></tr>",i+="<tr><td styles='formTableTitle'></td>   <td styles='formTableValue' item='signUpAction'></td>   <td styles='formTableValue' item='signUpTip'></td></tr><tr><td></td>   <td><div item='hasAccountArea'></div><div item='gotoLoginAction'></div></td>   <td></td></tr></table>",this.formTableArea.set("html",i),"captcha"===e&&this.setCaptchaPic(),MWF.xDesktop.requireApp("Template","MForm",function(){this.form=new MForm(this.formTableArea,this.data,{style:this.options.popupStyle,verifyType:"batchSingle",isEdited:this.isEdited||this.isNew,onPostLoad:function(){var t=this.form,e=this.formTableArea;t.getItem("name").tipNode=e.getElement("[item='nameTip']"),t.getItem("password").tipNode=e.getElement("[item='passwordTip']"),t.getItem("confirmPassword").tipNode=e.getElement("[item='confirmPasswordTip']"),t.getItem("mail").tipNode=e.getElement("[item='mailTip']"),t.getItem("genderType").tipNode=e.getElement("[item='genderTypeTip']"),t.getItem("mobile").tipNode=e.getElement("[item='mobileTip']"),this.tipNode=e.getElement("[item='signUpTip']"),t.getItem("captchaAnswer")&&(t.getItem("captchaAnswer").tipNode=e.getElement("[item='captchaAnswerTip']")),t.getItem("codeAnswer")&&(t.getItem("codeAnswer").tipNode=e.getElement("[item='verificationCodeTip']"))}.bind(this),itemTemplate:{name:{text:this.lp.userName,defaultValue:this.lp.userName,className:"inputUser",notEmpty:!0,defaultValueAsEmpty:!0,emptyTip:this.lp.inputYourUserName,validRule:{isInvalid:function(t,e){return this.checkUserName(t,e)}.bind(this)},validMessage:{isInvalid:this.lp.userExist},event:{focus:function(t){this.lp.userName===t.getValue()&&t.setValue(""),t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),keyup:function(t,e){13===e.event.keyCode&&this.ok()}.bind(this),blur:function(t){t.verify(!0)&&(t.warningStatus||t.getElements()[0].setStyles(this.css.inputUser))}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputUser)}.bind(this)},password:{text:this.lp.password,type:"password",className:"inputPassword",notEmpty:!0,defaultValueAsEmpty:!0,emptyTip:this.lp.inputYourPassword,validRule:{passwordIsWeak:function(t,e){return!this.getPasswordRule(e.getValue())}.bind(this)},validMessage:{passwordIsWeak:function(){return t.getPasswordRule(this.getValue())}},event:{focus:function(t){"password"===t.getValue()&&t.setValue(""),t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),blur:function(t){t.verify(!0)}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputPassword)}.bind(this)},confirmPassword:{text:this.lp.confirmPassword,type:"password",className:"inputComfirmPassword",notEmpty:!0,defaultValueAsEmpty:!0,emptyTip:this.lp.inputComfirmPassword,validRule:{passwordNotEqual:function(t,e){if(e.getValue()===this.form.getItem("password").getValue())return!0}.bind(this)},validMessage:{passwordNotEqual:this.lp.passwordNotEqual},event:{focus:function(t){"password"===t.getValue()&&t.setValue(""),t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),keyup:function(t,e){13===e.event.keyCode&&this.ok()}.bind(this),blur:function(t){t.verify(!0)&&(t.warningStatus||t.getElements()[0].setStyles(this.css.inputComfirmPassword))}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputComfirmPassword)}.bind(this)},mail:{text:this.lp.mail,defaultValue:this.lp.inputYourMail,className:"inputMail",notEmpty:!1,defaultValueAsEmpty:!0,emptyTip:this.lp.inputYourMail,validRule:{isFormatInvalid:function(t,e){return!t||t===this.lp.inputYourMail||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)?(e.tipNode.empty(),e.warningStatus=!1,!0):(e.warningStatus=!0,!1)}.bind(this)},validMessage:{isFormatInvalid:this.lp.mailFormatError},event:{focus:function(t){this.lp.inputYourMail===t.getValue()&&t.setValue(""),t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),blur:function(t){t.verify(!0),t.warningStatus||t.getElements()[0].setStyles(this.css.inputMail)}.bind(this),keyup:function(t,e){13===e.event.keyCode&&this.ok()}.bind(this)},onEmpty:function(t){}.bind(this),onUnempty:function(t){}.bind(this)},genderType:{text:this.lp.genderType,className:"inputGenderType",type:"select",selectValue:this.lp.genderTypeValue.split(","),selectText:this.lp.genderTypeText.split(","),notEmpty:!0,emptyTip:this.lp.selectGenderType,event:{focus:function(t){t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),blur:function(t){t.verify(!0),t.warningStatus||t.getElements()[0].setStyles(this.css.inputGenderType)}.bind(this),keyup:function(t,e){13===e.event.keyCode&&this.ok()}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputGenderType)}.bind(this)},mobile:{text:this.lp.mobile,defaultValue:this.lp.inputYourMobile,className:"inputMobile",tType:"number",notEmpty:!0,defaultValueAsEmpty:!0,emptyTip:this.lp.inputYourMobile,validRule:{isInvalid:function(t,e){return this.checkMobile(t,e)}.bind(this)},validMessage:{isInvalid:this.lp.mobileIsRegisted},event:{focus:function(t){this.lp.inputYourMobile===t.getValue()&&t.setValue(""),t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),keyup:function(t,e){13===e.event.keyCode&&this.ok()}.bind(this),blur:function(t){t.verify(!0)&&(t.warningStatus||t.getElements()[0].setStyles(this.css.inputMobile))}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputMobile)}.bind(this)},captchaAnswer:{tType:"number",text:this.lp.verificationCode,defaultValue:this.lp.verificationCode,className:"inputVerificationCode",notEmpty:!0,defaultValueAsEmpty:!0,emptyTip:this.lp.inputPicVerificationCode,event:{focus:function(t){this.lp.verificationCode===t.getValue()&&t.setValue(""),t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),blur:function(t){t.verify(!0),t.warningStatus||t.getElements()[0].setStyles(this.css.inputVerificationCode)}.bind(this),keyup:function(t,e){13===e.event.keyCode&&this.ok()}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputVerificationCode)}.bind(this)},changeCaptchaAction:{value:this.lp.changeVerification,type:"innerText",className:"verificationChange",event:{click:function(){this.setCaptchaPic()}.bind(this)}},codeAnswer:{text:this.lp.verificationCode,defaultValue:this.lp.inputVerificationCode,className:"inputVerificationCode2",notEmpty:!0,defaultValueAsEmpty:!0,emptyTip:this.lp.inputVerificationCode,event:{focus:function(t){this.lp.inputVerificationCode===t.getValue()&&t.setValue(""),t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),blur:function(t){t.verify(!0),t.warningStatus||t.getElements()[0].setStyles(this.css.inputVerificationCode2)}.bind(this),keyup:function(t,e){13===e.event.keyCode&&this.ok()}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputVerificationCode2)}.bind(this)},verificationAction:{value:this.lp.sendVerification,type:"button",className:"inputSendVerification",event:{click:function(){this.sendVerificationAction()}.bind(this)}},resendVerificationAction:{value:this.lp.resendVerification,type:"button",className:"inputResendVerification"},signUpAction:{value:this.lp.signUp,type:"button",className:"inputSignUp",event:{click:function(){this.ok()}.bind(this)}},hasAccountArea:{value:this.lp.hasAccount,type:"innerText",className:"hasCountArea"},gotoLoginAction:{value:this.lp.gotoLogin,type:"innerText",className:"gotoLoginAction",event:{click:function(){this.gotoLogin()}.bind(this)}}}},this.app,this.css),this.form.load()}.bind(this),!0)},checkMobile:function(t,e){var i=!0;return this.actions.checkRegisterMobile(t,function(){i=!0}.bind(this),function(t){if(404===t.status)e.options.validMessage.isInvalid=this.lp.pageNotFound,i=!1;else{var o=JSON.parse(t.responseText);e.options.validMessage.isInvalid=o.message,i=!1}}.bind(this),!1),i},checkUserName:function(t,e){var i=!0;return this.actions.checkRegisterName(t,function(){i=!0}.bind(this),function(t){if(404===t.status)e.options.validMessage.isInvalid=this.lp.pageNotFound,i=!1;else{var o=JSON.parse(t.responseText);e.options.validMessage.isInvalid=o.message,i=!1}}.bind(this),!1),i},setCaptchaPic:function(){var t=this.formTableArea.getElement("[item='captchaPic']");t.empty(),this.actions.getRegisterCaptcha(120,50,function(e){this.captcha=e.data.id,new Element("img",{src:"data:image/png;base64,"+e.data.image,styles:this.css.verificationImage}).inject(t)}.bind(this))},sendVerificationAction:function(){var t=!0,e=this.form.getItem("mobile");if(e.verify(!0)){if(e.clearWarning(),e.getElements()[0].setStyles(this.css.inputMobile),this.actions.createRegisterCode(e.getValue(),(function(t){}),function(e){var i=this.form.getItem("codeAnswer"),o=JSON.parse(e.responseText);404===e.status?(i.setWarning(o.message,this.lp.pageNotFound),t=!1):(i.setWarning(o.message,"invalid"),t=!1)}.bind(this),!1),!t)return!1;this.form.getItem("verificationAction").container.setStyle("display","none"),this.setResendVerification()}},setResendVerification:function(){var t=this.form.getItem("resendVerificationAction");t.container.setStyle("display",""),this.resendElement=t.getElements()[0],this.resendElement.set("text",this.lp.resendVerification+"(60)");var e=60;this.timer=setInterval(function(){e>0?this.resendElement.set("text",this.lp.resendVerification+"("+--e+")"):(this.form.getItem("verificationAction").container.setStyle("display",""),t.container.setStyle("display","none"),clearInterval(this.timer))}.bind(this),1e3)},getPasswordRule:function(t){var e="";return this.actions.checkRegisterPassword(t,function(t){e=t.data.value||""}.bind(this),null,!1),e},gotoLogin:function(){this.explorer.openLoginForm({},(function(){window.location.reload()})),this.close()},setWarning:function(t){this.tipNode.empty(),new Element("div",{text:t,styles:this.css.warningMessageNode}).inject(this.tipNode)},setNotice:function(t){this.tipNode.empty(),new Element("div",{text:t,styles:this.css.noticeMessageNode}).inject(this.tipNode)},ok:function(){this.tipNode.empty(),this.fireEvent("queryOk");var t=this.form.getResult(!0,",",!0,!1,!0);t&&this._ok(t,function(t){"error"===t.type?this.app&&this.app.notice(t.message,"error"):(this.formMaskNode&&this.formMaskNode.destroy(),this.formAreaNode.destroy(),this.setNotice(this.lp.registeSuccess),this.app&&this.app.notice(this.lp.registeSuccess,"success"),this.fireEvent("postOk",t),this.gotoLogin())}.bind(this))},_ok:function(t,e){t.captcha=this.captcha,this.actions.register(t,function(t){e&&e(t)}.bind(this),function(t){if(404===t.status)this.setWarning(this.lp.pageNotFound);else{var e=JSON.parse(t.responseText);this.setWarning(e.message)}}.bind(this))}}),MWF.xDesktop.Authentication.ResetPasswordForm=new Class({Extends:MPopupForm,Implements:[Options,Events],options:{style:"default",popupStyle:"o2platformSignup",width:"710",height:"450",hasTop:!0,hasIcon:!1,hasTopIcon:!0,hasTopContent:!0,hasBottom:!1,title:"",draggable:!0,closeAction:!0},load:function(){this.options.title||this.setOptions({title:MWF.LP.authentication.ResetPasswordFormTitle}),this._loadCss()},_createTopContent:function(){this.actions=MWF.Actions.get("x_organization_assemble_personal"),this.actions.getRegisterMode(function(t){this.signUpMode=t.data.value}.bind(this),null,!1),this.signUpMode&&"disable"!==this.signUpMode&&(this.gotoSignupNode=new Element("div",{styles:this.css.formTopContentCustomNode,text:this.lp.signUp}).inject(this.formTopContentNode),this.gotoSignupNode.addEvent("click",function(){this.gotoSignup()}.bind(this)),new Element("div",{styles:this.css.formTopContentSepNode}).inject(this.formTopContentNode)),this.gotoLoginNode=new Element("div",{styles:this.css.formTopContentCustomNode,text:this.lp.loginAction}).inject(this.formTopContentNode),this.gotoLoginNode.addEvent("click",function(){this.gotoLogin()}.bind(this))},_createTableContent:function(){this.formTableContainer.setStyles(this.css.formTableContainer2),this.loadSteps(),this.loadStepForm_1(),this.loadStepForm_2(),this.loadStepForm_3()},reset:function(){this.formTableArea.empty(),this._createTableContent()},loadSteps:function(){var t=new Element("div",{styles:this.css.stepsContainer}).inject(this.formTableArea);this.step_1=new Element("div",{styles:this.css.step_1_active,text:this.lp.shotMessageCheck}).inject(t),this.stepLink_1=new Element("div",{styles:this.css.stepLink_1}).inject(this.step_1),this.step_2=new Element("div",{styles:this.css.step_2,text:this.lp.setMewPassword}).inject(t),this.stepLink_2=new Element("div",{styles:this.css.stepLink_2}).inject(this.step_2),this.step_3=new Element("div",{styles:this.css.step_3,text:this.lp.completed}).inject(t)},loadStepForm_1:function(){this.stepNode_1=new Element("div",{html:"<table width='100%' bordr='0' cellpadding='5' cellspacing='0' styles='formTable'><tr><td styles='formTableTitle' lable='name' width='80'></td>   <td styles='formTableValue' item='name' width='350'></td></tr><tr><td styles='formTableTitle' lable='codeAnswer'></td>   <td styles='formTableValue'>       <div item='codeAnswer' style='float:left;'></div>       <div item='verificationAction' style='float:left;'></div>       <div item='resendVerificationAction' style='float:left;display:none;'></div></td>   </tr><tr><td styles='formTableTitle'></td>   <td styles='formTableValue' item='nextStep'></td></tr></table>",styles:{display:""}}).inject(this.formTableArea),MWF.xDesktop.requireApp("Template","MForm",function(){this.stepForm_1=new MForm(this.stepNode_1,{},{style:this.options.popupStyle,verifyType:"single",isEdited:this.isEdited||this.isNew,itemTemplate:{name:{text:this.lp.userName,defaultValue:this.lp.userName,className:"inputUser",notEmpty:!0,defaultValueAsEmpty:!0,emptyTip:this.lp.inputYourUserName,validRule:{isInvalid:function(t,e){return this.checkUserName(t,e)}.bind(this)},validMessage:{isInvalid:this.lp.userNotExist},event:{focus:function(t){this.lp.userName===t.getValue()&&t.setValue(""),t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),blur:function(t){""===t.getValue()&&t.setValue(this.lp.userName),t.warningStatus||t.getElements()[0].setStyles(this.css.inputUser)}.bind(this),keyup:function(t,e){13===e.event.keyCode&&this.gotoStep(2)}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputUser)}.bind(this)},codeAnswer:{text:this.lp.verificationCode,defaultValue:this.lp.inputVerificationCode,className:"inputVerificationCode2",notEmpty:!0,defaultValueAsEmpty:!0,emptyTip:this.lp.inputVerificationCode,event:{focus:function(t){this.lp.inputVerificationCode===t.getValue()&&t.setValue(""),t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),blur:function(t){""===t.getValue()&&t.setValue(this.lp.inputVerificationCode),t.warningStatus||t.getElements()[0].setStyles(this.css.inputVerificationCode2)}.bind(this),keyup:function(t,e){13===e.event.keyCode&&this.gotoStep(2)}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputVerificationCode2)}.bind(this)},verificationAction:{value:this.lp.sendVerification,type:"button",className:"inputSendVerification",event:{click:function(){this.sendVerificationAction()}.bind(this)}},resendVerificationAction:{value:this.lp.resendVerification,type:"button",className:"inputResendVerification"},nextStep:{value:this.lp.nextStep,type:"button",className:"inputSignUp",event:{click:function(){this.gotoStep(2)}.bind(this)}}}},this.app,this.css),this.stepForm_1.load()}.bind(this),!0)},loadStepForm_2:function(){var t=this;html="<table width='100%' bordr='0' cellpadding='5' cellspacing='0' styles='formTable'><tr><td styles='formTableTitle' lable='password' width='80'></td>   <td styles='formTableValue' item='password' width='350'></td>   <td styles='formTableValue'><div item='passwordStrengthArea'></div></td></tr><tr><td styles='formTableTitle' lable='confirmPassword'></td>   <td styles='formTableValue' item='confirmPassword'></td>   <td styles='formTableValue'></td></tr><tr><td styles='formTableTitle'></td>   <td styles='formTableValue' item='nextStep'></td>   <td styles='formTableValue'></td></tr></table>",this.stepNode_2=new Element("div",{html:html,styles:{display:"none"}}).inject(this.formTableArea),MWF.xDesktop.requireApp("Template","MForm",function(){this.stepForm_2=new MForm(this.stepNode_2,{},{style:this.options.popupStyle,verifyType:"single",isEdited:this.isEdited||this.isNew,itemTemplate:{password:{text:this.lp.setNewPassword,type:"password",className:"inputPassword",notEmpty:!0,defaultValueAsEmpty:!0,emptyTip:this.lp.inputYourPassword,attr:{placeholder:this.lp.inputYourPassword},validRule:{passwordIsWeak:function(t,e){return!this.getPasswordRule(e.getValue())}.bind(this)},validMessage:{passwordIsWeak:function(){return t.getPasswordRule(this.getValue())}},event:{focus:function(t){"password"===t.getValue()&&t.setValue(""),t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),blur:function(t){t.verify(!0)}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputPassword)}.bind(this)},confirmPassword:{text:this.lp.confirmNewPassword,type:"password",className:"inputComfirmPassword",notEmpty:!0,defaultValueAsEmpty:!0,emptyTip:this.lp.inputComfirmPassword,attr:{placeholder:this.lp.inputComfirmPassword},validRule:{passwordNotEqual:function(t,e){if(e.getValue()===this.stepForm_2.getItem("password").getValue())return!0}.bind(this)},validMessage:{passwordNotEqual:this.lp.passwordNotEqual},event:{focus:function(t){"password"===t.getValue()&&t.setValue(""),t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),blur:function(t){t.warningStatus||t.getElements()[0].setStyles(this.css.inputComfirmPassword)}.bind(this),keyup:function(t,e){13===e.event.keyCode&&this.gotoStep(3)}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputComfirmPassword)}.bind(this)},nextStep:{value:this.lp.nextStep,type:"button",className:"inputSignUp",event:{click:function(){this.gotoStep(3)}.bind(this)}}}},this.app,this.css),this.stepForm_2.load()}.bind(this),!0)},loadStepForm_3:function(){this.stepNode_3=new Element("div",{styles:this.css.stepFormResult}).inject(this.formTableArea)},createSetForm_3:function(t,e){var i=null;t?(this.stepNode_3.setStyles(this.css.stepFormResult),this.stepNode_3.setStyle("display",""),new Element("div",{styles:this.css.resetPasswordSuccess,text:this.lp.resetPasswordSuccess}).inject(this.stepNode_3),i=new Element("div",{styles:this.css.resetPasswordResultArea}).inject(this.stepNode_3),new Element("div",{styles:this.css.resetPasswordResultWord,text:this.lp.resetPasswordSuccessWord}).inject(i),new Element("div",{styles:this.css.resetPasswordResultAction,text:this.lp.gotoLogin}).inject(i).addEvent("click",function(){this.gotoLogin()}.bind(this))):(this.stepNode_3.setStyles(this.css.stepFormResult_fail),this.stepNode_3.setStyle("display",""),new Element("div",{styles:this.css.resetPasswordFail,text:e+this.lp.resetPasswordFail}).inject(this.stepNode_3),i=new Element("div",{styles:this.css.resetPasswordResultArea}).inject(this.stepNode_3),new Element("div",{styles:this.css.resetPasswordResultWord,text:this.lp.resetPasswordFailWord}).inject(i),new Element("div",{styles:this.css.resetPasswordResultAction,text:this.lp.backtoModify}).inject(i).addEvent("click",function(){this.reset()}.bind(this)))},gotoStep:function(t){var e=this["stepForm_"+(t-1)];if(e.clearWarning(),e.getResult(!0,",",!0,!1,!0)){var i;for(i=1;i<=t;i++)this["step_"+i].setStyles(this.css["step_"+i+"_active"]),i!==t&&this["stepLink_"+i]&&this["stepLink_"+i].setStyles(this.css["stepLink_"+i+"_active"]);for(i=t+1;i<=3;i++)this["step_"+i].setStyles(this.css["step_"+i]),3!==i&&this["stepLink_"+i].setStyles(this.css["stepLink_"+i]);for(i=1;i<=3;i++)i===t?this["stepNode_"+i].setStyle("display",""):this["stepNode_"+i].setStyle("display","none");if(3===t){var o={credential:this.stepForm_1.getItem("name").getValue(),codeAnswer:this.stepForm_1.getItem("codeAnswer").getValue(),password:this.stepForm_2.getItem("password").getValue()};this.actions.resetPassword(o,function(){this.createSetForm_3(!0)}.bind(this),function(t){var e=JSON.parse(t.responseText);this.createSetForm_3(!1,e.message)}.bind(this),!1)}}},checkMobile:function(t){var e=!0;return this.actions.checkRegisterMobile(t,function(){e=!0}.bind(this),function(){e=!1}.bind(this),!1),e},checkUserName:function(t,e){var i=!1;return this.actions.checkCredentialOnResetPassword(t,function(t){t.data&&(i=t.data.value)}.bind(this),function(t){if(404===t.status)e.options.validMessage.isInvalid=this.lp.pageNotFound,i=!1;else{var o=JSON.parse(t.responseText);e.options.validMessage.isInvalid=o.message,i=!1}}.bind(this),!1),i},sendVerificationAction:function(){var t=!0,e=this.stepForm_1.getItem("name");if(this.stepForm_1.clearWarning(),e.verify(!0)){if(this.actions.createCodeOnResetPassword(e.getValue(),(function(t){}),function(i){var o=JSON.parse(i.responseText);e.setWarning(o.message,"invalid"),t=!1}.bind(this),!1),!t)return!1;this.stepForm_1.getItem("verificationAction").container.setStyle("display","none"),this.setResendVerification()}},setResendVerification:function(){var t=this.stepForm_1.getItem("resendVerificationAction");t.container.setStyle("display",""),this.resendElement=t.getElements()[0],this.resendElement.set("text",this.lp.resendVerification+"(60)");var e=60;this.timer=setInterval(function(){e>0?this.resendElement.set("text",this.lp.resendVerification+"("+--e+")"):(this.stepForm_1.getItem("verificationAction").container.setStyle("display",""),t.container.setStyle("display","none"),clearInterval(this.timer))}.bind(this),1e3)},getPasswordRule:function(t){var e="";return this.actions.checkRegisterPassword(t,function(t){e=t.data.value||""}.bind(this),null,!1),e},gotoLogin:function(){this.explorer.openLoginForm({},(function(){window.location.reload()})),this.close()},gotoSignup:function(){this.explorer.openSignUpForm(),this.close()}}),MWF.xDesktop.Authentication.ChangePasswordForm=new Class({Extends:MPopupForm,Implements:[Options,Events],options:{style:"default",popupStyle:"o2platform",width:"650",height:"480",hasTop:!0,hasIcon:!1,hasTopIcon:!0,hasTopContent:!0,hasBottom:!1,hasScroll:!1,hasMark:!1,title:"",draggable:!0,closeAction:!0,userName:""},load:function(){this.options.title||this.setOptions({title:MWF.LP.authentication.ChangePasswordFormTitle}),this._loadCss()},_createTableContent:function(){var t=this;this.actions=MWF.Actions.get("x_organization_assemble_personal");this.formTableArea.set("html","<table width='100%' bordr='0' cellpadding='0' cellspacing='0' styles='formTable'><tr><td styles='formTableValueTop20' item='password'></td></tr><tr><td styles='formTableValueTop20' item='newPassword'></td><tr><td styles='formTableValue'><div item='passwordTip'></div></td></tr><tr><td styles='formTableValueTop20' item='confirmPassword'></td><tr><td styles='formTableValueTop20' item='submitAction'></td></tr><tr><td><div item='forgetPassword'></div><div item='gotoLoginAction'></div></td></tr><tr><td  styles='formTableValue' item='errorArea'></td></tr></table>"),this.errorArea=this.formTableArea.getElement("[item=errorArea]"),MWF.xDesktop.requireApp("Template","MForm",function(){this.form=new MForm(this.formTableArea,this.data,{style:this.options.popupStyle,verifyType:"single",isEdited:this.isEdited||this.isNew,onPostLoad:function(){var t=this.form;t.getItem("password").tipNode=this.errorArea,t.getItem("newPassword").tipNode=this.errorArea,t.getItem("confirmPassword").tipNode=this.errorArea}.bind(this),itemTemplate:{password:{text:this.lp.oldPassword,type:"password",className:"inputPassword",notEmpty:!0,defaultValueAsEmpty:!0,emptyTip:this.lp.inputYourOldPassword,attr:{placeholder:this.lp.oldPassword},event:{focus:function(t){"password"===t.getValue()&&t.setValue(""),t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),blur:function(t){t.warningStatus||t.getElements()[0].setStyles(this.css.inputPassword)}.bind(this),keyup:function(t,e){13===e.event.keyCode&&this.ok()}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputPassword)}.bind(this)},newPassword:{text:this.lp.newPassword,type:"password",className:"inputPassword",notEmpty:!0,defaultValueAsEmpty:!0,emptyTip:this.lp.inputYourNewPassword,attr:{placeholder:this.lp.newPassword},validRule:{passwordIsWeak:function(t,e){return!this.getPasswordRule(e.getValue())}.bind(this)},validMessage:{passwordIsWeak:function(){return t.getPasswordRule(this.getValue())}},event:{focus:function(t){t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),blur:function(t){}.bind(this),keyup:function(t,e){13===e.event.keyCode&&this.ok()}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputPassword)}.bind(this)},confirmPassword:{text:this.lp.confirmNewPassword,type:"password",className:"inputComfirmPassword",notEmpty:!0,defaultValueAsEmpty:!0,emptyTip:this.lp.inputComfirmPassword,attr:{placeholder:this.lp.confirmPassword},validRule:{passwordNotEqual:function(t,e){if(e.getValue()===this.form.getItem("newPassword").getValue())return!0}.bind(this)},validMessage:{passwordNotEqual:this.lp.passwordNotEqual},event:{focus:function(t){t.warningStatus||t.getElements()[0].setStyles(this.css.inputActive)}.bind(this),blur:function(t){t.warningStatus||t.getElements()[0].setStyles(this.css.inputComfirmPassword)}.bind(this),keyup:function(t,e){13===e.event.keyCode&&this.ok()}.bind(this)},onEmpty:function(t){t.getElements()[0].setStyles(this.css.inputEmpty)}.bind(this),onUnempty:function(t){t.getElements()[0].setStyles(this.css.inputComfirmPassword)}.bind(this)},forgetPassword:{value:this.lp.forgetPassword,type:"innerText",className:"forgetPassword",event:{click:function(){this.gotoResetPassword()}.bind(this)}},gotoLoginAction:{value:this.lp.loginAction,type:"innerText",className:"signUpAction",event:{click:function(){this.gotoLogin()}.bind(this)}},passwordTip:{type:"innerText",className:"forgetPassword",defaultValue:layout.config.passwordRegexHint||""},submitAction:{value:this.lp.submitAction,type:"button",className:"inputLogin",event:{click:function(){this.ok()}.bind(this)}}}},this.app,this.css),this.form.load()}.bind(this),!0)},gotoLogin:function(){this.explorer.openLoginForm({},(function(){window.location.reload()})),this.close()},getPasswordRule:function(t){var e="";return this.actions.checkRegisterPassword(t,function(t){e=t.data.value||""}.bind(this),null,!1),e},gotoResetPassword:function(){this.explorer.openResetPasswordForm(),this.close()},ok:function(){this.fireEvent("queryOk"),this.errorArea.empty();var t=this.form.getResult(!0,",",!0,!1,!0);t&&this._ok(t,function(t){"error"===t.type?this.app&&this.app.notice(t.message,"error"):(this._close(),this.formMaskNode&&this.formMaskNode.destroy(),this.formAreaNode.destroy(),this.explorer&&this.explorer.view&&this.explorer.view.reload(),this.app&&this.app.notice(this.lp.changePasswordSuccess,"success"),this.fireEvent("postOk",t))}.bind(this))},setWarning:function(t){this.errorArea.empty(),new Element("div",{text:t,styles:this.css.warningMessageNode}).inject(this.errorArea)},_ok:function(t,e){var i={userName:this.options.userName,oldPassword:t.password,newPassword:t.newPassword,confirmPassword:t.confirmPassword,isEncrypted:"n"};o2.Actions.load("x_organization_assemble_personal").ResetAction.setPasswordAnonymous(i,function(t){e&&e(t)}.bind(this),function(t){var e=JSON.parse(t.responseText);this.setWarning(e.message)}.bind(this))}}),MWF.require("MWF.widget.Dialog",null,!1),MWF.xDesktop.Window=new Class({Extends:MWF.widget.Dialog,Implements:[Options,Events],options:{style:"default",title:"window",width:"800",height:"600",top:"10",left:"10",fromTop:"0",fromLeft:"0",mark:!1,html:"",text:"",url:"",content:null,isMax:!0,isClose:!0,isResize:!0,isMove:!0,buttons:null,buttonList:null},initialize:function(t,e){var i=layout.desktop.desktopNode.getPosition();this.options.top=parseFloat(this.options.top)+i.y,this.options.fromTop=parseFloat(this.options.fromTop)+i.y,this.app=t,this.parent(e),this.isHide=!1,this.isMax=!1},changeStyle:function(){var t=this.getNodeStyleStatus();this.cssPath=MWF.defaultPath+"/widget/$Dialog/"+this.options.style+"/css.wcss",this._loadCss(),this.getContentUrl(),new Request.HTML({url:this.contentUrl,method:"GET",async:!1,onSuccess:function(e){var i=e[0],o=i.getElement(".MWF_dialod_title"),s=i.getElement(".MWF_dialod_title_center"),n=i.getElement(".MWF_dialod_title_refresh"),a=i.getElement(".MWF_dialod_title_text"),r=i.getElement(".MWF_dialod_title_action"),l=i.getElement(".MWF_dialod_under"),d=i.getElement(".MWF_dialod_content"),c=i.getElement(".MWF_dialod_bottom"),h=i.getElement(".MWF_dialod_bottom_resize"),p=i.getElement(".MWF_dialod_button");this.title&&o&&(this.title.clearStyles(),this.title.set("style",o.get("style"))),this.titleCenter&&s&&(this.titleCenter.clearStyles(),this.titleCenter.set("style",s.get("style"))),this.titleRefresh&&n&&(this.titleRefresh.clearStyles(),this.titleRefresh.set("style",n.get("style"))),this.titleText&&a&&(this.titleText.clearStyles(),this.titleText.set("style",a.get("style"))),this.titleAction&&r&&(this.titleAction.clearStyles(),this.titleAction.set("style",r.get("style"))),this.under&&l&&(this.under.clearStyles(),this.under.set("style",l.get("style"))),this.content&&d&&(this.content.clearStyles(),this.content.set("style",d.get("style"))),this.bottom&&c&&(this.bottom.clearStyles(),this.bottom.set("style",c.get("style"))),this.resizeNode&&h&&(this.resizeNode.clearStyles(),this.resizeNode.set("style",h.get("style"))),this.button&&p&&(this.button.clearStyles(),this.button.set("style",p.get("style"))),this.setNodeStyleStatus(t),this.node.setStyles(this.css.to),this.spacer.setStyles(this.css.spacerTo),this.closeActionNode&&this.closeActionNode.setStyles(this.css.closeActionNode),this.maxActionNode&&this.maxActionNode.setStyles(this.css.maxActionNode),this.minActionNode&&this.minActionNode.setStyles(this.css.minActionNode),this.restoreActionNode&&this.restoreActionNode.setStyles(this.css.restoreActionNode),this.app==this.app.desktop.currentApp?(this.node.setStyles(this.css.current),this.spacer.setStyles(this.css.spacerCurrent)):(this.node.setStyles(this.css.uncurrent),this.spacer.setStyles(this.css.spacerUncurrent)),this.setContentSize()}.bind(this)}).send()},setNodeStyleStatus:function(t){this.css.to.height=t.nodeTo.height,this.css.to.width=t.nodeTo.width,this.css.to.top=t.nodeTo.top,this.css.to.left=t.nodeTo.left,this.css.to["z-index"]=t.nodeTo["z-index"],this.css.from.top=t.nodeFrom.top,this.css.from.left=t.nodeFrom.left,this.css.from["z-index"]=t.nodeFrom["z-index"],this.css.spacerTo.height=t.spacerTo.height,this.css.spacerTo.width=t.spacerTo.width,this.css.spacerTo.top=t.spacerTo.top,this.css.spacerTo.left=t.spacerTo.left,this.css.spacerTo["z-index"]=t.spacerTo["z-index"],this.css.spacerFrom.top=t.spacerFrom.top,this.css.spacerFrom.left=t.spacerFrom.left,this.css.spacerFrom["z-index"]=t.spacerFrom["z-index"]},getNodeStyleStatus:function(){return{nodeTo:{height:this.css.to.height,width:this.css.to.width,top:this.css.to.top,left:this.css.to.left,"z-index":this.css.to["z-index"]},nodeFrom:{top:this.css.from.top,left:this.css.from.left,"z-index":this.css.from["z-index"]},spacerTo:{height:this.css.spacerTo.height,width:this.css.spacerTo.width,top:this.css.spacerTo.top,left:this.css.spacerTo.left,"z-index":this.css.spacerTo["z-index"]},spacerFrom:{top:this.css.spacerFrom.top,left:this.css.spacerFrom.left,"z-index":this.css.spacerFrom["z-index"]}}},reStyle:function(t){t&&this.setOptions(t);var e=null;MWF.xDesktop.zIndexPool&&(e=MWF.xDesktop.zIndexPool.applyZindex()),this.css.to.height=this.options.height+"px",this.css.to.width=this.options.width+"px",this.css.to.top=this.options.top+"px",this.css.to.left=this.options.left+"px",this.css.from.top=this.options.fromTop+"px",this.css.from.left=this.options.fromLeft+"px",e&&(this.css.from["z-index"]=e+1,this.css.to["z-index"]=e+1),this.node&&this.node.set("styles",this.css.from),this.css.spacerTo.height=this.options.height+"px",this.css.spacerTo.width=this.options.width+"px",this.css.spacerTo.top=this.options.top+"px",this.css.spacerTo.left=this.options.left+"px",this.css.spacerFrom.top=this.options.fromTop+"px",this.css.spacerFrom.left=this.options.fromLeft+"px",e&&(this.css.spacerFrom["z-index"]=e,this.css.spacerTo["z-index"]=e),this.spacer&&this.spacer.set("styles",this.css.spacerFrom)},setCurrent:function(){if(MWF.xDesktop.zIndexPool&&this.node.getStyle("z-index").toFloat()+1<MWF.xDesktop.zIndexPool.zIndex){var t=MWF.xDesktop.zIndexPool.applyZindex();this.css.spacerTo["z-index"]=t,this.css.spacerFrom["z-index"]=t,this.spacer&&this.spacer.setStyle("z-index",t),this.css.to["z-index"]=t+1,this.css.from["z-index"]=t+1,this.node.setStyle("z-index",t+1)}this.node.setStyles(this.css.current),this.spacer&&this.spacer.setStyles(this.css.spacerCurrent)},setUncurrent:function(){this.node.setStyles(this.css.uncurrent),this.spacer&&this.spacer.setStyles(this.css.spacerUncurrent)},setTitleEvent:function(){this.node.addEvent("mousedown",function(){this.app.setCurrent()}.bind(this)),this.containerDrag=new Drag(this.title,{handle:this.title,onStart:function(t,e){this.containerDrag.stop();var i=this.node.clone(!1).inject($(document.body)),o=this.node.getSize();i.setStyles({opacity:.7,border:"2px dashed #999","z-index":this.node.getStyle("z-index"),width:o.x,height:o.y,"background-color":"#CCC",position:"absolute"}),i.position({relativeTo:this.node,position:"upperLeft",edge:"upperLeft"});var s=new Drag.Move(i,{onStart:function(){this.node.fade("out"),this.spacer.fade("out")}.bind(this),onDrop:function(t,e,i){this.node.fade("in"),this.spacer.fade(this.css.spacerTo.opacity),this.node.position({relativeTo:t,position:"upperLeft",edge:"upperLeft"});var o=this.node.getPosition();this.spacer.setStyles({top:o.y,left:o.x}),this.css.spacerTo.left=o.x,this.css.spacerTo.top=o.y,this.css.to.left=o.x,this.css.to.top=o.y,t.destroy(),this.fireEvent("moveDrop",[i])}.bind(this),onCancel:function(t){t.destroy(),s=null}});s.start(e)}.bind(this)}),this.options.isResize&&this.node.makeResizable({handle:this.resizeNode||this.bottom,limit:{x:[200,null],y:[200,null]},onDrag:function(){var t=this.node.getComputedSize();this.spacer&&(this.spacer.setStyles({width:t.width,height:t.height}),this.css.spacerTo.width=t.width,this.css.spacerTo.height=t.height),this.css.to.width=t.width,this.css.to.height=t.height,this.setContentSize(t.height,t.width),this.fireEvent("resize")}.bind(this),onComplete:function(){this.fireEvent("resizeCompleted")}.bind(this)})},getContentUrl:function(){layout.desktop.windowCss?this.contentUrl=MWF.defaultPath+"/xDesktop/$Window/desktop_default/dialog.html":this.contentUrl=MWF.defaultPath+"/xDesktop/$Window/"+this.options.style+"/dialog.html"},_loadCss:function(){this.app.desktop.windowCss?this.css=this.app.desktop.windowCss:(this.path=MWF.defaultPath+"/xDesktop/$Window/",this.cssPath=MWF.defaultPath+"/xDesktop/$Window/"+this.options.style+"/css.wcss",new Request.JSON({url:this.cssPath,secure:!1,async:!1,method:"get",noCache:!0,onSuccess:function(t,e){this.css=t}.bind(this),onError:function(t,e){alert(t)}}).send())},getSpacer:function(){this.spacer||(this.spacer=new Element("div",{styles:this.css.spacerFrom}).inject(this.options.container||$(document.body)))},showNoAnimation:function(t,e){t?this.showMaxIm():e?(this.showIm(),this.hideIm()):this.showIm()},showMaxIm:function(t){this.querySetMaxStyle(),this.getSpacer(),this.spacer.setStyle("display","block"),this.node.setStyle("display","block");var e,i=this.getMaxSize(),o=Object.clone(this.css.spacerTo),s=Object.clone(this.css.to);o.top=i.position.y,o.left=i.position.x,o.width=i.spacer.x,o.height=i.spacer.y,s.top=i.position.y,s.left=i.position.x,s.width=i.node.x,s.height=i.node.y,e=i.contentSize,this.fireEvent("queryShow")&&(this.fireEvent("queryMax"),this.node.setStyles(s),this.spacer.setStyles(o),this.content.setStyles(e),this.titleText&&this.getTitle(),this.isMax=!0,this.isHide=!1,this.containerDrag&&this.containerDrag.detach(),this.postSetMaxStyle(),t&&t(),this.fireEvent("postShow"),this.fireEvent("postMax"),this.maxActionNode&&this.maxActionNode.setStyles(this.css.restoreActionNode))},showIm:function(){this.options.mark&&this._markShow(),this.getSpacer(),this.spacer.setStyle("display","block"),this.node.setStyle("display","block");var t=this.getContentSize(this.css.to.height.toFloat(),this.css.to.width.toFloat());this.fireEvent("queryShow")&&(this.spacer.setStyles(this.css.spacerTo),this.app.desktop.currentApp!=this.app&&this.spacer.setStyles(this.css.spacerUncurrent),this.content.setStyles(t),this.node.setStyles(this.css.to),this.titleText&&this.getTitle(),this.isHide=!1,this.containerDrag&&this.containerDrag.attach(),this.fireEvent("postShow"))},show:function(){this.options.mark&&this._markShow(),this.morph||(this.morph=new Fx.Morph(this.node,{duration:100,link:"chain"})),this.morph.setOptions({duration:50}),this.getSpacer(),this.spacerMorph||(this.spacerMorph=new Fx.Morph(this.spacer,{duration:100,link:"chain"})),this.spacerMorph.setOptions({duration:50}),this.contentMorph||(this.contentMorph=new Fx.Morph(this.content,{duration:50,link:"chain"})),this.contentMorph.setOptions({duration:50}),this.spacer.setStyle("display","block"),this.node.setStyle("display","block");var t=this.getContentSize(this.css.to.height.toFloat(),this.css.to.width.toFloat());if(this.fireEvent("queryShow")){var e=!1,i=!1,o=!1;this.spacerMorph.start(this.css.spacerTo).chain(function(){this.app.desktop.currentApp!=this.app&&this.spacer.setStyles(this.css.spacerUncurrent),i=!0,s()}.bind(this)),this.contentMorph.start(t).chain(function(){o=!0,s()}.bind(this)),this.morph.start(this.css.to).chain(function(){e=!0,s()}.bind(this));var s=function(){e&&i&&o&&(this.titleText&&this.getTitle(),this.isHide=!1,this.containerDrag&&this.containerDrag.attach(),this.fireEvent("postShow"))}.bind(this)}},restore:function(t){this.querySetRestoreStyle(),this.options.mark&&this._markShow(),this.morph||(this.morph=new Fx.Morph(this.node,{duration:100,link:"chain"})),this.morph.setOptions({duration:50}),this.getSpacer(),this.spacerMorph||(this.spacerMorph=new Fx.Morph(this.spacer,{duration:100,link:"chain"})),this.spacerMorph.setOptions({duration:50}),this.contentMorph||(this.contentMorph=new Fx.Morph(this.content,{duration:50,link:"chain"})),this.contentMorph.setOptions({duration:50}),this.spacer.setStyle("display","block"),this.node.setStyle("display","block");var e=this.getContentSize(this.css.to.height.toFloat(),this.css.to.width.toFloat());if(this.fireEvent("queryRestore")){var i=!1,o=!1,s=!1;this.spacerMorph.start(this.css.spacerTo).chain(function(){this.app.desktop.currentApp!=this.app&&this.spacer.setStyles(this.css.spacerUncurrent),o=!0,n()}.bind(this)),this.contentMorph.start(e).chain(function(){s=!0,n()}.bind(this)),this.morph.start(this.css.to).chain(function(){this.app.desktop.currentApp!=this.app&&this.node.setStyles(this.css.uncurrent),i=!0,n()}.bind(this));var n=function(){i&&o&&s&&(this.titleText&&this.getTitle(),this.isHide=!1,this.isMax=!1,this.containerDrag&&this.containerDrag.attach(),this.postSetRestoreStyle(),t&&t(),this.fireEvent("resize"),this.fireEvent("postRestore"))}.bind(this);this.maxActionNode&&this.maxActionNode.setStyles(this.css.maxActionNode)}},querySetRestoreStyle:function(){this.css.windowTitleRestore&&this.title.setStyles(this.css.windowTitleRestore),this.css.titleRefresh&&this.titleRefresh.setStyles(this.css.titleRefresh),this.css.windowTitleTextRestore&&this.titleText.setStyles(this.css.windowTitleTextRestore),this.css.windowTitleActionRestore&&this.titleAction.setStyles(this.css.windowTitleActionRestore),this.closeActionNode&&this.css.closeActionNode&&this.closeActionNode.setStyles(this.css.closeActionNode),this.maxActionNode&&this.css.maxActionNode&&this.maxActionNode.setStyles(this.css.maxActionNode),this.minActionNode&&this.css.minActionNode&&this.minActionNode.setStyles(this.css.minActionNode)},postSetRestoreStyle:function(){this.css.windowNodeRestore&&this.node.setStyles(this.css.windowNodeRestore)},restoreIm:function(t){this.querySetRestoreStyle(),this.getSpacer(),this.spacer.setStyle("display","block"),this.node.setStyle("display","block");var e=this.getContentSize(this.css.to.height.toFloat(),this.css.to.width.toFloat());this.fireEvent("queryRestore")&&(this.node.setStyles(this.css.to),this.spacer.setStyles(this.css.spacerTo),this.content.setStyles(e),this.titleText&&this.getTitle(),this.isHide=!1,this.isMax=!1,this.containerDrag&&this.containerDrag.attach(),this.postSetRestoreStyle(),t&&t(),this.fireEvent("resize"),this.fireEvent("postRestore"),this.maxActionNode&&this.maxActionNode.setStyles(this.css.maxActionNode))},hideIm:function(t,e,i){this.getSpacer(),t&&(this.css.from.left=t,this.css.spacerFrom.left=t),e&&(this.css.from.top=e,this.css.spacerFrom.top=e),this.fireEvent("queryHide")&&(this.titleText&&this.titleText.set("text",""),this.button&&this.button.set("html",""),this.spacer.setStyles(this.css.spacerFrom),this.node.setStyles(this.css.from),this._markHide(),this.isHide=!0,this.node.setStyle("display","none"),this.spacer.setStyle("display","none"),i&&i(),this.fireEvent("postHide"))},hide:function(t,e,i){if(this.morph||(this.morph=new Fx.Morph(this.node,{duration:100,link:"chain"})),this.morph.setOptions({duration:100}),this.getSpacer(),this.spacerMorph||(this.spacerMorph=new Fx.Morph(this.spacer,{duration:100,link:"chain"})),this.spacerMorph.setOptions({duration:100}),t&&(this.css.from.left=t,this.css.spacerFrom.left=t),e&&(this.css.from.top=e,this.css.spacerFrom.top=e),this.fireEvent("queryHide")){this.titleText&&this.titleText.set("text",""),this.button&&this.button.set("html","");var o=!1,s=!1;this.spacerMorph.start(this.css.spacerFrom).chain(function(){s=!0,n()}.bind(this)),this.morph.start(this.css.from).chain(function(){o=!0,n()}.bind(this));var n=function(){o&&s&&(this._markHide(),this.isHide=!0,this.node.setStyle("display","none"),this.spacer.setStyle("display","none"),i&&i(),this.fireEvent("postHide"))}.bind(this)}},_hideIm:function(){this.node.setStyle("display","none"),this.spacer.setStyle("display","none")},_showIm:function(){this.node.setStyle("display","block"),this.spacer.setStyle("display","block")},_fadeOut:function(){this.node.fade("out"),this.spacer.fade("out")},_fadeIn:function(){this.node.fade("in"),this.spacer.fade("in")},close:function(t){this.morph||(this.morph=new Fx.Morph(this.node,{duration:100,link:"chain"})),this.morph.setOptions({duration:100}),this.getSpacer(),this.spacerMorph||(this.spacerMorph=new Fx.Morph(this.spacer,{duration:100,link:"chain"})),this.spacerMorph.setOptions({duration:100}),this.fireEvent("queryClose")&&(this.spacer.destroy(),this.spacer=null,this._markHide(),this.node.destroy(),this.node=null,t&&t(),this.fireEvent("postClose"),o2.release(this))},getAction:function(){this.titleAction.setStyles(this.css.titleAction);var t=this;this.closeActionNode=new Element("div",{styles:this.css.closeActionNode,events:{mouseover:function(e){this.setStyles(t.css.titleActionOver),e.stopPropagation()},mouseout:function(e){this.setStyles(t.css.titleActionOut),e.stopPropagation()},mousedown:function(e){this.setStyles(t.css.titleActionDown),e.stopPropagation()},mouseup:function(e){this.setStyles(t.css.titleActionOver),e.stopPropagation()},click:function(t){this.app.close(),t.stopPropagation()}.bind(this)}}).inject(this.titleAction),0!=this.options.isMax&&(this.maxActionNode=new Element("div",{styles:this.css.maxActionNode,events:{mouseover:function(){this.setStyles(t.css.titleActionOver)},mouseout:function(){this.setStyles(t.css.titleActionOut)},mousedown:function(){this.setStyles(t.css.titleActionDown)},mouseup:function(){this.setStyles(t.css.titleActionOver)},click:function(){this.app.maxOrRestoreSize()}.bind(this)}}).inject(this.titleAction)),this.options.isResize&&this.title.addEvent("dblclick",this.app.maxOrRestoreSize.bind(this.app)),this.minActionNode=new Element("div",{styles:this.css.minActionNode,events:{mouseover:function(){this.setStyles(t.css.titleActionOver)},mouseout:function(){this.setStyles(t.css.titleActionOut)},mousedown:function(){this.setStyles(t.css.titleActionDown)},mouseup:function(){this.setStyles(t.css.titleActionOver)},click:function(){this.app.minSize()}.bind(this)}}).inject(this.titleAction),0!=this.options.isRefresh&&this.titleRefresh.addEvents({mouseover:function(){this.setStyles(t.css.titleActionOver)},mouseout:function(){this.setStyles(t.css.titleActionOut)},mousedown:function(){this.setStyles(t.css.titleActionDown)},mouseup:function(){this.setStyles(t.css.titleActionOver)},click:function(t){this.app.refresh()}.bind(this),dblclick:function(t){t.stopPropagation()}.bind(this)})},maxOrRestoreSize:function(t){this.isMax?this.restoreSize(t):this.maxSize(t)},restoreSize:function(t){this.restore(t)},maxSize:function(t){this.querySetMaxStyle(),this.morph||(this.morph=new Fx.Morph(this.node,{duration:50,link:"chain"})),this.morph.setOptions({duration:50}),this.getSpacer(),this.spacerMorph||(this.spacerMorph=new Fx.Morph(this.spacer,{duration:50,link:"chain"})),this.spacerMorph.setOptions({duration:50}),this.contentMorph||(this.contentMorph=new Fx.Morph(this.content,{duration:50,link:"chain"})),this.contentMorph.setOptions({duration:50}),this.spacer.setStyle("display","block"),this.node.setStyle("display","block");var e,i=this.getMaxSize(),o=Object.clone(this.css.spacerTo),s=Object.clone(this.css.to);if(o.top=i.position.y,o.left=i.position.x,o.width=i.spacer.x,o.height=i.spacer.y,s.top=i.position.y,s.left=i.position.x,s.width=i.node.x,s.height=i.node.y,e=i.contentSize,this.fireEvent("queryMax")){var n=!1,a=!1,r=!1;this.spacerMorph.start(o).chain(function(){this.app.desktop.currentApp!=this.app&&this.spacer.setStyles(this.css.spacerUncurrent),a=!0,l()}.bind(this)),this.contentMorph.start(e).chain(function(){r=!0,l()}.bind(this)),this.morph.start(s).chain(function(){this.app.desktop.currentApp!=this.app&&this.node.setStyles(this.css.uncurrent),n=!0,l()}.bind(this));var l=function(){n&&a&&r&&(this.titleText&&this.getTitle(),this.isMax=!0,this.isHide=!1,this.containerDrag&&this.containerDrag.detach(),this.postSetMaxStyle(),t&&t(),this.fireEvent("resize"),this.fireEvent("postMax"))}.bind(this);this.maxActionNode&&this.maxActionNode.setStyles(this.css.restoreActionNode)}},querySetMaxStyle:function(){this.css.windowTitleMax&&this.title.setStyles(this.css.windowTitleMax),this.css.windowTitleRefreshMax&&this.titleRefresh.setStyles(this.css.windowTitleRefreshMax),this.css.windowTitleTextMax&&this.titleText.setStyles(this.css.windowTitleTextMax),this.css.windowTitleActionMax&&this.titleAction.setStyles(this.css.windowTitleActionMax),this.closeActionNode&&this.css.windowActionNodeMax&&this.closeActionNode.setStyles(this.css.windowActionNodeMax),this.maxActionNode&&this.css.windowActionNodeMax&&this.maxActionNode.setStyles(this.css.windowActionNodeMax),this.minActionNode&&this.css.windowActionNodeMax&&this.minActionNode.setStyles(this.css.windowActionNodeMax)},postSetMaxStyle:function(){this.css.windowNodeMax&&this.node.setStyles(this.css.windowNodeMax)},maxSizeIm:function(t){this.querySetMaxStyle(),this.getSpacer(),this.spacer.setStyle("display","block"),this.node.setStyle("display","block");var e,i=this.getMaxSize(),o=Object.clone(this.css.spacerTo),s=Object.clone(this.css.to);o.top=i.position.y,o.left=i.position.x,o.width=i.spacer.x,o.height=i.spacer.y,s.top=i.position.y,s.left=i.position.x,s.width=i.node.x,s.height=i.node.y,e=i.contentSize,this.fireEvent("queryMax")&&(this.node.setStyles(s),this.spacer.setStyles(o),this.content.setStyles(e),this.titleText&&this.getTitle(),this.isMax=!0,this.isHide=!1,this.containerDrag&&this.containerDrag.detach(),this.postSetMaxStyle(),t&&t(),this.fireEvent("resize"),this.fireEvent("postMax"),this.maxActionNode&&this.maxActionNode.setStyles(this.css.restoreActionNode))},getMaxSize:function(){var t=layout.desktop.desktopNode.getSize(),e=layout.desktop.desktopNode.getPosition(),i=this.spacer.getStyle("padding-top").toFloat(),o=this.spacer.getStyle("padding-bottom").toFloat(),s=this.spacer.getStyle("padding-left").toFloat(),n=this.spacer.getStyle("padding-right").toFloat();spacerHeight=t.y-i-o,spacerWidth=t.x-s-n,i=this.node.getStyle("padding-top").toFloat(),o=this.node.getStyle("padding-bottom").toFloat(),s=this.node.getStyle("padding-left").toFloat(),n=this.node.getStyle("padding-right").toFloat(),nodeHeight=t.y-i-o,nodeWidth=t.x-s-n;var a=this.getContentSize(nodeHeight,nodeWidth);return{node:{x:nodeWidth,y:nodeHeight},spacer:{x:spacerWidth,y:spacerHeight},position:{x:e.x,y:e.y},contentSize:a}}}),MWF.xDesktop.WindowTransparent=new Class({Implements:[Options,Events],options:{style:"default"},initialize:function(t,e){this.setOptions(e);layout.desktop.desktopNode.getPosition();this.app=t,this.fireEvent("queryLoad"),this.isMax=!1,this.isHide=!1,this.css={to:{width:"0",height:"0",left:"0",top:"0"}};var i=null;MWF.xDesktop.zIndexPool&&(i=MWF.xDesktop.zIndexPool.applyZindex()),this.node=new Element("div",{styles:{width:"0px",height:"0px",top:"0px",left:"0px",position:"absolute","z-index":i||100}}).inject(this.options.container||$(document.body)),this.content=new Element("div",{styles:{width:"100%",height:"100%"}}).inject(this.node),this.fireEvent("postLoad")},show:function(){this.fireEvent("queryShow"),this.node.setStyle("display","block"),this.isHide=!1,this.fireEvent("postShow")},hide:function(){this.fireEvent("queryHide"),this.node.setStyle("display","none"),this.isHide=!0,this.fireEvent("postHide")},restore:function(t){this.fireEvent("queryRestore"),this.node.setStyle("display","block"),this.isHide=!1,this.fireEvent("postRestore"),t&&t()},restoreSize:function(t){this.restore(t)},close:function(t){this.fireEvent("queryClose"),this.node.destroy(),this.node=null,this.content=null,t&&t(),this.fireEvent("postClose")},maxOrRestoreSize:function(t){this.isMax?this.restoreSize(t):this.maxSize(t)},maxSize:function(t){this.fireEvent("queryMax"),this.node.setStyle("display","block"),this.isHide=!1,this.fireEvent("resize"),this.fireEvent("postMax"),t&&t()},restoreIm:function(){this.restore()},maxSizeIm:function(){this.maxSize()},setCurrent:function(){if(MWF.xDesktop.zIndexPool&&this.node.getStyle("z-index").toFloat()+1<MWF.xDesktop.zIndexPool.zIndex){var t=MWF.xDesktop.zIndexPool.applyZindex();this.node.setStyle("z-index",t)}},_fadeOut:function(){this.node.fade("out"),this.spacer&&this.spacer.fade("out")},_fadeIn:function(){this.node.fade("in"),this.spacer&&this.spacer.fade("in")},setUncurrent:function(){},reStyle:function(){},changeStyle:function(){}}),MWF.xApplication.Common=MWF.xApplication.Common||{options:{multitask:!1,executable:!0}},MWF.require("MWF.xDesktop.Window",null,!1),Events.implement({fireEvent:function(t,e,i){if(this.options&&this.options.name&&MWF.xDesktop&&MWF.xDesktop.$globalEvents&&MWF.xDesktop.$globalEvents[this.options.name]){var o=MWF.xDesktop.$globalEvents[this.options.name][t];o&&o.each((function(t){i?t.delay(i,this,e):t.apply(this,e)}),this)}t=t.replace(/^on([A-Z])/,(function(t,e){return e.toLowerCase()}));var s=this.$events[t];return s?(e=Array.convert(e),s.each((function(t){i?t.delay(i,this,e):t.apply(this,e)}),this),this):this}}),MWF.xApplication.Common.Main=new Class({Extends:MWF.widget.Common,Implements:[Options,Events],options:{desktopReload:!0,style:"default",name:"Common",icon:"",title:"",event:null,width:"800",height:"600",isResize:!0,isMax:!0,setCurrent:!0,isRefresh:!1,isWindowRefresh:!0},initialize:function(t,e){this.setOptions(e),this.desktop=t,this.path="../x_component_"+this.options.name.replace(/\./g,"_")+"/$Main/",this.options.icon=this.path+this.options.style+"/"+this.options.icon,this.cssPath=this.path+this.options.style+"/css.wcss",this.options.mvcStyle&&(this.stylePath=this.path+this.options.style+"/"+this.options.mvcStyle),this.options.mvcStyle||this._loadCss()},fireAppEvent:function(t){this.fireEvent(t),this[("on-"+t).camelCase()]&&this[("on-"+t).camelCase()]()},loadNoAnimation:function(t,e,i){this.fireAppEvent("queryLoad"),this.inBrowser?this.loadInBrowser(t):"Homepage"===layout.viewMode?this.loadWindowFlat(t):this.loadWindow(t,!1,e,i)},load:function(t,e){this.fireAppEvent("queryLoad"),this.inBrowser?this.loadInBrowser(e):"Default"===layout.viewMode?this.loadWindowFlat(t):this.loadWindow(t)},loadApplication:function(t){t&&t()},loadWindow:function(t,e,i,o){this.fireAppEvent("queryLoadWindow");var s={style:"desktop_"+this.desktop.options.style,title:this.options.title,isResize:this.options.isResize,isMax:this.options.isMax,isRefresh:this.options.isWindowRefresh,container:this.desktop.node,onPostShow:function(){t&&this.setCurrent(),this.fireAppEvent("postLoadWindow"),this.fireAppEvent("queryLoadApplication"),this.options.title&&this.setTitle(this.options.title),this.stylePath?this.content.loadCss(this.stylePath,this.loadWindowApplication.bind(this)):this.loadWindowApplication()}.bind(this),onResize:function(){this.window.options.title=this.options.title,this.window.getTitle(),this.fireAppEvent("resize")}.bind(this),onResizeCompleted:function(){this.fireAppEvent("resizeCompleted")}.bind(this),onMoveDrop:function(t){"firefox"==Browser.name?(t.event.clientX<0||t.event.clientY<0)&&this.openInNewBrowser():(t.event.x<0||t.event.y<0)&&this.openInNewBrowser()}.bind(this)};this.options.event&&(s.fromTop=this.options.event.page.y,s.fromLeft=this.options.event.page.x),s.width=this.options.width||s.width,s.height=this.options.height||s.height,this.window=new MWF.xDesktop.Window(this,s),this.fireAppEvent("loadWindow"),this.content=this.window.content,!1===e?this.window.showNoAnimation(i,o):this.window.show()},loadWindowApplication:function(){this.setContentEvent(),this.loadApplication(function(){this.fireAppEvent("postLoadApplication")}.bind(this)),this.fireAppEvent("postLoad")},loadWindowFlat:function(t){this.window={app:this,isHide:!1,isMax:!0,maxSize:function(){},restore:function(){},setCurrent:function(){this.window.node.removeClass("layout_component_node_hide"),this.window.node.addClass("layout_component_node_show")}.bind(this),setUncurrent:function(){this.window.node.addClass("layout_component_node_hide"),this.window.node.removeClass("layout_component_node_show")}.bind(this),hide:function(){},maxOrRestoreSize:function(){},restoreSize:function(){},close:function(t){this.content.destroy(),t&&t()}.bind(this)},this.window.node=new Element("div.layout_component_node").inject(layout.desktop.contentNode),this.window.content=new Element("div.layout_component_content").inject(this.window.node),this.content=this.window.content,this.resizeFun=function(){this.fireAppEvent("resize")}.bind(this),layout.desktop.addEvent("resize",this.resizeFun),t?this.setCurrent():this.setUncurrent(),this.fireAppEvent("postLoadWindow"),this.fireAppEvent("queryLoadApplication"),this.options.title&&this.setTitle(this.options.title),this.stylePath?this.content.loadCss(this.stylePath,this.loadWindowApplication.bind(this)):this.loadWindowApplication()},loadInBrowser:function(t){this.window={isHide:!1,isMax:!0,maxSize:function(){},restore:function(){},setCurrent:function(){},setUncurrent:function(){},hide:function(){},maxOrRestoreSize:function(){},restoreSize:function(){},close:function(){}},this.window.titleText=$(document.head).getElement("title");try{this.window.titleText.set("text",this.options.title)}catch(t){}t&&"element"===o2.typeOf(t)&&(this.window.content=t),this.window.content||(this.window.content=$("appContent")||$("layout")),this.window.content||(this.window.content=new Element("div",{styles:{width:0,height:0}}).inject(document.body)),this.content=this.window.content,window.addEvent("resize",function(){this.fireAppEvent("resize")}.bind(this)),window.addEventListener("beforeunload",function(t){this.fireAppEvent("queryClose")}.bind(this)),layout.mobile&&window.addEventListener("pagehide",function(t){this.fireAppEvent("queryClose")}.bind(this)),this.fireAppEvent("postLoadWindow"),this.fireAppEvent("queryLoadApplication"),this.setContentEvent(),this.options.title&&this.setTitle(this.options.title),this.stylePath&&o2.loadCss(this.stylePath),this.loadApplication(function(){this.fireAppEvent("postLoadApplication")}.bind(this)),this.fireAppEvent("postLoad")},openInNewBrowser:function(t){this.desktop.openBrowserApp=this.options.name,this.desktop.openBrowserStatus=this.recordStatus?this.recordStatus():null;var e=this.desktop.openBrowserStatus?JSON.encode(this.desktop.openBrowserStatus):"",i="../x_desktop/app.html?app="+this.options.name+"&status="+e;window.open(o2.filterUrl(i),"_blank"),this.inBrowser||t||this.close()},openInNewWindow:function(){this.desktop.openBrowserApp=this.options.name,this.desktop.openBrowserStatus=this.recordStatus?this.recordStatus():null,window.open(o2.filterUrl("../x_desktop/app.html"),"_blank"),this.inBrowser||this.close()},setContentEvent:function(){},setCurrent:function(){if(this.desktop.currentApp==this)return!0;this.desktop.currentApp&&this.desktop.currentApp.setUncurrent(),this.window.setCurrent(),this.window.isHide?this.window.isMax?this.window.maxSize(function(){this.fireAppEvent("current")}.bind(this)):this.window.restore(function(){this.fireAppEvent("current")}.bind(this)):this.fireAppEvent("current"),this.taskitem&&this.taskitem.selected(),this.desktop.currentApp=this,this.desktop.appCurrentList.erase(this),this.desktop.appCurrentList.push(this)},setUncurrent:function(){this.desktop.currentApp==this?(this.window.setUncurrent(),this.taskitem.unSelected(),this.desktop.currentApp=null,this.fireAppEvent("uncurrent")):(this.window.setUncurrent(),this.taskitem.unSelected())},minSize:function(){this.fireAppEvent("queryMinSize");var t=this.taskitem.node.getPosition();this.setUncurrent(),this.window.hide(t.x,t.y,function(){this.fireAppEvent("postMinSize")}.bind(this))},_minSize:function(){var t=this.taskitem.node.getPosition();this.setUncurrent(),this.window.hide(t.x,t.y)},maxOrRestoreSize:function(){var t=!0;this.window.isMax&&(t=!1),this.fireAppEvent(t?"queryMaxSize":"queryRestoreSize"),this.window.maxOrRestoreSize(function(){this.fireAppEvent(t?"postMaxSize":"postRestoreSize")}.bind(this))},maxSize:function(t){this.window.isMax?t&&t():(this.fireAppEvent("queryMaxSize"),this.window.maxSize(function(){this.fireAppEvent("postMaxSize"),t&&t()}.bind(this)))},_maxSize:function(t){this.window.maxSize()},restoreSize:function(t){this.fireAppEvent("queryRestoreSize"),this.window.restoreSize(function(){this.fireAppEvent("postRestoreSize"),t&&t()}.bind(this))},_restoreSize:function(t){this.window.restoreSize()},refresh:function(){this.desktop.refreshApp(this)},close:function(t){this.inBrowser?(window.open("","_self").close(),window.close()):(this.fireAppEvent("queryClose"),this.setUncurrent(),this.window.close(function(){t||this.taskitem.destroy(),this.window=null,this.taskitem=null,this.resizeFun&&layout.desktop.removeEvent("resize",this.resizeFun),this.desktop.closeApp(this,t),this.fireAppEvent("postClose"),o2.release(this)}.bind(this)))},setTitle:function(t){try{this.taskitem&&(this.taskitem.textNode.set("text",t),this.taskitem.node.set("title",t+(this.appId?"-"+this.appId:"")),this.taskitem.setTaskitemSize()),this.options.title=t,this.window.titleText.set("text",t)}catch(t){}},loading:function(){},unLoading:function(){},onQueryLoad:function(){},onQueryLoadWindow:function(){},onLoadWindow:function(){},onPostLoadWindow:function(){},onQueryLoadApplication:function(){},onPostLoadApplication:function(){},onPostLoad:function(){},onResize:function(){},onQueryClose:function(){},onPostClose:function(){},onQueryMinSize:function(){},onPostMinSize:function(){},onQueryMaxSize:function(){},onPostMaxSize:function(){},onQueryRestoreSize:function(){},onPostRestoreSize:function(){},dialog:function(t){MWF.require("MWF.xDesktop.Dialog",function(){t.markNode=this.content,new MWF.xDesktop.Dialog(t).show()}.bind(this))},notice:function(t,e,i,o,s){if(window.mBox){o||(o={x:"right",y:"top"}),i||(i=this.content),i||(i=this.window.content),e||(e="ok");var n=i||layout.layout.contentNode;layout.mobile&&(n=$(document.body));var a=s;a||(a={x:10,y:(o.y.toString().toLowerCase(),10)}),new mBox.Notice({type:e,position:o,move:!1,target:n,delayClose:"error"==e?1e4:5e3,offset:a,content:t})}},confirm:function(t,e,i,o,s,n,a,r,l,d,c){MWF.require("MWF.xDesktop.Dialog",function(){var h=layout.mobile?$(document.body):this.content||$(document.body),p=h.getSize(),u=0,m=0;if(layout.mobile)parseFloat(s)>p.x?(s=p.x-40,u=40):u=(p.x-parseFloat(s))/2,m=parseFloat(n)>p.y?0:(p.y-parseFloat(n))/2;else{var f;if("element"==typeOf(e))u=(f=e.getPosition(h)).x,m=f.y;else if("firefox"==Browser.name?(u=parseFloat(e.event.clientX||e.event.x),m=parseFloat(e.event.clientY||e.event.y)):(u=parseFloat(e.event.x),m=parseFloat(e.event.y)),e.target)u=(f=e.target.getPosition(h)).x,m=f.y;u+parseFloat(s)>p.x&&(u-=parseFloat(s)),u<0&&(u=0),m+parseFloat(n)>p.y&&(m-=parseFloat(n)),m<0&&(m=0),u-=20}var g="",y="";"object"==typeOf(o).toLowerCase()?(g=o.text,y=o.html):g=o;var x=new MWF.xDesktop.Dialog({title:i,style:c||"o2",top:m,left:u,fromTop:m,fromLeft:u,width:s,height:n,text:g,html:y,container:h,mark:!!d,maskNode:d||h,buttonList:[{type:"ok",text:MWF.LP.process.button.ok,action:a},{type:"cancel",text:MWF.LP.process.button.cancel,action:r}]});switch(t.toLowerCase()){case"success":x.content.setStyle("background-image","url(data:image/png;base64,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)");break;case"error":x.content.setStyle("background-image","url(data:image/png;base64,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)");break;case"info":x.content.setStyle("background-image","url(data:image/png;base64,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)");break;case"warn":x.content.setStyle("background-image","url(data:image/png;base64,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)")}x.show(),l&&l(x)}.bind(this))},dlg:function(t,e,i,o,s,n,a,r,l){MWF.require("MWF.xDesktop.Dialog",function(){var d=this.content.getSize(),c=e?MWF.getEPointer(e):MWF.getCenter({x:s,y:n},this.content,this.content),h=c.x||0,p=c.y||0;h+parseFloat(s)>d.x&&(h-=parseFloat(s)),h<0&&(h=0),p+parseFloat(n)>d.y&&(p-=parseFloat(n)),p<0&&(p=0);var u="",m="";"object"===typeOf(o).toLowerCase()?(u=o.text,m=o.html):u=o;var f=new MWF.xDesktop.Dialog({title:i,style:l||"o2",top:p,left:h-20,fromTop:p,fromLeft:h-20,width:s,height:n,text:u,html:m,container:this.content,mark:!!r,maskNode:r||this.content,buttonList:a});switch(t.toLowerCase()){case"success":f.content.setStyle("background-image","url(data:image/png;base64,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)");break;case"error":f.content.setStyle("background-image","url(data:image/png;base64,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)");break;case"info":f.content.setStyle("background-image","url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABvBJREFUeNqsWF1sFFUUPndm9n+3W5aWLi2VGgJtgy3UEn6MQGI0GgmC0UgfTEjEBxPDA29qYqLGGOODifGBGGOUYOKDPIg2QgykWgUtP1WgLT+lFKFCf9l2uz+z83c9Z3p3u1u6u4Pxpqczd+7MPd8999xzvrPskb2fgsMW4NzaBpxvBsbWMWCrgUEdAKsA4HHO+R2wrOucmxe5qZ9Jjt3ovtX1eRznt0pN2ndof+5eKYcAJ34YJPlFvH3OFV7+uOyPgOQLg+wJAXP5gMkueifM9XTYzMw2W+mZnWbqHjDF09Pc8WFneur2kaHOjwbxewuB8VK6WCnLoCVexcsrnmWNW1zhKMiBKqdWBDM5CfrMKKh3+8+bWurw1W/f/gwfawstVdYyuNIGtMYBxqT9/lVbmRyIZMFlUeKfCdyiPi0WN02ScPdkvGX2KxJa0IOiVETbU0O/Ptr00getamzkY1R+lbAuZiV52fpnC4FY5lqQpPe80bX7/A2bmIRbQcpzggAQLFhaGiw1aV+5nqEPEQcjWDnAJJLLC57q1Ux2+9tATzwUXN40PH3j7Nj4hWMW6cbr4mDmLIJAals63Esbsk8LhFsGAkjBY3UaPN8M8HKbBGsiHBRmwK1pEy0kC+Pkf4eK/EtA8gTX8Mxs1Lukti9+6+IUAco3ROE24dZ4apo6XEvq57dkQbPQKtsQ575NleB1z30erQbYsMoApScJ3bd1kMRWLWw0r9/Ud+Ci72H3AMoMinGfZchZ0Ufe961Yz/LNvFBoi/ZuDMKaukoIBAIQDofB7XaD1+MGl8Thl6EMWkYq+r3srQAzfrc1VN8yG7t26k/UpGfNJ+WOL54ab30746TQMkuIBVuaaiAUCoHf7wdFUewr9ek5jZf8HucnPe7Q0j3R9t0tqNdtn4AsGIoj7sjKLbI3ZDtiKSEnvTyqgSzLhScB+/ScxsvNQXq8NY0twdrGF/DTYBYH/QtQQJN9lbZzlhOa7MRADHRDnB4h1KfnNO5kHtLnCkSeCERXR4V1QK5e98yTij/ypquyrug+Fwhu7+BoGsbjGngVCaoq3NA7PAuHT4/BjxdjUMrf8oUpqN/IRNGO/TM3e69QQFQo1zB3wN7PMokht+802Q/nUij/5MVyNnesJTnrAmUb6UXfacPb71ESCiU9CkxQBsxcfFHB0tXFjz2CkRQP5iw/AlIcgSG9sjfYiLc+CjMKZV8mk4GM0mBw/MDTUdjc4ANVVUHXdftk5AIWnqozf6tw8FQc44yz/EV6ZZe3XvgM9ogGUFwoYxmav7IyAitXLgNN0yCRSNiAcgHN5YJdyyU42N2LSzYdopHId6rmwdh8BBz4DMA7Ry7D71fG4d2OFjvQFVqOg2EY837lsGGADIhMIFGojIOpoWUMB2LCsd4RSGdKbKmjeYSgXgSeEoZnCjE0y8iEMa06Wgk3DQxOJiZvdFhJWsTRnVuGIxjL0CazGVWxqaKeaba5iLMZcoGu2Dg4BYPUA0/niEiWlkKc1TLUnXYQcjKBZZQd55azhaFeMNLx6xTwiHApRJ65oTleTdn3rAewDOpVY3cGcmCIxQfrPD3I6DYRuS5vGbPsuBOfISqiJyb7Jge6zmE3TVslUTmBCDs5miy3qqJCJ6CMItPMnbxSQvoyM2OnM9N3iWglbcsQW6dyAq2yW5Hk9rncUiQ3oSKT9hnjCTkwRd15DKb93DRwkQwToVw8R5Hl0CoDscE/TmI3jqLSBttnk+oaKiesTJIT4V5MuGHY5Ht7cxWk00jGrcL8RH16TuM2STcMKDYX6UlN3Dw+PdQzKMBoOdpJDH1qoOuvSOPWWklxt9krWkg3cTVv7NkAr+3aaFNNsko+n6G+z+eDra0PQU2lD37rv7MonSBfUaduHx0+/skXODqGEsvyYNsyoobRqK4xUrFOCkZ2vMgThqYPBUMQDAbtYJcPJCv0nMbpPXp/4Rw0L/pI12T/yW9Q36QAomU5cEFFiQWW0vDU6xu9kRVvuXwVO+wE+n81pB2Z+HjX1JXuQ1NzJ2i0aHVADbeLU4FFdY3s9vkll6eVAWcLa6cHFeQ/XL03cnTi0k9fYUVwgVQJXzGKVpTCfywqsBB9F5UTyDmq8aTVsP8Cgk5ZJjGQHL32NfkIBrjhPCA6uUfRijIfEO0l1TWKJ3gWnXoG61w/U1zRnFPC/VVjlvFRM9REH4aM7yYunfhy7PzRn4WzThC9pOFsrZ0PpuSvEOhDkiA+QWLxS5u2byPOSlSRGBoRI+IjRAMo+1LSo1xDIZ4iqwhocSGJcr9COCGITJw6AuUVpY1P9N2CGDFhHkOcDk2E+KQIaNS3Ck24uKIHaQRKFgBkIVIeGFJoCjHE1XI6+b8CDABnZtjY0mkIGQAAAABJRU5ErkJggg==)");break;case"warn":f.content.setStyle("background-image","url(data:image/png;base64,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)")}f.show()}.bind(this))},alert:function(t,e,i,o,s,n){MWF.require("MWF.widget.Dialog",function(){var a=$(document.body).getSize(),r=0,l=0;if("center"===e){var d=o2.getCenterPosition(this.content,s,n);r=d.x,l=d.y}else r=parseFloat(e.event.x),l=parseFloat(e.event.y),"firefox"==Browser.name&&(r=parseFloat(e.event.clientX),l=parseFloat(e.event.clientY)),r-=parseFloat(s)/2,l-=parseFloat(n)/2;r+parseFloat(s)>a.x&&(r-=parseFloat(s)),r<0&&(r=0),l+parseFloat(n)>a.y&&(l-=parseFloat(n)),l<0&&(l=0);var c="",h="";"object"==typeOf(o).toLowerCase()?(c=o.text,h=o.html):c=o;var p=new MWF.DL({title:i,style:"o2",top:l,left:r,fromTop:l,fromLeft:r,width:s,height:n,text:c,html:h,maskNode:this.content,container:this.content,buttonList:[{text:MWF.LP.process.button.ok,action:function(){this.close()}}]});switch(t.toLowerCase()){case"success":p.content.setStyle("background-image","url(data:image/png;base64,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)");break;case"error":p.content.setStyle("background-image","url(data:image/png;base64,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)");break;case"info":p.content.setStyle("background-image","url(data:image/png;base64,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)");break;case"warn":p.content.setStyle("background-image","url(data:image/png;base64,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)")}p.content.setStyle("overflow","auto"),p.show()}.bind(this))}}),MWF.xApplication.cms=MWF.xApplication.cms||{},MWF.xApplication.cms.Document=MWF.xApplication.cms.Document||{},MWF.xApplication.cms.Document.options=MWF.xApplication.cms.Document.options||Object.clone(o2.xApplication.Common.options),MWF.xApplication.cms.Document.options.multitask=!0,MWF.xApplication.cms.Document.Main=new Class({Extends:MWF.xApplication.Common.Main,Implements:[Options,Events],options:{style:"default",name:"cms.Document",icon:"icon.png",width:"1200",height:"680",title:"",documentId:"",isControl:!1,readonly:!0,autoSave:!0,saveOnClose:!0,postPublish:null,postDelete:null,forceFormId:null,printFormId:null,readFormId:null,editFormId:null},onQueryLoad:function(){this.options.title||this.setOptions({title:MWF.xApplication.cms.Document.LP.title}),this.lp=MWF.xApplication.cms.Document.LP,this.status&&(this.options.documentId=this.status.documentId,this.options.readonly="true"===this.status.readonly||!0===this.status.readonly,this.options.autoSave="true"===this.status.autoSave||!0===this.status.autoSave,this.options.saveOnClose="true"===this.status.saveOnClose||!0===this.status.saveOnClose,this.options.formId=this.status.formId,this.options.formEditId=this.status.formEditId,this.options.printFormId=this.status.printFormId,this.options.forceFormId=this.status.forceFormId,this.options.readFormId=this.status.readFormId,this.options.editFormId=this.status.editFormId),this.options.formId&&!this.options.readFormId&&(this.options.readFormId=this.options.formId),this.options.formEditId&&!this.options.editFormId&&(this.options.editFormId=this.options.formEditId),"false"===this.options.readonly&&(this.options.readonly=!1),"true"===this.options.readonly&&(this.options.readonly=!0),this.options.documentId&&""!=this.options.documentId&&(this.options.appId="cms.Document"+this.options.documentId)},loadApplication:function(t){this.node=new Element("div",{styles:this.css.content}).inject(this.content),MWF.require("MWF.widget.Mask",function(){this.mask=new MWF.widget.Mask({style:"desktop"}),this.formNode=new Element("div",{styles:{"min-height":"100%"}}).inject(this.node),this.action=MWF.Actions.get("x_cms_assemble_control"),this.options.isRefresh?(this.mask.loadNode(this.content),this.loadDocumentV2()):this.maxSize(function(){this.mask.loadNode(this.content),this.loadDocumentV2()}.bind(this)),t&&t()}.bind(this)),this.addEvent("queryClose",function(){this.refreshTaskCenter()}.bind(this)),this.addKeyboardEvents()},refreshTaskCenter:function(){this.desktop.apps&&this.desktop.apps["cms.Explorer"]&&(this.desktop.apps["cms.Explorer"].content&&this.desktop.apps["cms.Explorer"].content.unmask(),this.desktop.apps["cms.Explorer"]&&this.desktop.apps["cms.Explorer"].refreshAll())},addKeyboardEvents:function(){this.addEvent("keySave",function(t){this.keySave(t)}.bind(this))},keySave:function(t){this.appForm&&(this.readonly||(this.appForm.saveDocument(),t.preventDefault()))},reload:function(){this.formNode.empty(),this.appForm&&(MWF.release(this.appForm),this.appForm=null,this.form=null),this.loadDocumentV2()},loadDocumentV2:function(t){this.loadFormFlag=!1,this.loadDocumentFlag=!1,this.loadModuleFlag=!1,this.json_document=null,this.json_form=null;var e=!1!==this.options.readonly||this.options.anonymousAccess,i="";this.options.forceFormId?i=this.options.forceFormId:this.options.printFormId?i=this.options.printFormId:e&&this.options.readFormId&&(i=this.options.readFormId),i?(this.getFormV2(i),this.getDocumentV2()):(e&&this.lookupFormV2(!0),this.getDocumentV2());MWF.xDesktop.requireApp("cms.Xform","$all",function(){this.loadModuleFlag=!0,this.checkLoad()}.bind(this))},checkLoad:function(t){t&&(this.json_document?this.getFormV2(this.formId):this.needLoadForm=!0),this.needLoadForm&&!this.loadFormFlag&&this.json_document&&(this.needLoadForm=!1,this.getFormV2(this.formId)),this.loadFormFlag&&this.loadDocumentFlag&&this.loadModuleFlag&&(this.parseFormV2(this.json_form.data),layout.session&&layout.session.user?(this.openDocument(),this.mask&&this.mask.hide()):layout.sessionPromise&&layout.sessionPromise.then(function(){this.openDocument(),this.mask&&this.mask.hide()}.bind(this),(function(){})))},getDocumentV2:function(){var t,e=this.options.documentId||this.options.id,i=!1!==this.options.readonly;t=this.options.anonymousAccess?"getDocumentByAnonymous":i&&!this.options.printFormId?"viewDocument":"getDocument";var o=this.options.anonymousAccess?"listAttachmentByAnonymous":"listAttachment";o2.Actions.invokeAsync([{action:this.action,name:t},{action:this.action,name:o}],{success:function(t,e){if(t){e&&"array"===typeOf(e.data)?t.data.attachmentList=e.data:t.data.attachmentList=[],this.json_document=t,this.loadDocumentFlag=!0,this.parseDocumentV2(this.json_document.data);var i=!(!1!==this.options.readonly||this.options.anonymousAccess);this.checkLoad(i)}else this.errorLoadingV2()}.bind(this),failure:function(t){this.errorLoadingV2(t)}.bind(this)},e,e)},getFormV2:function(t,e,i){var o;o=this.options.anonymousAccess?layout.mobile?"getFormMobileAnonymousV2":"getFormAnonymousV2":layout.mobile?"getFormMobileV2":"getFormV2",this.action[o](t,e||"",function(t){this.json_form=t,this.loadFormFlag=!0,this.checkLoad()}.bind(this),function(t){!i&&this.document&&this.document.categoryId?this.action.getCategory(this.document.categoryId,function(t){var e=t.data;!0===this.readonly&&e.readFormId&&""!=e.readFormId?this.formId=e.readFormId:this.formId=e.formId||e.readFormId,this.getFormV2(this.formId,null,!0)}.bind(this)):this.errorLoadingV2(t,"form")}.bind(this))},lookupFormV2:function(t){var e,i=this.options.documentId||this.options.id;e=this.options.anonymousAccess?layout.mobile?"lookupFormWithDocMobileAnonymousV2":"lookupFormWithDocAnonymousV2":layout.mobile?"lookupFormWithDocMobileV2":"lookupFormWithDocV2",this.action[e](i,function(e){var i;if(i=t?e.data.readFormId||e.data.formId:e.data.formId||e.data.readFormId,e.data.form)this.json_form=e,this.loadFormFlag=!0,this.checkLoad();else{var o=e.data.cacheTag||"";this.getFormV2(i,o)}}.bind(this),function(){this.checkLoad(!0)}.bind(this))},parseFormV2:function(t){if(t.form)this.formDataText=t.form.data?MWF.decodeJsonString(t.form.data):"",this.form=this.formDataText?JSON.decode(this.formDataText):null,this.relatedFormMap=t.relatedFormMap,this.relatedScriptMap=t.relatedScriptMap,t.form.data&&delete t.form.data,this.formInfor=t.form;else{if(layout.mobile){var e=t.data.mobileData||t.data.data;this.formDataText=e?MWF.decodeJsonString(e):"",this.form=this.formDataText?JSON.decode(this.formDataText):null}else this.formDataText=t.data.data?MWF.decodeJsonString(t.data.data):"",this.form=this.formDataText?JSON.decode(this.formDataText):null;t.data.data&&delete t.data.data,t.data.mobileData&&delete t.data.mobileData,this.formInfor=t.form}},parseDocumentV2:function(t){var e;e=t.document.title,this.setTitle(e),t.document.subject=t.document.title,this.data=t.data,this.attachmentList=t.attachmentList||[],this.attachmentList.each((function(t){t.lastUpdateTime=t.updateTime,t.person=t.creatorUid})),this.data.isNew=!!this.isEmptyObject(this.data),this.document=t.document;var i;(MWF.AC.isCMSManager()||t.isAppAdmin||t.isCategoryAdmin||t.isManager)&&(this.options.isControl=!0,this.isAdmin=!0),(t.isCreator||this.desktop.session.user.distinguishedName==this.document.creatorPerson)&&(this.options.isControl=!0),t.isEditor&&(this.options.isControl=!0),this.options.readonly?this.readonly=!0:this.options.isControl&&"archived"!=this.document.docStatus?this.readonly=!1:this.readonly=!0,i=!0===this.readonly?this.options.forceFormId||this.options.printFormId||this.options.readFormId||this.document.readFormId||this.options.editFormId||this.document.form:this.options.forceFormId||this.options.printFormId||this.options.editFormId||this.document.form||this.options.readFormId||this.document.readFormId,this.formId=i,(this.readonly||"published"==this.document.docStatus)&&(this.options.autoSave=!1,this.options.saveOnClose=!1);var o=this.options.isControl;this.control=t.control||{allowRead:!0,allowPublishDocument:o&&"draft"==this.document.docStatus,allowSave:o&&"published"==this.document.docStatus,allowPopularDocument:MWF.AC.isHotPictureManager()&&"published"==this.document.docStatus,allowEditDocument:o&&!this.document.wf_workId,allowDeleteDocument:o&&!this.document.wf_workId}},errorLoadingV2:function(t,e){var i;i="form"===e?this.lp.formGettedError:this.lp.documentGettedError,t&&(i=i+":"+t.responseText),this.notice(i,"error"),layout.sessionPromise.then(function(){this.mask&&this.mask.hide(),this.close()}.bind(this),(function(){}))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},setPopularDocument:function(){MWF.xDesktop.requireApp("cms.Document","HotLinkForm",null,!1),new MWF.xApplication.cms.Document.HotLinkForm(this,this.document,{documentId:this.options.documentId,summary:this.data.explain||"",onPostOk:function(t){}.bind(this)},{app:this,lp:this.lp,css:this.css,actions:this.action}).create()},openDocument:function(){this.form&&MWF.xDesktop.requireApp("cms.Xform","$all",function(){this.appForm=new MWF.CMSForm(this.formNode,this.form,{readonly:this.readonly,autoSave:this.options.autoSave,saveOnClose:this.options.saveOnClose,onPostPublish:this.options.postPublish,onAfterPublish:this.options.afterPublish,onPostDelete:this.options.postDelete}),this.appForm.businessData={data:this.data,document:this.document,control:this.control,attachmentList:this.attachmentList,formInfor:this.formInfor,status:{readonly:this.readonly}},this.appForm.formDataText=this.formDataText,this.appForm.documentAction=this.action,this.appForm.app=this,this.appForm.load()}.bind(this))},recordStatus:function(){var t={documentId:this.options.documentId,readonly:this.options.readonly,autoSave:this.options.autoSave,saveOnClose:this.options.saveOnClose};return this.options.readFormId&&(t.readFormId=this.options.readFormId),this.options.editFormId&&(t.editFormId=this.options.editFormId),this.options.printFormId&&(t.printFormId=this.options.printFormId),this.options.forceFormId&&(t.forceFormId=this.options.forceFormId),this.options.appId&&""!=this.options.appId&&(t.appId=this.options.appId),t},onPostClose:function(){this.appForm&&(this.appForm.modules.each((function(t){MWF.release(t)})),MWF.release(this.appForm))}}),MWF.xApplication.Selector=MWF.xApplication.Selector||{},o2.xApplication.Selector.package=MWF.O2Selector=new Class({Implements:[Options],options:{count:0,type:"person",title:"",groups:[],roles:[],units:[],unitType:"",values:[],exclude:[],categoryType:"unit",dutyUnitLevelBy:"duty"},initialize:function(t,e,i){if(MWF.xApplication.Selector.LP||MWF.xDesktop.requireApp("Selector","lp."+MWF.language,null,!1),this.loading=!0,e.title||(e.title=MWF.xApplication.Selector.LP.multiSelectTitle),this.setOptions(e),this.container=t,this.options.types&&"array"===typeOf(this.options.types)&&this.options.types.length>0)MWF.xDesktop.requireApp("Selector","MultipleSelector",function(){this.selector=new MWF.xApplication.Selector.MultipleSelector(this.container,this.options),!0!==i&&this.selector.load(),this.loading=!1}.bind(this));else{var o="string"===typeOf(this.options.type)?this.options.type.capitalize():this.options.type;o&&("unit"===o.toLowerCase()&&this.options.unitType?MWF.xDesktop.requireApp("Selector","UnitWithType",function(){this.selector=new MWF.xApplication.Selector.UnitWithType(this.container,e),!0!==i&&this.selector.load(),this.loading=!1}.bind(this)):"identity"===o.toLowerCase()&&this.options.dutys&&this.options.dutys.length&&"duty"===this.options.categoryType.toLowerCase()?MWF.xDesktop.requireApp("Selector","IdentityWidthDuty",function(){this.selector=new MWF.xApplication.Selector.IdentityWidthDuty(this.container,e),!0!==i&&this.selector.load(),this.loading=!1}.bind(this)):"identity"===o.toLowerCase()&&this.options.dutys&&this.options.dutys.length?MWF.xDesktop.requireApp("Selector","IdentityWidthDutyCategoryByUnit",function(){this.selector=new MWF.xApplication.Selector.IdentityWidthDutyCategoryByUnit(this.container,e),!0!==i&&this.selector.load(),this.loading=!1}.bind(this)):MWF.xDesktop.requireApp("Selector",o,function(){this.selector=new MWF.xApplication.Selector[o](this.container,e),!0!==i&&this.selector.load(),this.loading=!1}.bind(this)))}}}),MWF.O2SelectorFilter=new Class({Implements:[Options],options:{count:0,type:"person",title:"Select Person",groups:[],roles:[],units:[],unitType:"",values:[]},initialize:function(t,e){if(this.setOptions(e),this.value=t,this.options.types&&"array"===typeOf(this.options.types)&&this.options.types.length>0)MWF.xDesktop.requireApp("Selector","MultipleSelector",function(){this.selectFilter=new MWF.xApplication.Selector.MultipleSelector.Filter(this.container,this.options)}.bind(this),!1);else{var i="string"===typeOf(this.options.type)?this.options.type.capitalize():this.options.type;i&&("unit"===i.toLowerCase()&&this.options.unitType?MWF.xDesktop.requireApp("Selector","UnitWithType",function(){this.selector=new MWF.xApplication.Selector.UnitWithType.Filter(this.container,e),this.selector.load()}.bind(this)):"identity"===i.toLowerCase()&&this.options.dutys&&this.options.dutys.length&&"duty"===this.options.categoryType.toLowerCase()?MWF.xDesktop.requireApp("Selector","IdentityWidthDuty",function(){this.selectFilter=new MWF.xApplication.Selector.IdentityWidthDuty.Filter(this.value,e)}.bind(this),!1):"identity"===i.toLowerCase()&&this.options.dutys&&this.options.dutys.length?MWF.xDesktop.requireApp("Selector","IdentityWidthDutyCategoryByUnit",function(){this.selectFilter=new MWF.xApplication.Selector.IdentityWidthDutyCategoryByUnit.Filter(this.value,e)}.bind(this)):MWF.xDesktop.requireApp("Selector",i,function(){this.selectFilter=new MWF.xApplication.Selector[i].Filter(this.value,e)}.bind(this),!1))}},filter:function(t,e){return this.selectFilter.filter(t,e)}}),function(){var t=function(t,e){var i,o=(i="string"===typeOf(t)?(t={id:t}).id:t.distinguishedName||t.name||t.id).length;switch(i.substring(o-1,o)){case"U":new o2.widget.O2Unit(t,e,{style:"xform"});break;case"I":new o2.widget.O2Identity(t,e,{style:"xform"});break;case"G":new o2.widget.O2Group(t,e,{style:"xform"});break;case"P":new o2.widget.O2Person(t,e,{style:"xform"});break;case"R":new o2.widget.O2Role(t,e,{style:"xform"})}};Element.prototype.setSelectPerson=function(e,i){i.types&&(i.type=""),i.onComplete=function(e){o2.require("o2.widget.O2Identity",function(){i.values=[],this.empty(),e.each(function(e){i.values.push(e.data),t(e.data,this),i.selectItem&&i.selectItem(e)}.bind(this)),this.store("data-value",i.values)}.bind(this))}.bind(this),i.values&&i.values.each(function(e){this.store("data-value",i.values),t(e,this)}.bind(this)),this.addEvent("click",function(){var t=this.getZIndex();i.zIndex=t+1,new MWF.O2Selector(e,i)}.bind(this))}}(),MWF.xScript=MWF.xScript||{},MWF.xScript.Actions=MWF.xScript.Actions||{},MWF.require("MWF.xDesktop.Actions.RestActions",null,!1);var invoke=function(t){return function(e,i,o,s){return this.action.invoke({name:t,data:e,async:s,success:i,failure:o})}};MWF.xScript.Actions.UnitActions=new Class({initialize:function(){this.actionPath="/xScript/Actions/unitAction.json",this.action=new MWF.xDesktop.Actions.RestActions(this.actionPath,"x_organization_assemble_express")},listGroup:invoke("listGroup"),listSubGroupDirect:invoke("listSubGroupDirect"),listSubGroupNested:invoke("listSubGroupNested"),listSupGroupDirect:invoke("listSupGroupDirect"),listSupGroupNested:invoke("listSupGroupNested"),listGroupWithPerson:invoke("listGroupWithPerson"),groupHasRole:invoke("groupHasRole"),listRole:invoke("listRole"),listRoleWithPerson:invoke("listRoleWithPerson"),personHasRole:invoke("personHasRole"),listPerson:invoke("listPerson"),listPersonSubDirect:invoke("listPersonSubDirect"),listPersonSubNested:invoke("listPersonSubested"),listPersonSupDirect:invoke("listPersonSupDirect"),listPersonSupNested:invoke("listPersonSupNested"),listPersonWithGroup:invoke("listPersonWithGroup"),listPersonWithRole:invoke("listPersonWithRole"),listPersonWithIdentity:invoke("listPersonWithIdentity"),listPersonWithUnitDirect:invoke("listPersonWithUnitDirect"),listPersonWithUnitNested:invoke("listPersonWithUnitNested"),listPersonAllAttribute:invoke("listPersonAllAttribute"),listPersonWithAttributeValue:invoke("listPersonWithAttributeValue"),listPersonWithAttribute:invoke("listPersonWithAttribute"),appendPersonAttribute:invoke("appendPersonAttribute"),setPersonAttribute:invoke("setPersonAttribute"),getPersonAttribute:invoke("getPersonAttribute"),listPersonAttributeName:invoke("listPersonAttributeName"),listIdentity:invoke("listIdentity"),listIdentityWithPerson:invoke("listIdentityWithPerson"),listIdentityWithUnitDirect:invoke("listIdentityWithUnitDirect"),listIdentityWithUnitNested:invoke("listIdentityWithUnitNested"),listUnit:invoke("listUnit"),listUnitSubDirect:invoke("listUnitSubDirect"),listUnitSubNested:invoke("listUnitSubNested"),listUnitSupDirect:invoke("listUnitSupDirect"),listUnitSupNested:invoke("listUnitSupNested"),getUnitWithIdentityAndLevel:invoke("getUnitWithIdentityAndLevel"),getUnitWithIdentityAndType:invoke("getUnitWithIdentityAndType"),listUnitSupNestedWithIdentity:invoke("listUnitSupNestedWithIdentity"),listUnitWithIdentity:invoke("listUnitWithIdentity"),listUnitWithPerson:invoke("listUnitWithPerson"),listUnitSupNestedWithPerson:invoke("listUnitSupNestedWithPerson"),listUnitWithAttribute:invoke("listUnitWithAttribute"),listUnitWithDuty:invoke("listUnitWithDuty"),getDuty:invoke("getDuty"),listDutyNameWithIdentity:invoke("listDutyNameWithIdentity"),listDutyNameWithUnit:invoke("listDutyNameWithUnit"),listUnitAllDuty:invoke("listUnitAllDuty"),appendUnitAttribute:invoke("appendUnitAttribute"),setUnitAttribute:invoke("setUnitAttribute"),getUnitAttribute:invoke("getUnitAttribute"),listUnitAttributeName:invoke("listUnitAttributeName"),listUnitAllAttribute:invoke("listUnitAllAttribute")}),MWF.xScript=MWF.xScript||{},MWF.xScript.Actions=MWF.xScript.Actions||{},MWF.require("MWF.xDesktop.Actions.RestActions",null,!1),MWF.xScript.Actions.CMSScriptActions=new Class({initialize:function(){this.action=new MWF.xDesktop.Actions.RestActions("","x_cms_assemble_control"),this.action.getActions=function(t){this.actions={getScriptByName:{uri:"/jaxrs/script/{uniqueName}/app/{appId}/imported"}},t&&t()}},getScriptByName:function(t,e,i,o,s,n){this.action.invoke({name:"getScriptByName",async:n,parameter:{appId:t,uniqueName:e},success:o,failure:s})},getScript:function(t,e,i,o){this.action.invoke({name:"getScript",async:o,parameter:{id:t},success:e,failure:i})}}),MWF.xScript=MWF.xScript||{},MWF.xScript.CMSEnvironment=function(t){var i=t.data,o=t.form,s=t.forms;this.library=COMMON;this.setData=function(e){var i;this.data=(i=e,new MWF.xScript.CMSJSONData(i,(function(t,e,i){for(var o={getKey:function(){return e},getParent:function(){return i}};o&&!s[o.getKey()];)o=o.getParent();o&&o.getKey()&&s[o.getKey()]&&s[o.getKey()].resetData()}))),this.data.save=function(i){o.documentAction.saveData(function(t){i&&i()}.bind(this),null,t.document.id,e)}},this.setData(i),this.documentContext={getDocument:function(){return t.document},getControl:function(){return t.control},getAttachmentList:function(){return t.attachmentList}},this.Dict=MWF.xScript.createCMSDict(o.json.application);var n,a=null,r=function(){a||(MWF.require("MWF.xScript.Actions.UnitActions",null,!1),a=new MWF.xScript.Actions.UnitActions)},l=function(t){var e=typeOf(t);if("array"===e){var i=[];return t.each((function(t){i.push("object"===typeOf(t)?t.distinguishedName||t.id||t.unique||t.name:t)})),i}return["object"===e?t.distinguishedName||t.id||t.unique||t.name:t]};this.org={getGroup:function(t,e){r();var i={groupList:l(t)},o=null,s=a.listGroup(i,(function(t){return o=(o=t.data)&&1===o.length?o[0]:o,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},listSubGroup:function(t,e,i){r();var o,s={groupList:l(t)},n=null,d=function(t){return n=t.data,i&&"function"==o2.typeOf(i)?i(n):n};return o=e?a.listSubGroupNested(s,d,null,!!i):a.listSubGroupDirect(s,d,null,!!i),i?o:n},listSupGroup:function(t,e,i){r();var o={groupList:l(t)},s=null,n=function(t){return s=t.data,i&&"function"==o2.typeOf(i)?i(s):s};if(e)var d=a.listSupGroupNested(o,n,null,!!i);else d=a.listSupGroupDirect(o,n,null,!!i);return i?d:s},listGroupWithPerson:function(t,e){r();var i={personList:l(t)},o=null,s=a.listGroupWithPerson(i,(function(t){return o=t.data,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},groupHasRole:function(t,e,i){r(),nameFlag="object"===typeOf(t)?t.distinguishedName||t.id||t.unique||t.name:t;var o={group:nameFlag,roleList:l(e)},s=!1,n=a.groupHasRole(o,(function(t){return s=t.data.value,i&&"function"==o2.typeOf(i)?i(s):s}),null,!!i);return i?n:s},getRole:function(t,e){r();var i={roleList:l(t)},o=null,s=a.listRole(i,(function(t){return o=(o=t.data)&&1===o.length?o[0]:o,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},listRoleWithPerson:function(t,e){r();var i={personList:l(t)},o=null,s=a.listRoleWithPerson(i,(function(t){return o=t.data,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},personHasRole:function(t,e,i){r(),nameFlag="object"===typeOf(t)?t.distinguishedName||t.id||t.unique||t.name:t;var o={person:nameFlag,roleList:l(e)},s=!1,n=a.listRoleWithPerson(o,(function(t){return s=t.data.value,i&&"function"==o2.typeOf(i)?i(s):s}),null,!!i);return i?n:s},getPerson:function(t,e){r();var i={personList:l(t)},o=null,s=a.listPerson(i,(function(t){return o=(o=t.data)&&1===o.length?o[0]:o,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},listSubPerson:function(t,e,i){r();var o,s={personList:l(t)},n=null,d=function(t){return n=t.data,i&&"function"==o2.typeOf(i)?i(n):n};return o=e?a.listPersonSubNested(s,d,null,!!i):a.listPersonSubDirect(s,d,null,!!i),i?o:n},listSupPerson:function(t,e,i){r();var o,s={personList:l(t)},n=null,d=function(t){return n=t.data,i&&"function"==o2.typeOf(i)?i(n):n};return o=e?a.listPersonSupNested(s,d,null,!!i):a.listPersonSupDirect(s,d,null,!!i),i?o:n},listPersonWithGroup:function(t,e){r();var i={groupList:l(t)},o=null,s=a.listPersonWithGroup(i,(function(t){return o=t.data,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},listPersonWithRole:function(t,e){r();var i,o={roleList:l(t)},s=null;return i=a.listPersonWithRole(o,(function(t){return s=t.data,e&&"function"==o2.typeOf(e)?e(s):s}),null,!!e),e?i:s},listPersonWithIdentity:function(t,e){r();var i={identityList:l(t)},o=null,s=a.listPersonWithIdentity(i,(function(t){return o=t.data,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},getPersonWithIdentity:function(t,e){r();var i={identityList:l(t)},o=null,s=a.listPersonWithIdentity(i,(function(t){return o=(o=t.data)&&1===o.length?o[0]:o,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},listPersonWithUnit:function(t,e,i){r();var o,s={unitList:l(t)},n=null,d=function(t){return n=t.data,i&&"function"==o2.typeOf(i)?i(n):n};return o=e?a.listPersonWithUnitNested(s,d,null,!!i):a.listPersonWithUnitDirect(s,d,null,!!i),i?o:n},listPersonWithAttribute:function(t,e,i){r();var o={name:t,attribute:e},s=null,n=a.listPersonWithAttribute(o,(function(t){return s=t.data,i&&"function"==o2.typeOf(i)?i(s):s}),null,!!i);return i?n:s},listPersonNameWithAttribute:function(t,e,i){r();var o={name:t,attribute:e},s=null,n=a.listPersonWithAttributeValue(o,(function(t){return s=t.data.personList,i&&"function"==o2.typeOf(i)?i(s):s}),null,!!i);return i?n:s},appendPersonAttribute:function(t,e,i,o,s,n){r();var l={attributeList:i,name:e,person:"object"===typeOf(t)?t.distinguishedName||t.id||t.unique||t.name:t},d=null,c=a.appendPersonAttribute(l,(function(t){return d=t.data,n&&"function"==o2.typeOf(n)?n(d):d}),null,!!n);return n?c:d},setPersonAttribute:function(t,e,i,o,s,n){r();var l={attributeList:i,name:e,person:"object"===typeOf(t)?t.distinguishedName||t.id||t.unique||t.name:t},d=null,c=a.setPersonAttribute(l,(function(t){return d=t.data,n&&"function"==o2.typeOf(n)?n(d):d}),null,!!n);return n?c:d},getPersonAttribute:function(t,e,i){r();var o={name:e,person:"object"===typeOf(t)?t.distinguishedName||t.id||t.unique||t.name:t},s=null,n=a.getPersonAttribute(o,(function(t){return s=t.data.attributeList,i&&"function"==o2.typeOf(i)?i(s):s}),null,!!i);return i?n:s},listPersonAttributeName:function(t,e){r();var i={personList:l(t)},o=null,s=a.listPersonAttributeName(i,(function(t){return o=t.data.nameList,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},listPersonAllAttribute:function(t,e){r();var i={personList:l(t)},o=null,s=a.listPersonAllAttribute(i,(function(t){return o=t.data,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},getIdentity:function(t,e){r();var i={identityList:l(t)},o=null,s=a.listIdentity(i,(function(t){return o=(o=t.data)&&1===o.length?o[0]:o,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},listIdentityWithPerson:function(t,e){r();var i={personList:l(t)},o=null,s=a.listIdentityWithPerson(i,(function(t){return o=t.data,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},listIdentityWithUnit:function(t,e,i){r();var o={unitList:l(t)},s=null,n=a[e?"listIdentityWithUnitNested":"listIdentityWithUnitDirect"](o,(function(t){return s=t.data,i&&"function"==o2.typeOf(i)?i(s):s}),null,!!i);return n.name="org",i?n:s},getUnit:function(t,e){r();var i={unitList:l(t)},o=null,s=a.listUnit(i,(function(t){return o=(o=t.data)&&1===o.length?o[0]:o,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},listSubUnit:function(t,e,i){r();var o,s={unitList:l(t)},n=null,d=function(t){return n=t.data,i&&"function"==o2.typeOf(i)?i(n):n};return o=e?a.listUnitSubNested(s,d,null,!!i):a.listUnitSubDirect(s,d,null,!!i),i?o:n},listSupUnit:function(t,e,i){r();var o,s={unitList:l(t)},n=null,d=function(t){return n=t.data,i&&"function"==o2.typeOf(i)?i(n):n};return o=e?a.listUnitSupNested(s,d,null,!!i):a.listUnitSupDirect(s,d,null,!!i),i?o:n},getUnitByIdentity:function(t,e,i){r();var o,s,n,d="current";switch(e&&("string"===typeOf(e)&&(d="type"),"number"===typeOf(e)&&(d="level")),d){case"current":var c={identityList:l(t)};s=function(t){return o=(o=t.data)&&1===o.length?o[0]:o,i&&"function"==o2.typeOf(i)?i(o):o},n=a.listUnitWithIdentity(c,s,null,!!i);break;case"type":c={identity:"object"===typeOf(t)?t.distinguishedName||t.id||t.unique||t.name:t,type:e};s=function(t){return o=t.data,i&&"function"==o2.typeOf(i)?i(o):o},n=a.getUnitWithIdentityAndType(c,s,null,!!i);break;case"level":c={identity:"object"===typeOf(t)?t.distinguishedName||t.id||t.unique||t.name:t,level:e};s=function(t){return o=(o=t.data)&&1===o.length?o[0]:o,i&&"function"==o2.typeOf(i)?i(o):o},n=a.getUnitWithIdentityAndLevel(c,s,null,!!i)}return i?n:o},listAllSupUnitWithIdentity:function(t,e){r();var i={identityList:l(t)},o=null,s=a.listUnitSupNestedWithIdentity(i,(function(t){return o=t.data,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},listUnitWithPerson:function(t,e){r();var i={personList:l(t)},o=null,s=a.listUnitWithPerson(i,(function(t){return o=t.data,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},listAllSupUnitWithPerson:function(t,e){r();var i={personList:l(t)},o=null,s=a.listUnitSupNestedWithPerson(i,(function(t){return o=t.data,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},listUnitWithAttribute:function(t,e,i){r();var o={name:t,attribute:e},s=null;return promise=a.listUnitWithAttribute(o,(function(t){return s=t.data,i&&"function"==o2.typeOf(i)?i(s):s}),null,!!i),i?promise:s},listUnitWithDuty:function(t,e,i){r();var o={name:t,identity:"object"===typeOf(e)?e.distinguishedName||e.id||e.unique||e.name:e},s=null,n=a.listUnitWithDuty(o,(function(t){return s=t.data,i&&"function"==o2.typeOf(i)?i(s):s}),null,!!i);return i?n:s},getDuty:function(t,e,i){r();var o={name:t,unit:"object"===typeOf(e)?e.distinguishedName||e.id||e.unique||e.name:e},s=null,n=a.getDuty(o,(function(t){return s=t.data,i&&"function"==o2.typeOf(i)?i(s):s}),null,!!i);return i?n:s},listDutyNameWithIdentity:function(t,e){r();var i={identityList:l(t)},o=null,s=a.listDutyNameWithIdentity(i,(function(t){return o=t.data.nameList,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},listDutyNameWithUnit:function(t,e){r();var i={unitList:l(t)},o=null,s=a.listDutyNameWithUnit(i,(function(t){return o=t.data.nameList,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},listUnitAllDuty:function(t,e){r();var i={unitList:l(t)},o=null,s=a.listUnitAllDuty(i,(function(t){return o=t.data,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},listTopUnit:function(t){var e=MWF.Actions.get("x_organization_assemble_control"),i=null,o=e.listTopUnit((function(e){return i=e.data,t&&"function"==o2.typeOf(t)?t(i):i}),null,!!t);return t?o:i},appendUnitAttribute:function(t,e,i,o,s,n){r();var l={attributeList:i,name:e,unit:"object"===typeOf(t)?t.distinguishedName||t.id||t.unique||t.name:t},d=null,c=a.appendUnitAttribute(l,(function(t){return d=t.data,n&&"function"==o2.typeOf(n)?n(d):d}),null,!!n);return n?c:d},setUnitAttribute:function(t,e,i,o,s,n){r();var l={attributeList:i,name:e,unit:"object"===typeOf(t)?t.distinguishedName||t.id||t.unique||t.name:t},d=null,c=a.setUnitAttribute(l,(function(t){return d=t.data,n&&"function"==o2.typeOf(n)?n(d):d}),null,!!n);return n?c:d},getUnitAttribute:function(t,e,i){r();var o={name:e,unit:"object"===typeOf(t)?t.distinguishedName||t.id||t.unique||t.name:t},s=null,n=a.getUnitAttribute(o,(function(t){return s=t.data.attributeList,i&&"function"==o2.typeOf(i)?i(s):s}),null,!!i);return i?n:s},listUnitAttributeName:function(t,e){r();var i={unitList:l(t)},o=null,s=a.listUnitAttributeName(i,(function(t){return o=t.data.nameList,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o},listUnitAllAttribute:function(t,e){r();var i={unitList:l(t)},o=null,s=a.listUnitAllAttribute(i,(function(t){return o=t.data,e&&"function"==o2.typeOf(e)?e(o):o}),null,!!e);return e?s:o}},this.Action=(n=[],function(t,e){var i=n[t]||(n[t]=new MWF.xDesktop.Actions.RestActions("",t,""));i.getActions=function(t){this.actions||(this.actions={}),Object.merge(this.actions,e),t&&t()},this.invoke=function(t){i.invoke(t)}}),this.service={jaxwsClient:{},jaxrsClient:{}};var d=null;this.view={lookup:function(t,e,i){var o={filterList:t.filter||null};MWF.Actions.load("x_query_assemble_surface").ViewAction.executeWithQuery(t.view,t.application,o,(function(t){var i={grid:t.data.grid||t.data.groupGrid,groupGrid:t.data.groupGrid};e&&e(i)}),null,i)},lookupV1:function(t,e){!function(t){d?t&&t():MWF.require("MWF.xDesktop.Actions.RestActions",function(){(d=new MWF.xDesktop.Actions.RestActions("","x_cms_assemble_control","")).getActions=function(t){this.actions={lookup:{uri:"/jaxrs/queryview/flag/{view}/application/flag/{application}/execute",method:"PUT"},getView:{uri:"/jaxrs/queryview/flag/{view}/application/flag/{application}"}},t&&t()},t&&t()}.bind(this))}(function(){d.invoke({name:"lookup",async:!0,parameter:{view:t.view,application:t.application},success:function(t){var i={grid:t.data.grid,groupGrid:t.data.groupGrid};e&&e(i)}.bind(this)})}.bind(this))},select:function(t,e,i){if(t.view){var s={application:t.application||o.json.application,viewName:t.view||"",isTitle:!1===t.isTitle?"no":"yes",select:!1===t.isMulti?"single":"multi",filter:t.filter};i||(i={}),i.width=t.width,i.height=t.height,i.title=t.caption;var n=i.width||"700",a=i.height||"400";if(layout.mobile){var r=document.body.getSize();n=r.x,a=r.y,i.style="viewmobile"}n=n.toInt(),a=a.toInt();var l=((r=o.app.content.getSize()).x-n)/2,d=(r.y-a)/2;l<0&&(l=0),d<0&&(d=0),layout.mobile&&(l=20,d=0);var c=this;MWF.require("MWF.xDesktop.Dialog",function(){var t=new MWF.xDesktop.Dialog({title:i.title||"select view",style:i.style||"view",top:d,left:l-20,fromTop:d,fromLeft:l-20,width:n,height:a,html:"<div style='height: 100%;'></div>",maskNode:o.app.content,container:o.app.content,buttonList:[{text:MWF.LP.process.button.ok,action:function(){e&&e(c.view.getData()),this.close()}},{text:MWF.LP.process.button.cancel,action:function(){this.close()}}]});if(t.show(),layout.mobile){var r=t.node.getElement(".MWF_dialod_Action_back"),h=t.node.getElement(".MWF_dialod_Action_ok");r&&r.addEvent("click",function(e){t.close()}.bind(this)),h&&h.addEvent("click",function(i){e&&e(this.view.getData()),t.close()}.bind(this))}MWF.xDesktop.requireApp("query.Query","Viewer",function(){this.view=new MWF.xApplication.query.Query.Viewer(t.content.getFirst(),s,{style:"select"},o.app,o.Macro)}.bind(this))}.bind(this))}}},this.statement={execute:function(t,e,i){var o=this.parseParameter(t.parameter),s={filterList:this.parseFilter(t.filter,o),parameter:o};MWF.Actions.load("x_query_assemble_surface").StatementAction.executeV2(t.name,t.mode||"data",t.page||1,t.pageSize||20,s,(function(t){e&&e(t)}),null,i)},parseFilter:function(t,e){if("array"!==typeOf(t))return[];var i=[];return(t||[]).each(function(t){var o=t.path.replace(/\./g,"_"),s=t.value;"like"===t.comparison||"notLike"===t.comparison?("%"!==s.substr(0,1)&&(s="%"+s),"%"!==s.substr(s.length-1,1)&&(s+="%"),e[o]=s):("dateTimeValue"===t.formatType||"datetimeValue"===t.formatType?s="{ts '"+s+"'}":"dateValue"===t.formatType?s="{d '"+s+"'}":"timeValue"===t.formatType&&(s="{t '"+s+"'}"),e[o]=s),t.value=o,i.push(t)}.bind(this)),i},parseParameter:function(t){if("object"!==typeOf(t))return{};var e={};for(var i in t){var o=t[i];"date"===typeOf(o)&&(o="{ts '"+o.format("db")+"'}"),e[i]=o}return e},select:function(t,e,i){if(t.name){var s={statementId:t.name||"",isTitle:!1===t.isTitle?"no":"yes",select:!1===t.isMulti?"single":"multi",filter:t.filter,parameter:t.parameter};i||(i={}),i.width=t.width,i.height=t.height,i.title=t.caption;var n=i.width||"700",a=i.height||"400";if(layout.mobile){var r=document.body.getSize();n=r.x,a=r.y,i.style="viewmobile"}n=n.toInt(),a=a.toInt();var l=((r=o.app.content.getSize()).x-n)/2,d=(r.y-a)/2;l<0&&(l=0),d<0&&(d=0),layout.mobile&&(l=20,d=0);var c=this;MWF.require("MWF.xDesktop.Dialog",function(){var t=new MWF.xDesktop.Dialog({title:i.title||"select statement view",style:i.style||"view",top:d,left:l-20,fromTop:d,fromLeft:l-20,width:n,height:a,html:"<div style='height: 100%;'></div>",maskNode:o.app.content,container:o.app.content,buttonList:[{text:MWF.LP.process.button.ok,action:function(){e&&e(c.statement.getData()),this.close()}},{text:MWF.LP.process.button.cancel,action:function(){this.close()}}]});if(t.show(),layout.mobile){var r=t.node.getElement(".MWF_dialod_Action_back"),h=t.node.getElement(".MWF_dialod_Action_ok");r&&r.addEvent("click",function(e){t.close()}.bind(this)),h&&h.addEvent("click",function(i){e&&e(this.statement.getData()),t.close()}.bind(this))}MWF.xDesktop.requireApp("query.Query","Statement",function(){this.statement=new MWF.xApplication.query.Query.Statement(t.content.getFirst(),s,{style:"select"},o.app,o.Macro)}.bind(this))}.bind(this))}}},this.importer={upload:function(t,e,i){MWF.xDesktop.requireApp("query.Query","Importer",function(){new MWF.xApplication.query.Query.Importer(o.app.content,t,{},o.app,o.Macro).load()}.bind(this))},downloadTemplate:function(t,e){MWF.xDesktop.requireApp("query.Query","Importer",function(){new MWF.xApplication.query.Query.Importer(o.app.content,t,{},o.app,o.Macro).downloadTemplate(e)}.bind(this))}};var c=[];this.include=function(t,e){var i=t;"string"==typeOf(i)&&(i={name:i});var s=i.name,n=i.type&&i.application?i.type:"cms",a=i.application||o.json.application,r=n+"-"+a+"-"+s;if(c.indexOf(r)>-1)e&&e.apply(this);else{var l;switch(n){case"portal":this.scriptActionPortal?l=this.scriptActionPortal:(MWF.require("MWF.xScript.Actions.PortalScriptActions",null,!1),l=this.scriptActionPortal=new MWF.xScript.Actions.PortalScriptActions);break;case"process":this.scriptActionProcess?l=this.scriptActionProcess:(MWF.require("MWF.xScript.Actions.ScriptActions",null,!1),l=this.scriptActionProcess=new MWF.xScript.Actions.ScriptActions);break;case"cms":this.scriptActionCMS?l=this.scriptActionCMS:(MWF.require("MWF.xScript.Actions.CMSScriptActions",null,!1),l=this.scriptActionCMS=new MWF.xScript.Actions.CMSScriptActions)}l.getScriptByName(a,s,c,function(t){t.data?(c.push(r),t.data.importedList.each((function(e){"portal"===n?(c.push(n+"-"+t.data.portal+"-"+e),t.data.portalName&&c.push(n+"-"+t.data.portalName+"-"+e),t.data.portalAlias&&c.push(n+"-"+t.data.portalAlias+"-"+e)):"cms"===n?(c.push(n+"-"+t.data.appId+"-"+e),t.data.appName&&c.push(n+"-"+t.data.appName+"-"+e),t.data.appAlias&&c.push(n+"-"+t.data.appAlias+"-"+e)):"process"===n&&(c.push(n+"-"+t.data.application+"-"+e),t.data.appName&&c.push(n+"-"+t.data.appName+"-"+e),t.data.appAlias&&c.push(n+"-"+t.data.appAlias+"-"+e))})),c=c.concat(t.data.importedList),MWF.CMSMacro.exec(t.data.text,this),e&&e.apply(this)):e&&e.apply(this)}.bind(this),null,!1)}},this.define=function(t,e,i){var o=!0;!1===i&&(o=!1);var s={};s[t]={value:e,configurable:o},MWF.defineProperties(this,s)}.bind(this),this.wait=function(){resolve={};var t=function(t){resolve.cb=t}.bind(this);return this.target.event_resolve=t,resolve},this.goon=function(){this.target.event_resolve=null},this.form={getInfor:function(){return t.formInfor},infor:t.formInfor,getApp:function(){return o.app},app:o.app,node:function(){return o.node},readonly:o.options.readonly,get:function(t){return o.all?o.all[t]:null},getField:function(t){return s[t]},getAction:function(){return o.documentAction},getData:function(){return new MWF.xScript.CMSJSONData(o.getData())},save:function(t){o.saveDocument(t)},close:function(){o.closeDocument()},publish:function(t){o.publishDocument(t)},confirm:function(t,i,s,n,a,r,l,d,c,h){if(arguments.length<=1||"string"===o2.typeOf(arguments[1])){var p=MWF.getCenter({x:n,y:a});e={event:{clientX:p.x,x:p.x,clientY:p.y,y:p.y}},o.confirm(t,e,i,s,n,a,r,l,d,c,h)}else e=arguments.length>1?arguments[1]:null,i=arguments.length>2?arguments[2]:null,s=arguments.length>3?arguments[3]:null,n=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,r=arguments.length>6?arguments[6]:null,l=arguments.length>7?arguments[7]:null,d=arguments.length>8?arguments[8]:null,c=arguments.length>9?arguments[9]:null,h=arguments.length>10?arguments[10]:null,o.confirm(t,e,i,s,n,a,r,l,d,c,h)},notice:function(t,e,i,s,n,a){o.notice(t,e,i,s,n,a)},addEvent:function(t,e){o.addEvent(t,e)},openWork:function(t,e,i,o){var s=o||{};return s.workId=t,s.workCompletedId=e,s.docTitle=i,s.appId="process.Work"+(s.workId||s.workCompletedId),layout.desktop.openApplication(this.event,"process.Work",s)},openJob:function(t,e,i){var s=null;if(o2.Actions.get("x_processplatform_assemble_surface").listWorkByJob(t,function(t){t.data&&(s=t.data)}.bind(this),null,!1),s){var n=s.workList.length+s.workCompletedList.length;if(n){if(!(n>1&&e)){if(s.workList.length){var a=s.workList[0];return this.openWork(a.id,null,a.title,i)}a=s.workCompletedList[0];return this.openWork(null,a.id,a.title,i)}var r=new Element("div",{styles:{padding:"20px",width:"500px"}}).inject(o.node);s.workList.each(function(t){var e=new Element("div",{styles:{background:"#ffffff","border-radius":"10px",clear:"both","margin-bottom":"10px",height:"40px",padding:"10px 10px"}}).inject(r),o="<div style='height: 40px; width: 40px; float: left; background: url(../x_component_process_Xform/$Form/default/icon/work.png) no-repeat center center'></div><div style='height: 40px; width: 40px; float: right'><div class='MWFAction' style='height: 20px; width: 40px; margin-top: 10px; border: 1px solid #999999; border-radius: 5px;text-align: center; cursor: pointer'>"+o2.LP.widget.open+"</div></div><div style='height: 20px; line-height: 20px; margin: 0px 40px'>"+t.title+"</div><div style='margin: 0px 40px'><div style='color:#999999; float: left; margin-right: 10px'>"+t.activityName+"</div><div style='color:#999999; float: left; margin-right: 10px'>"+t.activityArrivedTime+"</div><div style='color:#999999; float: left; margin-right: 10px'>"+(t.manualTaskIdentityText||"")+"</div></div>";e.set("html",o);var s=e.getElement(".MWFAction");s.store("work",t),s.addEvent("click",function(t){var e=t.target.retrieve("work");e&&this.openWork(e.id,null,e.title,i),d.close()}.bind(this))}.bind(this)),s.workCompletedList.each(function(t){var e=new Element("div",{styles:{background:"#ffffff","border-radius":"10px",clear:"both","margin-bottom":"10px",height:"40px",padding:"10px 10px"}}).inject(r),o="<div style='height: 40px; width: 40px; float: left; background: url(../x_component_process_Xform/$Form/default/icon/work.png) no-repeat center center'></div><div style='height: 40px; width: 40px; float: right'><div class='MWFAction' style='height: 20px; width: 40px; margin-top: 10px; border: 1px solid #999999; border-radius: 5px;text-align: center; cursor: pointer'>"+o2.LP.widget.open+"</div></div><div style='height: 20px; line-height: 20px; margin: 0px 40px'>"+t.title+"</div><div style='margin: 0px 40px'><div style='color:#999999; float: left; margin-right: 10px'>"+o2.LP.widget.workcompleted+"</div><div style='color:#999999; float: left; margin-right: 10px'>"+t.completedTime+"</div>";e.set("html",o);var s=e.getElement(".MWFAction");s.store("work",t),s.addEvent("click",function(t){var e=t.target.retrieve("work");e&&this.openWork(null,e.id,e.title,i),d.close()}.bind(this))}.bind(this));var l=r.getSize().y+20;l>600&&(l=600);var d=o2.DL.open({title:o2.LP.widget.choiceWork,style:"user",isResize:!1,content:r,buttonList:[{type:"cancel",text:o2.LP.widget.close,action:function(){d.close()}}]})}}},openDocument:function(t,e,i){var o=i||{};o.documentId=t,o.docTitle=e,layout.desktop.openApplication(this.event,"cms.Document",o)},openPortal:function(t,e,i){var o=MWF.Actions.get("x_portal_assemble_surface");o.getApplication(t,(function(t){t.data&&(e?o.getPageByName(e,t.data.id,(function(e){var o=e.data?e.data.id:"";layout.desktop.openApplication(null,"portal.Portal",{portalId:t.data.id,pageId:o,parameters:i,appId:i&&i.appId||"portal.Portal"+t.data.id+o})})):layout.desktop.openApplication(null,"portal.Portal",{portalId:t.data.id,parameters:i,appId:i&&i.appId||"portal.Portal"+t.data.id}))}))},openCMS:function(t){MWF.Actions.get("x_cms_assemble_control").getColumn(t,(function(t){t.data&&layout.desktop.openApplication(null,"cms.Module",{columnId:t.data.id,appId:"cms.Module"+t.data.id})}))},openProcess:function(t){MWF.Actions.get("x_processplatform_assemble_surface").getApplication(t,(function(t){t.data&&layout.desktop.openApplication(null,"process.Application",{id:t.data.id,appId:"process.Application"+t.data.id})}))},openApplication:function(t,e){layout.desktop.openApplication(null,t,e)},createDocument:function(t,e,i,s,n,a,r,l,d){var c,h,p=t;"object"==typeOf(t)&&(p=t.column,e=t.category,i=t.data,s=t.identity,n=t.callback,a=t.target,r=t.latest,l=t.selectColumnEnable,d=t.ignoreTitle,c=t.onAfterPublish,h=t.onPostPublish),a&&layout.app&&layout.app.inBrowser&&(layout.app.content.empty(),layout.app=null),MWF.xDesktop.requireApp("cms.Index","Newer",(function(){new MWF.xApplication.cms.Index.Newer(null,null,o.app,null,{documentData:i,identity:s,ignoreTitle:!0===d,ignoreDrafted:!1===r,selectColumnEnable:!e||!0===l,restrictToColumn:!!e&&!0!==l,categoryFlag:e,columnFlag:p,onStarted:function(t,e){n&&n()},onPostPublish:function(){h&&h()},onAfterPublish:function(){c&&c()}}).load()}))},startProcess:function(t,e,i,s,n,a,r){if(arguments.length>2)for(var l=2;l<arguments.length;l++)if("boolean"==typeOf(arguments[l])){a=arguments[l];break}a&&layout.app&&layout.app.inBrowser&&(layout.app.$openWithSelf=!0);MWF.Actions.get("x_processplatform_assemble_surface").getProcessByName(e,t,(function(t){t.data&&MWF.xDesktop.requireApp("process.TaskCenter","ProcessStarter",function(){new MWF.xApplication.process.TaskCenter.ProcessStarter(t.data,o.app,{workData:i,identity:s,latest:r,onStarted:function(t,e,i){if(t.work){var o={draft:t.work,appId:"process.Work"+(new o2.widget.UUID).toString(),desktopReload:!1};layout.desktop.openApplication(null,"process.Work",o)}else{var s=[];if(t.each(function(t){-1!=t.currentTaskIndex&&s.push(t.taskList[t.currentTaskIndex].work)}.bind(this)),1==s.length){o={workId:s[0],appId:s[0]};layout.desktop.openApplication(null,"process.Work",o)}}n&&n(t)}.bind(this)}).load()}.bind(this))}))}},this.target=t.target,this.event=t.event,this.status=t.status,this.session=layout.desktop.session,this.Actions=o2.Actions,this.query=function(t){if(t){var e=t.data||{};t.firstResult&&(e.firstResult=t.firstResult.toInt()),t.maxResults&&(e.maxResults=t.maxResults.toInt()),o2.Actions.get("x_query_assemble_surface").executeStatement(t.name,e,success,error,options.async)}},this.Table=MWF.xScript.createTable()},MWF.xScript.createTable=function(){return function(t){this.name=t,this.action=o2.Actions.get("x_query_assemble_surface"),this.listRowNext=function(t,e,i,o,s){this.action.listRowNext(this.name,t,e,i,o,s)},this.listRowPrev=function(t,e,i,o,s){this.action.listRowPrev(this.name,t,e,i,o,s)},this.listRowPrev=function(t,e,i,o,s){this.action.listRowPrev(this.name,t,e,i,o,s)},this.listRowSelectWhere=function(t,e,i,o){this.action.listRowSelectWhere(this.name,t,e,i,o)},this.listRowCountWhere=function(t,e,i,o){this.action.listRowCountWhere(this.name,t,e,i,o)},this.deleteRow=function(t,e,i,o){this.action.deleteRow(this.name,t,e,i,o)},this.deleteAllRow=function(t,e,i){this.action.deleteAllRow(this.name,t,e,i)},this.getRow=function(t,e,i,o){this.action.getRow(this.name,t,e,i,o)},this.insertRow=function(t,e,i,o){this.action.insertRow(this.name,t,e,i,o)},this.updateRow=function(t,e,i,o,s){this.action.updateRow(this.name,t,e,i,o,s)}}},MWF.xScript.CMSJSONData=function(t,e,i,o){var s=function(t,e,i,o){return function(){return-1===["array","object"].indexOf(typeOf(t[i]))?t[i]:new MWF.xScript.CMSJSONData(t[i],e,i,o)}},n=function(t,e,i,o){return function(s){t[i]=s,e&&e(t,i,o)}},a=typeOf(t);"object"!==a&&"array"!==a||function(){var a={};for(var r in t)a[r]={configurable:!0,enumerable:!0,get:s.apply(this,[t,e,r,this]),set:n.apply(this,[t,e,r,this])};a.length={get:function(){return Object.keys(t).length}},a.some={get:function(){return t.some}},MWF.defineProperties(this,a);var l={getKey:{value:function(){return i}},getParent:{value:function(){return o}},toString:{value:function(){return t.toString()}},add:{value:function(i,o,a){var r=!0,l=typeOf(t);if("array"===l){if(arguments.length<2?(t.push(i),o=i,i=t.length-1):i||0===i?r=!1:(t.push(o),i=t.length-1),r)(d={})[i]={configurable:!0,enumerable:!0,get:s.apply(this,[t,e,i,this]),set:n.apply(this,[t,e,i,this])},MWF.defineProperties(this,d);this[i]=o}else if("object"===l)if(this.hasOwnProperty(i))a&&(this[i]=o);else{var d;if(t[i]=o,r)(d={})[i]={configurable:!0,enumerable:!0,get:s.apply(this,[t,e,i,this]),set:n.apply(this,[t,e,i,this])},MWF.defineProperties(this,d);this[i]=o}return this[i]}},del:{value:function(e){return this.hasOwnProperty(e)?(delete t[e],delete this[e],this):null}}};MWF.defineProperties(this,l)}.apply(this)},MWF.xScript.dictLoaded||(MWF.xScript.dictLoaded={}),MWF.xScript.addDictToCache=function(t,e,i){e||(e="root"),0!==e.indexOf("root")&&(e="root."+e);var o=t.appType||"process",s=t.enableAnonymous||!1,n=[];t.application&&n.push(t.application),t.appId&&n.push(t.appId),t.appName&&n.push(t.appName),t.appAlias&&n.push(t.appAlias);var a=[];t.id&&a.push(t.id),t.name&&a.push(t.name),t.alias&&a.push(t.alias),(p={})[e]=i;for(var r=0;r<n.length;r++)for(var l=0;l<a.length;l++){var d=a[l]+o+n[r]+s;if(MWF.xScript.dictLoaded[d]){if(0===r&&0===l){MWF.xScript.setDictToCache(d,e,i);for(var c,h=e.split(/\./g),p=MWF.xScript.dictLoaded[d],u=0;u<h.length&&(c=0===u?h[0]:c+"."+h[u],!p[c]);u++);if(c){var m=c+".";Object.keys(p).each((function(t,e){0===t.indexOf(m)&&delete p[t]}))}}}else MWF.xScript.dictLoaded[d]=p}},MWF.xScript.getMatchedDict=function(t,e){e||(e="root"),0!==e.indexOf("root")&&(e="root."+e);var i=e.split(/\./g);if(MWF.xScript.dictLoaded[t]){for(var o,s,n=MWF.xScript.dictLoaded[t],a=Array.clone(i),r=0;r<i.length;r++)if(o=0===r?i[0]:o+"."+i[r],a.shift(),n[o]){s=n[o];break}return{dict:s,unmatchedPathList:a}}return{dict:null,unmatchedPathList:a}},MWF.xScript.insertDictToCache=function(t,e,i){if(MWF.xScript.dictLoaded[t]){var o=MWF.xScript.getMatchedDict(t,e),s=o.dict,n=o.unmatchedPathList;if(s){for(var a=0;a<n.length-1;a++)s[n[a]]||(s[n[a]]={}),s=s[n[a]];var r=n[n.length-1];s[r]?"array"===typeOf(s[r])&&s[r].push(i):s[r]=i}else MWF.xScript.dictLoaded[t][e]=i}else MWF.xScript.dictLoaded[t]={},MWF.xScript.dictLoaded[t][e]=i},MWF.xScript.setDictToCache=function(t,e,i){if(MWF.xScript.dictLoaded[t]){var o=MWF.xScript.getMatchedDict(t,e),s=o.dict,n=o.unmatchedPathList;if(s){for(var a=0;a<n.length-1;a++)s[n[a]]||(s[n[a]]={}),s=s[n[a]];s[n[n.length-1]]=i}else MWF.xScript.dictLoaded[t][e]=i}else MWF.xScript.dictLoaded[t]={},MWF.xScript.dictLoaded[t][e]=i},MWF.xScript.getDictFromCache=function(t,e){var i=MWF.xScript.getMatchedDict(t,e),o=i.dict,s=i.unmatchedPathList;if(o){for(var n=0;n<s.length;n++)if(!(o=o[s[n]]))return null;return o}return null},MWF.xScript.deleteDictToCache=function(t,e){var i=MWF.xScript.getMatchedDict(t,e),o=i.dict,s=i.unmatchedPathList;if(o){for(var n=0;n<s.length-1;n++)if(!(o=o[s[n]]))return;delete o[s[s.length-1]]}},MWF.xScript.createCMSDict=function(t){return function(e){var i=e;"string"==typeOf(i)&&(i={name:i});var o=this.name=i.name,s=i.type&&i.application?i.type:"cms",n=i.application||t,a=i.enableAnonymous||!1,r={appType:s,name:o,appId:n,enableAnonymous:a},l=o+s+n+a;if("cms"==s)var d=MWF.Actions.get("x_cms_assemble_control");else d=MWF.Actions.get("x_processplatform_assemble_surface");var c=function(t){return t.split(/\./g).map((function(t){return encodeURIComponent(t)})).join("/")};this.get=function(t,e,i,o,h){var p=null;if(!0===e&&(o=!0),!0===i&&(o=!0),!h){var u=MWF.xScript.getDictFromCache(l,t);if(u)return e&&"function"==o2.typeOf(e)&&e(u),o?Promise.resolve(u):u}var m,f=function(i){return p=i.data,MWF.xScript.addDictToCache(r,t,p),e&&"function"==o2.typeOf(e)&&(p=e(i.data)),p};if(t){var g=c(t);m=d[a&&"cms"==s?"getDictDataAnonymous":"getDictData"](encodeURIComponent(this.name),n,g,f,null,!!o,!1)}else m=d[a&&"cms"==s?"getDictRootAnonymous":"getDictRoot"](this.name,n,f,null,!!o,!1);return o?m:p},this.set=function(t,e,i,o){var s=c(t);return d.setDictData(encodeURIComponent(this.name),n,s,e,(function(o){if(MWF.xScript.setDictToCache(l,t,e),i)return i(o.data)}),(function(t,e,i){if(o)return o(t,e,i)}),!1,!1)},this.add=function(t,e,i,o){var s=c(t);return d.addDictData(encodeURIComponent(this.name),n,s,e,(function(o){if(MWF.xScript.insertDictToCache(l,t,e),i)return i(o.data)}),(function(t,e,i){if(o)return o(t,e,i)}),!1,!1)},this.delete=function(t,e,i){var o=c(t);return d.deleteDictData(encodeURIComponent(this.name),n,o,(function(i){if(MWF.xScript.deleteDictToCache(l,t),e)return e(i.data)}),(function(t,e,o){if(i)return i(t,e,o)}),!1,!1)},this.destory=this.delete}},MWF.xAction.RestActions.Action.x_organization_assemble_authentication=new Class({Extends:MWF.xAction.RestActions.Action,login:function(t,e,i,o){this.action.invoke({name:"login",data:t,success:function(t,o){"anonymous"!=t.data.tokenType?e&&e(t):i&&i(null,o,t.message)},failure:i,async:o})},loginByCaptcha:function(t,e,i,o){layout.config.publicKey?o2.load("../o2_lib/jsencrypt/jsencrypt.js",function(){var s=new JSEncrypt;s.setPublicKey("-----BEGIN PUBLIC KEY-----"+layout.config.publicKey+"-----END PUBLIC KEY-----"),t.password=s.encrypt(t.password),t.isEncrypted="y",this.action.invoke({name:"loginByCaptcha",data:t,success:function(t,o){"anonymous"!=t.data.tokenType?e&&e(t):i&&i(null,o,t.message)},failure:i,async:o})}.bind(this)):this.action.invoke({name:"loginByCaptcha",data:t,success:function(t,o){"anonymous"!=t.data.tokenType?e&&e(t):i&&i(null,o,t.message)},failure:i,async:o})},getAuthentication:function(t,e,i){this.action.invoke({name:"getAuthentication",success:function(i,o){"anonymous"!==i.data.tokenType||layout.anonymous?(i.data&&!i.data.roleList&&(i.data.roleList=[]),t&&t(i)):e&&e(null,o,i.message)},failure:e,async:i})}}),MWF.xAction.RestActions.Action.x_cms_assemble_control=new Class({Extends:MWF.xAction.RestActions.Action,getUUID:function(t){var e="";return this.action.invoke({name:"getId",async:!1,parameter:{count:"1"},success:function(i){e=i.data[0],t&&t(e)},failure:null}),e},saveColumn:function(t,e,i){t.isNewColumn?this.addColumn(t,e,i):this.updateColumn(t,e,i)},addColumn:function(t,e,i){this.action.invoke({name:"addColumn",data:t,success:e,failure:i})},updateColumn:function(t,e,i){this.action.invoke({name:"updateColumn",data:t,parameter:{id:t.id},success:e,failure:i})},updataColumnIcon:function(t,e,i,o,s){this.action.invoke({name:"updataColumnIcon",parameter:{id:t},data:o,file:s,success:e,failure:i})},listCategory:function(t,e,i,o){var s=this;this.action.invoke({name:"listCategory",parameter:{appId:t},async:o,success:function(t){s.transCategoryData(t),e.call(this,t)},failure:i})},listCategoryByPublisher:function(t,e,i,o){var s=this;this.action.invoke({name:"listCategoryByPublisher",parameter:{appId:t},async:o,success:function(t){s.transCategoryData(t),e.call(this,t)},failure:i})},getCategory:function(t,e,i,o){var s=this;this.action.invoke({name:"getCategory",parameter:{id:t},success:function(t){s.transCategoryData(t),e.call(this,t)},failure:i,async:o})},saveCategory:function(t,e,i){t.isNew?this.addCategory(t,e,i):this.updateCategory(t,e,i)},addCategory:function(t,e,i){this.action.invoke({name:"addCategory",data:t,success:e,failure:i})},updateCategory:function(t,e,i){this.action.invoke({name:"updateCategory",data:t,parameter:{id:t.id},success:e,failure:i})},transCategoryData:function(t){var e=function(t){t.name||(t.name=t.categoryName),t.alias||(t.alias=t.categoryAlias),t.categoryName||(t.categoryName=t.name),t.categoryAlias||(t.categoryAlias=t.alias)};t.data?"array"==typeOf(t.data)?t.data.each((function(t){e(t)})):e(t.data):t.data=[]},saveFile:function(t,e,i,o){t.id?this.updataFile(t.id,t,e,i,o):this.getUUID(function(s){t.id=s,this.addFile(t,e,i,o)}.bind(this),!1)},saveForm:function(t,e,i,o,s){t.isNewForm?this.addForm(t,e,i,o,s):this.updateForm(t,e,i,o,s)},updateForm:function(t,e,i,o,s){var n,a;t&&(n=MWF.encodeJsonString(JSON.encode(t))),e&&(a=MWF.encodeJsonString(JSON.encode(e)));var r=null;t&&t.json.includeScripts&&t.json.includeScripts.length&&(r={},t.json.includeScripts.each((function(t){r[t.id]="process"===t.appType?"processPlatform":t.appType})));var l=null;e&&e.json.includeScripts&&e.json.includeScripts.length&&(l={},e.json.includeScripts.each((function(t){l[t.id]="process"===t.appType?"processPlatform":t.appType})));var d={id:t.json.id,name:t.json.name,alias:t.json.name,description:t.json.description,appId:t.json.application,formFieldList:i,relatedScriptMap:r,relatedFormList:t&&t.json.subformList?t.json.subformList:[],mobileRelatedScriptMap:l,mobileRelatedFormList:e&&e.json.subformList?e.json.subformList:[]};t&&(d.data=n),e&&(d.mobileData=a),this.action.invoke({name:"updataForm",data:d,parameter:{id:t.json.id},success:o,failure:s})},addForm:function(t,e,i,o,s){var n,a;if(t.json.id){t&&(n=MWF.encodeJsonString(JSON.encode(t))),e&&!e.json.id&&(e.json.id=t.json.id),e&&(a=MWF.encodeJsonString(JSON.encode(e)));var r={id:t.json.id,name:t.json.name,alias:t.json.name,description:t.json.description,appId:t.json.application,formFieldList:i};t&&(r.data=n),e&&(r.mobileData=a),this.action.invoke({name:"addForm",data:r,parameter:{id:t.json.categoryId},success:o,failure:s})}else this.getUUID(function(r){t.json.id=r,t&&(n=MWF.encodeJsonString(JSON.encode(t))),e&&!e.json.id&&(e.json.id=r),e&&(a=MWF.encodeJsonString(JSON.encode(e)));var l=null;t&&t.json.includeScripts&&t.json.includeScripts.length&&(l={},t.json.includeScripts.each((function(t){l[t.id]="process"===t.appType?"processPlatform":t.appType})));var d=null;e&&e.json.includeScripts&&e.json.includeScripts.length&&(d={},e.json.includeScripts.each((function(t){d[t.id]="process"===t.appType?"processPlatform":t.appType})));var c={id:t.json.id,name:t.json.name,alias:t.json.name,description:t.json.description,appId:t.json.application,formFieldList:i,relatedScriptMap:l,relatedFormList:t&&t.json.subformList?t.json.subformList:[],mobileRelatedScriptMap:d,mobileRelatedFormList:e&&e.json.subformList?e.json.subformList:[]};t&&(c.data=n),e&&(c.mobileData=a),this.action.invoke({name:"addForm",data:c,parameter:{id:t.json.id},success:o,failure:s})}.bind(this))},addFormTemplate:function(t,e,i,o,s){var n,a;this.getUUID(function(r){if(i.id=r,t){var l=Object.clone(t);l.json.id=r,l.json.name=i.name,n=MWF.encodeJsonString(JSON.encode(l))}if(e){var d=Object.clone(e);d.json.id=r,d.json.name=i.name,a=MWF.encodeJsonString(JSON.encode(d))}t&&(i.data=n),e&&(i.mobileData=a),this.action.invoke({name:"addFormTemplate",data:i,success:o,failure:s})}.bind(this))},saveDictionary:function(t,e,i){t.id||t.appDictId?this.updateDictionary(t,e,i):this.addDictionary(t,e,i)},updateDictionary:function(t,e,i){t.alias&&""!=t.alias||(t.alias=t.name),this.action.invoke({name:"updataDictionary",data:t,parameter:{appDictId:t.id},success:e,failure:i})},addDictionary:function(t,e,i){t.id||this.getUUID(function(o){t.id=o,t.appDictId=o,t.alias&&""!=t.alias||(t.alias=t.name),this.action.invoke({name:"addDictionary",data:t,parameter:{appDictId:t.id},success:e,failure:i})}.bind(this))},getScript:function(t,e,i,o){var s=this;this.action.invoke({name:"getScript",async:o,parameter:{id:t},success:function(t){s.transScriptData(t),e.call(this,t)},failure:i})},getScriptByName:function(t,e,i,o,s){var n=this;this.action.invoke({name:"getScriptByName",async:s,parameter:{name:t,appId:e},success:function(t){n.transScriptData(t),i.call(this,t)},failure:o})},saveScript:function(t,e,i){t.isNewScript?this.addScript(t,e,i):this.updateScript(t,e,i)},updateScript:function(t,e,i){this.transScriptData(t,"send"),this.action.invoke({name:"updataScript",data:t,parameter:{id:t.id},success:e,failure:i})},addScript:function(t,e,i){this.transScriptData(t,"send");t.id?this.action.invoke({name:"addScript",data:t,success:e,failure:i}):this.getUUID(function(o){t.id=o,this.action.invoke({name:"addScript",data:t,success:e,failure:i})}.bind(this))},transScriptData:function(t,e){var i=function(t){e&&"send"==e?(t.appId||(t.appId=t.application),t.appName||(t.appName=t.applicationName),t.application&&delete t.application,t.applicationName&&delete t.applicationName):(t.appId||(t.appId=t.application),t.appName||(t.appName=t.applicationName),t.application||(t.application=t.appId),t.applicationName||(t.application=t.appName))};"array"==typeOf(t)?t.each((function(t){i(t)})):i(t)},saveView:function(t,e,i){t.isNew?this.addView(t,e,i):this.updateView(t,e,i)},addView:function(t,e,i){this.action.invoke({name:"addView",data:t,success:e,failure:i})},updateView:function(t,e,i){this.action.invoke({name:"updateView",data:t,parameter:{id:t.id},success:e,failure:i})},saveViewColumn:function(t,e,i,o){t.isNew?this.addViewColumn(t,e,i,o):this.updateViewColumn(t,e,i,o)},saveCategoryView:function(t,e,i,o){t.isNew?this.addViewColumn(t,e,i,o):this.updateViewColumn(t,e,i,o)},saveQueryView:function(t,e,i,o){t.isNewView?(t.isNewView=!1,this.addQueryView(t,e,i,o)):this.updateQueryView(t,e,i,o)},addQueryView:function(t,e,i,o){var s=t.data,n=JSON.encode(t.data);t.data=n,s.id?(this.action.invoke({name:"addQueryView",data:t,success:e,failure:i,async:o}),t.data=s):this.getUUID(function(n){t.id=n,this.action.invoke({name:"addQueryView",data:t,success:e,failure:i,async:o}),t.data=s}.bind(this))},updateQueryView:function(t,e,i,o){var s=t.data,n=JSON.encode(t.data);t.data=n,this.action.invoke({name:"updateQueryView",data:t,async:o,parameter:{id:t.id},success:e,failure:i}),t.data=s},saveDocument:function(t,e,i,o){t.isNewDocument?this.addDocument(t,e,i,o):this.updateDocument(t,e,i,o)},addDocument:function(t,e,i,o){delete t.attachmentList,this.action.invoke({name:"addDocument",data:t,success:e,failure:i,async:o})},updateDocument:function(t,e,i,o){delete t.attachmentList,this.action.invoke({name:"updateDocument",data:t,parameter:{id:t.id},success:e,failure:i,async:o})},saveData:function(t,e,i,o,s){o.isNew?this.addData(t,e,i,o,s):this.updateData(t,e,i,o,s)},uploadAttachment:function(t,e,i,o,s){this.action.invoke({name:"uploadAttachment",parameter:{id:t},data:o,file:s,success:e,failure:i})},replaceAttachment:function(t,e,i,o,s,n){this.action.invoke({name:"replaceAttachment",parameter:{documentid:e,id:t},data:s,file:n,success:i,failure:o})},getAttachmentData:function(t,e){this.action.getActions(function(){var i=this.action.actions.getAttachmentData.uri;i=(i=i.replace("{id}",encodeURIComponent(t))).replace("{documentid}",encodeURIComponent(e)),window.open(o2.filterUrl(this.action.address+i))}.bind(this))},getAttachmentStream:function(t,e){this.action.getActions(function(){var i=this.action.actions.getAttachmentStream.uri;i=(i=i.replace("{id}",encodeURIComponent(t))).replace("{documentid}",encodeURIComponent(e)),window.open(o2.filterUrl(this.action.address+i))}.bind(this))},getAttachmentUrl:function(t,e,i){this.action.getActions(function(){var o=this.action.actions.getAttachmentData.uri;o=(o=o.replace("{id}",encodeURIComponent(t))).replace("{documentid}",encodeURIComponent(e)),i&&i(o2.filterUrl(this.action.address+o))}.bind(this))},convertLocalImageToBase64:function(t,e,i,o,s){this.action.invoke({name:"convertLocalImageToBase64",parameter:{size:t},data:o,file:s,success:e,failure:i})},getImageUrl:function(t,e,i){this.action.getActions(function(){var o=this.action.actions.getImage.uri;o=(o=o.replace("{id}",encodeURIComponent(t))).replace("{documentid}",encodeURIComponent(e)),i&&i(o2.filterUrl(this.action.address+o))}.bind(this))},listDocumentFilterNext:function(t,e,i,o,s,n){i&&!i.documentType&&(i.documentType="全部"),this.action.invoke({name:"listDocumentFilterNext",async:n,data:i,parameter:{id:t,count:e},success:o,failure:s})},listDocumentFilterPrev:function(t,e,i,o,s,n){i&&!i.documentType&&(i.documentType="全部"),this.action.invoke({name:"listDocumentFilterPrev",async:n,data:i,parameter:{id:t,count:e},success:o,failure:s})},listDraftNext:function(t,e,i,o,s,n){i&&!i.documentType&&(i.documentType="全部"),this.action.invoke({name:"listDraftNext",async:n,data:i,parameter:{id:t,count:e},success:o,failure:s})},listDraftPrev:function(t,e,i,o,s,n){i&&!i.documentType&&(i.documentType="全部"),this.action.invoke({name:"listDraftPrev",async:n,data:i,parameter:{id:t,count:e},success:o,failure:s})},importDocumentFormExcel:function(t,e,i,o,s){this.action.invoke({name:"importDocumentFormExcel",parameter:{categoryId:t},data:o,file:s,success:e,failure:i})},getCategoryByAlias:function(t,e,i){var o=this;this.action.invoke({name:"getCategoryByAlias",parameter:{alias:t},success:function(t){o.transCategoryData(t),e.call(this,t)},failure:i})},batchModifyData:function(t,e,i,o){this.action.invoke({name:"batchModifyData",data:{docIds:t,dataChanges:e},success:i,failure:o})}}),MWF.xAction.RestActions.Action.x_organization_assemble_control=new Class({Extends:MWF.xAction.RestActions.Action,savePerson:function(t,e,i){t.id?this.updatePerson(t.id,t,e,i):this.addPerson(t,e,i)},listPersonByPinyin:function(t,e,i,o){var s={};"string"===typeOf(i)?s.key=i:s=i,this.action.invoke({name:"listPersonByPinyin",async:o,data:s,success:t,failure:e})},listPersonByPinyininitial:function(t,e,i,o){var s={};"string"===typeOf(i)?s.key=i:s=i,this.action.invoke({name:"listPersonByPinyininitial",async:o,data:s,success:t,failure:e})},listPersonByKey:function(t,e,i,o){var s={};"string"===typeOf(i)?s.key=i:s=i,this.action.invoke({name:"listPersonByKey",async:o,data:s,success:t,failure:e})},getPersonIcon:function(t){var e="/jaxrs/person/{flag}/icon";return e=e.replace("{flag}",t),this.action.getAddress(),o2.filterUrl(this.action.address+e+"?"+(new Date).getTime())},savePersonAttribute:function(t,e,i){t.id?this.updatePersonAttribute(t.id,t,e,i):this.addPersonAttribute(t,e,i)},saveIdentity:function(t,e,i){t.id?this.updateIdentity(t.id,t,e,i):this.addIdentity(t,e,i)},listIdentityByKey:function(t,e,i,o){var s={};"string"===typeOf(i)?s.key=i:s=i,this.action.invoke({name:"listIdentityByKey",async:o,data:s,success:t,failure:e})},listIdentityByPinyin:function(t,e,i,o){var s={};"string"===typeOf(i)?s.key=i:s=i,this.action.invoke({name:"listIdentityByPinyin",async:o,data:s,success:t,failure:e})},listIdentityByPinyininitial:function(t,e,i,o){var s={};"string"===typeOf(i)?s.key=i:s=i,this.action.invoke({name:"listIdentityByPinyininitial",async:o,data:s,success:t,failure:e})},saveRole:function(t,e,i){t.id?this.updateRole(t.id,t,e,i):this.addRole(t,e,i)},listRoleByPinyin:function(t,e,i,o){var s={};"string"===typeOf(i)?s.key=i:s=i,this.action.invoke({name:"listRoleByKey",async:o,data:s,success:t,failure:e})},listRoleByPinyininitial:function(t,e,i,o){var s={};"string"===typeOf(i)?s.key=i:s=i,this.action.invoke({name:"listRoleByPinyininitial",async:o,data:s,success:t,failure:e})},listRoleByKey:function(t,e,i,o){var s={};"string"===typeOf(i)?s.key=i:s=i,this.action.invoke({name:"listRoleByKey",async:o,data:s,success:t,failure:e})},saveGroup:function(t,e,i){t.id?this.updateGroup(t.id,t,e,i):this.addGroup(t,e,i)},listGroupByKey:function(t,e,i,o){var s={};"string"===typeOf(i)?s.key=i:s=i,this.action.invoke({name:"listGroupByKey",async:o,data:s,success:t,failure:e})},listGroupByPinyin:function(t,e,i,o){var s={};"string"===typeOf(i)?s.key=i:s=i,this.action.invoke({name:"listGroupByPinyin",async:o,data:s,success:t,failure:e})},listGroupByPinyininitial:function(t,e,i,o){var s={};"string"===typeOf(i)?s.key=i:s=i,this.action.invoke({name:"listGroupByPinyininitial",async:o,data:s,success:t,failure:e})},saveUnit:function(t,e,i){t.id?this.updateUnit(t.id,t,e,i):this.addUnit(t,e,i)},listUnitByKey:function(t,e,i,o){var s={};"string"===typeOf(i)?s.key=i:s=i,this.action.invoke({name:"listUnitByKey",async:o,data:s,success:t,failure:e})},listUnitByPinyin:function(t,e,i,o){var s={};"string"===typeOf(i)?s.key=i:s=i,this.action.invoke({name:"listUnitByPinyin",async:o,data:s,success:t,failure:e})},listUnitByPinyininitial:function(t,e,i,o){var s={};"string"===typeOf(i)?s.key=i:s=i,this.action.invoke({name:"listUnitByPinyininitial",async:o,data:s,success:t,failure:e})},saveUnitattribute:function(t,e,i){t.id?this.updateUnitattribute(t.id,t,e,i):this.addUnitattribute(t,e,i)},saveUnitduty:function(t,e,i){t.id?this.updateUnitduty(t.id,t,e,i):this.addUnitduty(t,e,i)}}),MWF.xAction.RestActions.Action.x_organization_assemble_personal=new Class({Extends:MWF.xAction.RestActions.Action,changePassword:function(t,e,i,o,s,n){var a={oldPassword:t,newPassword:e,confirmPassword:i};this.action.invoke({name:"changePassword",async:n,data:a,success:o,failure:s})},getPersonIcon:function(t){return this.action.getAddress(),o2.filterUrl(this.action.address+"/jaxrs/person/icon?"+(new Date).getTime())},getIcon:function(t){var e="/jaxrs/icon/"+t;return this.action.getAddress(),this.action.address+e+"?"+(new Date).getTime()},createEmPower:function(t,e,i,o){this.action.invoke({name:"createEmPower",async:o,data:t,success:e,failure:i})},editEmPower:function(t,e,i,o,s){this.action.getAddress(),this.action.invoke({name:"editEmPower",parameter:{id:t},async:s,data:e,success:i,failure:o})},deleteEmPower:function(t,e,i,o){this.action.invoke({name:"deleteEmPower",parameter:{id:t},async:o,success:e,failure:i})},listToCurrentPersonPaging:function(t,e,i,o,s,n){this.action.invoke({name:"listToCurrentPersonPaging",parameter:{page:t,size:e},data:{key:i},async:n,success:o,failure:s})},listWithCurrentPersonPaging:function(t,e,i,o,s,n){this.action.invoke({name:"listWithCurrentPersonPaging",parameter:{page:t,size:e},data:{key:i},async:n,success:o,failure:s})}});var actionJson={authentication:{uri:"/jaxrs/authentication",method:"GET"},login:{uri:"/jaxrs/authentication",method:"POST"},loginAdmin:{uri:"/jaxrs/authentication/administrator",method:"POST"},logout:{uri:"/jaxrs/authentication",method:"DELETE"},getLoginMode:{uri:"/jaxrs/authentication/mode"},getAuthentication:{uri:"/jaxrs/authentication"},loginByPassword:{uri:"/jaxrs/authentication",method:"POST"},getLoginCaptcha:{uri:"/jaxrs/authentication/captcha/width/{width}/height/{height}"},loginByCaptcha:{uri:"/jaxrs/authentication/captcha",method:"POST"},createCredentialCode:{uri:"/jaxrs/authentication/code/credential/{credential}"},checkCredential:{uri:"/jaxrs/authentication/check/credential/{credential}"},loginByCode:{uri:"/jaxrs/authentication/code",method:"POST"},getLoginBind:{uri:"/jaxrs/authentication/bind"},checkBindStatus:{uri:"/jaxrs/authentication/bind/meta/{meta}"},getOauthServer:{uri:"/jaxrs/authentication/oauth/name/{name}",method:"GET"},listOauthServer:{uri:"/jaxrs/authentication/oauth/list",method:"GET"},qywxOauthServer:{uri:"/jaxrs/authentication/oauth/qywx/config",method:"GET"},dingdingOauthServer:{uri:"/jaxrs/authentication/oauth/dingding/config",method:"GET"},loginOauthServer:{uri:"/jaxrs/authentication/oauth/login/name/{name}/code/{code}/redirecturi/{redirectUri}",method:"GET"},loginOauthQywxServer:{uri:"/jaxrs/authentication/oauth/login/qywx/code/{code}",method:"GET"},loginOauthDingdingServer:{uri:"/jaxrs/authentication/oauth/login/dingding/code/{code}",method:"GET"},oauthBind:{uri:"/jaxrs/authentication/oauth/bind/name/{name}/code/{code}/redirecturi/{redirectUri}",method:"GET"},clazz:"x_organization_assemble_authentication"};o2.xAction.RestActions.Action.x_organization_assemble_authentication||(o2.xAction.RestActions.Action.x_organization_assemble_authentication=new Class({Extends:o2.xAction.RestActions.Action})),o2.Actions.actions.x_organization_assemble_authentication=new o2.xAction.RestActions.Action.x_organization_assemble_authentication("x_organization_assemble_authentication",actionJson);actionJson={addPerson:{uri:"/jaxrs/person",method:"POST"},getPerson:{uri:"/jaxrs/person/{id}"},updatePerson:{uri:"/jaxrs/person/{id}",method:"PUT"},removePerson:{uri:"/jaxrs/person/{id}",method:"DELETE"},deletePerson:{uri:"/jaxrs/person/{id}",method:"DELETE"},listPersonDirect:{uri:"/jaxrs/person/list/group/{id}/sub/direct"},listPersonNested:{uri:"/jaxrs/person/list/group/{id}/sub/nested"},listPersonByPinyin:{uri:"/jaxrs/person/list/like/pinyin",method:"PUT"},listPersonByPinyininitial:{uri:"/jaxrs/person/list/pinyininitial",method:"PUT"},listPersonByKey:{uri:"/jaxrs/person/list/like",method:"PUT"},changePersonIcon:{uri:"/jaxrs/person/{id}/icon",method:"PUT",enctype:"formData"},getPersonIcon:{uri:"/jaxrs/person/{flag}/icon"},listPersonNext:{uri:"/jaxrs/person/list/{id}/next/{count}"},listPersonPrev:{uri:"/jaxrs/person/list/{id}/prev/{count}"},changePassword:{uri:"/jaxrs/person/{name}/set/password",method:"PUT"},resetPassword:{uri:"/jaxrs/person/{flag}/reset/password"},addPersonAttribute:{uri:"/jaxrs/personattribute",method:"POST"},getPersonAttribute:{uri:"/jaxrs/personattribute/{id}"},updatePersonAttribute:{uri:"/jaxrs/personattribute/{id}",method:"PUT"},removePersonAttribute:{uri:"/jaxrs/personattribute/{id}",method:"DELETE"},deletePersonAttribute:{uri:"/jaxrs/personattribute/{id}",method:"DELETE"},listPersonAttribute:{uri:"/jaxrs/personattribute/list/person/{id}"},addIdentity:{uri:"/jaxrs/identity",method:"POST"},getIdentity:{uri:"/jaxrs/identity/{id}"},updateIdentity:{uri:"/jaxrs/identity/{id}",method:"PUT"},removeIdentity:{uri:"/jaxrs/identity/{id}",method:"DELETE"},deleteIdentity:{uri:"/jaxrs/identity/{id}",method:"DELETE"},orderIdentity:{uri:"/jaxrs/identity/{flag}/order/before/{followFlag}"},listIdentityByPinyin:{uri:"/jaxrs/identity/list/like/pinyin",method:"PUT"},listIdentityByPinyininitial:{uri:"/jaxrs/identity/list/pinyininitial",method:"PUT"},listIdentityByKey:{uri:"/jaxrs/identity/list/like",method:"PUT"},listIdentityByPerson:{uri:"/jaxrs/identity/list/person/{id}"},listIdentityWithUnit:{uri:"/jaxrs/identity/list/unit/{unit}"},listIdentityWithDuty:{uri:"/jaxrs/identity/list/unitduty/name/{flag}"},listIdentityNext:{uri:"/jaxrs/identity/list/{id}/next/{count}"},listIdentityPrev:{uri:"/jaxrs/identity/list/{id}/prev/{count}"},listIdentityWidthUnitWithDutyName:{uri:"/jaxrs/identity/list/{unit}/unitduty/name/{duty}"},addRole:{uri:"/jaxrs/role",method:"POST"},getRole:{uri:"/jaxrs/role/{id}"},updateRole:{uri:"/jaxrs/role/{id}",method:"PUT"},removeRole:{uri:"/jaxrs/role/{id}",method:"DELETE"},deleteRole:{uri:"/jaxrs/role/{id}",method:"DELETE"},listRoleByPinyin:{uri:"/jaxrs/role/list/like/pinyin",method:"PUT"},listRoleByPinyininitial:{uri:"/jaxrs/role/list/pinyininitial",method:"PUT"},listRoleByKey:{uri:"/jaxrs/role/list/like",method:"PUT"},listRoleByGroup:{uri:"/jaxrs/role/list/group/{id}"},listRoleByPerson:{uri:"/jaxrs/role/list/person/{id}"},listRoleNext:{uri:"/jaxrs/role/list/{id}/next/{count}"},listRolePrev:{uri:"/jaxrs/role/list/{id}/prev/{count}"},addGroup:{uri:"/jaxrs/group",method:"POST"},getGroup:{uri:"/jaxrs/group/{id}"},updateGroup:{uri:"/jaxrs/group/{id}",method:"PUT"},removeGroup:{uri:"/jaxrs/group/{id}",method:"DELETE"},deleteGroup:{uri:"/jaxrs/group/{id}",method:"DELETE"},listGroupByPinyin:{uri:"/jaxrs/group/list/like/pinyin",method:"PUT"},listGroupByPinyininitial:{uri:"/jaxrs/group/list/pinyininitial",method:"PUT"},listGroupByKey:{uri:"/jaxrs/group/list/like",method:"PUT"},listGroupDirectByPerson:{uri:"/jaxrs/group/list/person/{id}/sup/direct"},listGroupNestedByPerson:{uri:"/jaxrs/group/list/person/{id}/sup/nested"},listSubGroupDirect:{uri:"/jaxrs/group/list/{id}/sub/direct"},listSubGroupNested:{uri:"/jaxrs/group/list/{id}/sub/nested"},listSupGroupDirect:{uri:"/jaxrs/group/list/{id}/sup/direct"},listSupGroupNested:{uri:"/jaxrs/group/list/{id}/sup/nested"},listGroupNext:{uri:"/jaxrs/group/list/{id}/next/{count}"},listGroupPrev:{uri:"/jaxrs/group/list/{id}/prev/{count}"},addUnit:{uri:"/jaxrs/unit",method:"POST"},getUnit:{uri:"/jaxrs/unit/{id}"},updateUnit:{uri:"/jaxrs/unit/{id}",method:"PUT"},removeUnit:{uri:"/jaxrs/unit/{id}",method:"DELETE"},deleteUnit:{uri:"/jaxrs/unit/{id}",method:"DELETE"},listUnitByPinyin:{uri:"/jaxrs/unit/list/like/pinyin",method:"PUT"},listUnitByPinyininitial:{uri:"/jaxrs/unit/list/pinyininitial",method:"PUT"},listUnitByKey:{uri:"/jaxrs/unit/list/like",method:"PUT"},listTopUnit:{uri:"/jaxrs/unit/list/top"},listUnitByType:{uri:"/jaxrs/unit/list/unit/type",method:"PUT"},listUnitType:{uri:"/jaxrs/unit/list/type"},listUnitNext:{uri:"/jaxrs/unit/list/{id}/next/{count}"},listUnitPrev:{uri:"/jaxrs/unit/list/{id}/prev/{count}"},listSubUnitDirect:{uri:"/jaxrs/unit/list/{id}/sub/direct"},listSubUnitNested:{uri:"/jaxrs/unit/list/{id}/sub/nested"},listSubUnitNestedByType:{uri:"/jaxrs/unit/list/{flag}/sub/direct/type/{type}"},getSupUnitDirect:{uri:"/jaxrs/unit/{id}/sup/direct"},listSupUnitNested:{uri:"/jaxrs/unit/list/{id}/sup/nested"},listSupUnitNestedByType:{uri:"/jaxrs/unit/list/{flag}/sup/nested/type/{type}"},getUnitWithIdentityWithLevel:{uri:"/jaxrs/unit/identity/{id}/level/{level}"},getUnitWithIdentityWithType:{uri:"/jaxrs/unit/identity/{id}/type/{type}"},addUnitattribute:{uri:"/jaxrs/unitattribute",method:"POST"},getUnitattribute:{uri:"/jaxrs/unitattribute/{id}"},updateUnitattribute:{uri:"/jaxrs/unitattribute/{id}",method:"PUT"},removeUnitattribute:{uri:"/jaxrs/unitattribute/{id}",method:"DELETE"},deleteUnitattribute:{uri:"/jaxrs/unitattribute/{id}",method:"DELETE"},listUnitattribute:{uri:"/jaxrs/unitattribute/list/unit/{id}"},listUnitattributeNext:{uri:"/jaxrs/unitattribute/list/{id}/next/{count}"},listUnitattributePrev:{uri:"/jaxrs/unitattribute/list/{id}/prev/{count}"},addUnitduty:{uri:"/jaxrs/unitduty",method:"POST"},getUnitduty:{uri:"/jaxrs/unitduty/{id}"},updateUnitduty:{uri:"/jaxrs/unitduty/{id}",method:"PUT"},removeUnitduty:{uri:"/jaxrs/unitduty/{id}",method:"DELETE"},deleteUnitduty:{uri:"/jaxrs/unitduty/{id}",method:"DELETE"},listUnitdutyName:{uri:"/jaxrs/unitduty/distinct/name"},listUnitdutyNameByKey:{uri:"/jaxrs/unitduty/distinct/name/like/{key}"},listUnitdutyByKey:{uri:"/jaxrs/unitduty/distinct/name/like/{key}"},listUnitdutyByIdentity:{uri:"/jaxrs/unitduty/list/identity/{flag}"},listUnitdutyByUnit:{uri:"/jaxrs/unitduty/list/unit/{flag}"},listUnitdutyByName:{uri:"/jaxrs/unitduty/list/name/{name}"},listUnitdutyNext:{uri:"/jaxrs/unitduty/list/{id}/next/{count}"},listUnitdutyPrev:{uri:"/jaxrs/unitduty/list/{id}/prev/{count}"},getImportPersonTemplate:{uri:"/jaxrs/inputperson/template"},getImportPersonResault:{uri:"/jaxrs/inputperson/result/flag/{flag}"},importPerson:{uri:"/jaxrs/inputperson",method:"POST",enctype:"formData"},wipeAll:{uri:"/jaxrs/inputperson/wipe"},clazz:"x_organization_assemble_control"};o2.xAction.RestActions.Action.x_organization_assemble_control||(o2.xAction.RestActions.Action.x_organization_assemble_control=new Class({Extends:o2.xAction.RestActions.Action})),o2.Actions.actions.x_organization_assemble_control=new o2.xAction.RestActions.Action.x_organization_assemble_control("x_organization_assemble_control",actionJson);actionJson={listApplication:{uri:"/jaxrs/appinfo/list/user/view/all"},listCMSApplication:{uri:"/jaxrs/appinfo/list/user/view/all"},getApplication:{uri:"/jaxrs/appinfo/{id}"},getCMSApplication:{uri:"/jaxrs/appinfo/{id}"},listAllAppType:{uri:"/jaxrs/appinfo/list/appType"},listAllAppTypeByManager:{uri:"/jaxrs/appinfo/list/appType/manager"},listWhatICanManageWithAppType:{uri:"/jaxrs/appinfo/list/manage/type/{appType}"},listWhatICanViewWithAppType:{uri:"/jaxrs/appinfo/list/user/view/all/type/{appType}"},listCMSCategory:{uri:"/jaxrs/categoryinfo/list/view/app/{appId}/all"},getCMSForm:{uri:"/jaxrs/form/{id}"},listApplicationView:{uri:"/jaxrs/queryview/list/all"},listCMSApplicationView:{uri:"/jaxrs/queryview/list/all"},getId:{uri:"/jaxrs/uuid/random"},listColumn:{uri:"/jaxrs/appinfo/list/user/view/all"},listColumnByPublish:{uri:"/jaxrs/appinfo/list/user/publish"},listColumnByAdmin:{uri:"/jaxrs/appinfo/list/admin"},getColumn:{uri:"/jaxrs/appinfo/{id}"},getColumnByName:{uri:"/jaxrs/appinfo/{id}"},addColumn:{uri:"/jaxrs/appinfo",method:"POST"},removeColumn:{uri:"/jaxrs/appinfo/{id}",method:"DELETE"},updateColumn:{uri:"/jaxrs/appinfo",method:"POST"},getColumnIcon:{uri:"/jaxrs/appinfo/{id}/icon"},updataColumnIcon:{uri:"/jaxrs/appinfo/{id}/icon/size/72",method:"POST",enctype:"formData"},listAllCategory:{uri:"/jaxrs/categoryinfo/list/all"},listCategory:{uri:"/jaxrs/categoryinfo/list/view/app/{appId}/all"},listCategoryByPublisher:{uri:"/jaxrs/categoryinfo/list/publish/app/{appId}"},addCategory:{uri:"/jaxrs/categoryinfo",method:"POST"},getCategory:{uri:"/jaxrs/categoryinfo/{id}"},updateCategory:{uri:"/jaxrs/categoryinfo",method:"POST"},removeCategory:{uri:"/jaxrs/categoryinfo/{id}",method:"DELETE"},saveCategoryExtContent:{uri:"/jaxrs/categoryinfo/extContent",method:"POST"},saveCategoryImportView:{uri:"/jaxrs/categoryinfo/bind/{categoryId}/view",method:"PUT"},listAllForm:{uri:"/jaxrs/form/list/all"},listForm:{uri:"/jaxrs/form/list/app/{appId}"},getForm:{uri:"/jaxrs/form/{id}"},getFormWithColumn:{uri:"/jaxrs/form/{formFlag}/appinfo/{appFlag}"},addForm:{uri:"/jaxrs/form",method:"POST"},removeForm:{uri:"/jaxrs/form/{id}",method:"DELETE"},updataForm:{uri:"/jaxrs/form/{id}",method:"PUT"},getFormByAnonymous:{uri:"/jaxrs/anonymous/form/{id}"},listFormFieldWithForm:{uri:"/jaxrs/form/list/{id}/formfield"},listFormFieldWithColumn:{uri:"/jaxrs/form/list/formfield/appInfo/{appId}"},getFormV2:{uri:"/jaxrs/form/v2/{id}?t={tag}"},getFormMobileV2:{uri:"/jaxrs/form/v2/{id}/mobile?t={tag}"},getFormAnonymousV2:{uri:"/jaxrs/anonymous/form/v2/{id}?t={tag}"},getFormMobileAnonymousV2:{uri:"/jaxrs/anonymous/form/v2/{id}/mobile?t={tag}"},lookupFormWithDocV2:{uri:"/jaxrs/form/v2/lookup/document/{docId}"},lookupFormWithDocMobileV2:{uri:"/jaxrs/form/v2/lookup/document/{docId}/mobile"},lookupFormWithDocAnonymousV2:{uri:"/jaxrs/anonymous/form/v2/lookup/document/{docId}"},lookupFormWithDocMobileAnonymousV2:{uri:"/jaxrs/anonymous/form/v2/lookup/document/{docId}/mobile"},getFormTemplate:{uri:"/jaxrs/templateform/{id}"},deleteFormTemplate:{uri:"/jaxrs/templateform/{id}",method:"DELETE"},addFormTemplate:{uri:"/jaxrs/templateform",method:"POST"},listFormTemplate:{uri:"/jaxrs/templateform/list"},listFormTemplateCategory:{uri:"/jaxrs/templateform/list/category"},listFormTemplatByCategory:{uri:"/jaxrs/templateform/list/category",method:"PUT"},listDictionary:{uri:"/jaxrs/design/appdict/list/appInfo/{appId}"},getDictionary:{uri:"/jaxrs/design/appdict/{appDictId}"},addDictionary:{uri:"/jaxrs/design/appdict",method:"POST"},removeDictionary:{uri:"/jaxrs/design/appdict/{appDictId}",method:"DELETE"},updataDictionary:{uri:"/jaxrs/design/appdict/{appDictId}",method:"PUT"},getDictRoot:{uri:"/jaxrs/surface/appdict/{appDictId}/appInfo/{appId}/data"},getDictData:{uri:"/jaxrs/surface/appdict/{appDictId}/appInfo/{appId}/{path}/data"},setDictData:{uri:"/jaxrs/surface/appdict/{appDictId}/appInfo/{appId}/{path}/data",method:"PUT"},addDictData:{uri:"/jaxrs/surface/appdict/{appDictId}/appInfo/{appId}/{path}/data",method:"POST"},deleteDictData:{uri:"/jaxrs/surface/appdict/{appDictId}/appInfo/{appId}/{path}/data",method:"DELETE"},getDictRootAnonymous:{uri:"/jaxrs/anonymous/surface/appdict/{appDictId}/appInfo/{appId}/data"},getDictDataAnonymous:{uri:"/jaxrs/anonymous/surface/appdict/{appDictId}/appInfo/{appId}/{path}/data"},listScript:{uri:"/jaxrs/script/list/app/{appId}"},getScript:{uri:"/jaxrs/script/{id}"},addScript:{uri:"/jaxrs/script",method:"POST"},removeScript:{uri:"/jaxrs/script/{id}",method:"DELETE"},deleteScript:{uri:"/jaxrs/script/{id}",method:"DELETE"},updataScript:{uri:"/jaxrs/script/{id}",method:"PUT"},getScriptByName:{uri:"/jaxrs/script/list/app/{appId}/name/{name}"},getScriptByNameV2:{uri:"/jaxrs/script/{uniqueName}/app/{flag}/imported"},listAppByManager:{uri:"/jaxrs/appinfo/list/manage"},isAppInfoManager:{uri:"/jaxrs/permission/appInfo/{id}/manageable"},isCategoryInfoManagers:{uri:"/jaxrs/permission/categoryInfo/{id}/manageable"},listAppInfoManagers:{uri:"/jaxrs/permission/appInfo/{id}/managers"},listAppInfoPublishers:{uri:"/jaxrs/permission/appInfo/{id}/publishers"},listAppInfoViewers:{uri:"/jaxrs/permission/appInfo/{id}/viewers"},listCategoryInfoManagers:{uri:"/jaxrs/permission/category/{id}/managers"},listCategoryInfoPublishers:{uri:"/jaxrs/permission/category/{id}/publishers"},listCategoryInfoViewers:{uri:"/jaxrs/permission/category/{id}/viewers"},saveAppInfoManager:{uri:"/jaxrs/permission/manager/appInfo/{id}",method:"POST"},saveAppInfoPublisher:{uri:"/jaxrs/permission/publisher/appInfo/{id}",method:"POST"},saveAppInfoViewer:{uri:"/jaxrs/permission/viewer/appInfo/{id}",method:"POST"},saveCategoryInfoManager:{uri:"/jaxrs/permission/manager/categoryInfo/{id}",method:"POST"},saveCategoryInfoPublisher:{uri:"/jaxrs/permission/publisher/categoryInfo/{id}",method:"POST"},saveCategoryInfoViewer:{uri:"/jaxrs/permission/viewer/categoryInfo/{id}",method:"POST"},listView:{uri:"/jaxrs/view/list/app/{appId}"},listViewByCategory:{uri:"/jaxrs/view/list/category/{categoryId}"},listViewByForm:{uri:"/jaxrs/view/list/form/{formId}"},getView:{uri:"/jaxrs/view/{id}"},addView:{uri:"/jaxrs/view",method:"POST"},updateView:{uri:"/jaxrs/view/{id}",method:"PUT"},deleteView:{uri:"/jaxrs/view/{id}",method:"DELETE"},listViewColumn:{uri:"/jaxrs/viewfieldconfig/list/view/{viewId}"},getViewColumn:{uri:"/jaxrs/viewfieldconfig/{id}"},addViewColumn:{uri:"/jaxrs/viewfieldconfig",method:"POST"},updateViewColumn:{uri:"/jaxrs/viewfieldconfig/{id}",method:"PUT"},deleteViewColumn:{uri:"/jaxrs/viewfieldconfig/{id}",method:"DELETE"},listCategoryViewByView:{uri:"/jaxrs/viewcategory/list/view/{viewId}"},listCategoryViewByCategory:{uri:"/jaxrs/viewcategory/list/category/{categoryId}"},getCategoryView:{uri:"/jaxrs/viewfieldconfig/{id}"},addCategoryView:{uri:"/jaxrs/viewcategory",method:"POST"},updateCategoryView:{uri:"/jaxrs/viewcategory/{id}",method:"PUT"},deleteCategoryView:{uri:"/jaxrs/viewcategory/{id}",method:"DELETE"},listQueryView:{uri:"/jaxrs/queryview/design/list/application/{applicationId}"},listQueryViewNextPage:{uri:"/jaxrs/queryview/design/list/{id}/next/{count}"},listQueryViewPrevPage:{uri:"/jaxrs/queryview/design/list/{id}/prev/{count}"},getQueryView:{uri:"/jaxrs/queryview/design/{id}"},addQueryView:{uri:"/jaxrs/queryview/design",method:"POST"},updateQueryView:{uri:"/jaxrs/queryview/design/{id}",method:"PUT"},deleteQueryView:{uri:"/jaxrs/queryview/design/{id}",method:"DELETE"},getQueryViewContent:{uri:"/jaxrs/queryview/design/flag/{flag}"},loadQueryView:{uri:"/jaxrs/queryview/design/flag/{flag}/simulate",method:"PUT"},getDocument:{uri:"/jaxrs/document/{id}"},getDocumentControl:{uri:"/jaxrs/document/{id}/control"},viewDocument:{uri:"/jaxrs/document/{id}/view"},getDocumentByAnonymous:{uri:"/jaxrs/anonymous/document/{id}/view"},addDocument:{uri:"/jaxrs/document",method:"POST"},updateDocument:{uri:"/jaxrs/document",method:"POST"},removeDocument:{uri:"/jaxrs/document/{id}",method:"DELETE"},publishDocument:{uri:"/jaxrs/document/publish/{id}",method:"PUT"},cancelPublishDocument:{uri:"/jaxrs/document/publish/{id}/cancel",method:"PUT"},archiveDocument:{uri:"/jaxrs/document/achive/{id}",method:"PUT"},redraftDocument:{uri:"/jaxrs/document/draft/{id}",method:"PUT"},publishDocumentComplex:{uri:"/jaxrs/document/publish/content",method:"PUT"},moveDocumentToCategory:{uri:"/jaxrs/document/category/change",method:"PUT"},getData:{uri:"/jaxrs/data/document/{id}"},addData:{uri:"/jaxrs/data/document/{id}",method:"POST"},updateData:{uri:"/jaxrs/data/document/{id}",method:"PUT"},listAttachment:{uri:"/jaxrs/fileinfo/list/document/{documentid}"},listAttachmentByAnonymous:{uri:"/jaxrs/anonymous/fileinfo/list/document/{documentId}"},getAttachment:{uri:"/jaxrs/fileinfo/{id}/document/{documentid}"},deleteAttachment:{uri:"/jaxrs/fileinfo/{id}",method:"DELETE"},configAttachment:{uri:"/jaxrs/fileinfo/edit/{id}/doc/{docId}",method:"PUT"},uploadAttachment:{uri:"/jaxrs/fileinfo/upload/document/{id}",method:"POST",enctype:"formData"},replaceAttachment:{uri:"/jaxrs/fileinfo/update/document/{documentid}/attachment/{id}",method:"POST",enctype:"formData"},getAttachmentData:{uri:"/jaxrs/fileinfo/download/document/{id}",method:"GET"},getAttachmentStream:{uri:"/jaxrs/fileinfo/download/document/{id}/stream",method:"GET"},getInternetImageBaseBase64:{uri:"/jaxrs/image/encode/base64",method:"POST"},convertLocalImageToBase64:{uri:"/servlet/image/encode/base64/size/{size}",method:"POST",enctype:"formData"},getSubjectAttachmentBase64:{uri:"/jaxrs/fileinfo/{id}/binary/base64/{size}"},listFile:{uri:"/jaxrs/file/list/appInfo/{applicationFlag}"},getFile:{uri:"/jaxrs/file/{id}"},addFile:{uri:"/jaxrs/file",method:"POST"},removeFile:{uri:"/jaxrs/file/{id}",method:"DELETE"},deleteFile:{uri:"/jaxrs/file/{id}",method:"DELETE"},updataFile:{uri:"/jaxrs/file/{id}",method:"PUT"},getFileByName:{uri:"/jaxrs/file/appInfo/{applicationId}/name/{name}"},downloadFile:{uri:"/jaxrs/file/{id}/download"},downloadWithApp:{uri:"/jaxrs/file/{flag}/appInfo/{applicationFlag}/download"},readFileById:{uri:"/jaxrs/file/{id}/content"},uploadFile:{uri:"/jaxrs/file/{id}/upload",method:"POST",enctype:"formData"},copyFile:{uri:"/jaxrs/file/{flag}/appInfo/{appInfoFlag}"},readFile:{uri:"/jaxrs/file/{flag}/appInfo/{applicationFlag}/content"},saveImage:{uri:"/jaxrs/document/pic",method:"POST"},getImage:{uri:"/jaxrs/document/pic/{id}"},listImage:{uri:"/jaxrs/document/pic/doc/{documentid}"},removeImage:{uri:"/jaxrs/document/pic/{id}",method:"DELETE"},getImageByDocument:{uri:"/servlet/document/{documentid}/mainpic",method:"PUT"},getReadedCount:{uri:"/jaxrs/document/{id}/view/count"},listReadedLog:{uri:"/jaxrs/viewrecord/document/{docId}/filter/list/{id}/next/{count}",method:"GET"},listDocumentAll:{uri:"/jaxrs/document/list/category/{categoryId}"},listDocumentFilterNext:{uri:"/jaxrs/document/filter/list/{id}/next/{count}",method:"PUT"},listDocumentFilterPrev:{uri:"/jaxrs/document/filter/list/{id}/prev/{count}",method:"PUT"},listViewDataNext:{uri:"/jaxrs/view/viewdata/list/{id}/next/{count}",method:"POST"},listDraftNext:{uri:"/jaxrs/document/draft/list/{id}/next/{count}",method:"PUT"},listDraftPrev:{uri:"/jaxrs/document/draft/list/{id}/prev/{count}",method:"PUT"},listDraftFilterAttribute:{uri:"/jaxrs/searchfilter/list/draft/filter"},listPublishFilterAttribute:{uri:"/jaxrs/searchfilter/list/publish/filter"},listArchiveFilterAttribute:{uri:"/jaxrs/searchfilter/list/archive/filter"},listCategoryDraftFilterAttribute:{uri:"/jaxrs/searchfilter/list/draft/filter/category/{categoryId}"},listCategoryPublishFilterAttribute:{uri:"/jaxrs/searchfilter/list/publish/filter/category/{categoryId}"},listCategoryArchiveFilterAttribute:{uri:"/jaxrs/searchfilter/list/archive/filter/category/{categoryId}"},achiveDocument:{uri:"/jaxrs/document/achive/{id}",method:"PUT"},importDocumentFormExcel:{uri:"/jaxrs/document/import/category/{categoryId}",method:"POST",enctype:"formData"},deleteDocumentWithBatchName:{uri:"/jaxrs/document/batch/{batchId}",method:"DELETE"},checkImportStatus:{uri:"/jaxrs/document/batch/{batchName}/status"},checkAllImportStatus:{uri:"/jaxrs/document/batch/status"},getColumnByAlias:{uri:"/jaxrs/appinfo/alias/{alias}"},getCategoryByAlias:{uri:"/jaxrs/categoryinfo/alias/{alias}"},batchModifyData:{uri:"/jaxrs/document/batch/data/modify",method:"PUT"},listCommentNextWithFilter:{uri:"/jaxrs/comment/list/{id}/next/{count}",method:"PUT"},listCommentPageWithFilter:{uri:"/jaxrs/comment/list/{page}/size/{size}",method:"PUT"},listCommentPrevWithFilter:{uri:"/jaxrs/comment/list/{id}/prev/{count}",method:"PUT"},deleteComment:{uri:"/jaxrs/comment/{id}",method:"DELETE"},saveComment:{uri:"/jaxrs/comment",method:"POST"},clazz:"x_cms_assemble_control"};o2.xAction.RestActions.Action.x_cms_assemble_control||(o2.xAction.RestActions.Action.x_cms_assemble_control=new Class({Extends:o2.xAction.RestActions.Action})),o2.Actions.actions.x_cms_assemble_control=new o2.xAction.RestActions.Action.x_cms_assemble_control("x_cms_assemble_control",actionJson);actionJson={collectConnected:{uri:"/jaxrs/collect/connect"},getCollectConfig:{uri:"/jaxrs/collect"},disconnect:{uri:"/jaxrs/collect/disconnect"},collectValidate:{uri:"/jaxrs/collect/validate"},updateCollect:{uri:"/jaxrs/collect",method:"PUT"},updateUnitCollect:{uri:"/jaxrs/collect/updateUnit",method:"PUT"},deleteCollect:{uri:"/jaxrs/collect/name/{name}/mobile/{mobile}/code/{code}",method:"DELETE"},createCollect:{uri:"/jaxrs/collect",method:"POST"},collectValidateInput:{uri:"/jaxrs/collect/validate/direct",method:"PUT"},getCode:{uri:"/jaxrs/collect/code/mobile/{mobile}"},codeValidate:{uri:"/jaxrs/collect/validate/codeanswer",method:"PUT"},resetPassword:{uri:"/jaxrs/collect/resetpassword",method:"PUT"},nameExist:{uri:"/jaxrs/collect/name/{name}/exist"},passwordValidate:{uri:"/jaxrs/collect/validate/password",method:"PUT"},listModuleCategory:{uri:"/jaxrs/module/list/category"},listModule:{uri:"/jaxrs/module/list",method:"PUT"},compareModule:{uri:"/jaxrs/module/{id}/compare"},importModule:{uri:"/jaxrs/module/write/{flag}",method:"PUT"},compareUpload:{uri:"/jaxrs/module/compare/upload",method:"PUT",enctype:"formData"},outputStructure:{uri:"/jaxrs/module/output/structure"},removeStructure:{uri:"/jaxrs/module/remove/structure/{id}",method:"DELETE"},outputCreate:{uri:"/jaxrs/module/output",method:"PUT"},output:{uri:"/jaxrs/module/output",method:"PUT"},download:{uri:"/jaxrs/module/output/{flag}/file"},listStructure:{uri:"/jaxrs/module/output/list/structure"},getCollect:{uri:"/jaxrs/config/collect"},getPerson:{uri:"/jaxrs/config/person"},getToken:{uri:"/jaxrs/config/token"},getPortal:{uri:"/jaxrs/config/portal"},setCollect:{uri:"/jaxrs/config/collect",method:"PUT"},setPerson:{uri:"/jaxrs/config/person",method:"PUT"},setToken:{uri:"/jaxrs/config/token",method:"PUT"},setPortal:{uri:"/jaxrs/config/portal",method:"PUT"},getCenterServer:{uri:"/jaxrs/config/centerserver"},setCenterServer:{uri:"/jaxrs/config/centerserver",method:"PUT"},getProxy:{uri:"/jaxrs/config/proxy"},setProxy:{uri:"/jaxrs/config/proxy",method:"PUT"},mobile_defaultStyle:{uri:"/jaxrs/appstyle/default/style"},mobile_currentStyle:{uri:"/jaxrs/appstyle/current/style"},imageLaunchLogo:{uri:"/jaxrs/appstyle/image/launch/logo",method:"PUT",enctype:"formData"},imageLaunchLogoErase:{uri:"/jaxrs/appstyle/image/launch/logo/erase"},imageLoginAvatar:{uri:"/jaxrs/appstyle/image/login/avatar",method:"PUT",enctype:"formData"},imageLoginAvatarErase:{uri:"/jaxrs/appstyle/image/login/avatar/erase"},imageMenuLogoBlur:{uri:"/jaxrs/appstyle/image/menu/logo/blur",method:"PUT",enctype:"formData"},imageMenuLogoBlurErase:{uri:"/jaxrs/appstyle/image/menu/logo/blur/erase"},imageMenuLogoFocus:{uri:"/jaxrs/appstyle/image/menu/logo/focus",method:"PUT",enctype:"formData"},imageMenuLogoFocusErase:{uri:"/jaxrs/appstyle/image/menu/logo/focus/erase"},imagePeopleAvatarDefault:{uri:"/jaxrs/appstyle/image/people/avatar/default",method:"PUT",enctype:"formData"},imagePeopleAvatarDefaultErase:{uri:"/jaxrs/appstyle/image/people/avatar/default/erase"},imageProcessDefault:{uri:"/jaxrs/appstyle/image/process/default",method:"PUT",enctype:"formData"},imageProcessDefaultErase:{uri:"/jaxrs/appstyle/image/process/default/erase"},imageSetupAboutLogo:{uri:"/jaxrs/appstyle/image/setup/about/logo",method:"PUT",enctype:"formData"},imageSetupAboutLogoErase:{uri:"/jaxrs/appstyle/image/setup/about/logo/erase"},setAppStyle:{uri:"/jaxrs/appstyle",method:"PUT"},listAgent:{uri:"/jaxrs/agent"},createAgent:{uri:"/jaxrs/agent",method:"POST"},updateAgent:{uri:"/jaxrs/agent/{flag}",method:"PUT"},updateAgentByUploadFile:{uri:"/jaxrs/agent/{flag}/file",method:"PUT",enctype:"formData"},deleteAgent:{uri:"/jaxrs/agent/{flag}",method:"DELETE"},getAgent:{uri:"/jaxrs/agent/{flag}"},disableAgent:{uri:"/jaxrs/agent/{flag}/disable"},enableAgent:{uri:"/jaxrs/agent/{flag}/enable"},executeAgent:{uri:"/jaxrs/agent/{flag}/execute"},listInvoke:{uri:"/jaxrs/invoke"},createInvoke:{uri:"/jaxrs/invoke",method:"POST"},updateInvoke:{uri:"/jaxrs/invoke/{flag}",method:"PUT"},updateInvokeByUploadFile:{uri:"/jaxrs/invoke/{flag}/file",method:"PUT",enctype:"formData"},deleteInvoke:{uri:"/jaxrs/invoke/{flag}",method:"DELETE"},getInvoke:{uri:"/jaxrs/invoke/{flag}"},executeInvoke:{uri:"/jaxrs/invoke/{flag}/execute",method:"POST"},executeToken:{uri:"/jaxrs/invoke/{flag}/client/{client}/token/{token}/execute",method:"POST"},listPromptErrorLog:{uri:"/jaxrs/prompterrorlog/list/{id}/next/{count}"},listPromptErrorLogWithDate:{uri:"/jaxrs/prompterrorlog/list/{id}/next/{count}/date/{date}"},listUnexpectedErrorLog:{uri:"/jaxrs/unexpectederrorlog/list/{id}/next/{count}"},listUnexpectedErrorLogWithDate:{uri:"/jaxrs/unexpectederrorlog/list/{id}/next/{count}/date/{date}"},listWarnLog:{uri:"/jaxrs/warnlog/list/{id}/next/{count}"},listWarnLogWithDate:{uri:"/jaxrs/warnlog/list/{id}/next/{count}/date/{date}"},listSystemLog:{uri:"/jaxrs/warnlog/view/system/log/tag/{tag}"},echo:{uri:"/jaxrs/echo"}};o2.xAction.RestActions.Action.x_program_center||(o2.xAction.RestActions.Action.x_program_center=new Class({Extends:o2.xAction.RestActions.Action})),o2.Actions.actions.x_program_center=new o2.xAction.RestActions.Action.x_program_center("x_program_center",actionJson);actionJson={changePassword:{uri:"/jaxrs/person/password",method:"PUT"},getPerson:{uri:"/jaxrs/person"},updatePerson:{uri:"/jaxrs/person",method:"PUT"},changeIcon:{uri:"/jaxrs/person/icon",method:"PUT",enctype:"formData"},checkPassword:{uri:"/jaxrs/reset/check/password/{password}"},getPersonIcon:{uri:"/jaxrs/person/icon"},getIcon:{uri:"/jaxrs/icon/{person}"},getRegisterMode:{uri:"/jaxrs/regist/mode"},getRegisterCaptcha:{uri:"/jaxrs/regist/captcha/width/{width}/height/{height}"},createRegisterCode:{uri:"/jaxrs/regist/code/mobile/{mobile}"},checkRegisterName:{uri:"/jaxrs/regist/check/name/{name}"},checkRegisterPassword:{uri:"/jaxrs/regist/check/password/{password}"},checkRegisterMobile:{uri:"/jaxrs/regist/check/mobile/{mobile}"},register:{uri:"/jaxrs/regist",method:"POST"},resetPassword:{uri:"/jaxrs/reset",method:"PUT"},checkCredentialOnResetPassword:{uri:"/jaxrs/reset/check/credential/{credential}"},checkPasswordOnResetPassword:{uri:"/jaxrs/reset/check/password/{password}"},createCodeOnResetPassword:{uri:"/jaxrs/reset/code/credential/{credential}"},getUserData:{uri:"/jaxrs/custom/{name}"},putUserData:{uri:"/jaxrs/custom/{name}",method:"PUT"},deleteUserData:{uri:"/jaxrs/custom/{name}",method:"DELETE"},getPublicUserData:{uri:"/jaxrs/definition/{name}"},putPublicUserData:{uri:"/jaxrs/definition/{name}",method:"PUT"},deletePublicUserData:{uri:"/jaxrs/definition/{name}",method:"DELETE"},getMyEmPower:{uri:"/jaxrs/empower/list/currentperson",method:"GET"},getReceiveEmPower:{uri:"/jaxrs/empower/list/to",method:"GET"},createEmPower:{uri:"/jaxrs/empower",method:"POST"},editEmPower:{uri:"/jaxrs/empower/{id}",method:"PUT"},deleteEmPower:{uri:"/jaxrs/empower/{id}",method:"DELETE"},getMyEmPowerLog:{uri:"/jaxrs/empowerlog/list/currentperson",method:"GET"},getReceiveEmPowerLog:{uri:"/jaxrs/empowerlog/list/to",method:"GET"},listToCurrentPersonPaging:{uri:"/jaxrs/empowerlog/list/to/currentperson/paging/{page}/size/{size}",method:"POST"},listWithCurrentPersonPaging:{uri:"/jaxrs/empowerlog/list/currentperson/paging/{page}/size/{size}",method:"POST"},clazz:"x_organization_assemble_personal"};o2.xAction.RestActions.Action.x_organization_assemble_personal||(o2.xAction.RestActions.Action.x_organization_assemble_personal=new Class({Extends:o2.xAction.RestActions.Action})),o2.Actions.actions.x_organization_assemble_personal=new o2.xAction.RestActions.Action.x_organization_assemble_personal("x_organization_assemble_personal",actionJson),layout=window.layout||{},layout.desktop=layout,layout.desktop.type="app";var locate=window.location;layout.protocol=locate.protocol,layout.inBrowser=!0,layout.session=layout.session||{},layout.debugger=-1!==locate.href.toString().indexOf("debugger"),layout.anonymous=-1!==locate.href.toString().indexOf("anonymous"),o2.xApplication=o2.xApplication||{},o2.xDesktop=o2.xDesktop||{},o2.xDesktop.requireApp=function(t,e,i,o){o2.requireApp(t,e,i,o)},function(t){t.readys=[],t.addReady=function(){for(var e=0;e<arguments.length;e++)"function"===o2.typeOf(arguments[e])&&(t.isReady?arguments[e].apply(window):t.readys.push(arguments[e]))};var e=function(e){(function(t){return!(!window.o2android||!window.o2android.openO2Work)&&(t.workId?window.o2android.openO2Work(t.workId,"",t.title||t.docTitle||""):t.workCompletedId&&window.o2android.openO2Work("",t.workCompletedId,t.title||t.docTitle||""),!0)})(e)||function(t){return!!(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.openO2Work)&&(t.workId?window.webkit.messageHandlers.openO2Work.postMessage({work:t.workId,workCompleted:"",title:t.title||t.docTitle||""}):t.workCompletedId&&window.webkit.messageHandlers.openO2Work.postMessage({work:"",workCompleted:t.workCompletedId,title:t.title||t.docTitle||""}),!0)}(e)||function(e){var i=new URI(window.location.href).getData("redirectlink");i=i?encodeURIComponent(i):encodeURIComponent(locate.pathname+locate.search);var o="../x_desktop/workmobilewithaction.html".toURI();e.draft?o="../x_desktop/workmobilewithaction.html?"+("draft="+encodeURIComponent(JSON.stringify(e.draft))):o=o.setData(e).toString();var s=e.jobid||e.jobId||e.job;s&&(o+=(-1!=o.indexOf("?")?"&":"?")+"jobid="+s),o+=i?"&redirectlink="+i:"",o+=t.debugger?"&debugger":"",window.location=o2.filterUrl(o)}(e)},i=function(i,o,s){switch(i){case"process.Work":e(o);break;case"cms.Document":!function(e,i,o){var s="object"===typeOf(i)?i.docTitle||i.title:"";s=s||"";var n="app="+encodeURIComponent(e)+"&status="+encodeURIComponent(o?JSON.encode(o):"")+"&option="+encodeURIComponent(i?JSON.encode(i):"");window.o2android&&window.o2android.openO2CmsDocument?window.o2android.openO2CmsDocument(i.documentId,s):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.openO2CmsDocument?window.webkit.messageHandlers.openO2CmsDocument.postMessage({docId:i.documentId,docTitle:s}):window.location=o2.filterUrl("../x_desktop/appMobile.html?"+n+(t.debugger?"&debugger":""))}(i,o,s);break;case"cms.Module":!function(e,i,o){var s="app="+encodeURIComponent(e)+"&status="+encodeURIComponent(o?JSON.encode(o):"")+"&option="+encodeURIComponent(i?JSON.encode(i):"");window.o2android&&window.o2android.openO2CmsApplication?window.o2android.openO2CmsApplication(i.columnId,i.title||""):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.openO2CmsApplication?window.webkit.messageHandlers.openO2CmsApplication.postMessage(i.columnId):window.location=o2.filterUrl("../x_desktop/appMobile.html?"+s+(t.debugger?"&debugger":""))}(i,o,s);break;case"Meeting":!function(e,i,o){var s="app="+encodeURIComponent(e)+"&status="+encodeURIComponent(o?JSON.encode(o):"")+"&option="+encodeURIComponent(i?JSON.encode(i):"");window.o2android&&window.o2android.openO2Meeting?window.o2android.openO2Meeting(""):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.openO2Meeting?window.webkit.messageHandlers.openO2Meeting.postMessage(""):window.location=o2.filterUrl("../x_desktop/appMobile.html?"+s+(t.debugger?"&debugger":""))}(i,o,s);break;case"Calendar":!function(e,i,o){var s="app="+encodeURIComponent(e)+"&status="+encodeURIComponent(o?JSON.encode(o):"")+"&option="+encodeURIComponent(i?JSON.encode(i):"");window.o2android&&window.o2android.openO2Calendar?window.o2android.openO2Calendar(""):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.openO2Calendar?window.webkit.messageHandlers.openO2Calendar.postMessage(""):window.location=o2.filterUrl("../x_desktop/appMobile.html?"+s+(t.debugger?"&debugger":""))}(i,o,s);break;case"process.TaskCenter":!function(e,i,o){var s="app="+encodeURIComponent(e)+"&status="+encodeURIComponent(o?JSON.encode(o):"")+"&option="+encodeURIComponent(i?JSON.encode(i):""),n=(i&&i.navi?i.navi:"task").toLowerCase();"done"===n&&(n="taskCompleted"),"readed"===n&&(n="readCompleted"),window.o2android&&window.o2android.openO2WorkSpace?window.o2android.openO2WorkSpace(n):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.openO2WorkSpace?window.webkit.messageHandlers.openO2WorkSpace.postMessage(n):window.location=o2.filterUrl("../x_desktop/appMobile.html?"+s+(t.debugger?"&debugger":""))}(i,o,s);break;default:var n=new URI(window.location.href),a=n.getData("option"),r=n.getData("status");window.location=o2.filterUrl("../x_desktop/appMobile.html?app="+i+"&option="+(a||"")+"&status="+(r||"")+(t.debugger?"&debugger":""))}};t.openApplication=function(e,o,s,n,a,r,l){if("@url"===o.substring(0,4)){var d=o.replace(/\@url\:/i,""),c=new Element("a",{href:d,target:"_blank"});return c.click(),c.destroy(),c=null,!0}if(t.app){if(!t.mobile)return function(e,i,o){i&&delete i.docTitle;var s="app="+encodeURIComponent(e)+"&status="+encodeURIComponent(o?JSON.encode(o):"")+"&option="+encodeURIComponent(i?JSON.encode(i):"");switch(e){case"process.Work":var n="../x_desktop/work.html".toURI();n=i.draft?"../x_desktop/app.html?"+s:n.setData(i).toString();var a=i.jobid||i.jobId||i.job;return a&&(n+=(-1!=n.indexOf("?")?"&":"?")+"jobid="+a),n+=t.debugger?"&debugger":"",t.app.$openWithSelf?window.location=o2.filterUrl(n):window.open(o2.filterUrl(n),s);case"cms.Document":return n=(n="../x_desktop/cmsdoc.html".toURI()).setData(i).toString(),n+=t.debugger?"&debugger":"",t.app.$openWithSelf?window.location=o2.filterUrl(n):window.open(o2.filterUrl(n),s);default:return t.app.$openWithSelf?window.location=o2.filterUrl("../x_desktop/app.html?"+s+(t.debugger?"&debugger":"")):window.open(o2.filterUrl("../x_desktop/app.html?"+s+(t.debugger?"&debugger":"")),s)}}(o,s,n);i(o,s,n)}else{var h=o.split("."),p=h[h.length-1];!function(t,e,i){var o=t.split("."),s=o2.xApplication;o.each(function(t,e){e<o.length-1?s[t]=s[t]||{}:s[t]=s[t]||{options:Object.clone(o2.xApplication.Common.options)},s=s[t]}.bind(this)),s.options||(s.options=Object.clone(o2.xApplication.Common.options));o2.xDesktop.requireApp(t,"lp."+o2.language,{onFailure:function(){o2.xDesktop.requireApp(t,"lp.zh-cn",null,!1)}.bind(this)},!1),o2.xDesktop.requireApp(t,i,(function(){e&&e(s)}))}(o,function(i){var o=s&&s.appId?s.appId:i.options.multitask?"":p;o&&t.desktop.apps&&t.desktop.apps[o]?t.desktop.apps[o].setCurrent():(s&&(s.appId=o),function(e,i,o,s,n,a,r,l){s?s.event=e:s={event:e};var d=new i.Main(t.desktop,s);if(d.desktop=t.desktop,d.status=n,d.inBrowser=!(!a&&!t.inBrowser),"layout"===t.desktop.type){if(d.appId=s.appId?s.appId:i.options.multitask?o+"-"+new o2.widget.UUID:o,d.options.appId=d.appId,t.desktop.createTaskItem&&(r||(r=t.desktop.createTaskItem(d)),d.taskitem=r,d.taskitem.app=d),d.isLoadApplication=!0,d.load(!l),t.desktop.apps||(t.desktop.apps={}),t.desktop.apps[d.appId])t.desktop.apps[d.appId];else t.desktop.apps[d.appId]=d;t.desktop.appArr.push(d),t.desktop.appCurrentList.push(d),l||(t.desktop.currentApp=d)}else d.load(!0),t.app=d;var c=document.getElementById("appContentMask");c&&c.destroy()}(e,i,p,s||{appId:o},n,a,r,l))}.bind(this))}},t.refreshApp=function(e){var i=e.recordStatus(),o=new URI(window.location.href),s=o.getData("app"),n=o.getData("option"),a=o.getData("status");i&&(a=JSON.encode(i));var r=o.get("port"),l=o.get("scheme")+"://"+o.get("host")+(r&&"80"!=r?":"+r+"/":"")+o.get("directory")+o.get("file")+"?app="+encodeURIComponent(s)+"&status="+encodeURIComponent(a)+"&option="+encodeURIComponent(n?JSON.encode(n):"")+(t.debugger?"&debugger":"");l=o2.filterUrl(l),window.location=l},t.load=function(e,i,o){t.apps=[],t.node=$("layout")||$("appContent")||document.body;var s=e,n=o,a=i,r=window.opener;if(r)try{s||(s=r.layout.desktop.openBrowserApp),n||(n=r.layout.desktop.openBrowserStatus),a||(a=r.layout.desktop.openBrowserOption)}catch(t){}t.openApplication(null,s,a||{},n)},t.getFormDesignerStyle=function(t){this.formDesignerStyle?t&&t():(this.formDesignerStyle="default",MWF.UD.getData("formDesignerStyle",function(e){if(e.data){var i=JSON.decode(e.data);this.formDesignerStyle=i.style}t&&t()}.bind(this)))}}(layout),o2.addReady((function(){window.Element&&Element.implement({makeLnk:function(t){}}),layout.desktop.addEvent=function(t,e,i){window.addEvent(t,e,i)},layout.desktop.addEvents=function(t){window.addEvents(t)};var t=window.$?$("loaddingArea"):null,e=0,i=window.document&&document.body?document.body.getSize():null,o=function(){t&&(t.destroy(),t=null)},s=function(s){if(t)if(s)t.setStyles({width:i.x+"px"}),window.setTimeout(o,500);else{var n=++e/4*i.x;t.setStyles({width:n+"px"}),e>=4&&window.setTimeout(o,500)}},n=function(t,e){layout.serviceAddressList=t,layout.centerServer=e,layout.desktop.serviceAddressList=t,layout.desktop.centerServer=e},a=function(t){if("auto"===layout.config.app_protocol&&(layout.config.app_protocol=window.location.protocol),layout.config.configMapping&&(layout.config.configMapping[window.location.host]||layout.config.configMapping[window.location.hostname])){var e=layout.config.configMapping[window.location.host]||layout.config.configMapping[window.location.hostname];e.servers?(layout.serviceAddressList=e.servers,layout.desktop.serviceAddressList=e.servers,e.center&&(center="array"===o2.typeOf(e.center)?e.center[0]:e.center),layout.centerServer=center,layout.desktop.centerServer=center,t&&t()):(e.center&&(layout.config.center="array"===o2.typeOf(e.center)?e.center:[e.center]),o2.xDesktop.getServiceAddress(layout.config,function(e,i){n(e,i),s(),t&&t()}.bind(this)))}else o2.xDesktop.getServiceAddress(layout.config,function(e,i){n(e,i),s(),t&&t()}.bind(this))},r=function(){var t=new URI(window.location.href).get("data");if(t[o2.tokenName]){Cookie.dispose(o2.tokenName);var e=window.location.host,i=null;/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)?i=e:e.indexOf(".")>0&&(i=e.substring(e.indexOf("."))),i?Cookie.write(o2.tokenName,t[o2.tokenName],{domain:i,path:"/"}):Cookie.write(o2.tokenName,t[o2.tokenName])}layout.sessionPromise=new Promise((function(t,e){o2.Actions.get("x_organization_assemble_authentication").getAuthentication(function(e){if(e.data.language&&e.data.language!==o2.languageName){o2.language=e.data.language.toLowerCase(),o2.languageName=e.data.language;var i="../x_desktop/js/base_lp_"+o2.language+(o2.session.isDebugger?"":".min")+".js";o2.load(i,{reload:!0},(function(){t&&t(e.data)}))}else t&&t(e.data)}.bind(this),function(t,i,o){e&&e({xhr:t,text:i,error:o})}.bind(this))})),layout.sessionPromise.then((function(t){layout.user=t,layout.session=layout.session||{},layout.session.user=t,layout.session.token=t.token,layout.desktop.session=layout.session}),(function(){if(layout.anonymous){var t={name:"anonymous",roleList:[]};layout.user=t,layout.session=layout.session||{},layout.session.user=t,layout.session.token=t.token,layout.desktop.session=layout.session}else s(!0),layout.yqwx?layout.openLoginQywx():layout.openLogin()})),function(t){for(t&&(layout.user=t.data,layout.session=layout.session||{},layout.session.user=t.data,layout.session.token=t.data.token,layout.desktop.session=layout.session),s(!0),layout.isReady=!0;layout.readys&&layout.readys.length;)layout.readys.shift().apply(window)}(),layout.openLogin=function(){layout.desktop.type="app",layout.app=null;var t=$("appContent")||$("layout");t&&t.empty(),layout.authentication=new o2.xDesktop.Authentication({style:"flat",onLogin:r.bind(layout)}),layout.authentication.loadLogin(document.body);var e=$("browser_loading");e&&e.fade("out")},layout.openLoginQywx=function(){console.log("开始login。。。。。。。。。。。。。");var t=locate.href.toURI();console.log("执行单点。。。。。。。。。。");var e=new MWF.xDesktop.Actions.RestActions("","x_organization_assemble_authentication","");e.getActions=function(t){this.actions={sso:{uri:"/jaxrs/qiyeweixin/code/{code}",method:"GET"}},t&&t()},e.invoke({name:"sso",async:!0,parameter:{code:t.getData("code")},success:function(t){console.log("单点成功。"),console.log(t),layout.session.user=t.data,r()}.bind(this),failure:function(t,e,i){var o=document.getElementById("loaddingArea");o&&o.destroy(),document.id("layout").set("html","<div>企业微信单点异常！</div>")}.bind(this)})}};layout.config=null;var l=!1,d=!1,c=!1,h="../x_desktop/js/base_lp_"+o2.language+(o2.session.isDebugger?"":".min")+".js";o2.session.isDebugger&&(o2.session.isMobile||layout.mobile)&&o2.load("../o2_lib/eruda/eruda.js");var p=function(){s(),d=!0;o2.require(["o2.xDesktop.$all"],{onSuccess:function(){c=!0,l&&c&&d&&a((function(){r()}))},onEvery:function(){s()}})};o2.LP?p():o2.load(h,p),o2.getJSON("../x_desktop/res/config/config.json",(function(t){s(),layout.config=t,o2.tokenName=t.tokenName||"x-token",(l=!0)&&c&&d&&a((function(){r()}))}))}));
//# sourceMappingURL=base_document.min.js.map