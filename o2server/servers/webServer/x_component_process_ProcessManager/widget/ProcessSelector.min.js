MWF.xDesktop.requireApp("process.ProcessManager","ProcessExplorer",null,!1),MWF.xDesktop.requireApp("process.ProcessManager","widget.ApplicationSelector",null,!1),MWF.xApplication.process.ProcessManager.widget=MWF.xApplication.process.ProcessManager.widget||{},MWF.xApplication.process.ProcessManager.widget.ProcessSelector=new Class({Implements:[Options,Events],Extends:MWF.xApplication.process.ProcessManager.widget.ApplicationSelector,options:{style:"default",multi:!0,maskNode:$(document.body)},initialize:function(e,s){this.setOptions(s),this.app=e,this.processes=[],this.path="../x_component_process_ProcessManager/widget/$ProcessSelector/",this.cssPath="../x_component_process_ProcessManager/widget/$ProcessSelector/"+this.options.style+"/css.wcss",this._loadCss(),this.selectedItems=[]},load:function(e,s){this.applicationIds=e,this.callback=s||null,this.loadWindow(),this.loadContent()},loadContent:function(){this.restActions=MWF.Actions.get("x_processplatform_assemble_designer"),this.applicationIds.each(function(e){this.restActions.listProcess(e,function(e){e.data.each(function(e){var s=new MWF.xApplication.process.ProcessManager.widget.ProcessSelector.Process(this.app,this,e);s.load(),this.processes.push(s)}.bind(this))}.bind(this))}.bind(this))},clearSelected:function(){this.processes.each(function(e){e.selected&&e.unSelectedItem()}.bind(this))},close:function(){this.selectedItems=[],this.windowNode.destroy(),this.options.maskNode.unmask()}}),MWF.xApplication.process.ProcessManager.widget.ProcessSelector.Process=new Class({Extends:MWF.xApplication.process.ProcessManager.ProcessExplorer.Process,Implements:[Options,Events],initialize:function(e,s,t,i){this.explorer=s,this.data=t,this.container=s.windowContentNode,this.css=s.css,this.icon=this._getIcon()},load:function(){this.createNode(),this.createIconNode(),this.loadSelectIcon(),this.createTextNodes()},createNode:function(){this.node=new Element("div",{styles:this.css.itemNode,events:{click:function(e){this.selected(),e.stopPropagation()}.bind(this)}}).inject(this.container)},createIconNode:function(){this.data.name.icon&&(this.icon=this.data.name.icon);var e=this.explorer.path+""+this.explorer.options.style+"/processIcon/"+this.icon;new Element("div",{styles:this.css.itemIconNode}).inject(this.node).setStyle("background","url("+e+") center center no-repeat")},loadSelectIcon:function(){this.selectIconNode=new Element("div",{styles:this.css.processItemSelectIcon}).inject(this.node)},_open:function(e){},selected:function(){this.isSelected?this.unSelectedItem():(this.explorer.options.multi||this.explorer.clearSelected(),this.selectedItem())},selectedItem:function(){this.selectIconNode.setStyles(this.css.processItemSelectIcon_selected),this.node.setStyles(this.css.itemNode_select),this.explorer.selectedItems.push(this.data),this.isSelected=!0},unSelectedItem:function(){this.selectIconNode.setStyles(this.css.processItemSelectIcon),this.node.setStyles(this.css.itemNode),this.explorer.selectedItems.erase(this.data),this.isSelected=!1}});