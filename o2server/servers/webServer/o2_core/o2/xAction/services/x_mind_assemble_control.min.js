MWF.xApplication.Minder=MWF.xApplication.Minder||{},MWF.xApplication.Minder.Actions=MWF.xApplication.Minder.Actions||{},MWF.require("MWF.xDesktop.Actions.RestActions",null,!1),MWF.xApplication.Minder.Actions.RestActions2=new Class({Extends:MWF.xDesktop.Actions.RestActions,invoke:function(t){this.getActions(function(){var e=this.actions[t.name],i=e.method||"GET",n=e.uri;t.parameter&&Object.each(t.parameter,(function(e,i){var s=new RegExp("{"+i+"}","g");n=!1===t.urlEncode?n.replace(s,e):n.replace(s,encodeURIComponent(e))})),this.address||this.getAddress(),n=this.address+n;var s=!1!==t.async,o=!1!==t.progress,a=new MWF.xDesktop.Actions.RestActions.Callback(t.success,t.failure);if(e.enctype&&"formdata"==e.enctype.toLowerCase())this.invokeFormData(i,n,t.data,t.file,a,s,o);else{var c=t.data?JSON.encode(t.data):"",r=!0;!1===t.withCredentials&&(r=!1),MWF.restful(i,n,c,a,s,r)}}.bind(this))},invokeFormData:function(t,e,i,n,s,o,a){var c=new COMMON.Browser.Request;i.append("fileName",n.name),c.upload&&a?this.invokeFormDataWithProgress(c,t,e,i,n,s,o):this.invokeFormDataWithoutProgress(c,t,e,i,n,s,o)},invokeFormDataWithoutProgress:function(t,e,i,n,s,o,a){new Date;t.addEventListener("readystatechange",function(e){4==t.readyState&&this.xhrStateChange(e,t,null,o)}.bind(this),!1),t.open(e,i,!0),t.withCredentials=!0,t.send(n)}}),MWF.xAction.RestActions.Action.x_mind_assemble_control=new Class({Extends:MWF.xAction.RestActions.Action,initialize:function(t,e){this.action=new MWF.xApplication.Minder.Actions.RestActions2("/xAction/services/"+t+".json",t,""),this.action.actions=e,Object.each(this.action.actions,function(t,e){t.uri&&(this[e]||this.createMethod(t,e))}.bind(this))},uploadMindIcon:function(t,e,i,n,s,o,a){this.action.invoke({name:"uploadMindIcon",parameter:{mindId:t,size:e},data:s,file:o,success:i,failure:n,progress:a})}});