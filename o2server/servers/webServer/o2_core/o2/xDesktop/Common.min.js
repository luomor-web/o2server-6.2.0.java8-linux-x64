o2.xDesktop=o2.xDesktop||{},o2.xd=o2.xDesktop,o2.xDesktop.requireApp=function(e,t,o,n){o2.requireApp(e,t,o,n)},o2.xApplication=o2.xApplication||{},MWF.xDesktop.loadConfig=function(e){o2.JSON.get("res/config/config.json",(function(t){layout.config=t,"auto"===layout.config.app_protocol&&(layout.config.app_protocol=window.location.protocol),layout.config.systemName=layout.config.systemName||layout.config.footer,layout.config.systemTitle=layout.config.systemTitle||layout.config.title,e&&e()}))},MWF.xDesktop.getService=function(e){MWF.xDesktop.getServiceAddress(layout.config,(function(t,o){layout.serviceAddressList=t,layout.centerServer=o,e&&e()}))},MWF.xDesktop.loadService=function(e){MWF.xDesktop.loadConfig((function(){MWF.xDesktop.getService(e)}))},MWF.xDesktop.checkLogin=function(e){layout.authentication=new MWF.xDesktop.Authentication({onLogin:e}),layout.authentication.isAuthenticated(function(t){layout.session.user=t.data,e&&e()}.bind(this),(function(){layout.authentication.loadLogin(this.node)}))},MWF.xDesktop.getDefaultLayout=function(e){MWF.UD.getPublicData("defaultLayout",function(t){t&&(layout.defaultLayout=t),e&&e()}.bind(this))},MWF.xDesktop.getUserLayout=function(e){MWF.UD.getPublicData("forceLayout",function(t){var o=null;t&&(o=t),MWF.UD.getDataJson("layout",function(t){t?(layout.userLayout=t,o&&(layout.userLayout.apps=Object.merge(layout.userLayout.apps,o.apps)),e&&e()):MWF.UD.getPublicData("defaultLayout",function(t){t&&(layout.userLayout=t,o&&(layout.userLayout.apps=Object.merge(layout.userLayout.apps,o.apps))),e&&e()}.bind(this))}.bind(this))}.bind(this))},MWF.xDesktop.notice=function(e,t,o,n,i,a){t||(t={x:"right",y:"top"}),e||(e="ok");var s=n||layout.desktop.desktopNode||document.body,r=i;r||(r={x:10,y:(t.y.toString().toLowerCase(),10)});var c={type:e,position:t,move:!1,target:s,offset:r,content:o};a&&"object"===typeOf(a)&&(c=Object.merge(c,a)),new mBox.Notice(c)},MWF.xDesktop.loadPortal=function(e){layout.openApplication(null,"portal.Portal",{portalId:e,onAfterModulesLoad:function(){var e=$("layout");e&&e.setStyles({position:"absolute",width:"100%","z-index":100,top:"0px",left:"0px"}).fade("out");var t=$("appContent");t&&t.setStyles({position:"absolute",width:"100%",top:"0px",opacity:0,left:"0px"}).fade("in")}},null,!0)},MWF.name={cns:function(e){if("array"!==typeOf(e))return[];var t=[];return e.each(function(e){t.push(this.cn(e))}.bind(this)),t},cn:function(e){if(!e)return"";var t=e.indexOf("@");return-1!==t?e.substring(0,t):e},ou:function(e){if(!e)return"";var t=e.indexOf("@"),o=e.lastIndexOf("@");return-1===t?e:o===t?"":e.substring(t+1,o)},flag:function(e){if(!e)return"";var t=e.lastIndexOf("@");return-1===t?"":e.substring(t+1,e.length)},type:function(e){if(!e)return"";var t=e.lastIndexOf("@");return-1===t?"":e.substring(t+1,e.length)}},MWF.xDesktop.confirm=function(e,t,o,n,i,a,s,r,c,l,u){MWF.require("MWF.xDesktop.Dialog",function(){var p,d=layout.desktop.node||$(document.body),g=d.getSize(),f=0,m=0;"element"==typeOf(t)?(f=(p=t.getPosition(d)).x,m=p.y):("firefox"==Browser.name?(f=parseFloat(t.event.clientX),m=parseFloat(t.event.clientY)):(f=parseFloat(t.event.x),m=parseFloat(t.event.y)),t.target&&(f=(p=t.target.getPosition(d)).x,m=p.y));f+parseFloat(i)>g.x&&(f-=parseFloat(i)),f<0&&(f=0),m+parseFloat(a)>g.y&&(m-=parseFloat(a)),m<0&&(m=0);var A="",h="";"object"==typeOf(n).toLowerCase()?(A=n.text,h=n.html):A=n;var F=new MWF.xDesktop.Dialog({title:o,style:u||"o2",top:m,left:f-20,fromTop:m,fromLeft:f-20,width:i,height:a,text:A,html:h,container:MWF.xDesktop.node,maskNode:l,buttonList:[{type:"ok",text:MWF.LP.process.button.ok,action:s},{type:"cancel",text:MWF.LP.process.button.cancel,action:r}]});switch(e.toLowerCase()){case"success":F.content.setStyle("background-image","url(data:image/png;base64,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)");break;case"error":F.content.setStyle("background-image","url(data:image/png;base64,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)");break;case"info":F.content.setStyle("background-image","url(data:image/png;base64,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)");break;case"warn":F.content.setStyle("background-image","url(data:image/png;base64,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)")}F.show(),c&&c(F)}.bind(this))},MWF.xDesktop.getImageSrc=function(e){"auto"==layout.config.app_protocol&&(layout.config.app_protocol=window.location.protocol);var t=layout.serviceAddressList.x_file_assemble_control;if(t)var o=layout.config.app_protocol+"//"+t.host+(80==t.port?"":":"+t.port)+t.context;else{var n=layout.config.center.host||window.location.hostname,i=layout.config.center.port;o=layout.config.app_protocol+"//"+n+("80"==i?"":":"+i)+"/x_program_center"}var a="/jaxrs/file/"+e+"/download/stream";return o2.filterUrl(o+a)},MWF.xDesktop.setImageSrc=function(){if(event){var e=event.srcElement?event.srcElement:event.target;if(e){e.onerror=null;var t=e.get("data-id");t&&e.set("src",MWF.xDesktop.getImageSrc(t))}}},MWF.xDesktop.uploadImage=function(e,t,o,n,i,a){this.action=new MWF.xDesktop.Actions.RestActions("/xDesktop/Actions/action.json","x_file_assemble_control"),this.action.invoke({name:"uploadImage",parameter:{reference:e,referencetype:t},data:o,file:n,success:i,failure:a})},MWF.xDesktop.uploadImageByScale=function(e,t,o,n,i,a,s){this.action=new MWF.xDesktop.Actions.RestActions("/xDesktop/Actions/action.json","x_file_assemble_control"),this.action.invoke({name:"uploadImageByScale",parameter:{reference:e,referencetype:t,scale:o||0},data:n,file:i,success:a,failure:s})},MWF.xDesktop.copyImage=function(e,t,o,n,i,a){this.action=new MWF.xDesktop.Actions.RestActions("/xDesktop/Actions/action.json","x_file_assemble_control"),this.action.invoke({name:"copyImage",parameter:{reference:e,referencetype:t,attachmentId:o,scale:n||0},success:i,failure:a})},MWF.xDesktop.getPortalFileUr=function(e,t){var o="x_portal_assemble_surface",n=MWF.Actions.getHost(o)+"/"+o+MWF.Actions.get(o).action.actions.readFile.uri;return n=(n=n.replace("{flag}",e)).replace("{applicationFlag}",t)},MWF.xDesktop.getProcessFileUr=function(e,t){var o="x_processplatform_assemble_surface",n=MWF.Actions.getHost(o)+"/"+o+MWF.Actions.get(o).action.actions.readFile.uri;return n=(n=n.replace("{flag}",e)).replace("{applicationFlag}",t)},MWF.xDesktop.getCMSFileUr=function(e,t){var o="x_cms_assemble_control",n=MWF.Actions.getHost(o)+"/"+o+MWF.Actions.get(o).action.actions.readFile.uri;return n=(n=n.replace("{flag}",e)).replace("{applicationFlag}",t)},MWF.xDesktop.getServiceAddress=function(e,t){var o=function(){var t=$("browser_loadding"),o=$("appContent");(t?t.getFirst():o).empty();var n="<div style='width: 800px; color: #ffffff; margin: 30px auto'><div style='height: 40px;'>   <div style='height: 40px; width: 40px; float: left; background: url(../x_desktop/img/error.png)'></div>   <div style='margin-left: 50px; font-size: 20px; line-height: 40px;'>"+MWF.LP.desktop.notice.errorConnectCenter1+"</div></div><div style='margin-left: 0px;'>";if("array"===typeOf(e.center))e.center.each((function(e){var t="http://"+(e.host?e.host:window.location.hostname)+(e.port?":"+e.port:"")+"/x_program_center/jaxrs/echo";n+="<br><a style='margin-left: 50px; color: #e0e8d1; line-height: 30px;' href='"+t+"' target='_blank'>"+t+"</a>"}));else{var i="http://"+(e.center.host?e.center.host:window.location.hostname)+(e.center.port?":"+e.center.port:"")+"/x_program_center/jaxrs/echo";n+="<br><a style='margin-left: 50px; color: #e0e8d1; line-height: 30px;'href='"+i+"' target='_blank'>"+i+"</a>"}n+="</div><br><div style='margin-left: 50px; font-size: 20px'>"+MWF.LP.desktop.notice.errorConnectCenter2+"</div></div>",(t?t.getFirst():o).set("html",n),!t&&o&&o.setStyle("background-color","#666666")};if("object"===typeOf(e.center))MWF.xDesktop.getServiceAddressConfigObject(e.center,t,o);else if("array"===typeOf(e.center)){MWF.xDesktop.getServiceAddressConfigArray(e,t,o)}},MWF.xDesktop.chooseCenter=function(e){for(var t=window.location.host,o=null,n=0;n<e.center.length;n++){var i=e.center[n];if(!i.host||i.host.toString().toLowerCase()===t.toString().toLowerCase()){o=i;break}}return o},MWF.xDesktop.getServiceAddressConfigArray=function(e,t,o){var n=[];e.center.each(function(e){n.push(MWF.xDesktop.getServiceAddressConfigObject(e,function(e,o){n.each((function(e){e&&e.res&&e.res.isRunning()&&e.res.cancel(),e&&e.actionWorker&&e.actionWorker.terminate()})),t&&t(e,o)}.bind(this),function(){if(n.length)for(var e=0;e<n.length;e++){if(n[e].res&&n[e].res.isRunning())return"";if(n[e].actionWorker&&n[e].actionWorker.terminate)return""}o&&o()}.bind(this)))}.bind(this))},MWF.xDesktop.getServiceAddressConfigObject=function(e,t,o){var n=e;n||(n=layout.config.center);var i=n.host||window.location.hostname,a=n.port,s="";"auto"==layout.config.app_protocol&&(layout.config.app_protocol=window.location.protocol),s=a&&"80"!=a?layout.config.app_protocol+"//"+i+":"+a+"/x_program_center/jaxrs/distribute/assemble/source/{source}":layout.config.app_protocol+"//"+i+"/x_program_center/jaxrs/distribute/assemble/source/{source}";var r=layout.config.applicationServer&&layout.config.applicationServer.host?layout.config.applicationServer.host:window.location.hostname;s=s.replace(/{source}/g,r);try{return MWF.restful("get",s,null,{onSuccess:function(o){t&&t(o.data,e)}.bind(this),onRequestFailure:function(e){o&&o(e)}.bind(this),onError:function(e){o&&o(e)}.bind(this)})}catch(e){return o&&o(),null}},MWF.xDesktop.$globalEvents={},MWF.xDesktop.addEvent=function(e,t,o){MWF.xDesktop.$globalEvents[e]||(MWF.xDesktop.$globalEvents[e]={}),MWF.xDesktop.$globalEvents[e][t]||(MWF.xDesktop.$globalEvents[e][t]=[]),MWF.xDesktop.$globalEvents[e][t].push(o)},MWF.xDesktop.addEvents=function(e,t){MWF.xDesktop.$globalEvents[e]||(MWF.xDesktop.$globalEvents[e]={}),Object.each(t,function(t,o){MWF.xDesktop.addEvent(e,o,t)}.bind(this))},MWF.xDesktop.removeEvent=function(e,t,o){return!MWF.xDesktop.$globalEvents[e]||(!MWF.xDesktop.$globalEvents[e][t]||void MWF.xDesktop.$globalEvents[e][t].erase(o))},MWF.xDesktop.removeEvents=function(e,t){return!MWF.xDesktop.$globalEvents[e]||(!MWF.xDesktop.$globalEvents[e][t]||void(MWF.xDesktop.$globalEvents[e][t]=[]))},MWF.org={parseOrgData:function(e,t,o){if(!e.distinguishedName)return e;switch(e.distinguishedName.substr(e.distinguishedName.length-2,2).toLowerCase()){case"@i":return this.parseIdentityData(e,t,o);case"@p":return this.parsePersonData(e,o);case"@u":return this.parseUnitData(e,o);case"@g":return this.parseGroupData(e,o);case"@r":return this.parseRoleData(e,o);case"@a":return this.parseAttributeData(e,o);default:return e}},parseIdentityData:function(e,t,o){if(o)return(e={id:e.id,name:e.name,distinguishedName:e.distinguishedName,unitLevelName:e.unitLevelName,person:e.person,unit:e.unit,unitName:e.unitName}).ignoreEmpower&&(n.ignoreEmpower=!0),e.ignoredEmpower&&(n.ignoredEmpower=!0),e;var n={id:e.id,name:e.name,unique:e.unique,distinguishedName:e.distinguishedName,person:e.person,unit:e.unit,unitName:e.unitName,unitLevelName:e.unitLevelName};if(e.personName&&(n.personName=e.personName),e.personEmployee&&(n.personEmployee=e.personEmployee),e.personUnique&&(n.personUnique=e.personUnique),e.personDn&&(n.personDn=e.personDn),e.ignoreEmpower&&(n.ignoreEmpower=!0),e.ignoredEmpower&&(n.ignoredEmpower=!0),!(t&&e.personDn&&e.personEmployee&&e.personUnique)){var i=e.woPerson;e.woPerson||MWF.Actions.get("x_organization_assemble_control").getPerson(e.person,(function(e){i=e.data}),null,!1),n.personName=i.name,n.personEmployee=i.employee,n.personUnique=i.unique,n.personDn=i.distinguishedName,t||(n.woPerson={id:i.id,genderType:i.genderType,name:i.name,employee:i.employee,unique:i.unique,distinguishedName:i.distinguishedName,dn:i.distinguishedName,mail:i.mail,weixin:i.weixin,qq:i.qq,mobile:i.mobile,officePhone:i.officePhone})}return n},parsePersonData:function(e,t){return t?{id:e.id,name:e.name,employee:e.employee,distinguishedName:e.distinguishedName}:{id:e.id,genderType:e.genderType,name:e.name,employee:e.employee,unique:e.unique,distinguishedName:e.distinguishedName,dn:e.distinguishedName,mail:e.mail,weixin:e.weixin,qq:e.qq,mobile:e.mobile,officePhone:e.officePhone}},parseUnitData:function(e,t){return t?{id:e.id,name:e.name,distinguishedName:e.distinguishedName,levelName:e.levelName}:{id:e.id,name:e.name,unique:e.unique,distinguishedName:e.distinguishedName,dn:e.distinguishedName,typeList:e.typeList,shortName:e.shortName,level:e.level,levelName:e.levelName}},parseGroupData:function(e,t){return t?{id:e.id,name:e.name,distinguishedName:e.distinguishedName}:{id:e.id,name:e.name,unique:e.unique,distinguishedName:e.distinguishedName,dn:e.distinguishedName}},parseRoleData:function(e,t){return t?{id:e.id,name:e.name,distinguishedName:e.distinguishedName}:{id:e.id,name:e.name,unique:e.unique,distinguishedName:e.distinguishedName,dn:e.distinguishedName}},parseAttributeData:function(e,t){return t?{id:e.id,name:e.name,distinguishedName:e.distinguishedName,person:e.person,attributeList:Array.clone(e.attributeList)}:{id:e.id,description:e.description,name:e.name,unique:e.unique,distinguishedName:e.distinguishedName,dn:e.distinguishedName,person:e.person,attributeList:Array.clone(e.attributeList)}}};