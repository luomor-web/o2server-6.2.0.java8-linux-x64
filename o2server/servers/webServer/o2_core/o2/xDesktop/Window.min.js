MWF.require("MWF.widget.Dialog",null,!1),MWF.xDesktop.Window=new Class({Extends:MWF.widget.Dialog,Implements:[Options,Events],options:{style:"default",title:"window",width:"800",height:"600",top:"10",left:"10",fromTop:"0",fromLeft:"0",mark:!1,html:"",text:"",url:"",content:null,isMax:!0,isClose:!0,isResize:!0,isMove:!0,buttons:null,buttonList:null},initialize:function(t,s){var e=layout.desktop.desktopNode.getPosition();this.options.top=parseFloat(this.options.top)+e.y,this.options.fromTop=parseFloat(this.options.fromTop)+e.y,this.app=t,this.parent(s),this.isHide=!1,this.isMax=!1},changeStyle:function(){var t=this.getNodeStyleStatus();this.cssPath=MWF.defaultPath+"/widget/$Dialog/"+this.options.style+"/css.wcss",this._loadCss(),this.getContentUrl(),new Request.HTML({url:this.contentUrl,method:"GET",async:!1,onSuccess:function(s){var e=s[0],i=e.getElement(".MWF_dialod_title"),o=e.getElement(".MWF_dialod_title_center"),n=e.getElement(".MWF_dialod_title_refresh"),h=e.getElement(".MWF_dialod_title_text"),c=e.getElement(".MWF_dialod_title_action"),r=e.getElement(".MWF_dialod_under"),a=e.getElement(".MWF_dialod_content"),p=e.getElement(".MWF_dialod_bottom"),l=e.getElement(".MWF_dialod_bottom_resize"),d=e.getElement(".MWF_dialod_button");this.title&&i&&(this.title.clearStyles(),this.title.set("style",i.get("style"))),this.titleCenter&&o&&(this.titleCenter.clearStyles(),this.titleCenter.set("style",o.get("style"))),this.titleRefresh&&n&&(this.titleRefresh.clearStyles(),this.titleRefresh.set("style",n.get("style"))),this.titleText&&h&&(this.titleText.clearStyles(),this.titleText.set("style",h.get("style"))),this.titleAction&&c&&(this.titleAction.clearStyles(),this.titleAction.set("style",c.get("style"))),this.under&&r&&(this.under.clearStyles(),this.under.set("style",r.get("style"))),this.content&&a&&(this.content.clearStyles(),this.content.set("style",a.get("style"))),this.bottom&&p&&(this.bottom.clearStyles(),this.bottom.set("style",p.get("style"))),this.resizeNode&&l&&(this.resizeNode.clearStyles(),this.resizeNode.set("style",l.get("style"))),this.button&&d&&(this.button.clearStyles(),this.button.set("style",d.get("style"))),this.setNodeStyleStatus(t),this.node.setStyles(this.css.to),this.spacer.setStyles(this.css.spacerTo),this.closeActionNode&&this.closeActionNode.setStyles(this.css.closeActionNode),this.maxActionNode&&this.maxActionNode.setStyles(this.css.maxActionNode),this.minActionNode&&this.minActionNode.setStyles(this.css.minActionNode),this.restoreActionNode&&this.restoreActionNode.setStyles(this.css.restoreActionNode),this.app==this.app.desktop.currentApp?(this.node.setStyles(this.css.current),this.spacer.setStyles(this.css.spacerCurrent)):(this.node.setStyles(this.css.uncurrent),this.spacer.setStyles(this.css.spacerUncurrent)),this.setContentSize()}.bind(this)}).send()},setNodeStyleStatus:function(t){this.css.to.height=t.nodeTo.height,this.css.to.width=t.nodeTo.width,this.css.to.top=t.nodeTo.top,this.css.to.left=t.nodeTo.left,this.css.to["z-index"]=t.nodeTo["z-index"],this.css.from.top=t.nodeFrom.top,this.css.from.left=t.nodeFrom.left,this.css.from["z-index"]=t.nodeFrom["z-index"],this.css.spacerTo.height=t.spacerTo.height,this.css.spacerTo.width=t.spacerTo.width,this.css.spacerTo.top=t.spacerTo.top,this.css.spacerTo.left=t.spacerTo.left,this.css.spacerTo["z-index"]=t.spacerTo["z-index"],this.css.spacerFrom.top=t.spacerFrom.top,this.css.spacerFrom.left=t.spacerFrom.left,this.css.spacerFrom["z-index"]=t.spacerFrom["z-index"]},getNodeStyleStatus:function(){return{nodeTo:{height:this.css.to.height,width:this.css.to.width,top:this.css.to.top,left:this.css.to.left,"z-index":this.css.to["z-index"]},nodeFrom:{top:this.css.from.top,left:this.css.from.left,"z-index":this.css.from["z-index"]},spacerTo:{height:this.css.spacerTo.height,width:this.css.spacerTo.width,top:this.css.spacerTo.top,left:this.css.spacerTo.left,"z-index":this.css.spacerTo["z-index"]},spacerFrom:{top:this.css.spacerFrom.top,left:this.css.spacerFrom.left,"z-index":this.css.spacerFrom["z-index"]}}},reStyle:function(t){t&&this.setOptions(t);var s=null;MWF.xDesktop.zIndexPool&&(s=MWF.xDesktop.zIndexPool.applyZindex()),this.css.to.height=this.options.height+"px",this.css.to.width=this.options.width+"px",this.css.to.top=this.options.top+"px",this.css.to.left=this.options.left+"px",this.css.from.top=this.options.fromTop+"px",this.css.from.left=this.options.fromLeft+"px",s&&(this.css.from["z-index"]=s+1,this.css.to["z-index"]=s+1),this.node&&this.node.set("styles",this.css.from),this.css.spacerTo.height=this.options.height+"px",this.css.spacerTo.width=this.options.width+"px",this.css.spacerTo.top=this.options.top+"px",this.css.spacerTo.left=this.options.left+"px",this.css.spacerFrom.top=this.options.fromTop+"px",this.css.spacerFrom.left=this.options.fromLeft+"px",s&&(this.css.spacerFrom["z-index"]=s,this.css.spacerTo["z-index"]=s),this.spacer&&this.spacer.set("styles",this.css.spacerFrom)},setCurrent:function(){if(MWF.xDesktop.zIndexPool&&this.node.getStyle("z-index").toFloat()+1<MWF.xDesktop.zIndexPool.zIndex){var t=MWF.xDesktop.zIndexPool.applyZindex();this.css.spacerTo["z-index"]=t,this.css.spacerFrom["z-index"]=t,this.spacer&&this.spacer.setStyle("z-index",t),this.css.to["z-index"]=t+1,this.css.from["z-index"]=t+1,this.node.setStyle("z-index",t+1)}this.node.setStyles(this.css.current),this.spacer&&this.spacer.setStyles(this.css.spacerCurrent)},setUncurrent:function(){this.node.setStyles(this.css.uncurrent),this.spacer&&this.spacer.setStyles(this.css.spacerUncurrent)},setTitleEvent:function(){this.node.addEvent("mousedown",function(){this.app.setCurrent()}.bind(this)),this.containerDrag=new Drag(this.title,{handle:this.title,onStart:function(t,s){this.containerDrag.stop();var e=this.node.clone(!1).inject($(document.body)),i=this.node.getSize();e.setStyles({opacity:.7,border:"2px dashed #999","z-index":this.node.getStyle("z-index"),width:i.x,height:i.y,"background-color":"#CCC",position:"absolute"}),e.position({relativeTo:this.node,position:"upperLeft",edge:"upperLeft"});var o=new Drag.Move(e,{onStart:function(){this.node.fade("out"),this.spacer.fade("out")}.bind(this),onDrop:function(t,s,e){this.node.fade("in"),this.spacer.fade(this.css.spacerTo.opacity),this.node.position({relativeTo:t,position:"upperLeft",edge:"upperLeft"});var i=this.node.getPosition();this.spacer.setStyles({top:i.y,left:i.x}),this.css.spacerTo.left=i.x,this.css.spacerTo.top=i.y,this.css.to.left=i.x,this.css.to.top=i.y,t.destroy(),this.fireEvent("moveDrop",[e])}.bind(this),onCancel:function(t){t.destroy(),o=null}});o.start(s)}.bind(this)}),this.options.isResize&&this.node.makeResizable({handle:this.resizeNode||this.bottom,limit:{x:[200,null],y:[200,null]},onDrag:function(){var t=this.node.getComputedSize();this.spacer&&(this.spacer.setStyles({width:t.width,height:t.height}),this.css.spacerTo.width=t.width,this.css.spacerTo.height=t.height),this.css.to.width=t.width,this.css.to.height=t.height,this.setContentSize(t.height,t.width),this.fireEvent("resize")}.bind(this),onComplete:function(){this.fireEvent("resizeCompleted")}.bind(this)})},getContentUrl:function(){layout.desktop.windowCss?this.contentUrl=MWF.defaultPath+"/xDesktop/$Window/desktop_default/dialog.html":this.contentUrl=MWF.defaultPath+"/xDesktop/$Window/"+this.options.style+"/dialog.html"},_loadCss:function(){this.app.desktop.windowCss?this.css=this.app.desktop.windowCss:(this.path=MWF.defaultPath+"/xDesktop/$Window/",this.cssPath=MWF.defaultPath+"/xDesktop/$Window/"+this.options.style+"/css.wcss",new Request.JSON({url:this.cssPath,secure:!1,async:!1,method:"get",noCache:!0,onSuccess:function(t,s){this.css=t}.bind(this),onError:function(t,s){alert(t)}}).send())},getSpacer:function(){this.spacer||(this.spacer=new Element("div",{styles:this.css.spacerFrom}).inject(this.options.container||$(document.body)))},showNoAnimation:function(t,s){t?this.showMaxIm():s?(this.showIm(),this.hideIm()):this.showIm()},showMaxIm:function(t){this.querySetMaxStyle(),this.getSpacer(),this.spacer.setStyle("display","block"),this.node.setStyle("display","block");var s,e=this.getMaxSize(),i=Object.clone(this.css.spacerTo),o=Object.clone(this.css.to);i.top=e.position.y,i.left=e.position.x,i.width=e.spacer.x,i.height=e.spacer.y,o.top=e.position.y,o.left=e.position.x,o.width=e.node.x,o.height=e.node.y,s=e.contentSize,this.fireEvent("queryShow")&&(this.fireEvent("queryMax"),this.node.setStyles(o),this.spacer.setStyles(i),this.content.setStyles(s),this.titleText&&this.getTitle(),this.isMax=!0,this.isHide=!1,this.containerDrag&&this.containerDrag.detach(),this.postSetMaxStyle(),t&&t(),this.fireEvent("postShow"),this.fireEvent("postMax"),this.maxActionNode&&this.maxActionNode.setStyles(this.css.restoreActionNode))},showIm:function(){this.options.mark&&this._markShow(),this.getSpacer(),this.spacer.setStyle("display","block"),this.node.setStyle("display","block");var t=this.getContentSize(this.css.to.height.toFloat(),this.css.to.width.toFloat());this.fireEvent("queryShow")&&(this.spacer.setStyles(this.css.spacerTo),this.app.desktop.currentApp!=this.app&&this.spacer.setStyles(this.css.spacerUncurrent),this.content.setStyles(t),this.node.setStyles(this.css.to),this.titleText&&this.getTitle(),this.isHide=!1,this.containerDrag&&this.containerDrag.attach(),this.fireEvent("postShow"))},show:function(){this.options.mark&&this._markShow(),this.morph||(this.morph=new Fx.Morph(this.node,{duration:100,link:"chain"})),this.morph.setOptions({duration:50}),this.getSpacer(),this.spacerMorph||(this.spacerMorph=new Fx.Morph(this.spacer,{duration:100,link:"chain"})),this.spacerMorph.setOptions({duration:50}),this.contentMorph||(this.contentMorph=new Fx.Morph(this.content,{duration:50,link:"chain"})),this.contentMorph.setOptions({duration:50}),this.spacer.setStyle("display","block"),this.node.setStyle("display","block");var t=this.getContentSize(this.css.to.height.toFloat(),this.css.to.width.toFloat());if(this.fireEvent("queryShow")){var s=!1,e=!1,i=!1;this.spacerMorph.start(this.css.spacerTo).chain(function(){this.app.desktop.currentApp!=this.app&&this.spacer.setStyles(this.css.spacerUncurrent),e=!0,o()}.bind(this)),this.contentMorph.start(t).chain(function(){i=!0,o()}.bind(this)),this.morph.start(this.css.to).chain(function(){s=!0,o()}.bind(this));var o=function(){s&&e&&i&&(this.titleText&&this.getTitle(),this.isHide=!1,this.containerDrag&&this.containerDrag.attach(),this.fireEvent("postShow"))}.bind(this)}},restore:function(t){this.querySetRestoreStyle(),this.options.mark&&this._markShow(),this.morph||(this.morph=new Fx.Morph(this.node,{duration:100,link:"chain"})),this.morph.setOptions({duration:50}),this.getSpacer(),this.spacerMorph||(this.spacerMorph=new Fx.Morph(this.spacer,{duration:100,link:"chain"})),this.spacerMorph.setOptions({duration:50}),this.contentMorph||(this.contentMorph=new Fx.Morph(this.content,{duration:50,link:"chain"})),this.contentMorph.setOptions({duration:50}),this.spacer.setStyle("display","block"),this.node.setStyle("display","block");var s=this.getContentSize(this.css.to.height.toFloat(),this.css.to.width.toFloat());if(this.fireEvent("queryRestore")){var e=!1,i=!1,o=!1;this.spacerMorph.start(this.css.spacerTo).chain(function(){this.app.desktop.currentApp!=this.app&&this.spacer.setStyles(this.css.spacerUncurrent),i=!0,n()}.bind(this)),this.contentMorph.start(s).chain(function(){o=!0,n()}.bind(this)),this.morph.start(this.css.to).chain(function(){this.app.desktop.currentApp!=this.app&&this.node.setStyles(this.css.uncurrent),e=!0,n()}.bind(this));var n=function(){e&&i&&o&&(this.titleText&&this.getTitle(),this.isHide=!1,this.isMax=!1,this.containerDrag&&this.containerDrag.attach(),this.postSetRestoreStyle(),t&&t(),this.fireEvent("resize"),this.fireEvent("postRestore"))}.bind(this);this.maxActionNode&&this.maxActionNode.setStyles(this.css.maxActionNode)}},querySetRestoreStyle:function(){this.css.windowTitleRestore&&this.title.setStyles(this.css.windowTitleRestore),this.css.titleRefresh&&this.titleRefresh.setStyles(this.css.titleRefresh),this.css.windowTitleTextRestore&&this.titleText.setStyles(this.css.windowTitleTextRestore),this.css.windowTitleActionRestore&&this.titleAction.setStyles(this.css.windowTitleActionRestore),this.closeActionNode&&this.css.closeActionNode&&this.closeActionNode.setStyles(this.css.closeActionNode),this.maxActionNode&&this.css.maxActionNode&&this.maxActionNode.setStyles(this.css.maxActionNode),this.minActionNode&&this.css.minActionNode&&this.minActionNode.setStyles(this.css.minActionNode)},postSetRestoreStyle:function(){this.css.windowNodeRestore&&this.node.setStyles(this.css.windowNodeRestore)},restoreIm:function(t){this.querySetRestoreStyle(),this.getSpacer(),this.spacer.setStyle("display","block"),this.node.setStyle("display","block");var s=this.getContentSize(this.css.to.height.toFloat(),this.css.to.width.toFloat());this.fireEvent("queryRestore")&&(this.node.setStyles(this.css.to),this.spacer.setStyles(this.css.spacerTo),this.content.setStyles(s),this.titleText&&this.getTitle(),this.isHide=!1,this.isMax=!1,this.containerDrag&&this.containerDrag.attach(),this.postSetRestoreStyle(),t&&t(),this.fireEvent("resize"),this.fireEvent("postRestore"),this.maxActionNode&&this.maxActionNode.setStyles(this.css.maxActionNode))},hideIm:function(t,s,e){this.getSpacer(),t&&(this.css.from.left=t,this.css.spacerFrom.left=t),s&&(this.css.from.top=s,this.css.spacerFrom.top=s),this.fireEvent("queryHide")&&(this.titleText&&this.titleText.set("text",""),this.button&&this.button.set("html",""),this.spacer.setStyles(this.css.spacerFrom),this.node.setStyles(this.css.from),this._markHide(),this.isHide=!0,this.node.setStyle("display","none"),this.spacer.setStyle("display","none"),e&&e(),this.fireEvent("postHide"))},hide:function(t,s,e){if(this.morph||(this.morph=new Fx.Morph(this.node,{duration:100,link:"chain"})),this.morph.setOptions({duration:100}),this.getSpacer(),this.spacerMorph||(this.spacerMorph=new Fx.Morph(this.spacer,{duration:100,link:"chain"})),this.spacerMorph.setOptions({duration:100}),t&&(this.css.from.left=t,this.css.spacerFrom.left=t),s&&(this.css.from.top=s,this.css.spacerFrom.top=s),this.fireEvent("queryHide")){this.titleText&&this.titleText.set("text",""),this.button&&this.button.set("html","");var i=!1,o=!1;this.spacerMorph.start(this.css.spacerFrom).chain(function(){o=!0,n()}.bind(this)),this.morph.start(this.css.from).chain(function(){i=!0,n()}.bind(this));var n=function(){i&&o&&(this._markHide(),this.isHide=!0,this.node.setStyle("display","none"),this.spacer.setStyle("display","none"),e&&e(),this.fireEvent("postHide"))}.bind(this)}},_hideIm:function(){this.node.setStyle("display","none"),this.spacer.setStyle("display","none")},_showIm:function(){this.node.setStyle("display","block"),this.spacer.setStyle("display","block")},_fadeOut:function(){this.node.fade("out"),this.spacer.fade("out")},_fadeIn:function(){this.node.fade("in"),this.spacer.fade("in")},close:function(t){this.morph||(this.morph=new Fx.Morph(this.node,{duration:100,link:"chain"})),this.morph.setOptions({duration:100}),this.getSpacer(),this.spacerMorph||(this.spacerMorph=new Fx.Morph(this.spacer,{duration:100,link:"chain"})),this.spacerMorph.setOptions({duration:100}),this.fireEvent("queryClose")&&(this.spacer.destroy(),this.spacer=null,this._markHide(),this.node.destroy(),this.node=null,t&&t(),this.fireEvent("postClose"),o2.release(this))},getAction:function(){this.titleAction.setStyles(this.css.titleAction);var t=this;this.closeActionNode=new Element("div",{styles:this.css.closeActionNode,events:{mouseover:function(s){this.setStyles(t.css.titleActionOver),s.stopPropagation()},mouseout:function(s){this.setStyles(t.css.titleActionOut),s.stopPropagation()},mousedown:function(s){this.setStyles(t.css.titleActionDown),s.stopPropagation()},mouseup:function(s){this.setStyles(t.css.titleActionOver),s.stopPropagation()},click:function(t){this.app.close(),t.stopPropagation()}.bind(this)}}).inject(this.titleAction),0!=this.options.isMax&&(this.maxActionNode=new Element("div",{styles:this.css.maxActionNode,events:{mouseover:function(){this.setStyles(t.css.titleActionOver)},mouseout:function(){this.setStyles(t.css.titleActionOut)},mousedown:function(){this.setStyles(t.css.titleActionDown)},mouseup:function(){this.setStyles(t.css.titleActionOver)},click:function(){this.app.maxOrRestoreSize()}.bind(this)}}).inject(this.titleAction)),this.options.isResize&&this.title.addEvent("dblclick",this.app.maxOrRestoreSize.bind(this.app)),this.minActionNode=new Element("div",{styles:this.css.minActionNode,events:{mouseover:function(){this.setStyles(t.css.titleActionOver)},mouseout:function(){this.setStyles(t.css.titleActionOut)},mousedown:function(){this.setStyles(t.css.titleActionDown)},mouseup:function(){this.setStyles(t.css.titleActionOver)},click:function(){this.app.minSize()}.bind(this)}}).inject(this.titleAction),0!=this.options.isRefresh&&this.titleRefresh.addEvents({mouseover:function(){this.setStyles(t.css.titleActionOver)},mouseout:function(){this.setStyles(t.css.titleActionOut)},mousedown:function(){this.setStyles(t.css.titleActionDown)},mouseup:function(){this.setStyles(t.css.titleActionOver)},click:function(t){this.app.refresh()}.bind(this),dblclick:function(t){t.stopPropagation()}.bind(this)})},maxOrRestoreSize:function(t){this.isMax?this.restoreSize(t):this.maxSize(t)},restoreSize:function(t){this.restore(t)},maxSize:function(t){this.querySetMaxStyle(),this.morph||(this.morph=new Fx.Morph(this.node,{duration:50,link:"chain"})),this.morph.setOptions({duration:50}),this.getSpacer(),this.spacerMorph||(this.spacerMorph=new Fx.Morph(this.spacer,{duration:50,link:"chain"})),this.spacerMorph.setOptions({duration:50}),this.contentMorph||(this.contentMorph=new Fx.Morph(this.content,{duration:50,link:"chain"})),this.contentMorph.setOptions({duration:50}),this.spacer.setStyle("display","block"),this.node.setStyle("display","block");var s,e=this.getMaxSize(),i=Object.clone(this.css.spacerTo),o=Object.clone(this.css.to);if(i.top=e.position.y,i.left=e.position.x,i.width=e.spacer.x,i.height=e.spacer.y,o.top=e.position.y,o.left=e.position.x,o.width=e.node.x,o.height=e.node.y,s=e.contentSize,this.fireEvent("queryMax")){var n=!1,h=!1,c=!1;this.spacerMorph.start(i).chain(function(){this.app.desktop.currentApp!=this.app&&this.spacer.setStyles(this.css.spacerUncurrent),h=!0,r()}.bind(this)),this.contentMorph.start(s).chain(function(){c=!0,r()}.bind(this)),this.morph.start(o).chain(function(){this.app.desktop.currentApp!=this.app&&this.node.setStyles(this.css.uncurrent),n=!0,r()}.bind(this));var r=function(){n&&h&&c&&(this.titleText&&this.getTitle(),this.isMax=!0,this.isHide=!1,this.containerDrag&&this.containerDrag.detach(),this.postSetMaxStyle(),t&&t(),this.fireEvent("resize"),this.fireEvent("postMax"))}.bind(this);this.maxActionNode&&this.maxActionNode.setStyles(this.css.restoreActionNode)}},querySetMaxStyle:function(){this.css.windowTitleMax&&this.title.setStyles(this.css.windowTitleMax),this.css.windowTitleRefreshMax&&this.titleRefresh.setStyles(this.css.windowTitleRefreshMax),this.css.windowTitleTextMax&&this.titleText.setStyles(this.css.windowTitleTextMax),this.css.windowTitleActionMax&&this.titleAction.setStyles(this.css.windowTitleActionMax),this.closeActionNode&&this.css.windowActionNodeMax&&this.closeActionNode.setStyles(this.css.windowActionNodeMax),this.maxActionNode&&this.css.windowActionNodeMax&&this.maxActionNode.setStyles(this.css.windowActionNodeMax),this.minActionNode&&this.css.windowActionNodeMax&&this.minActionNode.setStyles(this.css.windowActionNodeMax)},postSetMaxStyle:function(){this.css.windowNodeMax&&this.node.setStyles(this.css.windowNodeMax)},maxSizeIm:function(t){this.querySetMaxStyle(),this.getSpacer(),this.spacer.setStyle("display","block"),this.node.setStyle("display","block");var s,e=this.getMaxSize(),i=Object.clone(this.css.spacerTo),o=Object.clone(this.css.to);i.top=e.position.y,i.left=e.position.x,i.width=e.spacer.x,i.height=e.spacer.y,o.top=e.position.y,o.left=e.position.x,o.width=e.node.x,o.height=e.node.y,s=e.contentSize,this.fireEvent("queryMax")&&(this.node.setStyles(o),this.spacer.setStyles(i),this.content.setStyles(s),this.titleText&&this.getTitle(),this.isMax=!0,this.isHide=!1,this.containerDrag&&this.containerDrag.detach(),this.postSetMaxStyle(),t&&t(),this.fireEvent("resize"),this.fireEvent("postMax"),this.maxActionNode&&this.maxActionNode.setStyles(this.css.restoreActionNode))},getMaxSize:function(){var t=layout.desktop.desktopNode.getSize(),s=layout.desktop.desktopNode.getPosition(),e=this.spacer.getStyle("padding-top").toFloat(),i=this.spacer.getStyle("padding-bottom").toFloat(),o=this.spacer.getStyle("padding-left").toFloat(),n=this.spacer.getStyle("padding-right").toFloat();spacerHeight=t.y-e-i,spacerWidth=t.x-o-n,e=this.node.getStyle("padding-top").toFloat(),i=this.node.getStyle("padding-bottom").toFloat(),o=this.node.getStyle("padding-left").toFloat(),n=this.node.getStyle("padding-right").toFloat(),nodeHeight=t.y-e-i,nodeWidth=t.x-o-n;var h=this.getContentSize(nodeHeight,nodeWidth);return{node:{x:nodeWidth,y:nodeHeight},spacer:{x:spacerWidth,y:spacerHeight},position:{x:s.x,y:s.y},contentSize:h}}}),MWF.xDesktop.WindowTransparent=new Class({Implements:[Options,Events],options:{style:"default"},initialize:function(t,s){this.setOptions(s);layout.desktop.desktopNode.getPosition();this.app=t,this.fireEvent("queryLoad"),this.isMax=!1,this.isHide=!1,this.css={to:{width:"0",height:"0",left:"0",top:"0"}};var e=null;MWF.xDesktop.zIndexPool&&(e=MWF.xDesktop.zIndexPool.applyZindex()),this.node=new Element("div",{styles:{width:"0px",height:"0px",top:"0px",left:"0px",position:"absolute","z-index":e||100}}).inject(this.options.container||$(document.body)),this.content=new Element("div",{styles:{width:"100%",height:"100%"}}).inject(this.node),this.fireEvent("postLoad")},show:function(){this.fireEvent("queryShow"),this.node.setStyle("display","block"),this.isHide=!1,this.fireEvent("postShow")},hide:function(){this.fireEvent("queryHide"),this.node.setStyle("display","none"),this.isHide=!0,this.fireEvent("postHide")},restore:function(t){this.fireEvent("queryRestore"),this.node.setStyle("display","block"),this.isHide=!1,this.fireEvent("postRestore"),t&&t()},restoreSize:function(t){this.restore(t)},close:function(t){this.fireEvent("queryClose"),this.node.destroy(),this.node=null,this.content=null,t&&t(),this.fireEvent("postClose")},maxOrRestoreSize:function(t){this.isMax?this.restoreSize(t):this.maxSize(t)},maxSize:function(t){this.fireEvent("queryMax"),this.node.setStyle("display","block"),this.isHide=!1,this.fireEvent("resize"),this.fireEvent("postMax"),t&&t()},restoreIm:function(){this.restore()},maxSizeIm:function(){this.maxSize()},setCurrent:function(){if(MWF.xDesktop.zIndexPool&&this.node.getStyle("z-index").toFloat()+1<MWF.xDesktop.zIndexPool.zIndex){var t=MWF.xDesktop.zIndexPool.applyZindex();this.node.setStyle("z-index",t)}},_fadeOut:function(){this.node.fade("out"),this.spacer&&this.spacer.fade("out")},_fadeIn:function(){this.node.fade("in"),this.spacer&&this.spacer.fade("in")},setUncurrent:function(){},reStyle:function(){},changeStyle:function(){}});