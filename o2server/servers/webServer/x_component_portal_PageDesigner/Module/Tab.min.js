MWF.xApplication.process.FormDesigner.Module=MWF.xApplication.process.FormDesigner.Module||{},MWF.xDesktop.requireApp("portal.PageDesigner","Module.Tab$Page",null,!1),MWF.xDesktop.requireApp("portal.PageDesigner","Module.Tab$Content",null,!1),MWF.require("MWF.widget.Tab",null,!1),MWF.xApplication.portal.PageDesigner.Module.Tab=MWF.PCTab=new Class({Extends:MWF.FCTab,Implements:[Options,Events],options:{style:"default",propertyPath:"../x_component_portal_PageDesigner/Module/Tab/tab.html"},initialize:function(t,e){this.setOptions(e),this.path="../x_component_portal_PageDesigner/Module/Tab/",this.cssPath="../x_component_portal_PageDesigner/Module/Tab/"+this.options.style+"/css.wcss",this._loadCss(),this.moduleType="component",this.moduleName="tab",this.form=t,this.container=null,this.containerNode=null,this.containers=[],this.elements=[]},_getElements:function(){this.tabWidget||this._createTabWidget(),this.form.getTemplateData("Tab$Page",function(t){this.tabWidget.pages.each(function(e){var a=null,n=this.form.getDomjson(e.tabNode);if(n)(a=new MWF.PCTab$Page(this,e)).page=e,a.load(n,e.tabNode,this);else{var i=Object.clone(t);i.name=e.tabNode.get("text"),(a=new MWF.PCTab$Page(this,e)).page=e,a.load(i,e.tabNode,this)}a&&this.elements.push(a)}.bind(this))}.bind(this)),this.tabWidget.showPage||this.tabWidget.pages[0].showTabIm()},_getContainers:function(){this.tabWidget||this._createTabWidget(),this.form.getTemplateData("Tab$Content",function(t){this.tabWidget.pages.each(function(e){var a=null,n=this.form.getDomjson(e.contentNode);if(n)(a=new MWF.PCTab$Content(this,e)).page=e,a.load(n,e.contentNode,this);else{var i=Object.clone(t);(a=new MWF.PCTab$Content(this,e)).page=e,a.load(i,e.contentNode,this)}a&&this.containers.push(a)}.bind(this))}.bind(this))},addPage:function(){tabNode=new Element("div");var t=this.tabWidget.addTab(tabNode,"page",!1);return this.form.getTemplateData("Tab$Page",function(e){var a=Object.clone(e);a.name=t.tabNode.get("text");var n=new MWF.PCTab$Page(this,t);n.load(a,t.tabNode,this),this.elements.push(n)}.bind(this)),this.form.getTemplateData("Tab$Content",function(e){var a=Object.clone(e),n=new MWF.PCTab$Content(this,t);n.load(a,t.contentNode,this),this.containers.push(n)}.bind(this)),t.showTabIm(),t}});