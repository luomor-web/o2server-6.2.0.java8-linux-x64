MWF.xApplication.portal.PageDesigner.Module.Image=MWF.PCImage=new Class({Extends:MWF.FCImage,Implements:[Options,Events],options:{style:"default",propertyPath:"../x_component_portal_PageDesigner/Module/Image/image.html"},initialize:function(e,s){this.setOptions(s),this.path="../x_component_portal_PageDesigner/Module/Image/",this.cssPath="../x_component_portal_PageDesigner/Module/Image/"+this.options.style+"/css.wcss",this._loadCss(),this.moduleType="element",this.moduleName="image",this.form=e,this.container=null,this.containerNode=null},_setEditStyle_custom:function(e){if("src"==e)if(this.json.src){var s=this.json.src.imageSrc;this.node.src=s,this.setPropertiesOrStyles("styles")}else this.node.set("src",this.path+this.options.style+"/icon/image1.png");if("srcfile"==e){var t=this.json.srcfile;if("none"===t&&(this.json.srcfile="",t=""),t)if("object"===typeOf(t)){var i=MWF.xDesktop.getPortalFileUr(t.id,t.portal);i=o2.filterUrl(i);try{this.node.set("src",i)}catch(e){}}else{var o=MWF.Actions.getHost("x_portal_assemble_surface"),r=MWF.Actions.get("x_portal_assemble_surface").action.actions.readFile.uri;t=o+"/x_portal_assemble_surface"+(r=(r=r.replace("{flag}",t)).replace("{applicationFlag}",this.form.json.application)),t=o2.filterUrl(t);try{this.node.set("src",t)}catch(e){}}else this.json.properties.src?this._setEditStyle_custom("properties"):this.json.src?this._setEditStyle_custom("src"):this.node.set("src",this.path+this.options.style+"/icon/image1.png")}"properties"==e&&this._setNodeProperty()}});