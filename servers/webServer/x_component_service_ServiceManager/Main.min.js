MWF.xDesktop.requireApp("service.ServiceManager","package",null,!1),MWF.xDesktop.requireApp("Selector","package",null,!1),MWF.require("MWF.widget.Identity",null,!1),MWF.xApplication.process=MWF.xApplication.process||{},MWF.xApplication.process.ProcessManager=MWF.xApplication.process.ProcessManager||{},MWF.xDesktop.requireApp("process.ProcessManager","",null,!1),MWF.xApplication.service=MWF.xApplication.service||{},MWF.xApplication.service.ServiceManager.Main=new Class({Extends:MWF.xApplication.process.ProcessManager.Main,Implements:[Options,Events],options:{style:"default",name:"service.ServiceManager",icon:"icon.png",width:"1100",height:"700",title:MWF.xApplication.service.ServiceManager.LP.title},onQueryLoad:function(){this.lp=MWF.xApplication.service.ServiceManager.LP,this.currentContentNode=null,this.restActions=MWF.Actions.get("x_program_center")},loadApplication:function(t){this.createNode(),this.loadApplicationContent(),window.clipboardData?this.addKeyboardEvents():(this.keyCopyItemsFun=this.keyCopyItems.bind(this),this.keyPasteItemsFun=this.keyPasteItems.bind(this),document.addEventListener("copy",this.keyCopyItemsFun),document.addEventListener("paste",this.keyPasteItemsFun),this.addEvent("queryClose",function(){this.keyCopyItemsFun&&document.removeEventListener("copy",this.keyCopyItemsFun),this.keyPasteItemsFun&&document.removeEventListener("paste",this.keyPasteItemsFun)}.bind(this))),t&&t()},loadStartMenu:function(t){this.startMenuNode=new Element("div",{styles:this.css.startMenuNode}).inject(this.node),this.menu=new MWF.xApplication.service.ServiceManager.Menu(this,this.startMenuNode,{onPostLoad:function(){this.status&&null!=this.status.navi?this.menu.doAction(this.menu.startNavis[this.status.navi]):this.menu.doAction(this.menu.startNavis[0])}.bind(this)}),this.addEvent("resize",function(){this.menu&&this.menu.onResize()}.bind(this))},clearContent:function(){this.agentConfiguratorContent&&(this.agentConfigurator&&delete this.agentConfigurator,this.agentConfiguratorContent.destroy(),this.agentConfiguratorContent=null),this.invokeConfiguratorContent&&(this.invokeConfigurator&&delete this.invokeConfigurator,this.invokeConfiguratorContent.destroy(),this.invokeConfiguratorContent=null)},selectConfig:function(){this.clearContent(),this.selectConfiguratorContent=new Element("div",{styles:this.css.rightContentNode}).inject(this.node),this.loadSelectConfig()},loadSelectConfig:function(){MWF.xDesktop.requireApp("service.ServiceManager","SelectExplorer",function(){this.selectConfigurator=new MWF.xApplication.service.ServiceManager.SelectExplorer(this.selectConfiguratorContent,this.restActions),this.selectConfigurator.app=this,this.selectConfigurator.load()}.bind(this))},agentConfig:function(){this.clearContent(),this.agentConfiguratorContent=new Element("div",{styles:this.css.rightContentNode}).inject(this.node),this.loadAgentConfig()},loadAgentConfig:function(){MWF.xDesktop.requireApp("service.ServiceManager","AgentExplorer",function(){this.agentConfigurator=new MWF.xApplication.service.ServiceManager.AgentExplorer(this.agentConfiguratorContent,this.restActions),this.agentConfigurator.app=this,this.agentConfigurator.load()}.bind(this))},invokeConfig:function(){this.clearContent(),this.invokeConfiguratorContent=new Element("div",{styles:this.css.rightContentNode}).inject(this.node),this.loadInvokeConfig()},loadInvokeConfig:function(){MWF.xDesktop.requireApp("service.ServiceManager","InvokeExplorer",function(){this.invokeConfigurator=new MWF.xApplication.service.ServiceManager.InvokeExplorer(this.invokeConfiguratorContent,this.restActions),this.invokeConfigurator.app=this,this.invokeConfigurator.load()}.bind(this))},recordStatus:function(){var t=null;return this.menu.currentNavi&&(t=this.menu.startNavis.indexOf(this.menu.currentNavi)),{navi:t}},addKeyboardEvents:function(){this.addEvent("copy",function(){this.keyCopyItems()}.bind(this)),this.addEvent("paste",function(){this.keyPasteItems()}.bind(this))},keyCopyItems:function(t){layout.desktop.currentApp&&layout.desktop.currentApp.appId===this.appId&&(this.agentConfigurator&&(this.agentConfigurator.keyCopy(t),t&&t.preventDefault()),this.invokeConfigurator&&(this.invokeConfigurator.keyCopy(t),t&&t.preventDefault()))},keyPasteItems:function(t){layout.desktop.currentApp&&layout.desktop.currentApp.appId===this.appId&&(this.agentConfigurator&&this.agentConfigurator.keyPaste(t),this.invokeConfigurator&&this.invokeConfigurator.keyPaste(t))}}),MWF.xApplication.service.ServiceManager.Menu=new Class({Extends:MWF.xApplication.process.ProcessManager.Menu,Implements:[Options,Events]});