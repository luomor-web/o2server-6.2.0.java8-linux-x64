MWF.xDesktop.requireApp("process.Xform","ImageClipper",null,!1),MWF.xApplication.cms.Xform.ImageClipper=MWF.CMSImageClipper=new Class({Extends:MWF.APPImageClipper,selectImage:function(e,i){var t=this.json.clipperType||"unrestricted",a=1,r="";if("unrestricted"==t)a=0;else if("size"==t){var o=this.json.imageWidth.toInt(),n=this.json.imageHeight.toInt();a=o/n,isNaN(o)||isNaN(n)||(r=MWF.LP.widget.pictureSize.replace(/{width}/g,o).replace(/{height}/g,n))}else"ratio"==t&&(a=this.json.imageRatio||1,r=MWF.LP.widget.pictureRatio.replace(/{ratio}/g,a));MWF.xDesktop.requireApp("process.Xform","widget.ImageClipper",function(){this.imageClipper=new MWF.xApplication.process.Xform.widget.ImageClipper(this.form.app,{style:"default",aspectRatio:a,description:r,imageUrl:e?MWF.xDesktop.getImageSrc(e):"",reference:this.form.businessData.document.id,referenceType:"cmsDocument",resultMaxSize:500,onChange:function(){i({src:this.imageClipper.imageSrc,id:this.imageClipper.imageId})}.bind(this)}),this.imageClipper.load()}.bind(this))},validationConfigItem:function(e,i){if("all"==i.status||"publish"==e){var t=this.getData(),a="value"==i.valueType?t:t.length;switch(i.operateor){case"isnull":if(!a)return this.notValidationMode(i.prompt),!1;break;case"notnull":if(a)return this.notValidationMode(i.prompt),!1;break;case"gt":if(a>i.value)return this.notValidationMode(i.prompt),!1;break;case"lt":if(a<i.value)return this.notValidationMode(i.prompt),!1;break;case"equal":if(a==i.value)return this.notValidationMode(i.prompt),!1;break;case"neq":if(a!=i.value)return this.notValidationMode(i.prompt),!1;break;case"contain":if(-1!=a.indexOf(i.value))return this.notValidationMode(i.prompt),!1;break;case"notcontain":if(-1==a.indexOf(i.value))return this.notValidationMode(i.prompt),!1}}return!0}});