MWF.xDesktop.requireApp("process.TaskCenter","List",null,!1),MWF.xApplication.process.TaskCenter.TaskList=new Class({Extends:MWF.xApplication.process.TaskCenter.List,_getFilterCount:function(t){this.app.action.listTaskFilterCount((function(e){t&&t(e)}))},createAppFilterNodes:function(){var t={name:this.app.lp.all,application:"",count:0};this.allAppFilterNode=this.createAppFilterNode(t,"appFilterNode_current"),this.currentFilterNode=this.allAppFilterNode,this.filterListNode=new Element("div",{styles:this.css.filterListNode}).inject(this.applicationFilterAreaNode)},createFilterItemNode:function(t,e){var i=this,s=new Element("div",{styles:this.css.filterListItemNode}).inject(this.filterListNode),l=new Element("div",{styles:this.css.filterListItemActionNode}).inject(s);new Element("div",{styles:this.css.filterListItemTextNode}).inject(s).set("text",this.app.lp[t]+": "+e.name),l.store("key",t),s.addEvents({mouseover:function(){this.setStyles(i.css.filterListItemNode_over),this.getLast().setStyles(i.css.filterListItemTextNode_over),this.getFirst().setStyles(i.css.filterListItemActionNode_over)},mouseout:function(){this.setStyles(i.css.filterListItemNode),this.getLast().setStyles(i.css.filterListItemTextNode),this.getFirst().setStyles(i.css.filterListItemActionNode)}}),l.addEvent("click",(function(){var t=this.retrieve("key");i.filterData[t]&&(i.filterData[t]=null),delete i.filterData[t],this.destroy(),i.refilter()}))},_getCurrentPageData:function(t,e){this.app.getAction(function(){if(this.filterData){this.filterListNode.empty();var i={};Object.each(this.filterData,function(t,e){"key"!==e?t&&(i[this.app.options.filterMap[e]]||(i[this.app.options.filterMap[e]]=[]),i[this.app.options.filterMap[e]].push(t.value),this.createFilterItemNode(e,t)):i.key=t}.bind(this)),this.filterData.key&&this.createFilterItemNode("key",{name:this.filterData.key});var s=this.items.length?this.items[this.items.length-1].data.id:"(0)";this.app.action.listTaskFilter((function(e){t&&t(e)}),null,s,e||this.pageCount,i)}else{s=this.items.length?this.items[this.items.length-1].data.id:"(0)";this.app.action.listTaskNext((function(e){t&&t(e)}),null,s,e||this.pageCount)}}.bind(this))}}),MWF.xApplication.process.TaskCenter.TaskList.Item=new Class({Extends:MWF.xApplication.process.TaskCenter.List.Item});