MWF.xDesktop.requireApp("cms.ColumnManager","Explorer",null,!1),MWF.xApplication.cms.ColumnManager.QueryViewExplorer=new Class({Extends:MWF.xApplication.cms.ColumnManager.Explorer,Implements:[Options,Events],options:{create:MWF.CMSCM.LP.queryView.create,search:MWF.CMSCM.LP.queryView.search,searchText:MWF.CMSCM.LP.queryView.searchText,noElement:MWF.CMSCM.LP.queryView.noViewNoticeText},setTooltip:function(){this.options.tooltip={create:MWF.CMSCM.LP.queryView.create,search:MWF.CMSCM.LP.queryView.search,searchText:MWF.CMSCM.LP.queryView.searchText,noElement:MWF.CMSCM.LP.queryView.noViewNoticeText}},_createElement:function(e){var t=this,i={onQueryLoad:function(){this.actions=t.app.restActions,this.application=t.app.options.application,this.explorer=t},onPostSave:function(){t.reload()}};this.app.desktop.openApplication(e,"cms.QueryViewDesigner",i)},_loadItemDataList:function(e){this.app.restActions.listQueryView(this.app.options.application.id,e)},_getItemObject:function(e,t){return new MWF.xApplication.cms.ColumnManager.QueryViewExplorer.View(this,e,{index:t})},deleteItems:function(){for(;this.deleteMarkItems.length;){var e=this.deleteMarkItems.shift();this.deleteMarkItems.length?e.deleteView():e.deleteView(function(){this.hideDeleteAction(),this.reload()}.bind(this))}}}),MWF.xApplication.cms.ColumnManager.QueryViewExplorer.View=new Class({Extends:MWF.xApplication.cms.ColumnManager.Explorer.Item,_open:function(e){var t=this,i={appId:"cms.QueryViewDesigner"+t.data.id,id:t.data.id,application:t.explorer.app.options.column.id,onQueryLoad:function(){this.actions=t.explorer.actions,this.category=t,this.options.id=t.data.id,this.application=t.explorer.app.options.application,this.explorer=t.explorer}};this.explorer.app.desktop.openApplication(e,"cms.QueryViewDesigner",i)},_getIcon:function(){return"process_icon_"+(33*Math.random()).toInt()+".png"},_getLnkPar:function(){return{icon:this.explorer.path+this.explorer.options.style+"/queryViewIcon/lnk.png",title:this.data.name,par:'cms.QueryViewDesigner#{"id": "'+this.data.id+'", "application": '+JSON.stringify(this.explorer.app.options.application)+"}"}},deleteView:function(e){this.explorer.app.restActions.deleteQueryView(this.data.id,function(){this.node.destroy(),e&&e()}.bind(this))}});