MWF.xDesktop.requireApp("Setting","Document",null,!1),MWF.xDesktop.requireApp("Setting","SettingBase",null,!1),MWF.xDesktop.requireApp("Setting","SettingMobile",null,!1),MWF.xDesktop.requireApp("Setting","SettingCloud",null,!1),MWF.xDesktop.requireApp("Setting","SettingLoginUI",null,!1),MWF.xDesktop.requireApp("Setting","SettingIndexUI",null,!1),MWF.xDesktop.requireApp("Setting","SettingModuleUI",null,!1),MWF.xDesktop.requireApp("Setting","SettingModuleService",null,!1),MWF.xDesktop.requireApp("Setting","SettingModuleResource",null,!1),MWF.xApplication.Setting.Main=new Class({Extends:MWF.xApplication.Common.Main,Implements:[Options,Events],options:{style:"default",name:"Setting",icon:"icon.png",width:"1020",height:"660",title:MWF.xApplication.Setting.LP.title},onQueryLoad:function(){this.lp=MWF.xApplication.Setting.LP,this.actions=MWF.Actions.get("x_program_center")},loadApplication:function(t){this.baseAreaNode=new Element("div",{styles:this.css.tabAreaNode}).inject(this.content),this.mobileAreaNode=new Element("div",{styles:this.css.tabAreaNode}).inject(this.content),this.cloudAreaNode=new Element("div",{styles:this.css.tabAreaNode}).inject(this.content),this.disposeAreaNode=new Element("div",{styles:this.css.tabAreaNode}).inject(this.content),MWF.require("MWF.widget.Tab",function(){this.tab=new MWF.widget.Tab(this.content,{style:"administrator"}),this.tab.load(),this.basePage=this.tab.addTab(this.baseAreaNode,this.lp.tab_base,!1),this.cloudPage=this.tab.addTab(this.cloudAreaNode,this.lp.tab_cloud,!1),this.mobilePage=this.tab.addTab(this.mobileAreaNode,this.lp.tab_mobile,!1),this.disposePage=this.tab.addTab(this.disposeAreaNode,this.lp.tab_dispose,!1),this.basePage.addEvent("postShow",function(){this.baseExplorer||(this.baseExplorer=new MWF.xApplication.Setting.BaseExplorer(this,this.baseAreaNode))}.bind(this)),this.mobilePage.addEvent("postShow",function(){this.mobileExplorer||(this.mobileExplorer=new MWF.xApplication.Setting.MobileExplorer(this,this.mobileAreaNode))}.bind(this)),this.cloudPage.addEvent("postShow",function(){this.cloudExplorer||(this.cloudExplorer=new MWF.xApplication.Setting.CloudExplorer(this,this.cloudAreaNode))}.bind(this)),this.disposePage.addEvent("postShow",function(){this.disposeExplorer||(this.disposeExplorer=new MWF.xApplication.Setting.DisposeExplorer(this,this.disposeAreaNode))}.bind(this)),this.basePage.showIm(),this.setContentHeight(),this.addEvent("resize",function(){this.setContentHeight()}.bind(this))}.bind(this))},loadTitle:function(){this.titleBar=new Element("div",{styles:this.css.titleBar}).inject(this.content),this.taskTitleTextNode=new Element("div",{styles:this.css.titleTextNode,text:this.lp.title}).inject(this.titleBar)},setContentHeight:function(t){var i=this.content.getSize(),e=this.tab.tabNodeContainer.getSize(),n=i.y-e.y;this.tab.pages.each((function(t){t.contentNodeArea.setStyles({height:n+"px",overflow:"auto"})}))}}),MWF.xApplication.Setting.BaseExplorer=new Class({Implements:[Events],initialize:function(t,i){this.app=t,this.lp=this.app.lp,this.container=i,this.actions=this.app.actions,this.css=this.app.css,this.naviItems=[],this.collectData=null,this.personData=null,this.tokenData=null,this.portalData=null,this.loadDataBack=null,this.publicData=null,this.load()},getData:function(){var t=function(){if(this.collectData&&this.personData&&this.tokenData&&this.portalData&&this.publicData&&this.loadDataBack){var t=this.loadDataBack;this.loadDataBack=null,t()}}.bind(this);this.actions.getCollect(function(i){this.collectData=i.data,t()}.bind(this)),this.actions.getPerson(function(i){this.personData=i.data,t()}.bind(this)),this.actions.getToken(function(i){this.tokenData=i.data,t()}.bind(this)),this.actions.getPortal(function(i){this.portalData=i.data,t()}.bind(this)),o2.UD.getPublicData("faceKeys",function(i){i&&(i["api-key"]&&(i.api_key=i["api-key"],delete i["api-key"]),i.api_secret&&(i.api_secret=i.api_secret,delete i.api_secret)),this.publicData=i||{api:{api_key:"",api_secret:""}},t()}.bind(this))},load:function(){MWF.AC.isAdministrator()&&this.getData(),this.naviAreaNode=new Element("div",{styles:this.css.explorerNaviAreaNode}).inject(this.container),this.naviNode=new Element("div",{styles:this.css.explorerNaviNode}).inject(this.naviAreaNode),this.contentAreaNode=new Element("div",{styles:this.css.explorerContentAreaNode}).inject(this.container),this.loadNavi()},loadNavi:function(){this.getNaviJson().each(function(t){this.naviItems.push(this.createNaviItem(t))}.bind(this)),this.naviItems[0].click()},createNaviItem:function(t){var i=new Element("div",{styles:this.css.naviItemNode}).inject(this.naviNode);i.setStyle("background-image","url(../x_component_Setting/$Main/default/icon/"+t.icon+".png)"),i.set("text",t.text),i.store("navi",t);var e=this;return i.addEvent("click",(function(){e.setNavi(this)})),i},setNavi:function(t){var i=t.retrieve("navi");this.naviItems.each(function(t){var i=t.retrieve("navi"),e=t.retrieve("content",null);e&&e.destroy(),t.eliminate("content"),t.setStyles(this.css.naviItemNode),t.setStyle("background-image","url(../x_component_Setting/$Main/default/icon/"+i.icon+".png)")}.bind(this)),t.setStyles(this.css.naviItemNode_current),t.setStyle("background-image","url(../x_component_Setting/$Main/default/icon/"+i.icon+"_current.png)"),this[i.action]&&this[i.action](t)},getNaviJson:function(){return[{text:this.app.lp.tab_name,icon:"name",action:"loadSystemNameSetting"},{text:this.app.lp.tab_user,icon:"user",action:"loadSystemPersonSetting"},{text:this.app.lp.tab_login,icon:"login",action:"loadSystemLoginSetting"},{text:this.app.lp.tab_sso,icon:"sso",action:"loadSystemSSOSetting"},{text:this.app.lp.tab_config,icon:"config",action:"loadSystemConfigSetting"}]},loadSystemConfigSetting:function(t){if(MWF.AC.isAdministrator()){if(layout.desktop.apps.ConfigDesigner)return void layout.desktop.apps.ConfigDesigner.setCurrent();layout.openApplication(null,"ConfigDesigner",{appId:"ConfigDesigner"})}},loadSystemNameSetting:function(t){MWF.AC.isAdministrator()&&(this.collectData&&this.personData&&this.tokenData?(this.baseNameSetting=new MWF.xApplication.Setting.BaseNameDocument(this,this.contentAreaNode),t.store("content",this.baseNameSetting)):this.loadDataBack=function(){this.loadSystemNameSetting(t)}.bind(this))},loadSystemPersonSetting:function(t){MWF.AC.isAdministrator()&&(this.collectData&&this.personData&&this.tokenData?(this.basePersonSetting=new MWF.xApplication.Setting.BasePersonDocument(this,this.contentAreaNode),t.store("content",this.basePersonSetting)):this.loadDataBack=function(){this.loadSystemPersonSetting(t)}.bind(this))},loadSystemLoginSetting:function(t){MWF.AC.isAdministrator()&&(this.collectData&&this.personData&&this.tokenData?(this.baseLoginSetting=new MWF.xApplication.Setting.BaseLoginDocument(this,this.contentAreaNode),t.store("content",this.baseLoginSetting)):this.loadDataBack=function(){this.loadSystemLoginSetting(t)}.bind(this))},loadSystemSSOSetting:function(t){MWF.AC.isAdministrator()&&(this.collectData&&this.personData&&this.tokenData?(this.baseLoginSetting=new MWF.xApplication.Setting.BaseSSODocument(this,this.contentAreaNode),t.store("content",this.baseLoginSetting)):this.loadDataBack=function(){this.loadSystemSSOSetting(t)}.bind(this))}}),MWF.xApplication.Setting.MobileExplorer=new Class({Extends:MWF.xApplication.Setting.BaseExplorer,initialize:function(t,i){this.app=t,this.lp=this.app.lp,this.container=i,this.actions=this.app.actions,this.css=this.app.css,this.naviItems=[],this.collectData=null,this.personData=null,this.tokenData=null,this.loadDataBack=null,this.load()},getNaviJson:function(){return[{text:this.app.lp.tab_mobile_module,icon:"module",action:"loadMobileModuleSetting"},{text:this.app.lp.tab_mobile_style,icon:"style",action:"loadMobileStyleSetting"},{text:this.app.lp.tab_mobile_mpweixin_menu,icon:"style",action:"loadMPWeixinMenuSetting"},{text:this.app.lp.tab_mobile_app_pack,icon:"service",action:"loadAppPackSetting"}]},getData:function(){var t=function(){if(this.proxyData&&this.nativeData&&this.imagesData&&this.loadDataBack){var t=this.loadDataBack;this.loadDataBack=null,t()}}.bind(this);this.actions.getProxy(function(i){this.proxyData=i.data,t()}.bind(this)),this.actions.mobile_currentStyle(function(i){this.nativeData={indexType:i.data.indexType,indexPortal:i.data.indexPortal,simpleMode:i.data.simpleMode,nativeAppList:Array.clone(i.data.nativeAppList)},this.imagesData={images:Array.clone(i.data.images)},this.portalData={portalList:Array.clone(i.data.portalList)},delete i.data,i=null,t()}.bind(this)),o2.Actions.load("x_program_center").MPWeixinAction.menuWeixinList(function(t){t.data&&t.data.button?this.mpweixinListData=t.data.button:this.mpweixinListData=[]}.bind(this))},loadMobileModuleSetting:function(t){MWF.AC.isAdministrator()&&(this.proxyData&&this.nativeData&&this.imagesData?(this.mobileModuleSetting=new MWF.xApplication.Setting.MobileModuleDocument(this,this.contentAreaNode),t.store("content",this.mobileModuleSetting)):this.loadDataBack=function(){this.loadMobileModuleSetting(t)}.bind(this))},loadMobileStyleSetting:function(t){MWF.AC.isAdministrator()&&(this.proxyData&&this.nativeData&&this.imagesData?(this.mobileStyleSetting=new MWF.xApplication.Setting.MobileStyleDocument(this,this.contentAreaNode),t.store("content",this.mobileStyleSetting)):this.loadDataBack=function(){this.loadMobileStyleSetting(t)}.bind(this))},loadMPWeixinMenuSetting:function(t){MWF.AC.isAdministrator()&&(this.proxyData&&this.nativeData&&this.imagesData?(this.mpweixinMenuSetting=new MWF.xApplication.Setting.MPWeixinMenuSettingDocument(this,this.contentAreaNode),t.store("content",this.mpweixinMenuSetting)):this.loadDataBack=function(){this.loadMPWeixinMenuSetting(t)}.bind(this))},loadAppPackSetting:function(t){MWF.AC.isAdministrator()&&(this.mobileAppPackOnline=new MWF.xApplication.Setting.AppPackOnlineDocument(this,this.contentAreaNode),t.store("content",this.mobileAppPackOnline))}}),MWF.xApplication.Setting.CloudExplorer=new Class({Extends:MWF.xApplication.Setting.BaseExplorer,initialize:function(t,i){this.app=t,this.lp=this.app.lp,this.container=i,this.actions=this.app.actions,this.css=this.app.css,this.naviItems=[],this.collectData=null,this.personData=null,this.tokenData=null,this.loadDataBack=null,this.load()},getNaviJson:function(){return[{text:this.app.lp.tab_cloud_connect,icon:"connect",action:"loadCloudConnectSetting"}]},getData:function(){var t=function(){if(this.proxyData&&this.nativeData&&this.imagesData&&this.loadDataBack){var t=this.loadDataBack;this.loadDataBack=null,t()}}.bind(this);this.actions.getProxy(function(i){this.proxyData=i.data,t()}.bind(this)),this.actions.mobile_currentStyle(function(i){this.nativeData={indexType:i.data.indexType,indexPortal:i.data.indexPortal,nativeAppList:Array.clone(i.data.nativeAppList)},this.imagesData={images:Array.clone(i.data.images)},this.portalData={portalList:Array.clone(i.data.portalList)},delete i.data,i=null,t()}.bind(this))},loadCloudConnectSetting:function(t){MWF.AC.isAdministrator()&&(this.proxyData&&this.nativeData&&this.imagesData?(this.mobileConnectSetting=new MWF.xApplication.Setting.CloudConnectDocument(this,this.contentAreaNode),t.store("content",this.mobileConnectSetting)):this.loadDataBack=function(){this.loadCloudConnectSetting(t)}.bind(this))}}),MWF.xApplication.Setting.UIExplorer=new Class({Extends:MWF.xApplication.Setting.BaseExplorer,initialize:function(t,i){this.app=t,this.lp=this.app.lp,this.container=i,this.actions=this.app.actions,this.css=this.app.css,this.naviItems=[],this.load()},getNaviJson:function(){return[{text:this.app.lp.tab_ui_index,icon:"index",action:"loadUIIndexSetting"},{text:this.app.lp.tab_ui_login,icon:"login",action:"loadUILoginSetting"}]},getData:function(){},loadUILoginSetting:function(t){MWF.AC.isAdministrator()&&(this.uiLoginSetting=new MWF.xApplication.Setting.UILoginDocument(this,this.contentAreaNode),t.store("content",this.uiLoginSetting))},loadUIIndexSetting:function(t){MWF.AC.isAdministrator()&&(this.uiIndexSetting=new MWF.xApplication.Setting.UIIndexDocument(this,this.contentAreaNode),t.store("content",this.uiIndexSetting))}}),MWF.xApplication.Setting.DisposeExplorer=new Class({Extends:MWF.xApplication.Setting.BaseExplorer,initialize:function(t,i){this.app=t,this.lp=this.app.lp,this.container=i,this.actions=this.app.actions,this.css=this.app.css,this.naviItems=[],this.load()},getNaviJson:function(){return[{text:this.app.lp.tab_ui_module,icon:"module",action:"loadUIModuleSetting"},{text:this.app.lp.tab_ui_resource,icon:"resource",action:"loadResourceModuleSetting"},{text:this.app.lp.tab_ui_service,icon:"service",action:"loadServiceModuleSetting"}]},getData:function(){},loadUIModuleSetting:function(t){MWF.AC.isAdministrator()&&(this.uiModuleSetting=new MWF.xApplication.Setting.UIModuleDocument(this,this.contentAreaNode),t.store("content",this.uiModuleSetting))},loadServiceModuleSetting:function(t){MWF.AC.isAdministrator()&&(this.serviceModuleSetting=new MWF.xApplication.Setting.ServiceModuleDocument(this,this.contentAreaNode),t.store("content",this.serviceModuleSetting))},loadResourceModuleSetting:function(t){MWF.AC.isAdministrator()&&(this.resourceModuleSetting=new MWF.xApplication.Setting.ResourceModuleDocument(this,this.contentAreaNode),t.store("content",this.resourceModuleSetting))}});