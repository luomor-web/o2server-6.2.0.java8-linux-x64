var _worker=self,_action={_checkRequest:function(e,r){this.request.readyState===XMLHttpRequest.DONE&&(200===this.request.status?this._doneRequest(e):this._errorRequest(r))},_createRequest:function(e,r){var t=new XMLHttpRequest;return t.addEventListener("readystatechange",(function(){if(this.readyState===XMLHttpRequest.DONE)if(200===this.status){var t=JSON.parse(this.responseText),n=this.getResponseHeader(_worker.findData.tokenName);n&&(t.xToken=n),e&&e(t)}else r&&r(this,this.responseText)})),t},sendRequest:function(e){return new Promise(function(r,t){var n=this._createRequest(r,t),i=e.method,a=!!e.noCache,s=!!e.loadAsync,o=!!e.credentials,p=e.address,d=e.body,c=e.debug,l=e.token;a&&(p=p+(-1!==p.indexOf("?")?"&":"?")+(new Date).getTime()),n.open(i,p,s),n.withCredentials=o,n.setRequestHeader("Content-Type","application/json; charset=utf-8"),n.setRequestHeader("Accept","text/html,application/json,*/*"),c&&n.setRequestHeader("x-debugger","true"),l&&(n.setRequestHeader(_worker.findData.tokenName,l),n.setRequestHeader("authorization",l)),n.send(d)}.bind(this))},_doneRequest:function(e){var r=JSON.parse(this.request.responseText),t=this.request.getResponseHeader(_worker.findData.tokenName);t&&(r.xToken=t),e&&e(r)},_errorRequest:function(e){s&&s(this.request,this.request.responseText)}};_worker.action=_action,_worker._receiveMessageReply=function(){_worker.postMessage({type:"receive"})},_worker._readyMessageReply=function(){_worker.postMessage({type:"ready",count:this.filterOptionList.length})},_worker._getRequestOption=function(e,r){return r&&Object.keys(r).forEach((function(t){e.url=e.url.replace("{"+t+"}",r[t])})),{method:e.method||"get",noCache:!1,loadAsync:!0,credentials:!0,address:e.url,body:e.body||"",debug:e.debug||_worker.findData.debug,token:e.token||_worker.findData.token}},_worker._createFilterOption=function(e,r,t,n){var i=JSON.parse(_worker.filterOptionTemplete);return i.moduleList.push({moduleType:e,moduleAppList:[{appId:r,designerList:[{designerType:t,designerIdList:[n]}]}]}),this.filterOptionList.push(i),i},_worker._getDesingerModule=function(e,r,t,n,i){return _worker.action.sendRequest(_worker._getRequestOption({url:r,debug:_worker.findData.debug,token:_worker.findData.token},t)).then((function(r){list=r.data,list&&list.forEach((function(r){_worker._createFilterOption(n,e,i,r.id)}))}),(function(){return Promise.resolve("")}))},_worker._getDesinger_processPlatform=function(e){var r=[];return-1!=_worker.findData.filterOption.designerTypes.indexOf("script")&&r.push(_worker._getDesingerModule(e,_worker.findData.actions.listProcessScript,{applicationId:e},"processPlatform","script")),-1!=_worker.findData.filterOption.designerTypes.indexOf("form")&&r.push(_worker._getDesingerModule(e,_worker.findData.actions.listProcessForm,{applicationId:e},"processPlatform","form")),-1!=_worker.findData.filterOption.designerTypes.indexOf("process")&&r.push(_worker._getDesingerModule(e,_worker.findData.actions.listProcessProcess,{applicationId:e},"processPlatform","process")),r},_worker._getDesinger_cms=function(e){var r=[];return-1!=_worker.findData.filterOption.designerTypes.indexOf("script")&&r.push(_worker._getDesingerModule(e,_worker.findData.actions.listCmsScript,{flag:e},"cms","script")),-1!=_worker.findData.filterOption.designerTypes.indexOf("form")&&r.push(_worker._getDesingerModule(e,_worker.findData.actions.listCmsForm,{appId:e},"cms","form")),r},_worker._getDesinger_portal=function(e){var r=[];return-1!=_worker.findData.filterOption.designerTypes.indexOf("script")&&r.push(_worker._getDesingerModule(e,_worker.findData.actions.listPortalScript,{portalId:e},"portal","script")),-1!=_worker.findData.filterOption.designerTypes.indexOf("page")&&r.push(_worker._getDesingerModule(e,_worker.findData.actions.listPortalPage,{portalId:e},"portal","page")),-1!=_worker.findData.filterOption.designerTypes.indexOf("widget")&&r.push(_worker._getDesingerModule(e,_worker.findData.actions.listPortalWidget,{portalId:e},"portal","widget")),r},_worker._getDesinger_query=function(e){var r=[];return-1!=_worker.findData.filterOption.designerTypes.indexOf("view")&&r.push(_worker._getDesingerModule(e,_worker.findData.actions.listQueryView,{flag:e},"query","view")),-1!=_worker.findData.filterOption.designerTypes.indexOf("stat")&&r.push(_worker._getDesingerModule(e,_worker.findData.actions.listQueryStat,{flag:e},"query","stat")),-1!=_worker.findData.filterOption.designerTypes.indexOf("statement")&&r.push(_worker._getDesingerModule(e,_worker.findData.actions.listQueryStatement,{flag:e},"query","statement")),r},_worker._getDesinger_service=function(e){var r=[];return-1!=_worker.findData.filterOption.designerTypes.indexOf("script")&&("invoke"==e?r.push(_worker._getDesingerModule(e,_worker.findData.actions.listInvoke,null,"service","script")):r.push(_worker._getDesingerModule(e,_worker.findData.actions.listAgent,null,"service","script"))),r},_worker._listApplication=function(e){switch(e){case"processPlatform":return this.action.sendRequest(_worker._getRequestOption({url:this.findData.actions.listProcess,debug:this.findData.debug,token:this.findData.token}));case"cms":return this.action.sendRequest(_worker._getRequestOption({url:this.findData.actions.listCms,debug:this.findData.debug,token:this.findData.token}));case"portal":return this.action.sendRequest(_worker._getRequestOption({url:this.findData.actions.listPortal,debug:this.findData.debug,token:this.findData.token}));case"query":return this.action.sendRequest(_worker._getRequestOption({url:this.findData.actions.listQuery,debug:this.findData.debug,token:this.findData.token}))}},_worker._parseFindModule=function(e){var r=[];return e.forEach(function(e){var t;if("service"===e.moduleType)e.flagList&&e.flagList.length?e.flagList.forEach((function(t){t.designerList&&t.designerList.length?t.designerList.forEach((function(n){var i=_worker._createFilterOption(e.moduleType,t.id,n.designerType,n.id);r=r.concat(Promise.resolve(i))})):r=r.concat(_worker["_getDesinger_"+e.moduleType](t.id))})):((t=JSON.parse(_worker.filterOptionTemplete)).moduleList.push({moduleType:e.moduleType,moduleAppList:[{appId:"invoke"}]}),this.filterOptionList.push(t),(t=JSON.parse(_worker.filterOptionTemplete)).moduleList.push({moduleType:e.moduleType,moduleAppList:[{appId:"agent"}]}),this.filterOptionList.push(t),r.push(Promise.resolve("")));else if(e.flagList&&e.flagList.length)e.flagList.forEach((function(t){t.designerList&&t.designerList.length?t.designerList.forEach((function(n){var i=_worker._createFilterOption(e.moduleType,t.id,n.designerType,n.id);r=r.concat(Promise.resolve(i))})):r=r.concat(_worker["_getDesinger_"+e.moduleType](t.id))}));else{var n=_worker._listApplication(e.moduleType);r.push(n.then((function(r){return r&&r.data&&r.data.forEach((function(r){var t=JSON.parse(_worker.filterOptionTemplete);t.moduleList.push({moduleType:e.moduleType,moduleAppList:[{appId:r.id}]}),this.filterOptionList.push(t)})),Promise.resolve("")}),(function(){return Promise.resolve("")})))}}.bind(this)),r},_worker._findMessageReply=function(e,r){_worker.postMessage({type:"find",data:e,option:r})},_worker._findOptionReply=function(){_worker.postMessage({type:"done"})},_worker._findCompletedReply=function(e,r){_worker.setTimeout((function(){_worker.postMessage({type:"completed"})}),100)},_worker._createFindMessageReplyData=function(e,r,t,n){return{module:e,appId:r.appId,appName:r.appName,designerId:r.designerId,designerName:r.designerName,designerType:r.designerType,designerAliase:t,pattern:n}},_worker._setFilterOptionRegex=function(){var e=_worker.findData.filterOption.keyword;if(e=e.replace("[","\\[").replace("]","\\]").replace("(","\\(").replace(")","\\)").replace("{","\\{").replace("}","\\}").replace("^","\\^").replace("$","\\$").replace(".","\\.").replace("?","\\?").replace("+","\\+").replace("*","\\*").replace("|","\\|"),_worker.findData.filterOption.matchRegExp){var r=_worker.findData.filterOption.caseSensitive?"gm":"gmi";this.keywordRegexp=new RegExp(e,r)}else{r=_worker.findData.filterOption.caseSensitive?"gm":"gmi";e=_worker.findData.filterOption.matchWholeWord?"\\b"+e+"\\b":e,this.keywordRegexp=new RegExp(e,r)}},_worker._findProcessPlatformParse_script=function(e,r,t){e.patternList&&e.patternList.length&&e.patternList.forEach((function(n){"text"==n.property&&n.lines.forEach((function(i){var a=i.lineValue;_worker._findMessageReply(_worker._createFindMessageReplyData(t,e,"",{property:n.property,value:a,line:i.line}),r)}))}))},_worker.findScriptLineValue=function(e,r,t,n,i){var a=/\r\n|\n|\r/g,s=r.substring(n,e.index).match(a);t+=s?s.length:0;for(var o=e[0],p=e.index-1,d=r.charAt(p);!a.test(d)&&p>=0;)o=d+o,p--,d=r.charAt(p);for(p=this.keywordRegexp.lastIndex,d=r.charAt(p);!a.test(d)&&p<i;)o+=d,p++,d=r.charAt(p);return{value:o,preLine:t,preIndex:n=this.keywordRegexp.lastIndex=p}},_worker.findInDesigner_script=function(e,r,t,n,i,a,s,o){e[r].hasOwnProperty("code")&&o.push("code");var p=e[r].code||e[r];if(p){this.keywordRegexp.lastIndex=0;for(var d,c=p.length,l=0,f=0;null!==(d=this.keywordRegexp.exec(p));){var y=_worker.findScriptLineValue(d,p,l,f,c);l=y.preLine,f=y.preIndex,_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name,name:e.name||e.id,id:e.id,key:r,value:y.value,line:l+1,mode:s,path:o}),a)}}},_worker.findInDesigner_events=function(e,r,t,n,i,a,s,o){var p=e[r];Object.keys(p).forEach((function(d){var c=p[d].code;if(c){this.keywordRegexp.lastIndex=0;for(var l,f=c.length,y=0,_=0;null!==(l=this.keywordRegexp.exec(c));){var g=_worker.findScriptLineValue(l,c,y,_,f);y=g.preLine,_=g.preIndex,_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name,name:e.name||e.id,id:e.id,key:r,evkey:d,value:g.value,line:y+1,mode:s,path:o?o.concat([d,"code"]):""}),a)}}}))},_worker.findInDesigner_map=function(e,r,t,n,i,a,s,o){var p=e[r];Object.keys(p).forEach((function(d){this.keywordRegexp.lastIndex=0;var c=p[d];c&&("string"==typeof c?this.keywordRegexp.test(c)&&_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name,name:e.name||e.id,id:e.id,key:r,value:d+": "+c,mode:s,path:o}),a):Object.keys(c).forEach((function(p){this.keywordRegexp.lastIndex=0,this.keywordRegexp.test(c[p])&&_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name+"-"+d,name:e.name||e.id,id:e.id,key:r,value:p+": "+c[p],mode:s,path:o.concat(d)}),a)})))}))},_worker.findInDesigner_array=function(e,r,t,n,i,a,s,o){e[r].forEach((function(p,d){this.keywordRegexp.lastIndex=0;var c=p.toString();this.keywordRegexp.test(c)&&_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name,name:e.name||e.id,id:e.id,line:d+1,key:r,value:c,mode:s,path:o}),a)}))},_worker.findInDesigner_objectArray=function(e,r,t,n,i,a,s,o){e[r].forEach((function(p,d){var c=o.concat(d);Object.keys(p).forEach((function(o){this.keywordRegexp.lastIndex=0;var l=p[o];this.keywordRegexp.test(l)&&_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name,name:e.name||e.id,id:e.id,line:d+1,key:r,value:o+": "+l,mode:s,path:c.concat(o)}),a)}))}))},_worker.findInDesigner_duty=function(e,r,t,n,i,a,s,o){var p=e[r];p&&JSON.parse(p).forEach((function(p,d){var c=o.concat(d);this.keywordRegexp.lastIndex=0;var l=p.name;l&&this.keywordRegexp.test(l)&&_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name,name:e.name||e.id,id:e.id,key:r,line:d+1,valueKey:"name",value:"name:"+l,mode:s,path:c.concat("name")}),a);var f=p.code;if(f){this.keywordRegexp.lastIndex=0;for(var y,_=f.length,g=d+1,u=0,k=0;null!==(y=this.keywordRegexp.exec(f));){var w=_worker.findScriptLineValue(y,f,u,k,_);u=w.preLine,k=w.preIndex,_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name+"(code)&nbsp;"+g+"."+p.name,name:e.name||e.id,id:e.id,key:r,valueKey:"code",idx:d,value:w.value,line:u+1,mode:s,path:c.concat("code")}),a)}}}))},_worker.findInDesigner_actions=function(e,r,t,n,i,a,s,o){e[r].forEach((function(p,d){var c=o.concat(d);this.keywordRegexp.lastIndex=0;var l=p.text;l&&this.keywordRegexp.test(l)&&_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name,name:e.name||e.id,id:e.id,key:r,line:d+1,value:"text:"+l,mode:s,path:c.concat("text")}),a);var f=p.actionScript;if(f){this.keywordRegexp.lastIndex=0;for(var y=f.length,_=0,g=0;null!==(u=this.keywordRegexp.exec(f));){_=(k=_worker.findScriptLineValue(u,f,_,g,y)).preLine,g=k.preIndex,_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name+"(actionScript)&nbsp;"+p.text,name:e.name||e.id,id:e.id,key:r,value:k.value,line:_+1,mode:s,path:c.concat("actionScript")}),a)}}if(f=p.condition){this.keywordRegexp.lastIndex=0;var u;for(y=f.length,_=0,g=0;null!==(u=this.keywordRegexp.exec(f));){var k;_=(k=_worker.findScriptLineValue(u,f,_,g,y)).preLine,g=k.preIndex,_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name+"(condition)&nbsp;"+p.text,name:e.name||e.id,id:e.id,key:r,value:k.value,line:_+1,mode:s,path:c.concat("condition")}),a)}}}))},_worker.findInDesigner_filter=function(e,r,t,n,i,a,s){e[r].forEach((function(o,p){this.keywordRegexp.lastIndex=0;var d=o.path;d&&this.keywordRegexp.test(d)&&_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name,name:e.name||e.id,id:e.id,key:r,line:p+1,value:"path:"+d,mode:s}),a);var c=o.value;c&&this.keywordRegexp.test(c)&&_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name,name:e.name||e.id,id:e.id,key:r,line:p+1,value:"value:"+c,mode:s}),a);var l=o.otherValue;l&&this.keywordRegexp.test(l)&&_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name,name:e.name||e.id,id:e.id,key:r,line:p+1,value:"otherValue:"+l,mode:s}),a);var f=o.code?o.code.code:"";if(f){this.keywordRegexp.lastIndex=0;for(var y=f.length,_=0,g=0;null!==(u=this.keywordRegexp.exec(f));){_=(k=_worker.findScriptLineValue(u,f,_,g,y)).preLine,g=k.preIndex,_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name+"(code)&nbsp;"+o.path,name:e.name||e.id,id:e.id,key:r,value:k.value,line:_+1,mode:s}),a)}}if(f=o.valueScript?o.valueScript.code:""){this.keywordRegexp.lastIndex=0;var u;for(y=f.length,_=0,g=0;null!==(u=this.keywordRegexp.exec(f));){var k;_=(k=_worker.findScriptLineValue(u,f,_,g,y)).preLine,g=k.preIndex,_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name+"(valueScript)&nbsp;"+o.path,name:e.name||e.id,id:e.id,key:r,value:k.value,line:_+1,mode:s}),a)}}}))},_worker.findInDesigner_serial=function(e,r,t,n,i,a,s){var o=e[r];o&&JSON.parse(o).forEach((function(s,o){switch(this.keywordRegexp.lastIndex=0,s.key){case"text":case"unitAttribute":this.keywordRegexp.test(s.value)&&_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name+"&nbsp"+s.key+"&nbsp",name:e.name||e.id,id:e.id,key:r,value:s.value}),a);break;case"script":var p=s.value;if(s.value&&p){this.keywordRegexp.lastIndex=0;for(var d,c=p.length,l=0,f=0;null!==(d=this.keywordRegexp.exec(p));){var y=_worker.findScriptLineValue(d,p,l,f,c);l=y.preLine,f=y.preIndex,_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name+"&nbsp"+s.key+"&nbsp",name:e.name||e.id,id:e.id,key:r,value:y.value,line:l+1}),a)}}}}))},_worker.findInDesigner_projection=function(e,r,t,n,i,a,s){var o=e[r];o&&JSON.parse(o).forEach((function(s,o){this.keywordRegexp.lastIndex=0;var p=s.path+"->"+s.name;this.keywordRegexp.test(p)&&_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name,name:e.name||e.id,id:e.id,key:r,value:p,line:o}),a)}))},_worker.findInDesigner_selectConfig_script=function(e,r,t,n,i,a,s,o,p){if(o){this.keywordRegexp.lastIndex=0;for(var d,c=o.length,l=0,f=0;null!==(d=this.keywordRegexp.exec(o));){var y=_worker.findScriptLineValue(d,o,l,f,c);l=y.preLine,f=y.preIndex,_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:p,name:e.name||e.id,id:e.id,key:r,value:y.value,line:l+1}),a)}}},_worker.findInDesigner_selectConfig_events=function(e,r,t,n,i,a,s,o,p){Object.keys(o).forEach((function(d){var c=o[d].code;this.keywordRegexp.lastIndex=0;for(var l,f=c.length,y=0,_=0;null!==(l=this.keywordRegexp.exec(c));){var g=_worker.findScriptLineValue(l,c,y,_,f);y=g.preLine,_=g.preIndex,_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:p,name:e.name||e.id,id:e.id,key:r,evkey:d,value:g.value,line:y+1,mode:s}),a)}}))},_worker.findInDesigner_selectConfig=function(e,r,t,n,i,a,s){var o=e[r];o&&JSON.parse(o).forEach((function(o,p){var d=p+1,c=i.name+"&nbsp"+d+"-"+o.name+"&nbsp默认值脚本(defaultValue)&nbsp";_worker.findInDesigner_selectConfig_script(e,r,t,n,i,a,s,o.defaultValue.code,c),c=i.name+"&nbsp"+d+"-"+o.name+"&nbsp校验脚本(validation)&nbsp",_worker.findInDesigner_selectConfig_script(e,r,t,n,i,a,s,o.validation.code,c),c=i.name+"&nbsp"+d+"-"+o.name+"&nbsp隐藏脚本(hiddenScript)&nbsp",_worker.findInDesigner_selectConfig_script(e,r,t,n,i,a,s,o.hiddenScript.code,c),c=i.name+"&nbsp"+d+"-"+o.name+"&nbsp身份选择组织范围脚本(identityRangeKey)&nbsp",_worker.findInDesigner_selectConfig_script(e,r,t,n,i,a,s,o.identityRangeKey.code,c),c=i.name+"&nbsp"+d+"-"+o.name+"&nbsp职务范围脚本(rangeDutyKey)&nbsp",_worker.findInDesigner_selectConfig_script(e,r,t,n,i,a,s,o.rangeDutyKey.code,c),c=i.name+"&nbsp"+d+"-"+o.name+"&nbsp身份添加脚本(identityIncludeKey)&nbsp",_worker.findInDesigner_selectConfig_script(e,r,t,n,i,a,s,o.identityIncludeKey.code,c),c=i.name+"&nbsp"+d+"-"+o.name+"&nbsp组织选择组织范围脚本(unitRangeKey)&nbsp",_worker.findInDesigner_selectConfig_script(e,r,t,n,i,a,s,o.unitRangeKey.code,c),c=i.name+"&nbsp"+d+"-"+o.name+"&nbsp排除范围脚本(exclude)&nbsp",_worker.findInDesigner_selectConfig_script(e,r,t,n,i,a,s,o.exclude.code,c);var l=o.rangeDuty;l&&l.length&&l.forEach((function(p,l){this.keywordRegexp.lastIndex=0;var f=p.toString();this.keywordRegexp.test(f)&&(c=i.name+"&nbsp"+d+"-"+o.name+"&nbsp职务范围(rangeDuty)&nbsp",_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:c,name:e.name||e.id,id:e.id,line:l+1,key:r,value:f,mode:s}),a))})),c=i.name+"&nbsp"+d+"-"+o.name+"&nbsp事件(events)&nbsp",_worker.findInDesigner_selectConfig_events(e,r,t,n,i,a,s,o.events,c)}))},_worker.findInDesigner_text=function(e,r,t,n,i,a,s){this.keywordRegexp.lastIndex=0;var o=e[r];this.keywordRegexp.test(o)&&_worker._findMessageReply(_worker._createFindMessageReplyData(t,n,"",{type:e.type,propertyType:i.type||"text",propertyName:i.name,name:e.name||e.id,id:e.id,key:r,value:o,mode:s}),a)},_worker.findInDesignerProperty=function(e,r,t,n,i,a,s,o){if(r)switch(r.type){case"html":_worker.findInDesigner_script(t,e,i,a,r,n,s,o);break;case"script":case"css":case"sql":_worker.findInDesigner_script(t,e,i,a,r,n,s,o);break;case"events":_worker.findInDesigner_events(t,e,i,a,r,n,s,o);break;case"map":_worker.findInDesigner_map(t,e,i,a,r,n,s,o);break;case"array":_worker.findInDesigner_array(t,e,i,a,r,n,s,o);break;case"object-array":_worker.findInDesigner_objectArray(t,e,i,a,r,n,s,o);break;case"duty":_worker.findInDesigner_duty(t,e,i,a,r,n,s,o);break;case"actions":_worker.findInDesigner_actions(t,e,i,a,r,n,s,o);break;case"filter":_worker.findInDesigner_filter(t,e,i,a,r,n,s,o);break;case"serial":_worker.findInDesigner_serial(t,e,i,a,r,n,s,o);break;case"projection":_worker.findInDesigner_projection(t,e,i,a,r,n,s,o);break;case"selectConfig":_worker.findInDesigner_selectConfig(t,e,i,a,r,n,s,o);break;default:_worker.findInDesigner_text(t,e,i,a,r,n,s,o)}},_worker.findInDesigner=function(e,r,t,n,i,a){Object.keys(e).forEach((function(s){var o=this.designerPropertysData.form[s];_worker.findInDesignerProperty(s,o,e,r,t,n,i,a.concat(s))}))},_worker.decodeJsonString=function(e){var r='["'+e+'"]';return JSON.parse(r)[0]},_worker._getDesignerData=function(e,r){var t="";switch(e.designerType){case"form":"processPlatform"==r?t=this.findData.actions.getProcessForm:"cms"==r&&(t=this.findData.actions.getCmsForm);break;case"process":t=this.findData.actions.getProcessProcess;break;case"page":t=this.findData.actions.getPortalPage;break;case"widget":t=this.findData.actions.getPortalWidget;break;case"view":t=this.findData.actions.getQueryView;break;case"statement":t=this.findData.actions.getQueryStatement}if(t){var n=_worker.action.sendRequest(_worker._getRequestOption({url:t},{id:e.designerId}));return this.designerPropertysData||(this.designerPropertysData=_worker.action.sendRequest(_worker._getRequestOption({url:"../x_component_FindDesigner/propertys.json"}))),Promise.all([n,this.designerPropertysData])}},_worker._findInDesigner_form=function(e,r,t,n,i){var a=e.json.mode;for(key in i.push("json"),_worker.findInDesigner(e.json,t,n,r,a,i),i.push("moduleList"),e.json.moduleList)e.json.moduleList[key].recoveryStyles&&(e.json.moduleList[key].styles=e.json.moduleList[key].recoveryStyles),e.json.moduleList[key].recoveryInputStyles&&(e.json.moduleList[key].inputStyles=e.json.moduleList[key].recoveryInputStyles),_worker.findInDesigner(e.json.moduleList[key],t,n,r,a,i.concat(key))},_worker._findProcessPlatformParse_form=function(e,r,t){if(e.patternList&&e.patternList.length){var n=_worker._getDesignerData(e,t);if(n){var i=e.patternList.map((function(e){return e.property}));n.then((function(n){var a=n[0];if(this.designerPropertysData=n[1],-1!=i.indexOf("data")){var s=JSON.parse(_worker.decodeJsonString(a.data.data));_worker._findInDesigner_form(s,e,r,t,["data"])}if(-1!=i.indexOf("mobileData")){s=JSON.parse(_worker.decodeJsonString(a.data.mobileData));_worker._findInDesigner_form(s,e,r,t,["mobileData"])}}),(function(){}))}}},_worker._findProcessPlatformParse_view=function(e,r,t){if(e.patternList&&e.patternList.length)if(this.designerPropertysData||(this.designerPropertysData=_worker.action.sendRequest(_worker._getRequestOption({url:"../x_component_FindDesigner/propertys.json"}))),-1!=e.patternList.map((function(e){return e.property})).indexOf("data")){var n=_worker._getDesignerData(e,t);n&&n.then((function(n){var i=n[0].data;this.designerPropertysData=n[1];var a=JSON.parse(i.data);a.type="View",a.name=i.name,Object.keys(a).forEach((function(n){if("where"!==n&&"selectList"!==n&&"actionbarList"!==n&&"pagingList"!==n&&"type"!==n&&"name"!==n){var i=this.designerPropertysData.view[n];_worker.findInDesignerProperty(n,i,a,r,t,e,null,["data",n])}})),a.where&&(a.where.type="View",a.where.name=i.name,Object.keys(a.where).forEach((function(n){if("type"!==n&&"name"!==n){var i=this.designerPropertysData.view[n];_worker.findInDesignerProperty(n,i,a.where,r,t,e,null,["data","where",n])}}))),a.selectList&&a.selectList.forEach((function(n,i){n.type="column",n.name=n.displayName,Object.keys(n).forEach((function(a){if("name"!==a&&"type"!==a){var s=this.designerPropertysData.view[a];_worker.findInDesignerProperty(a,s,n,r,t,e,null,["data","selectList",i,a])}}))})),a.actionbarList&&a.actionbarList.forEach((function(n,i){n.type="actionbar",n.name=n.type,Object.keys(n).forEach((function(a){if("name"!==a&&"type"!==a){var s=this.designerPropertysData.view[a];_worker.findInDesignerProperty(a,s,n,r,t,e,null,["data","actionbarList",i,a])}}))})),a.pagingList&&a.pagingList.forEach((function(n,i){n.type="paging",n.name=n.type,Object.keys(n).forEach((function(a){if("name"!==a&&"type"!==a){var s=this.designerPropertysData.view[a];_worker.findInDesignerProperty(a,s,n,r,t,e,null,["data","pagingList",i,a])}}))}))}),(function(){}))}else Promise.resolve(this.designerPropertysData).then((function(n){this.designerPropertysData=n,e.patternList.forEach((function(n){var i=this.designerPropertysData.view[n.property];i&&_worker._findMessageReply(_worker._createFindMessageReplyData(t,e,"",{type:"View",propertyType:i.type||"text",propertyName:i.name,name:e.designerName,key:n.property,path:[n.property],value:n.propertyValue}),r)}))}),(function(){}))},_worker._findProcessPlatformParse_statement=function(e,r,t){if(e.patternList&&e.patternList.length){this.designerPropertysData||(this.designerPropertysData=_worker.action.sendRequest(_worker._getRequestOption({url:"../x_component_FindDesigner/propertys.json"})));var n=_worker._getDesignerData(e,t);n&&n.then((function(n){var i=n[0].data;this.designerPropertysData=n[1],e.patternList.forEach((function(n){if("view"==n.property){"string"==typeof i.view&&(i.view=JSON.parse(i.view));var a=i.view.data;a&&(a.type="View",a.name=i.name,Object.keys(a).forEach((function(n){if("where"!==n&&"selectList"!==n&&"actionbarList"!==n&&"pagingList"!==n&&"type"!==n&&"name"!==n){var i=this.designerPropertysData.view[n];_worker.findInDesignerProperty(n,i,a,r,t,e,null,["view","data",n])}})),a.where&&(a.where.type="View",a.where.name=viewJson.name,Object.keys(a.where).forEach((function(n){if("type"!==n&&"name"!==n){var i=this.designerPropertysData.view[n];_worker.findInDesignerProperty(n,i,a.where,r,t,e,null,["view","data","where",n])}}))),a.selectList&&a.selectList.forEach((function(n,i){n.type="View-column",n.name=n.displayName,Object.keys(n).forEach((function(a){if("name"!==a&&"type"!==a){var s=this.designerPropertysData.view[a];_worker.findInDesignerProperty(a,s,n,r,t,e,null,["view","data","selectList",i,a])}}))})),a.actionbarList&&a.actionbarList.forEach((function(n,i){n.type="View-actionbar",n.name=n.type,Object.keys(n).forEach((function(a){if("name"!==a&&"type"!==a){var s=this.designerPropertysData.view[a];_worker.findInDesignerProperty(a,s,n,r,t,e,null,["view","data","actionbarList",i,a])}}))})),a.pagingList&&a.pagingList.forEach((function(n,i){n.type="View-paging",n.name=n.type,Object.keys(n).forEach((function(a){if("name"!==a&&"type"!==a){var s=this.designerPropertysData.view[a];_worker.findInDesignerProperty(a,s,n,r,t,e,null,["view","data","pagingList",i,a])}}))})))}else{var s=this.designerPropertysData.statement[n.property];s&&_worker.findInDesignerProperty(n.property,s,i,r,t,e,null,[n.property])}}))}),(function(){}))}},_worker._findProcessPlatformParse_process=function(e,r,t){if(e.patternList&&e.patternList.length){var n=_worker._getDesignerData(e,t);n&&n.then((function(n){var i=n[0].data;this.designerPropertysData=n[1],e.patternList.forEach((function(n){if("process"===n.elementType){var a=this.designerPropertysData.process[n.property];i.type=n.elementType,_worker.findInDesignerProperty(n.property,a,i,r,t,e,null,[n.property])}else if("route"===n.elementType){for(var s=0;s<i.routeList.length&&i.routeList[s].id!==n.elementId;s++);Object.keys(i.routeList[s]).forEach(function(a){var o=this.designerPropertysData.process[a];i.routeList[s].type=n.elementType,_worker.findInDesignerProperty(a,o,i.routeList[s],r,t,e,null,["routeList",s,a])}.bind(this))}else if("begin"==n.elementType&&n.elementId===i.begin.id)Object.keys(i.begin).forEach(function(a){var s=this.designerPropertysData.process[a];i.begin.type=n.elementType,_worker.findInDesignerProperty(a,s,i.begin,r,t,e,null,["begin",a])}.bind(this));else{var o=n.elementType+"List";for(s=0;s<i[o].length&&i[o][s].id!==n.elementId;s++);Object.keys(i[o][s]).forEach(function(a){var p=this.designerPropertysData.process[a];i[o][s].type=n.elementType,_worker.findInDesignerProperty(a,p,i[o][s],r,t,e,null,[o,s,a])}.bind(this))}}))}),(function(){}))}},_worker._findProcessPlatformParse=function(e,r,t){e.forEach((function(e){switch(e.designerType){case"script":_worker._findProcessPlatformParse_script(e,r,t);break;case"form":case"page":case"widget":_worker._findProcessPlatformParse_form(e,r,t);break;case"process":_worker._findProcessPlatformParse_process(e,r,t);break;case"view":_worker._findProcessPlatformParse_view(e,r,t);break;case"statement":_worker._findProcessPlatformParse_statement(e,r,t)}}))},_worker._doFindDesigner=function(e,r){e=this.filterOptionList[r];var t=_worker._getRequestOption({method:"post",url:this.findData.actions.findAction,body:JSON.stringify(e),debug:this.findData.debug,token:this.findData.token});this.action.sendRequest(t).then((function(t){t.data.processPlatformList&&t.data.processPlatformList.length&&_worker._findProcessPlatformParse(t.data.processPlatformList,e,"processPlatform"),t.data.cmsList&&t.data.cmsList.length&&_worker._findProcessPlatformParse(t.data.cmsList,e,"cms"),t.data.portalList&&t.data.portalList.length&&_worker._findProcessPlatformParse(t.data.portalList,e,"portal"),t.data.queryList&&t.data.queryList.length&&_worker._findProcessPlatformParse(t.data.queryList,e,"query"),t.data.serviceList&&t.data.serviceList.length&&_worker._findProcessPlatformParse(t.data.serviceList,e,"service"),_worker._findOptionReply(),r++,this.filterOptionList.length>r?_worker._doFindDesigner(null,r):_worker._findCompletedReply()}),(function(e){_worker._findOptionReply(null),_worker._findMessageReply(null),r++,this.filterOptionList.length>r?_worker._doFindDesigner(null,r):_worker._findCompletedReply()}))},_worker._doFindDesignerFromFilterOption=function(){_worker._doFindDesigner(null,0)},onmessage=function(e){this.findData=e.data;var r=this.findData.filterOption.moduleList;this.findData.filterOption.moduleList=[],_worker._setFilterOptionRegex(),this.filterOptionTemplete=JSON.stringify(this.findData.filterOption),this.filterOptionList=[],Promise.all(_worker._parseFindModule(r)).then((function(){_worker._readyMessageReply(),_worker._doFindDesignerFromFilterOption()})),_worker._receiveMessageReply()};