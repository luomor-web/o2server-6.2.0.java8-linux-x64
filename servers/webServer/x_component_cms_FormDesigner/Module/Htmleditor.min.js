MWF.xApplication.cms.FormDesigner.Module=MWF.xApplication.cms.FormDesigner.Module||{},MWF.xDesktop.requireApp("process.FormDesigner","Module.Htmleditor",null,!1),MWF.xApplication.cms.FormDesigner.Module.Htmleditor=MWF.CMSFCHtmleditor=new Class({Extends:MWF.FCHtmleditor,Implements:[MWF.CMSFCMI],_initModule:function(){this.node.empty();var e=Object.clone(this.json.editorProperties);if(this.json.config&&this.json.config.code){MWF.require("MWF.xScript.CMSMacro",null,!1);var t=MWF.CMSMacro.exec(this.json.config.code,this);Object.each(t,(function(t,o){e[o]=t}))}this.loadCkeditor(e),this._setNodeProperty(),this.form.isSubform||this._createIconAction(),this._setNodeEvent()},loadCkeditor:function(e){COMMON.AjaxModule.load("ckeditor",function(){CKEDITOR.disableAutoInline=!0;var t=new Element("div").inject(this.node);this.json.templateCode&&t.set("html",this.json.templateCode);this.node.getSize().y;var o=e||{};"Mobile"==this.form.options.mode&&(o.toolbar=[{name:"paragraph",items:["Bold","Italic","-","TextColor","BGColor","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","-","Undo","Redo"]},{name:"basicstyles",items:["Styles","FontSize"]}]),o.skin&&(o.skin="moono-lisa"),this.editor=CKEDITOR.replace(t,o),this.editor.on("dataReady",(function(){this.editor.setReadOnly(!0)}),this)}.bind(this))}});