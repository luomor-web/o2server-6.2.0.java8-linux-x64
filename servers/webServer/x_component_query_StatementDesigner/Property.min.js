MWF.require("MWF.widget.Common",null,!1),MWF.require("MWF.widget.JsonTemplate",null,!1),MWF.xDesktop.requireApp("query.ViewDesigner","Property",null,!1),MWF.xApplication.query.StatementDesigner.Property=MWF.SDProperty=new Class({Extends:MWF.xApplication.query.ViewDesigner.Property,Implements:[Options,Events],options:{style:"default"},show:function(){this.propertyContent?this.propertyContent.setStyle("display","block"):this.getHtmlString(function(){this.htmlString&&(this.htmlString=o2.bindJson(this.htmlString,{lp:MWF.xApplication.query.StatementDesigner.LP.propertyTemplate}),this.JsonTemplate=new MWF.widget.JsonTemplate(this.data,this.htmlString),this.propertyContent=new Element("div",{styles:{overflow:"hidden"}}).inject(this.propertyNode),this.propertyContent.set("html",this.JsonTemplate.load()),this.setEditNodeEvent(),this.setEditNodeStyles(this.propertyContent),this.loadPropertyTab(),this.loadPersonInput(),this.loadPersonSelectInput(),this.loadViewFilter(),this.loadScriptArea(),this.loadColumnExportEditor(),this.loadJSONArea(),this.loadEventsEditor(),this.loadViewStylesArea(),this.loadPagingStylesArea(),this.loadActionStylesArea(),this.loadActionArea(),this.loadStylesList(),this.loadMaplist(),this.loadDataPathSelect())}.bind(this))},loadDataPathSelect:function(){this.propertyContent.getElements(".MWFDataPathSelect").each(function(t){t.empty();new Element("option",{text:"none",value:""}).inject(t);this.module.getColumnDataPath().each(function(e){new Element("option",{text:e,value:e,selected:this.data[name]==e}).inject(t)}.bind(this))}.bind(this))},loadViewFilter:function(){var t=this.propertyContent.getElements(".MWFViewFilter"),e=this.view.data.data.parameterList,i=this.view.data.data.customFilterList;t.each(function(t){MWF.xDesktop.requireApp("query.StatementDesigner","widget.ViewFilter",function(){var n=this;this.viewFilter=new MWF.xApplication.query.StatementDesigner.widget.ViewFilter(t,this.view.designer,{parameterData:e,customData:i},{onChange:function(t){var e=this.getData();n.changeJsonDate(["data","parameterList"],e.parameterData),n.changeJsonDate(["data","customFilterList"],e.customData)}})}.bind(this))}.bind(this))},loadActionArea:function(){MWF.xApplication.process=MWF.xApplication.process||{},MWF.APPFD=MWF.xApplication.process.FormDesigner=MWF.xApplication.process.FormDesigner||{},MWF.xDesktop.requireApp("process.FormDesigner","lp."+o2.language,null,!1),this.propertyContent.getElements(".MWFMultiActionArea").each(function(t){var e=t.get("name"),i=this.data[e];MWF.xDesktop.requireApp("process.FormDesigner","widget.ActionsEditor",function(){var n=new MWF.xApplication.process.FormDesigner.widget.ActionsEditor(t,this.designer,this.data,{maxObj:this.propertyNode.parentElement.parentElement.parentElement,systemToolsAddress:"../x_component_query_StatementDesigner/$Statement/toolbars.json",isSystemTool:!1,noEditShow:!0,noReadShow:!0,onChange:function(){this.data[e]=n.data,this.changeData(e)}.bind(this)});n.load(i)}.bind(this))}.bind(this)),this.propertyContent.getElements(".MWFActionArea").each(function(t){var e=t.get("name"),i=this.data[e];MWF.xDesktop.requireApp("process.FormDesigner","widget.ActionsEditor",function(){var n=new MWF.xApplication.process.FormDesigner.widget.ActionsEditor(t,this.designer,this.data,{maxObj:this.propertyNode.parentElement.parentElement,noEditShow:!0,noReadShow:!0,onChange:function(){this.data[e]=n.data,this.changeData(e)}.bind(this)});n.load(i)}.bind(this))}.bind(this)),this.propertyContent.getElements(".MWFDefaultActionArea").each(function(t){var e=t.get("name"),i=this.data[e]||this.module.defaultToolBarsData;MWF.xDesktop.requireApp("process.FormDesigner","widget.ActionsEditor",function(){var n=new MWF.xApplication.process.FormDesigner.widget.ActionsEditor(t,this.designer,this.data,{maxObj:this.propertyNode.parentElement.parentElement,isSystemTool:!0,systemToolsAddress:"../x_component_query_StatementDesigner/$Statement/toolbars.json",noCreate:!0,noDelete:!1,noCode:!0,noReadShow:!0,noEditShow:!0,onChange:function(){this.data[e]=n.data,this.changeData(e)}.bind(this)});n.load(i)}.bind(this))}.bind(this))}});