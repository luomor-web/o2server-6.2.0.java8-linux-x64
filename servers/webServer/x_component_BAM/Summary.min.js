MWF.xApplication.BAM.summary=MWF.xApplication.BAM.summary||{},MWF.xApplication.BAM.Summary=new Class({Implements:[Options,Events],options:{style:"default"},initialize:function(t,a,e){this.setOptions(e),this.app=t,this.css=this.app.css,this.lp=this.app.lp,this.container=$(a),this.actions=this.app.actions,this.categoryDataLoaded=!1,this.organizationDataLoaded=!1,this.overviewDataLoaded=!1,this.load()},load:function(){this.loadSummaryLayout(),this.loadSummary()},loadSummaryLayout:function(){this.overviewAreaNode=new Element("div",{styles:this.css.overviewAreaNode}).inject(this.container),this.taskAreaNode=new Element("div",{styles:this.css.taskAreaNode}).inject(this.container),this.countAreaNode=new Element("div",{styles:this.css.countAreaNode}).inject(this.container),this.taskDashboardAreaNode=new Element("div",{styles:this.css.taskDashboardAreaNode}).inject(this.taskAreaNode),this.taskRankAreaNode=new Element("div",{styles:this.css.taskRankAreaNode}).inject(this.taskAreaNode),this.taskContentAreaNode=new Element("div",{styles:this.css.taskContentAreaNode}).inject(this.countAreaNode),this.taskCompletedContentAreaNode=new Element("div",{styles:this.css.taskCompletedContentAreaNode}).inject(this.countAreaNode),this.workContentAreaNode=new Element("div",{styles:this.css.workContentAreaNode}).inject(this.countAreaNode),this.workCompletedContentAreaNode=new Element("div",{styles:this.css.workCompletedContentAreaNode}).inject(this.countAreaNode)},checkLoadDataCompleted:function(){this.overviewDataLoaded&&this.categoryDataLoaded&&this.organizationDataLoaded&&this.fireEvent("loaded")},loadSummary:function(){this.loadOverviewData(function(){this.loadOverview(),this.overviewDataLoaded=!0,this.checkLoadDataCompleted()}.bind(this)),this.loadCategoryData(function(){this.loadTaskDashboard(),this.loadTaskContent(),this.loadTaskCompletedContent(),this.loadWorkContent(),this.loadWorkCompletedContent(),this.categoryDataLoaded=!0,this.checkLoadDataCompleted()}.bind(this)),this.loadOrganizationData(function(){this.loadTaskRank(),this.organizationDataLoaded=!0,this.checkLoadDataCompleted()}.bind(this))},loadOverviewData:function(t){this.actions.summary(function(a){this.summaryData=a.data,t&&t()}.bind(this))},loadOverview:function(){MWF.xDesktop.requireApp("BAM","summary.Overview",function(){this.summaryChart=new MWF.xApplication.BAM.summary.Overview(this,this.overviewAreaNode,this.summaryData)}.bind(this))},loadTaskRank:function(){MWF.xDesktop.requireApp("BAM","summary.TaskRank",function(){this.rankChart=new MWF.xApplication.BAM.summary.TaskRank(this,this.taskRankAreaNode)}.bind(this))},loadTaskDashboard:function(){MWF.xDesktop.requireApp("BAM","summary.TaskDashboard",function(){this.dashboardChart=new MWF.xApplication.BAM.summary.TaskDashboard(this,this.taskDashboardAreaNode)}.bind(this))},loadTaskContent:function(){MWF.xDesktop.requireApp("BAM","summary.TaskContent",function(){this.taskChart=new MWF.xApplication.BAM.summary.TaskContent(this,this.taskContentAreaNode)}.bind(this))},loadTaskCompletedContent:function(){MWF.xDesktop.requireApp("BAM","summary.TaskCompletedContent",function(){this.taskCompletedChart=new MWF.xApplication.BAM.summary.TaskCompletedContent(this,this.taskCompletedContentAreaNode,this.scalingData)}.bind(this))},loadWorkContent:function(){MWF.xDesktop.requireApp("BAM","summary.WorkContent",function(){this.workChart=new MWF.xApplication.BAM.summary.WorkContent(this,this.workContentAreaNode,this.scalingData)}.bind(this))},loadWorkCompletedContent:function(){MWF.xDesktop.requireApp("BAM","summary.WorkCompletedContent",function(){this.workCompletedChart=new MWF.xApplication.BAM.summary.WorkCompletedContent(this,this.workCompletedContentAreaNode,this.scalingData)}.bind(this))},loadRunningData:function(t){this.runningData?t&&t():this.actions.loadRunning(function(a){this.runningData=a.data,t&&t()}.bind(this))},loadOrganizationData:function(t){this.organizationData={},this.actions.loadOrganization(function(a){this.organizationData=a.data,t&&t()}.bind(this))},loadCategoryData:function(t){this.categoryData={application:[],process:[],activity:[]},this.actions.loadCategory(function(a){this.categoryData=a.data,t&&t()}.bind(this))},destroy:function(){this.summaryChart&&this.summaryChart.destroy(),this.rankChart&&this.rankChart.destroy(),this.dashboardChart&&this.dashboardChart.destroy(),this.taskChart&&this.taskChart.destroy(),this.taskCompletedChart&&this.taskCompletedChart.destroy(),this.workChart&&this.workChart.destroy(),this.workCompletedChart&&this.workCompletedChart.destroy(),this.container.empty(),MWF.release(this)}});