MWF.xApplication.process.FormDesigner.Module=MWF.xApplication.process.FormDesigner.Module||{},MWF.xDesktop.requireApp("process.FormDesigner","Module.$Element",null,!1),MWF.xApplication.process.FormDesigner.Module.Attachment=MWF.FCAttachment=new Class({Extends:MWF.FC$Element,Implements:[Options,Events],options:{style:"default",propertyPath:"../x_component_process_FormDesigner/Module/Attachment/attachment.html"},initialize:function(t,e){this.setOptions(e),this.path="../x_component_process_FormDesigner/Module/Attachment/",this.cssPath="../x_component_process_FormDesigner/Module/Attachment/"+this.options.style+"/css.wcss",this._loadCss(),this.moduleType="element",this.moduleName="attachment",this.form=t,this.container=null,this.containerNode=null},setTemplateStyles:function(t){this.json.style=t.style||"default"},clearTemplateStyles:function(t){this.json.style="default"},_createMoveNode:function(){this.moveNode=new Element("div",{MWFType:"itmleditor",id:this.json.id,styles:this.css.moduleNodeMove,events:{selectstart:function(){return!1}}}).inject(this.form.container)},_createNode:function(){this.node=this.moveNode.clone(!0,!0),this.node.setStyles(this.css.moduleNode),this.node.set("id",this.json.id),this.node.addEvent("selectstart",(function(t){t.preventDefault()}))},_setEditStyle_custom:function(t){"size"==t?"min"==this.json[t]?this.attachmentController.changeControllerSizeToMin():this.attachmentController.changeControllerSizeToMax():"toolbarGroupHidden"==t?this.attachmentController.resetToolbarGroupHidden(this.json[t]):"availableListStyles"==t&&this.attachmentController.resetToolbarAvailableListStyle(this.json[t])},_initModule:function(){this.node.empty(),this.parentContainer&&["datagrid$Data","datatable$Data"].contains(this.parentContainer.json.moduleName)&&!this.json.size&&(this.json.size="min"),this.parentContainer&&["datagrid$Data","datatable$Data"].contains(this.parentContainer.json.moduleName)&&!this.json.listStyle&&(this.json.listStyle="sequence"),this.loadAttachmentController(this.json.editorProperties),this.setPropertiesOrStyles("styles"),this._setNodeProperty(),this.form.isSubform||this._createIconAction(),this._setNodeEvent()},loadAttachmentController:function(){MWF.require("MWF.widget.AttachmentController",function(){this.attachmentController=new MWF.widget.ATTER(this.node,this,{readonly:!0,size:this.json.size,toolbarGroupHidden:this.json.toolbarGroupHidden||[],availableListStyles:this.json.availableListStyles||["list","seq","icon","preview"]}),this.attachmentController.load()}.bind(this))}});