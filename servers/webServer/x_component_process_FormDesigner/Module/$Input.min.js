MWF.xApplication.process.FormDesigner.Module=MWF.xApplication.process.FormDesigner.Module||{},MWF.xDesktop.requireApp("process.FormDesigner","Module.$Element",null,!1),MWF.xApplication.process.FormDesigner.Module.$Input=MWF.FC$Input=new Class({Extends:MWF.FC$Element,Implements:[Options,Events],options:{style:"default",type:"textfield",path:"../x_component_process_FormDesigner/Module/Textfield/",propertyPath:"../x_component_process_FormDesigner/Module/Textfield/textfield.html"},initialize:function(e,s){this.setOptions(s),this.path=this.options.path,this.cssPath=this.path+this.options.style+"/css.wcss",this._loadCss(),this.moduleType="element",this.moduleName=this.options.type,this.form=e,this.container=null,this.containerNode=null},clearTemplateStyles:function(e){e&&(e.styles&&this.removeStyles(e.styles,"styles"),e.inputStyles&&this.removeStyles(e.inputStyles,"inputStyles"),e.properties&&this.removeStyles(e.properties,"properties"))},setTemplateStyles:function(e){e.styles&&this.copyStyles(e.styles,"styles"),e.inputStyles&&this.copyStyles(e.inputStyles,"inputStyles"),e.properties&&this.copyStyles(e.properties,"properties")},_resetModuleDomNode:function(){if(this.json.preprocessing){this.node.empty();new Element("div",{styles:this.css.textfieldIcon}).inject(this.node),new Element("div",{styles:this.css.moduleText,text:this.json.id}).inject(this.node)}},_createMoveNode:function(){this.moveNode=new Element("div",{MWFType:"textfield",id:this.json.id,styles:this.css.moduleNodeMove,events:{selectstart:function(){return!1}}}).inject(this.form.container);new Element("div",{styles:this.css.textfieldIcon}).inject(this.moveNode),new Element("div",{styles:this.css.moduleText,text:this.json.id}).inject(this.moveNode)},setPropertiesOrStyles:function(e){if("styles"==e)try{this.setCustomStyles()}catch(e){}if("inputStyles"==e)try{this.setCustomInputStyles()}catch(e){}"properties"==e&&this.node.setProperties(this.json.properties)},_loadNodeStyles:function(){var e=this.node.getFirst("div"),s=this.node.getLast("div");e||(e=new Element("div").inject(this.node,"top")),s||(s=new Element("div").inject(this.node,"bottom")),e.setStyles(this.css.textfieldIcon),s.setStyles(this.css.moduleText)},_getCopyNode:function(){return this.copyNode||this._createCopyNode(),this.copyNode.setStyle("display","inline-block"),this.copyNode},_setEditStyle_custom:function(e){"id"==e&&this.node.getLast().set("text",this.json.id)},_preprocessingModuleData:function(){this.node.clearStyles(),this.recoveryIconNode=this.node.getFirst(),this.recoveryIconNode.dispose(),this.recoveryTextNode=this.node.getFirst(),this.recoveryTextNode.dispose();var e=new Element("input",{styles:{background:"transparent",width:"100%",border:"0px"}}).inject(this.node);(this.node.setStyles({overflow:"hidden",position:"relative","margin-right":"20px","padding-right":"4px"}),this.json.styles&&(this.json.recoveryStyles=Object.clone(this.json.styles),this.json.recoveryStyles&&Object.each(this.json.recoveryStyles,function(e,s){-1==e.indexOf("x_processplatform_assemble_surface")&&-1==e.indexOf("x_portal_assemble_surface")&&(this.node.setStyle(s,e),delete this.json.styles[s])}.bind(this))),this.json.inputStyles)&&(this.json.recoveryInputStyles=Object.clone(this.json.inputStyles),(e=this.node.getFirst())&&this.json.recoveryInputStyles&&Object.each(this.json.recoveryInputStyles,function(s,t){-1==s.indexOf("x_processplatform_assemble_surface")&&-1==s.indexOf("x_portal_assemble_surface")&&(e.setStyle(t,s),delete this.json.inputStyles[t])}.bind(this)));this.json.preprocessing="y"},_recoveryModuleData:function(){this.json.recoveryStyles&&(this.json.styles=this.json.recoveryStyles),this.json.recoveryInputStyles&&(this.json.inputStyles=this.json.recoveryInputStyles),this.recoveryTextNode&&(this.node.empty(),this.recoveryTextNode.inject(this.node,"top")),this.recoveryIconNode&&this.recoveryIconNode.inject(this.node,"top"),this.json.recoveryStyles=null,this.json.recoveryInputStyles=null,this.recoveryIconNode=null,this.recoveryTextNode=null},setCustomStyles:function(){this._recoveryModuleData(),this.node.clearStyles(),this.node.setStyles(this.css.moduleNode),this.initialStyles&&this.node.setStyles(this.initialStyles),this.json.styles&&Object.each(this.json.styles,function(e,s){if(-1!=e.indexOf("x_processplatform_assemble_surface")||-1!=e.indexOf("x_portal_assemble_surface")){var t=MWF.Actions.getHost("x_processplatform_assemble_surface"),o=MWF.Actions.getHost("x_portal_assemble_surface");-1!==e.indexOf("/x_processplatform_assemble_surface")?e=e.replace("/x_processplatform_assemble_surface",t+"/x_processplatform_assemble_surface"):-1!==e.indexOf("x_processplatform_assemble_surface")&&(e=e.replace("x_processplatform_assemble_surface",t+"/x_processplatform_assemble_surface")),-1!==e.indexOf("/x_portal_assemble_surface")?e=e.replace("/x_portal_assemble_surface",o+"/x_portal_assemble_surface"):-1!==e.indexOf("x_portal_assemble_surface")&&(e=e.replace("x_portal_assemble_surface",o+"/x_portal_assemble_surface")),e=o2.filterUrl(e)}s.test(/^border\w*/gi)||s&&("display"===s.toString().toLowerCase()?"none"===e.toString().toLowerCase()?this.node.setStyle("opacity",.3):(this.node.setStyle("opacity",1),this.node.setStyle(s,e)):this.node.setStyle(s,e))}.bind(this))},setCustomInputStyles:function(){this._recoveryModuleData();var e=this.node.getLast();e&&(e.clearStyles(),e.setStyles(this.css.moduleText),this.json.inputStyles&&Object.each(this.json.inputStyles,function(s,t){if(-1!=s.indexOf("x_processplatform_assemble_surface")||-1!=s.indexOf("x_portal_assemble_surface")){var o=MWF.Actions.getHost("x_processplatform_assemble_surface"),i=MWF.Actions.getHost("x_portal_assemble_surface");-1!==s.indexOf("/x_processplatform_assemble_surface")?s=s.replace("/x_processplatform_assemble_surface",o+"/x_processplatform_assemble_surface"):-1!==s.indexOf("x_processplatform_assemble_surface")&&(s=s.replace("x_processplatform_assemble_surface",o+"/x_processplatform_assemble_surface")),-1!==s.indexOf("/x_portal_assemble_surface")?s=s.replace("/x_portal_assemble_surface",i+"/x_portal_assemble_surface"):-1!==s.indexOf("x_portal_assemble_surface")&&(s=s.replace("x_portal_assemble_surface",i+"/x_portal_assemble_surface")),s=o2.filterUrl(s)}t.test(/^border\w*/gi)||t&&("display"===t.toString().toLowerCase()?"none"===s.toString().toLowerCase()?e.setStyle("opacity",.3):(e.setStyle("opacity",1),e.setStyle(t,s)):e.setStyle(t,s))}.bind(this)))}});