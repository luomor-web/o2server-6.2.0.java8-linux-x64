MWF.xApplication.process.FormDesigner.Module=MWF.xApplication.process.FormDesigner.Module||{},MWF.xDesktop.requireApp("process.FormDesigner","Module.$Container",null,!1),MWF.xDesktop.requireApp("process.FormDesigner","Module.$Component",null,!1),MWF.xApplication.process.FormDesigner.Module.Datatemplate=MWF.FCDatatemplate=new Class({Extends:MWF.FC$Container,Implements:[Options,Events],options:{style:"default",propertyPath:"../x_component_process_FormDesigner/Module/Datatemplate/datatemplate.html"},initialize:function(e,t){this.setOptions(t),this.path="../x_component_process_FormDesigner/Module/Datatemplate/",this.cssPath="../x_component_process_FormDesigner/Module/Datatemplate/"+this.options.style+"/css.wcss",this._loadCss(),this.moduleType="container",this.moduleName="datatemplate",this.form=e},clearTemplateStyles:function(e){e&&(e.styles&&this.removeStyles(e.styles,"styles"),e.properties&&this.removeStyles(e.properties,"properties"))},setTemplateStyles:function(e){e.styles&&this.copyStyles(e.styles,"styles"),e.properties&&this.copyStyles(e.properties,"properties")},_createMoveNode:function(){this.moveNode=new Element("div",{MWFType:"datatemplate",id:this.json.id,styles:this.css.moduleNodeMove,events:{selectstart:function(){return!1}}}).inject(this.form.container)},_initModule:function(){this.initialized||("yes"!==this.json.initialized&&this.setStyleTemplate(),this.setPropertiesOrStyles("styles"),this.setPropertiesOrStyles("properties"),this.json.impExpTableStyles||this.setImpExpTableStyles(),this._setNodeProperty(),this.form.isSubform||this._createIconAction(),this._setNodeEvent(),this.initialized=!0,this.json.initialized="yes")},setImpExpTableStyles:function(){this.form.templateStyles&&this.form.templateStyles.table&&(this.json.impExpTableStyles=Object.merge(this.json.impExpTableStyles||{},this.form.templateStyles.table.styles||{}),this.json.impExpTableTitleStyles=Object.merge(this.json.impExpTableTitleStyles||{},this.form.templateStyles.table.titleStyles||{}),this.json.impExpTableContentStyles=Object.merge(this.json.impExpTableContentStyles||{},this.form.templateStyles.table.contentStyles||{}),this.json.impExpTableProperties=Object.merge(this.json.impExpTableProperties||{},this.form.templateStyles.table.properties||{}))},setPropertiesOrStyles:function(e){if("styles"==e){var t=this.node.getStyle("border");this.node.clearStyles(),this.node.setStyles(this.css.moduleNode),this.node.setStyle("border",t),Object.each(this.json.styles,function(e,t){t.test(/^border\w*/gi)||this.node.setStyle(t,e)}.bind(this))}"properties"==e&&this.node.setProperties(this.json.properties)},_setEditStyle_custom:function(e,t,s){},setAllStyles:function(){this.setPropertiesOrStyles("styles"),this.setPropertiesOrStyles("properties"),this.setImpExpTableStyles(),this.reloadMaplist()},getContainerNodes:function(){return this.node.getElements("td")},copyComponentJsonData:function(e,t){var s=e.getElements("td"),i=e.getElements("th");s.each(function(e,s){var i=Object.clone(this.containers[s].json);i.id=this.containers[s]._getNewId(t),this.form.json.moduleList[i.id]=i,e.set("id",i.id)}.bind(this)),i.each(function(e,s){var i=Object.clone(this.elements[s].json);i.id=this.elements[s]._getNewId(t),this.form.json.moduleList[i.id]=i,e.set("id",i.id)}.bind(this))}});