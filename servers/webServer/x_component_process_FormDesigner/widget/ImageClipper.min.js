MWF.xApplication.process.FormDesigner.widget=MWF.xApplication.process.FormDesigner.widget||{},MWF.require("MWF.widget.ImageClipper",null,!1),MWF.xApplication.process.FormDesigner.widget.ImageClipper=new Class({Implements:[Options,Events],Extends:MWF.widget.Common,options:{title:"Select Image",style:"default",width:"92",height:"73",referenceType:"",reference:"",imageUrl:""},initialize:function(e,t){this.setOptions(t),this.app=e,this.path="../x_component_process_FormDesigner/widget/$ImageClipper/",this.cssPath="../x_component_process_FormDesigner/widget/$ImageClipper/"+this.options.style+"/css.wcss",this._loadCss()},load:function(e){this.data=e;var t={},i=t.width||"770",s=t.height||"580";i=i.toInt(),s=s.toInt();var o=this.app.content.getSize(),n=(o.x-i)/2,a=(o.y-s)/2;n<0&&(n=0),a<0&&(a=0),layout.mobile&&(n=20,a=0);var p=this;MWF.require("MWF.xDesktop.Dialog",function(){var e=new MWF.xDesktop.Dialog({title:this.options.title||"Select Image",style:t.style||"image",top:a,left:n-20,fromTop:a,fromLeft:n-20,width:i,height:s,html:"<div></div>",maskNode:this.app.content,container:this.app.content,buttonList:[{text:MWF.LP.process.button.ok,action:function(){p.image.uploadImage(function(e){p.imageSrc=MWF.xDesktop.getImageSrc(e.id),p.imageId=e.id,p.fireEvent("change"),this.close()}.bind(this)),this.close()}},{text:MWF.LP.process.button.cancel,action:function(){this.close()}}]});e.show(),this.image=new MWF.widget.ImageClipper(e.content.getFirst(),{aspectRatio:this.options.width.toInt()/this.options.height.toInt(),imageUrl:this.options.imageUrl,reference:this.options.reference,referenceType:this.options.referenceType,resetEnable:!0}),this.image.load(this.data)}.bind(this))},uploadImage:function(){}});