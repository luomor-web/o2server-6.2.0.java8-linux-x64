MWF.xApplication.Selector=MWF.xApplication.Selector||{},MWF.xDesktop.requireApp("Selector","Person",null,!1),MWF.xApplication.Selector.CMSView=new Class({Extends:MWF.xApplication.Selector.Person,options:{style:"default",count:0,title:"",values:[],names:[],expand:!1,forceSearchInItem:!0},setInitTitle:function(){this.options.title||this.setOptions({title:MWF.xApplication.Selector.LP.selectView})},_init:function(){this.selectType="cmsview",this.className="CMSView"},loadSelectItems:function(e){this.cmsAction.listCMSApplicationView(function(e){e.data.length&&e.data.each(function(e){if(e.queryViews&&e.queryViews.length){var t=this._newItemCategory(e,this,this.itemAreaNode);e.queryViews.each(function(i){i.applicationName=e.appName;var n=this._newItem(i,this,t.children);this.items.push(n)}.bind(this))}}.bind(this))}.bind(this))},_scrollEvent:function(e){return!0},_getChildrenItemIds:function(e){return e.queryViews||[]},_newItemCategory:function(e,t,i,n){return new MWF.xApplication.Selector.CMSView.ItemCategory(e,t,i,n)},_listItemByKey:function(e,t,i){return!1},_getItem:function(e,t,i,n){this.cmsAction.getQueryView(function(t){e&&e.apply(this,[t])}.bind(this),t,"string"===typeOf(i)?i:i.id,n)},_newItemSelected:function(e,t,i){return new MWF.xApplication.Selector.CMSView.ItemSelected(e,t,i)},_listItemByPinyin:function(e,t,i){return!1},_newItem:function(e,t,i,n){return new MWF.xApplication.Selector.CMSView.Item(e,t,i,n)}}),MWF.xApplication.Selector.CMSView.Item=new Class({Extends:MWF.xApplication.Selector.Person.Item,_getShowName:function(){return this.data.name},_setIcon:function(){this.iconNode.setStyle("background-image","url(../x_component_Selector/$Selector/default/icon/processicon.png)")},loadSubItem:function(){return!1},checkSelectedSingle:function(){this.selector.options.values.filter(function(e,t){return"object"===typeOf(e)?this.data.id&&e.id?this.data.id===e.id:this.data.name===e.name:"string"===typeOf(e)&&(this.data.id===e||this.data.name===e)}.bind(this)).length&&this.selectedSingle()},checkSelected:function(){var e=this.selector.selectedItems.filter(function(e,t){return e.data.id&&this.data.id?e.data.id===this.data.id:e.data.name===this.data.name}.bind(this));e.length&&(e[0].addItem(this),this.selectedItem=e[0],this.setSelected())}}),MWF.xApplication.Selector.CMSView.ItemSelected=new Class({Extends:MWF.xApplication.Selector.Person.ItemSelected,_getShowName:function(){return this.data.name},_setIcon:function(){this.iconNode.setStyle("background-image","url(../x_component_Selector/$Selector/default/icon/processicon.png)")},check:function(){if(this.selector.items.length){var e=this.selector.items.filter(function(e,t){return e.data.id===this.data.id||e.data.name===this.data.name}.bind(this));this.items=e,e.length&&e.each(function(e){e.selectedItem=this,e.setSelected()}.bind(this))}}}),MWF.xApplication.Selector.CMSView.ItemCategory=new Class({Extends:MWF.xApplication.Selector.Person.ItemCategory,_getShowName:function(){return this.data.appName},createNode:function(){this.node=new Element("div",{styles:this.selector.css.selectorItemCategory_department}).inject(this.container)},_setIcon:function(){this.iconNode.setStyle("background-image","url(../x_component_Selector/$Selector/default/icon/applicationicon.png)")},_hasChild:function(){return this.data.queryViews&&this.data.queryViews.length},check:function(){}});