MWF.xAction.RestActions.Action.x_processplatform_assemble_designer=new Class({Extends:MWF.xAction.RestActions.Action,getId:function(i,e,a,t){this.action.invoke({name:"getId",async:t,parameter:{count:i},success:e,failure:a})},getUUID:function(i,e){var a=!1!==e,t="";return this.action.invoke({name:"getId",async:a,parameter:{count:"1"},success:function(e){t=e.data[0].id,i&&i(t)},failure:null}),t},listApplication:function(i,e,a,t){i?this.action.invoke({name:"listApplicationByCategory",async:t,parameter:{applicationCategory:i},success:e,failure:a}):this.action.invoke({name:"listApplication",async:t,success:e,failure:a})},listApplicationSummary:function(i,e,a,t){i?this.action.invoke({name:"listApplicationByCategorySummary",async:t,parameter:{applicationCategory:i},success:e,failure:a}):this.action.invoke({name:"listApplicationSummary",async:t,success:e,failure:a})},listApplicationCategory:function(i,e,a){this.action.invoke({name:"listApplicationCategory",async:a,success:i,failure:e})},getApplication:function(i,e,a,t){this.action.invoke({name:"getApplication",async:t,parameter:{id:i},success:e,failure:a})},saveApplication:function(i,e,a){i.id?this.updateApplication(i,e,a):this.addApplication(i,e,a)},updateApplication:function(i,e,a){this.action.invoke({name:"updataApplication",data:i,parameter:{id:i.id},success:e,failure:a})},addApplication:function(i,e,a){this.getId(1,function(t){i.id=t.data[0].id,this.action.invoke({name:"addApplication",data:i,success:e,failure:a})}.bind(this))},changeApplicationIcon:function(i,e,a,t,n){this.action.invoke({name:"updateApplicationIcon",parameter:{id:i},data:t,file:n,success:e,failure:a})},listProcess:function(i,e,a,t){this.action.invoke({name:"listProcess",async:t,parameter:{id:i},success:e,failure:a})},listForm:function(i,e,a,t){this.action.invoke({name:"listForm",async:t,parameter:{id:i},success:e,failure:a})},listDictionary:function(i,e,a,t){this.action.invoke({name:"listDictionary",async:t,parameter:{application:i},success:e,failure:a})},listScript:function(i,e,a,t){this.action.invoke({name:"listScript",async:t,parameter:{id:i},success:e,failure:a})},listView:function(i,e,a,t){this.action.invoke({name:"listView",async:t,parameter:{id:i},success:e,failure:a})},listStat:function(i,e,a,t){this.action.invoke({name:"listStat",async:t,parameter:{id:i},success:e,failure:a})},listFormField:function(i,e,a,t){this.action.invoke({name:"listFormField",async:t,parameter:{id:i},success:e,failure:a})},listFormTemplate:function(i,e,a){this.action.invoke({name:"listFormTemplate",async:a,success:i,failure:e})},listFormTemplateCategory:function(i,e,a){this.action.invoke({name:"listFormTemplateCategory",async:a,success:i,failure:e})},listFormTemplatByCategory:function(i,e,a){this.action.invoke({name:"listFormTemplatByCategory",async:a,success:i,failure:e})},getForm:function(i,e,a,t){this.action.invoke({name:"getForm",async:t,parameter:{id:i},success:e,failure:a})},getView:function(i,e,a,t){this.action.invoke({name:"getView",async:t,parameter:{id:i},success:e,failure:a})},getStat:function(i,e,a,t){this.action.invoke({name:"getStat",async:t,parameter:{id:i},success:e,failure:a})},getProcess:function(i,e,a,t){this.action.invoke({name:"getProcess",async:t,parameter:{id:i},success:e,failure:a})},getDictionary:function(i,e,a,t){this.action.invoke({name:"getDictionary",async:t,parameter:{applicationDict:i},success:e,failure:a})},getScript:function(i,e,a,t){this.action.invoke({name:"getScript",async:t,parameter:{id:i},success:e,failure:a})},getScriptByName:function(i,e,a,t,n){this.action.invoke({name:"getScriptByName",async:n,parameter:{name:i,applicationId:e},success:a,failure:t})},getFormTemplate:function(i,e,a,t){this.action.invoke({name:"getFormTemplate",async:t,parameter:{id:i},success:e,failure:a})},saveProcess:function(i,e,a){i.isNewProcess?this.addProcess(i,e,a):this.updateProcess(i,e,a)},addProcess:function(i,e,a){this.action.invoke({name:"addProcess",data:i,parameter:{id:i.categoryId},success:e,failure:a})},updateProcess:function(i,e,a){this.action.invoke({name:"updataProcess",data:i,parameter:{id:i.id},success:e,failure:a})},deleteProcess:function(i,e,a,t){this.action.invoke({name:"removeProcess",async:t,parameter:{id:i},success:e,failure:a})},saveFile:function(i,e,a,t){i.id?this.updataFile(i.id,i,e,a,t):this.getUUID(function(n){i.id=n,this.addFile(i,e,a,t)}.bind(this),!1)},saveForm:function(i,e,a,t,n){i.isNewForm?this.addForm(i,e,a,t,n):this.updateForm(i,e,a,t,n)},updateForm:function(i,e,a,t,n){var s,o;i&&(s=MWF.encodeJsonString(JSON.encode(i))),e&&(o=MWF.encodeJsonString(JSON.encode(e)));var c=null;i&&i.json.includeScripts&&i.json.includeScripts.length&&(c={},i.json.includeScripts.each((function(i){c[i.id]="process"===i.appType?"processPlatform":i.appType})));var r=null;e&&e.json.includeScripts&&e.json.includeScripts.length&&(r={},e.json.includeScripts.each((function(i){r[i.id]="process"===i.appType?"processPlatform":i.appType}))),a||(dataTypes={string:["htmledit","radio","select","textarea","textfield"],person:["personfield","orgfield","org"],date:["calender"],number:["number"],array:["checkbox"]},a=[],Object.keys(i.json.moduleList).forEach(function(e){var t=i.json.moduleList[e],n="";for(k in dataTypes)if(-1!=dataTypes[k].indexOf(t.type.toLowerCase())){n=k;break}n&&a.push({name:t.id,dataType:n})}.bind(this)));var d={id:i.json.id,name:i.json.name,alias:i.json.name,hasMobile:!1,description:i.json.description,application:i.json.application,category:i.json.category,icon:i.json.formIcon,formFieldList:a,relatedScriptMap:c,relatedFormList:i&&i.json.subformList?i.json.subformList:[],mobileRelatedScriptMap:r,mobileRelatedFormList:e&&e.json.subformList?e.json.subformList:[]};e&&e.json.moduleList&&(Object.keys(e.json.moduleList).length?d.hasMobile=!0:d.hasMobile=!1),i&&(d.data=s),e&&(d.mobileData=o),this.action.invoke({name:"updataForm",data:d,parameter:{id:i.json.id},success:t,failure:n})},addForm:function(i,e,a,t,n){var s,o;if(i.json.id){i&&(s=MWF.encodeJsonString(JSON.encode(i))),e&&!e.json.id&&(e.json.id=i.json.id),e&&(o=MWF.encodeJsonString(JSON.encode(e)));var c={id:i.json.id,name:i.json.name,alias:i.json.name,hasMobile:!1,description:i.json.description,application:i.json.application,category:i.json.category};e&&e.json.moduleList&&(Object.keys(e.json.moduleList).length?c.hasMobile=!0:c.hasMobile=!1),i&&(c.data=s),e&&(c.mobileData=o),this.action.invoke({name:"addForm",data:c,parameter:{id:i.json.categoryId},success:t,failure:n})}else this.getUUID(function(c){i.json.id=c,i&&(s=MWF.encodeJsonString(JSON.encode(i))),e&&!e.json.id&&(e.json.id=c),e&&(o=MWF.encodeJsonString(JSON.encode(e)));var r=null;i&&i.json.includeScripts&&i.json.includeScripts.length&&(r={},i.json.includeScripts.each((function(i){r[i.id]="process"===i.appType?"processPlatform":i.appType})));var d=null;e&&e.json.includeScripts&&e.json.includeScripts.length&&(d={},e.json.includeScripts.each((function(i){d[i.id]="process"===i.appType?"processPlatform":i.appType})));var u={id:i.json.id,name:i.json.name,alias:i.json.name,hasMobile:!1,description:i.json.description,application:i.json.application,category:i.json.category,icon:i.json.formIcon,formFieldList:a,relatedScriptMap:r,relatedFormList:i&&i.json.subformList?i.json.subformList:[],mobileRelatedScriptMap:d,mobileRelatedFormList:e&&e.json.subformList?e.json.subformList:[]};e&&e.json.moduleList&&(Object.keys(e.json.moduleList).length?u.hasMobile=!0:u.hasMobile=!1),i&&(u.data=s),e&&(u.mobileData=o),this.action.invoke({name:"addForm",data:u,parameter:{id:i.json.categoryId},success:t,failure:n})}.bind(this))},deleteForm:function(i,e,a,t){this.action.invoke({name:"removeForm",async:t,parameter:{id:i},success:e,failure:a})},addFormTemplate:function(i,e,a,t,n){var s,o;this.getUUID(function(c){if(a.id=c,i){var r=Object.clone(i);r.json.id=c,r.json.name=a.name,s=MWF.encodeJsonString(JSON.encode(r))}if(e){var d=Object.clone(e);d.json.id=c,d.json.name=a.name,o=MWF.encodeJsonString(JSON.encode(d))}i&&(a.data=s),e&&(a.mobileData=o),this.action.invoke({name:"addFormTemplate",data:a,success:t,failure:n})}.bind(this))},deleteFormTemplate:function(i,e,a,t){this.action.invoke({name:"deleteFormTemplate",async:t,parameter:{id:i},success:e,failure:a})},saveView:function(i,e,a){i.isNewView?(i.isNewView=!1,this.addView(i,e,a)):this.updateView(i,e,a)},updateView:function(i,e,a){var t=i.data;i.data=JSON.encode(i.data),this.action.invoke({name:"updataView",data:i,parameter:{id:i.id},success:e,failure:a}),i.data=t},addView:function(i,e,a){var t=i.data;i.data=JSON.encode(i.data),t.id?(this.action.invoke({name:"addView",data:i,success:e,failure:a}),i.data=t):this.getUUID(function(n){i.id=n,this.action.invoke({name:"addView",data:i,success:e,failure:a}),i.data=t}.bind(this))},saveStat:function(i,e,a){i.isNewView?(i.isNewView=!1,this.addStat(i,e,a)):this.updateStat(i,e,a)},updateStat:function(i,e,a){var t=i.data;i.data=JSON.encode(i.data),this.action.invoke({name:"updataStat",data:i,parameter:{id:i.id},success:e,failure:a}),i.data=t},addStat:function(i,e,a){var t=i.data;i.data=JSON.encode(i.data),t.id?(this.action.invoke({name:"addView",data:i,success:e,failure:a}),i.data=t):this.getUUID(function(n){i.id=n,this.action.invoke({name:"addStat",data:i,success:e,failure:a}),i.data=t}.bind(this))},deleteView:function(i,e,a,t){this.action.invoke({name:"removeView",async:t,parameter:{id:i},success:e,failure:a})},deleteStat:function(i,e,a,t){this.action.invoke({name:"removeStat",async:t,parameter:{id:i},success:e,failure:a})},saveDictionary:function(i,e,a){i.id?this.updateDictionary(i,e,a):this.addDictionary(i,e,a)},updateDictionary:function(i,e,a){this.action.invoke({name:"updataDictionary",data:i,parameter:{applicationDict:i.id},success:e,failure:a})},addDictionary:function(i,e,a){if(i.id)this.action.invoke({name:"addDictionary",data:i,success:e,failure:a});else{var t=Object.clone(i);this.getUUID(function(i){t.id=i,this.action.invoke({name:"addDictionary",data:t,success:e,failure:a})}.bind(this))}},deleteDictionary:function(i,e,a,t){this.action.invoke({name:"removeDictionary",async:t,parameter:{applicationDict:i},success:e,failure:a})},saveScript:function(i,e,a){i.isNewScript?this.addScript(i,e,a):this.updateScript(i,e,a)},updateScript:function(i,e,a){this.action.invoke({name:"updataScript",data:i,parameter:{id:i.id},success:e,failure:a})},addScript:function(i,e,a){i.id?this.action.invoke({name:"addScript",data:i,success:e,failure:a}):this.getUUID(function(t){i.id=t,this.action.invoke({name:"addScript",data:i,success:e,failure:a})}.bind(this))},deleteScript:function(i,e,a,t){this.action.invoke({name:"removeScript",async:t,parameter:{id:i},success:e,failure:a})},loadView:function(i,e,a,t){this.action.invoke({name:"loadView",async:t,parameter:{id:i},success:e,failure:a})},loadStat:function(i,e,a,t){this.action.invoke({name:"loadStat",async:t,parameter:{id:i},success:e,failure:a})},saveProjection:function(i,e,a){i.isNewProjection?this.addProjection(i,e,a):this.updateProjection(i,e,a)},updateProjection:function(i,e,a){this.action.invoke({name:"updataProjection",data:i,parameter:{id:i.id},success:e,failure:a})},addProjection:function(i,e,a){i.id?this.action.invoke({name:"addProjection",data:i,success:e,failure:a}):this.getUUID(function(t){i.id=t,this.action.invoke({name:"addProjection",data:i,success:e,failure:a})}.bind(this))},deleteProjection:function(i,e,a,t){this.action.invoke({name:"removeProjection",async:t,parameter:{id:i},success:e,failure:a})}});