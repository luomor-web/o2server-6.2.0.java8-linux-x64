MWF.xAction.RestActions.Action.x_query_assemble_designer=new Class({Extends:MWF.xAction.RestActions.Action,getUUID:function(a){var e="";return this.action.invoke({name:"getId",async:!1,parameter:{count:"1"},success:function(t){e=t.data[0].id,a&&a(e)},failure:null}),e},listApplicationSummary:function(a,e,t,i){a?this.action.invoke({name:"listApplicationByCategorySummary",async:i,parameter:{queryCategory:a},success:e,failure:t}):this.action.invoke({name:"listApplicationSummary",async:i,success:e,failure:t})},saveApplication:function(a,e,t){a.id?this.updateApplication(a.id,a,e,t):this.addApplication(a,e,t)},saveView:function(a,e,t){a.isNewView?this.addView(a,e,t):this.updateView(a,e,t)},updateView:function(a,e,t){var i=a.data;a.data=JSON.encode(a.data),a.query=a.application,a.queryName=a.applicationName,this.action.invoke({name:"updateView",data:a,parameter:{id:a.id},success:e,failure:t}),a.data=i},addView:function(a,e,t){var i=a.data;a.data=JSON.encode(a.data),a.query=a.application,a.queryName=a.applicationName,i.id?(this.action.invoke({name:"addView",data:a,success:function(t){a.isNewView=!1,e&&e(t)},failure:t}),a.data=i):this.getUUID(function(n){a.id=n,this.action.invoke({name:"addView",data:a,success:function(t){a.isNewView=!1,e&&e(t)},failure:t}),a.data=i}.bind(this))},saveStat:function(a,e,t){a.isNewView?this.addStat(a,e,t):this.updateStat(a,e,t)},updateStat:function(a,e,t){var i=a.data;a.data=JSON.encode(a.data),a.query=a.application,a.queryName=a.applicationName,this.action.invoke({name:"updateStat",data:a,parameter:{id:a.id},success:e,failure:t}),a.data=i},addStat:function(a,e,t){var i=a.data;a.data=JSON.encode(a.data),a.query=a.application,a.queryName=a.applicationName,i.id?(this.action.invoke({name:"addStat",data:a,success:function(t){a.isNewView=!1,e&&e(t)},failure:t}),a.data=i):this.getUUID(function(n){a.id=n,this.action.invoke({name:"addStat",data:a,success:function(t){a.isNewView=!1,e&&e(t)},failure:t}),a.data=i}.bind(this))},deleteView:function(a,e,t,i){this.action.invoke({name:"removeView",async:i,parameter:{id:a},success:e,failure:t})},deleteStat:function(a,e,t,i){this.action.invoke({name:"removeStat",async:i,parameter:{id:a},success:e,failure:t})},saveTable:function(a,e,t){a.isNewTable?this.addTable(a,e,t):this.updateTable(a,e,t)},updateTable:function(a,e,t){var i=Object.clone(a);i.draftData=JSON.encode(a.draftData),i.query=a.application,i.queryName=a.applicationName,this.action.invoke({name:"updateTable",data:i,parameter:{flag:i.id},success:e,failure:t})},addTable:function(a,e,t){var i=Object.clone(a);i.draftData=JSON.encode(a.draftData),i.query=a.application,i.queryName=a.applicationName,i.id?this.action.invoke({name:"createTable",data:i,success:function(t){a.isNewTable=!1,e&&e(t)},failure:t}):this.getUUID(function(n){i.id=n,this.action.invoke({name:"createTable",data:i,success:function(t){a.isNewTable=!1,e&&e(t)},failure:t})}.bind(this))},saveStatement:function(a,e,t){a.isNewStatement?this.addStatement(a,e,t):this.updateStatement(a,e,t)},updateStatement:function(a,e,t){var i=Object.clone(a);i.query=a.application,i.queryName=a.applicationName,delete i.tableObj,this.action.invoke({name:"updateStatement",data:i,parameter:{flag:i.id},success:e,failure:t})},addStatement:function(a,e,t){var i=Object.clone(a);i.query=a.application,i.queryName=a.applicationName,delete i.tableObj,i.id?this.action.invoke({name:"createStatement",data:i,success:function(t){a.isNewStatement=!1,e&&e(t)},failure:t}):this.getUUID(function(n){i.id=n,this.action.invoke({name:"createStatement",data:i,success:function(t){a.isNewStatement=!1,e&&e(t)},failure:t})}.bind(this))},saveImportModel:function(a,e,t){a.isNewImportModel?this.addImportModel(a,e,t):this.updateImportModel(a,e,t)},updateImportModel:function(a,e,t){var i=Object.clone(a);i.data=JSON.encode(i.data),i.query=a.application,i.queryName=a.applicationName,delete i.tableObj,this.action.invoke({name:"updateImportModel",data:i,parameter:{flag:i.id},success:e,failure:t})},addImportModel:function(a,e,t){var i=Object.clone(a);i.data=JSON.encode(i.data),i.query=a.application,i.queryName=a.applicationName,delete i.tableObj,i.id?this.action.invoke({name:"createImportModel",data:i,success:function(t){a.isNewImportModel=!1,e&&e(t)},failure:t}):this.getUUID(function(n){i.id=n,this.action.invoke({name:"createImportModel",data:i,success:function(t){a.isNewImportModel=!1,e&&e(t)},failure:t})}.bind(this))},saveRow:function(a,e,t,i,n){e.id?this.action.invoke({name:"updateRow",async:n,parameter:{tableFlag:a,id:e.id},data:e,success:t,failure:i}):this.action.invoke({name:"insertRow",async:n,parameter:{tableFlag:a},data:e,success:t,failure:i})}});