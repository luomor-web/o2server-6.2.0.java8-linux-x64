o2.widget=o2.widget||{},o2.widget.DragScroll=new Class({Implements:[Options,Events],options:{friction:5,axis:{x:!0,y:!0}},initialize:function(t,i){var e,n,o;t=this.element=document.id(t),this.content=t.getFirst(),this.setOptions(i);var r=[],s=function(){var i=Date.now();if(o=[t.scrollLeft,t.scrollTop],e){var s=i-e+1;r=[1e3*(o[0]-n[0])/s,1e3*(o[1]-n[1])/s]}n=o,e=i},l=this.fx=new Fx.Scroll(t,{transition:Fx.Transitions.Expo.easeOut});l.set.apply(l,this.limit(t.scrollLeft,t.scrollTop));var a=this;friction=this.options.friction,axis=this.options.axis,a.drag=this.drag=new Drag(t,{style:!1,invert:!0,modifiers:{x:axis.x&&"scrollLeft",y:axis.y&&"scrollTop"},onStart:function(){a.fireEvent("dragStart"),s(),l.cancel()},onDrag:function(){a.fireEvent("drag")},onComplete:function(){s(),e=!1;var t=0,i=0;r[0]&&(t=r[0]),r[1]&&(i=r[1]);var n=a.limit(o[0]+t/friction,o[1]+i/friction);l.start.apply(l,n),a.fireEvent("dragComplete",n)}})},getLimit:function(){var t=[[0,0],[0,0]],i=this.element,e=Object.values(this.content.getStyles("padding-left","border-left-width","margin-left","padding-top","border-top-width","margin-top","width","height")).invoke("toInt"),n=this.content.getComputedSize();return e[7]||(e[7]=n.totalHeight),e[6]||(e[6]=n.totalWidth),t[0][0]=this.sum(e.slice(0,3)),t[0][1]=e[6]+t[0][0]-i.clientWidth,t[1][0]=this.sum(e.slice(3,6)),t[1][1]=e[7]+t[1][0]-i.clientHeight,t},limit:function(t,i){var e=this.getLimit();return[t.limit(e[0][0],e[0][1]),i.limit(e[1][0],e[1][1])]},sum:function(t){for(var i=0,e=t.length;e--;)i+=t[e];return i}});