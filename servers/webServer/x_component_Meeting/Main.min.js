MWF.xApplication.Meeting=MWF.xApplication.Meeting||{},MWF.require("MWF.xDesktop.UserData",null,!1),MWF.xDesktop.requireApp("Meeting","MeetingView",null,!1),MWF.xDesktop.requireApp("Meeting","Common",null,!1),MWF.xDesktop.requireApp("Template","MDomItem",null,!1),MWF.xApplication.Meeting.options.multitask=!1,MWF.xApplication.Meeting.Main=new Class({Extends:MWF.xApplication.Common.Main,Implements:[Options,Events],options:{style:"default",name:"Meeting",icon:"icon.png",width:"1000",height:"600",isResize:!0,isMax:!0,sideBarEnable:!0,settingEnable:!0,title:MWF.xApplication.Meeting.LP.title},onQueryLoad:function(){this.lp=MWF.xApplication.Meeting.LP,this.menuMode="show",this.isManager=MWF.AC.isMeetingAdministrator(),this.actions=MWF.Actions.get("x_meeting_assemble_control"),this.personActions=MWF.Actions.get("x_organization_assemble_express")},loadApplication:function(e){MWF.UD.getDataJson("meetingConfig",function(t){this.meetingConfig=t||{},MWF.UD.getPublicData("meetingConfig",function(t){var i=t||{};for(var n in i.process?this.meetingConfig.process=i.process:this.meetingConfig.process=null,i.weekBegin&&(this.meetingConfig.weekBegin=i.weekBegin),i.meetingViewer&&(this.meetingConfig.meetingViewer=i.meetingViewer),i)"process"!=n&&"weekBegin"!=n&&"meetingViewer"!=n&&(this.meetingConfig[n]=i[n]);this.meetingConfig.disableViewList||(this.meetingConfig.disableViewList=[]),this.createNode(),this.options.isRefresh?this.loadLayout():this.maxSize(function(){this.loadLayout()}.bind(this)),e&&e()}.bind(this))}.bind(this))},createNode:function(){this.content.setStyle("overflow","hidden"),this.node=new Element("div",{styles:{width:"100%",height:"100%",overflow:"hidden"}}).inject(this.content)},loadLayout:function(){this.status&&this.status.action?this.defaultAction=this.status.action:this.meetingConfig.defaultView?this.defaultAction=this.meetingConfig.defaultView:this.defaultAction="toMyMeeting",this.meetingConfig.disableViewList.contains(this.defaultAction)&&(this.defaultAction=""),this.topMenu=new Element("div",{styles:this.css.topMenu}).inject(this.node),this.contentNode=new Element("div.contentNode",{styles:this.inContainer?this.css.contentNode_inContainer:this.css.contentNode}).inject(this.node),this.loadTopMenus(),this.options.sideBarEnable&&this.loadSideBar(),this.setEvent()},setEvent:function(){},loadTopMenus_right:function(){(this.topMenuRight=new Element("div",{styles:this.css.topMenuRight}).inject(this.topMenu),this.createTopMenu_right(this.lp.addMeeting,"icon_newapply","addMeeting"),this.isManager&&this.createTopMenu_right(this.lp.addRoom,"icon_newhuiyishi","addRoom"),this.options.settingEnable)&&this.createTopMenu_right(this.lp.setting,"icon_shezhi","config").setStyle("float","right")},createTopMenu_right:function(e,t,i){var n=new Element("div",{styles:this.css.topMenuNode_right,title:e}).inject(this.topMenuRight),s=new Element("div",{styles:this.css.topMenuIconNode}).inject(n);new Element("div",{styles:this.css.topMenuTextNode,text:e}).inject(n);s.setStyle("background","url(../x_component_Meeting/$Main/default/icon/"+t+".png) no-repeat center center"),n.store("icon",t),n.store("iconNode",s);var o=this;return n.addEvents({mouseover:function(){this.node.setStyles(o.css.topMenuNode_over),this.node.retrieve("iconNode").setStyle("background","url(../x_component_Meeting/$Main/default/icon/"+this.node.retrieve("icon")+"_click.png) no-repeat center center")}.bind({node:n}),mouseout:function(){this.node.setStyles(o.css.topMenuNode_right),this.node.retrieve("iconNode").setStyle("background","url(../x_component_Meeting/$Main/default/icon/"+this.node.retrieve("icon")+".png) no-repeat center center")}.bind({node:n}),click:function(){this.node.setStyles(o.css.topMenuNode_down),this.node.retrieve("iconNode").setStyle("background","url(../x_component_Meeting/$Main/default/icon/"+this.node.retrieve("icon")+"_click.png) no-repeat center center"),o[i]&&o[i].apply(o)}.bind({node:n})}),n},loadTopMenus:function(){this.createTopMenu(this.lp.myMeeting,"icon_huiyi","toMyMeeting"),this.createTopMenu(this.lp.month,"icon_yue","toMonth"),this.createTopMenu(this.lp.week,"icon_zhou","toWeek"),this.createTopMenu(this.lp.day,"icon_ri","toDay"),this.createTopMenu(this.lp.list,"icon_liebiao","toList"),this.createTopMenu(this.lp.room,"icon_huiyishi","toRoom"),this.loadTopMenus_right()},isViewAvailable:function(e){return!this.meetingConfig.disableViewList.contains(e)},createTopMenu:function(e,t,i){if(!this.meetingConfig.disableViewList.contains(i)){this.meetingConfig[i+"ViewName"]&&(e=this.meetingConfig[i+"ViewName"]);var n=new Element("div",{styles:this.css.topMenuNode}).inject(this.topMenu),s=new Element("div",{styles:this.css.topMenuIconNode}).inject(n);s.setStyle("background","url(../x_component_Meeting/$Main/default/icon/"+t+".png) no-repeat center center");new Element("div",{styles:this.css.topMenuTextNode,text:e}).inject(n);n.store("icon",t),n.store("iconNode",s),n.store("action",i);var o=this;return n.addEvents({mouseover:function(){this.node!=o.currentTopMenuNode&&(this.node.setStyles(o.css.topMenuNode_over),this.node.retrieve("iconNode").setStyle("background","url(../x_component_Meeting/$Main/default/icon/"+this.node.retrieve("icon")+"_click.png) no-repeat center center"))}.bind({node:n}),mouseout:function(){this.node!=o.currentTopMenuNode&&(this.node.setStyles(o.css.topMenuNode),this.node.retrieve("iconNode").setStyle("background","url(../x_component_Meeting/$Main/default/icon/"+this.node.retrieve("icon")+".png) no-repeat center center"))}.bind({node:n}),click:function(){this.node!=o.currentTopMenuNode&&(this.node.setStyles(o.css.topMenuNode_down),this.node.retrieve("iconNode").setStyle("background","url(../x_component_Meeting/$Main/default/icon/"+this.node.retrieve("icon")+"_click.png) no-repeat center center")),o.currentTopMenuNode&&this.node!=o.currentTopMenuNode&&(o.currentTopMenuNode.setStyles(o.css.topMenuNode),o.currentTopMenuNode.retrieve("iconNode").setStyle("background","url(../x_component_Meeting/$Main/default/icon/"+o.currentTopMenuNode.retrieve("icon")+".png) no-repeat center center")),o.currentTopMenuNode=this.node,o[i]&&o[i].apply(o)}.bind({node:n})}),this.defaultAction?this.defaultAction==i&&n.click():this.loaded||(n.click(),this.loaded=!0),n}},hideMenu:function(){},showMenu:function(){"show"!=this.menuMode&&(this.topMenu.set("tween",{duration:100,transition:"bounce:out"}),this.topMenu.tween("top","-50px","0px"),this.menuMode="show",this.topMenuPoint&&this.topMenuPoint.setStyle("display","none"),this.bottomMenuPoint&&this.bottomMenuPoint.setStyle("display","none"))},hideCurrentView:function(){this.currentView&&(this.currentView.hide(),this.currentView=null)},toMyMeeting:function(){this.contentNode.setStyles(this.css.contentNode),this.currentView&&(this.currentView.destroy(),this.currentView=null),this.myMeetingView=null,this.getMyMeetingView(function(){this.myMeetingView.show(),this.currentView=this.myMeetingView}.bind(this))},getMyMeetingView:function(e){this.myMeetingView?e&&e():MWF.xDesktop.requireApp("Meeting","MeetingView",function(){var t;this.status&&this.status.options&&(t=this.status.options),this.myMeetingView=new MWF.xApplication.Meeting.MeetingView(this.contentNode,this,t),t&&(this.status.options=null),e&&e()}.bind(this))},toList:function(){this.contentNode.setStyle("background","#EEE"),this.currentView&&(this.currentView.destroy(),this.currentView=null),this.listView=null,this.getListView(function(){this.listView.show(),this.currentView=this.listView}.bind(this))},getListView:function(e){this.listView?e&&e():MWF.xDesktop.requireApp("Meeting","ListView",function(){var t;this.status&&this.status.options&&(t=this.status.options),this.listView=new MWF.xApplication.Meeting.ListView(this.contentNode,this,t),t&&(this.status.options=null),e&&e()}.bind(this))},toMonth:function(){this.contentNode.setStyle("background","#EEE"),this.currentView&&(this.currentView.destroy(),this.currentView=null),this.monthView=null,this.getMonthView(function(){this.monthView.show(),this.currentView=this.monthView}.bind(this))},getMonthView:function(e){this.monthView?e&&e():MWF.xDesktop.requireApp("Meeting","MonthView",function(){var t;this.status&&this.status.options&&(t=this.status.options),this.monthView=new MWF.xApplication.Meeting.MonthView(this.contentNode,this,t),t&&(this.status.options=null),e&&e()}.bind(this))},toWeek:function(){this.contentNode.setStyle("background","#EEE"),this.currentView&&(this.currentView.destroy(),this.currentView=null),this.weekView=null,this.getWeekView(function(){this.weekView.show(),this.currentView=this.weekView}.bind(this))},getWeekView:function(e){this.weekView?e&&e():MWF.xDesktop.requireApp("Meeting","WeekView",function(){var t;this.status&&this.status.options&&(t=this.status.options),this.weekView=new MWF.xApplication.Meeting.WeekView(this.contentNode,this,t),t&&(this.status.options=null),e&&e()}.bind(this))},toDay:function(e){this.contentNode.setStyle("background","#EEE"),this.currentView&&(this.currentView.destroy(),this.currentView=null),this.dayView=null,this.getDayView(function(){this.dayView.show(),this.currentView=this.dayView}.bind(this),e)},getDayView:function(e,t){this.dayView?(this.dayView.toDay(t),e&&e()):MWF.xDesktop.requireApp("Meeting","DayView",function(){var i;this.status&&this.status.options&&(i=this.status.options),this.dayView=new MWF.xApplication.Meeting.DayView(this.contentNode,this,i||{date:t}),this.status&&(this.status.options=null),e&&e()}.bind(this))},toRoom:function(){this.contentNode.setStyle("background","#EEE"),this.currentView&&(this.currentView.destroy(),this.currentView=null),this.roomView=null,this.getRoomView(function(){this.roomView.show(),this.currentView=this.roomView}.bind(this))},getRoomView:function(e){this.roomView?e&&e():MWF.xDesktop.requireApp("Meeting","RoomView",function(){var t;this.status&&this.status.options&&(t=this.status.options),this.roomView=new MWF.xApplication.Meeting.RoomView(this.contentNode,this,t),t&&(this.status.options=null),e&&e()}.bind(this))},addMeeting:function(e,t,i,n,s,o){MWF.UD.getPublicData("meetingConfig",function(a){var c=a?a.process:null;if(c)this.loadMeetingProcess(c,s,o);else{var h=new MWF.xApplication.Meeting.MeetingForm(this,{},{date:e,hour:t,minute:i,room:n},{app:this});h.view=this,h.create()}}.bind(this))},loadMeetingProcess:function(e,t,i){this.getProcess(e,function(e){MWF.xDesktop.requireApp("process.TaskCenter","ProcessStarter",function(){new MWF.xApplication.process.TaskCenter.ProcessStarter(e,this,{latest:i,workData:t,onStarted:function(e,t,i){this.afterStartProcess(e,t,i)}.bind(this)}).load()}.bind(this))}.bind(this))},afterStartProcess:function(e,t,i){var n=[],s=[];if(e.each(function(e){-1!==e.currentTaskIndex&&s.push(e.taskList[e.currentTaskIndex].work),n.push(this.getStartWorkInforObj(e))}.bind(this)),1===s.length){var o={workId:s[0],appId:s[0]};this.desktop.openApplication(null,"process.Work",o),this.createStartWorkResault(n,t,i,!1)}else this.createStartWorkResault(n,t,i,!0)},createStartWorkResault:function(e,t,i,n){var s="";e.each(function(e){var t=[];e.users.each((function(e){t.push(MWF.name.cn(e))})),s+="<div><b>"+this.lp.nextActivity+'<font style="color: #ea621f">'+e.activity+"</font>, "+this.lp.nextUser+'<font style="color: #ea621f">'+t.join(", ")+"</font></b>",e.currentTask&&n?s+='&nbsp;&nbsp;&nbsp;&nbsp;<span value="'+e.currentTask+'">'+this.lp.deal+"</span></div>":s+="</div>"}.bind(this));var o=e[0].title||t,a={subject:this.lp.processStarted,content:"<div>"+this.lp.processStartedMessage+"“["+i+"]"+o+"”</div>"+s},c=layout.desktop.message.addTooltip(a),h=layout.desktop.message.addMessage(a);this.setStartWorkResaultAction(c),this.setStartWorkResaultAction(h)},getStartWorkInforObj:function(e){var t="",i=[],n="";return e.taskList.each(function(s,o){t=s.title,i.push(s.person+"("+s.department+")"),e.currentTaskIndex===o&&(n=s.id)}.bind(this)),{activity:e.fromActivityName,users:i,currentTask:n,title:t}},setStartWorkResaultAction:function(e){var t=e.node.getElements("span");t.setStyles(this.css.dealStartedWorkAction);var i=this;t.addEvent("click",(function(e){var t={taskId:this.get("value"),appId:this.get("value")};i.desktop.openApplication(e,"process.Work",t)}))},getProcess:function(e,t){t&&t(e)},config:function(){new MWF.xApplication.Meeting.Config(this,this.meetingConfig)},addRoom:function(){var e=new MWF.xApplication.Meeting.RoomForm(this,{},{},{app:this});e.view=this,e.create()},recordStatus:function(){return{action:this.currentTopMenuNode?this.currentTopMenuNode.retrieve("action"):"toMyMeeting",options:this.currentView&&this.currentView.recordStatus?this.currentView.recordStatus():null}},reload:function(){this.currentView&&this.currentView.reload?this.currentView.reload():this.refresh()},loadSideBar:function(){this.sideBar=new MWF.xApplication.Meeting.SideBar(this.node,this),this.sideBar.show()},isMeetingViewer:function(e){if("boolean"!=typeOf(this._isMeetingViewer)){var t=this.meetingConfig.meetingViewer;if(!t||!t.length)return this._isMeetingViewer=!1,void(e&&e(this._isMeetingViewer));if(this.isManager)return this._isMeetingViewer=!0,void(e&&e(this._isMeetingViewer));"array"!=typeOf(t)&&(t=[t]),MWF.Actions.get("x_organization_assemble_personal").getPerson(function(i){var n=i.data.distinguishedName;if(t.contains(n))return this._isMeetingViewer=!0,void(e&&e(this._isMeetingViewer));for(var s=0;s<i.data.woGroupList.length;s++)if(t.contains(i.data.woGroupList[s].distinguishedName))return this._isMeetingViewer=!0,void(e&&e(this._isMeetingViewer));this.personActions.listUnitSupNestedWithPersonValue({personList:[n]},function(i){for(var n=0;n<i.data.unitList.length;n++)if(t.contains(i.data.unitList[n]))return this._isMeetingViewer=!0,void(e&&e(this._isMeetingViewer));this._isMeetingViewer=!1,e&&e(this._isMeetingViewer)}.bind(this),null,!1)}.bind(this),null,!1)}else e&&e(this._isMeetingViewer)}}),MWF.xApplication.Meeting.Config=new Class({Implements:[Events],initialize:function(e){this.app=e,this.css=this.app.css,this.lp=this.app.lp,this.configData=this.app.meetingConfig||{},this.process=null,MWF.UD.getPublicData("meetingConfig",function(e){var t=e||{};for(var i in t.process?this.configData.process=t.process:this.configData.process=null,t.weekBegin&&(this.configData.weekBegin=t.weekBegin),t.meetingViewer&&(this.configData.meetingViewer=t.meetingViewer),t.mobileCreateEnable&&(this.configData.mobileCreateEnable=t.mobileCreateEnable),t)"process"!=i&&"weekBegin"!=i&&"meetingViewer"!=i&&"mobileCreateEnable"!=i&&(this.configData[i]=t[i]);this.load()}.bind(this))},load:function(){this.node=new Element("div",{styles:this.css.configNode}).inject(this.app.node),this.contentNode=new Element("div",{styles:this.css.configContentNode}).inject(this.node);var e="font-size:14px;color:#666;heigh:16px;margin-top:6px;margin-left:10px;",t="float:right; width:120px; border:1px solid #ccc",i=this.configData,n=(this.lp.config,"<div class='configTitle'>"+this.lp.config.default+"</div><div>");i.disableViewList.contains("toMyMeeting")||(n+="   <div style='"+e+"'><input type='radio' name='configSelectDefaultView' "+(i.defaultView&&"toMyMeeting"!=i.defaultView?"":"checked")+" value='toMyMeeting'>"+(i.toMyMeetingViewName||this.lp.myMeeting)+"   </div>"),i.disableViewList.contains("toMonth")||(n+="   <div style='"+e+"'><input type='radio' name='configSelectDefaultView' "+("toMonth"==i.defaultView?"checked":"")+" value='toMonth'>"+(i.toMonthViewName||this.lp.month)+"   </div>"),i.disableViewList.contains("toWeek")||(n+="   <div style='"+e+"'><input type='radio' name='configSelectDefaultView' "+("toWeek"==i.defaultView?"checked":"")+" value='toWeek'>"+(i.toWeekViewName||this.lp.week)+"   </div>"),i.disableViewList.contains("toDay")||(n+="   <div style='"+e+"'><input type='radio' name='configSelectDefaultView' "+("toDay"==i.defaultView?"checked":"")+" value='toDay'>"+(i.toDayViewName||this.lp.day)+"   </div>"),i.disableViewList.contains("toList")||(n+="   <div style='"+e+"'><input type='radio' name='configSelectDefaultView' "+("toList"==i.defaultView?"checked":"")+" value='toList'>"+(i.toListViewName||this.lp.list)+"   </div>"),i.disableViewList.contains("toRoom")||(n+="   <div style='"+e+"'><input type='radio' name='configSelectDefaultView' "+("toRoom"==i.defaultView?"checked":"")+" value='toRoom'>"+(i.toRoomViewName||this.lp.room)+"   </div>"),n+="</div>",MWF.AC.isMeetingAdministrator()&&(i.disableViewList=i.disableViewList||[],n+="<div class='line'></div><div class='configTitle'>"+this.lp.config.viewSetting+"</div><div>   <div style='"+e+"'><input type='checkbox' name='configAvailableView' "+(i.disableViewList.contains("toMyMeeting")?"":"checked")+" value='toMyMeeting'>"+this.lp.myMeeting+"<input type='text' name='toMyMeetingViewName' value='"+(i.toMyMeetingViewName||"")+"' style='"+t+"' placeholder='"+this.lp.config.viewCustomName+"' >   </div>   <div style='"+e+"'><input type='checkbox' name='configAvailableView' "+(i.disableViewList.contains("toMonth")?"":"checked")+" value='toMonth'>"+this.lp.month+"<input type='text' name='toMonthViewName' value='"+(i.toMonthViewName||"")+"' style='"+t+"' placeholder='"+this.lp.config.viewCustomName+"' >   </div>   <div style='"+e+"'><input type='checkbox' name='configAvailableView' "+(i.disableViewList.contains("toWeek")?"":"checked")+" value='toWeek'>"+this.lp.week+"<input type='text' name='toWeekViewName' value='"+(i.toWeekViewName||"")+"' style='"+t+"' placeholder='"+this.lp.config.viewCustomName+"' >   </div>   <div style='"+e+"'><input type='checkbox' name='configAvailableView' "+(i.disableViewList.contains("toDay")?"":"checked")+" value='toDay'>"+this.lp.day+"<input type='text' name='toDayViewName' value='"+(i.toDayViewName||"")+"' style='"+t+"' placeholder='"+this.lp.config.viewCustomName+"' >   </div>   <div style='"+e+"'><input type='checkbox' name='configAvailableView' "+(i.disableViewList.contains("toList")?"":"checked")+" value='toList'>"+this.lp.list+"<input type='text' name='toListViewName' value='"+(i.toListViewName||"")+"' style='"+t+"' placeholder='"+this.lp.config.viewCustomName+"' >   </div>   <div style='"+e+"'><input type='checkbox' name='configAvailableView' "+(i.disableViewList.contains("toRoom")?"":"checked")+" value='toRoom'>"+this.lp.room+"<input type='text' name='toRoomViewName' value='"+(i.toRoomViewName||"")+"' style='"+t+"' placeholder='"+this.lp.config.viewCustomName+"' >   </div></div><div class='line'></div><div class='configTitle'>"+this.lp.config.weekBegin+"</div><div><select name='configSelectWeekBeign'><option value='0' "+("0"==i.weekBegin?"selected":"")+">"+this.lp.weeks.Sun+"</option><option value='1' "+("1"==i.weekBegin?"selected":"")+">"+this.lp.weeks.Mon+"</option></select></div><div class='line'></div><div class='configTitle'>"+this.lp.config.applyProcess+"</div><div item='processArea'></div><div class='configTitle' title='"+this.lp.config.meetingViewerTitle+"'>"+this.lp.config.meetingViewer+"</div><div item='meetingViewerNode'></div><div class='configTitle'>"+this.lp.config.mobileCreateEnable+"</div><div item='mobileCreateEnable'></div>"),this.contentNode.set("html",n),this.contentNode.getElements("div.line").setStyles(this.css.configContentLine),this.contentNode.getElements("div.configTitle").setStyles(this.css.configTitleDiv),MWF.AC.isMeetingAdministrator()&&(this.processNode=this.contentNode.getElement("[item='processArea']"),this.processNode.setStyles(this.css.configProcessNode),this.createApplicationSelect(),this.meetingViewerNode=this.contentNode.getElement("[item='meetingViewerNode']"),this.meetingViewer=new MDomItem(this.meetingViewerNode,{name:"meetingViewer",type:"org",orgType:["person","unit","group"],count:0,style:this.css.configMeetingViewerNode,value:i.meetingViewer||[]},null,this.app),this.meetingViewer.load(),this.mobileCreateEnableNode=this.contentNode.getElement("[item='mobileCreateEnable']"),this.mobileCreateEnable=new MDomItem(this.mobileCreateEnableNode,{name:"mobileCreateEnable",type:"select",selectValue:["true","false"],selectText:this.lp.config.mobileCreateEnableOptions,value:i.mobileCreateEnable||"true"},null,this.app),this.mobileCreateEnable.load()),this.actionNode=new Element("div",{styles:this.css.configActionNode}).inject(this.node),this.cancelNode=new Element("div",{styles:this.css.configActionCancelNode,text:this.app.lp.cancel}).inject(this.actionNode),this.saveNode=new Element("div",{styles:this.css.configActionSaveNode,text:this.app.lp.save}).inject(this.actionNode),this.cancelNode.addEvent("click",this.hide.bind(this)),this.saveNode.addEvent("click",this.save.bind(this)),this.node.addEvent("mousedown",function(e){e.stopPropagation()}.bind(this)),this.setSize(),this.show()},setSize:function(){var e=this.node.getSize().y,t=this.app.content.getSize().y;e>t-50&&this.node.setStyle("height",t-50)},createApplicationSelect:function(){this.configData.process&&MWF.require("MWF.widget.O2Identity",function(){new MWF.widget.O2Process(this.configData.process,this.processNode)}.bind(this)),this.processNode.addEvent("click",function(){MWF.xDesktop.requireApp("Selector","package",function(){var e={type:"Process",values:[this.process||this.configData.process],count:1,onComplete:function(e){this.processNode.empty(),this.process=null,this.configData.process=null,e.length&&MWF.require("MWF.widget.O2Identity",function(){new MWF.widget.O2Process(e[0].data,this.processNode);this.process={name:e[0].data.name,id:e[0].data.id,application:e[0].data.application,applicationName:e[0].data.applicationName,alias:e[0].data.alias},this.configData.process=this.process}.bind(this))}.bind(this)};new MWF.O2Selector(this.app.content,e)}.bind(this))}.bind(this))},save:function(){for(var e="toMyMeeting",t=this.contentNode.getElements("input[name='configSelectDefaultView']"),i=0;i<t.length;i++)if(t[i].checked){e=t[i].get("value");break}if(MWF.UD.putData("meetingConfig",{defaultView:e},null,!1),MWF.AC.isMeetingAdministrator()){var n=[],s=this.contentNode.getElements("input[name='configAvailableView']");for(i=0;i<s.length;i++)s[i].checked||n.push(s[i].get("value"));var o=this.contentNode.getElement("select[name='configSelectWeekBeign']"),a="0";o&&(a=o.options[o.selectedIndex].get("value"));var c=null;this.meetingViewer&&(c=this.meetingViewer.getValue()),MWF.UD.putPublicData("meetingConfig",{process:this.process||this.configData.process,weekBegin:a,meetingViewer:c,mobileCreateEnable:this.mobileCreateEnable.getValue(),disableViewList:n,toMyMeetingViewName:this.contentNode.getElement("input[name='toMyMeetingViewName']").get("value"),toMonthViewName:this.contentNode.getElement("input[name='toMonthViewName']").get("value"),toWeekViewName:this.contentNode.getElement("input[name='toWeekViewName']").get("value"),toDayViewName:this.contentNode.getElement("input[name='toDayViewName']").get("value"),toListViewName:this.contentNode.getElement("input[name='toListViewName']").get("value"),toRoomViewName:this.contentNode.getElement("input[name='toRoomViewName']").get("value")},null,!1)}this.app.notice(this.app.lp.config_saveSuccess,"success"),this.hide()},show:function(){this.node.setStyles(this.css.configNode),new Fx.Morph(this.node,{duration:"500",transition:Fx.Transitions.Expo.easeOut}).start({opacity:1}).chain(function(){this.hideFun=this.hide.bind(this),this.app.node.addEvent("mousedown",this.hideFun)}.bind(this))},hide:function(){this.node.destroy(),this.app.node.removeEvent("mousedown",this.hideFun),MWF.release(this)}});