MWF.xDesktop.requireApp("process.Xform","$Module",null,!1),MWF.xApplication.process.Xform.Tree=MWF.APPTree=new Class({Extends:MWF.APP$Module,options:{moduleEvents:["load","queryLoad","postLoad","beforeLoadTree","afterLoadTree","beforeLoadTreeNode","afterLoadTreeNode","expand","collapse","beforeSelect","afterSelect"]},_loadUserInterface:function(){this.node.empty(),MWF.require("MWF.widget.Tree",function(){var e={style:"form"};this.json.events&&"object"===typeOf(this.json.events)&&[{beforeLoadTree:"onQueryLoad"},{afterLoadTree:"onPostLoad"},{beforeLoadTreeNode:"onBeforeLoadTreeNode"},{afterLoadTreeNode:"onAfterLoadTreeNode"},{expand:"onPostExpand"},{collapse:"onPostCollapse"},{beforeSelect:"onBeforeSelect"},{afterSelect:"onAfterSelect"}].each(function(t){var o=Object.keys(t)[0],s=t[o];this.json.events[o]&&this.json.events[o].code&&(e[s]=function(e){return this.form.Macro.fire(this.json.events[o].code,e||this)}.bind(this))}.bind(this)),this.tree=new MWF.widget.Tree(this.node,e),this.tree.form=this.form,this._setTreeWidgetStyles();var t=this.json.data;"script"==this.json.dataType&&(t=this.form.Macro.exec(this.json.dataScript?this.json.dataScript.code:"",this)),this.tree.load(t)}.bind(this))},_setTreeWidgetStyles:function(){this.tree.css.areaNode=this.json.areaNodeStyle,this.tree.css.treeItemNode=this.json.treeItemNodeStyle,this.tree.css.textDivNode=this.json.textDivNodeStyle,this.tree.css.textDivNodeSelected=this.json.textDivNodeSelectedStyle}});